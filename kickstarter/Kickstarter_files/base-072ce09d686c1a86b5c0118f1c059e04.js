/*
 New BSD License <http://creativecommons.org/licenses/BSD/>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 @author James Padolsey <https://gist.github.com/527683>
 Public Domain
 @author Benjamin Arthur Lupton <contact@balupton.com>
 New BSD License <http://creativecommons.org/licenses/BSD/>
 New BSD License <http://creativecommons.org/licenses/BSD/>
*/
instrument_function(function(){window.benchmark&&window.performance.mark("begin_base.js_eval")})(this);instrument_function(function(a){this.root=window;this.packages=a;this.requires=function(){}})(this);
instrument_function(function(a){(function(){var d={},c;c=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}}(navigator.userAgent);if(c.browser)d[c.browser]=!0,d.version=c.version;if(d.chrome)d.webkit=!0;else if(d.webkit)d.safari=!0;a.browser=d;if(typeof jQuery==="function")jQuery.browser=
d})()})(this);
(function(a,d){a.rails!==d&&a.error("jquery-ujs has already been loaded!");var c,b=a(document);a.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",
requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(c){var b=a('meta[name="csrf-token"]').attr("content");b&&c.setRequestHeader("X-CSRF-Token",b)},fire:function(c,b,d){b=a.Event(b);c.trigger(b,d);return b.result!==!1},confirm:function(a){return confirm(a)},ajax:function(c){return a.ajax(c)},href:function(a){return a.attr("href")},handleRemote:function(b){var f,
g,h,i,k,l;if(c.fire(b,"ajax:before")){g=b.data("cross-domain");i=g===d?null:g;k=b.data("with-credentials")||null;l=b.data("type")||a.ajaxSettings&&a.ajaxSettings.dataType;if(b.is("form")){f=b.attr("method");g=b.attr("action");h=b.serializeArray();var p=b.data("ujs:submit-button");p&&(h.push(p),b.data("ujs:submit-button",null))}else b.is(c.inputChangeSelector)?(f=b.data("method"),g=b.data("url"),h=b.serialize(),b.data("params")&&(h=h+"&"+b.data("params"))):b.is(c.buttonClickSelector)?(f=b.data("method")||
"get",g=b.data("url"),h=b.serialize(),b.data("params")&&(h=h+"&"+b.data("params"))):(f=b.data("method"),g=c.href(b),h=b.data("params")||null);f={type:f||"GET",data:h,dataType:l,beforeSend:function(a,f){f.dataType===d&&a.setRequestHeader("accept","*/*;q=0.5, "+f.accepts.script);return c.fire(b,"ajax:beforeSend",[a,f])},success:function(a,c,f){b.trigger("ajax:success",[a,c,f])},complete:function(a,c){b.trigger("ajax:complete",[a,c])},error:function(a,c,f){b.trigger("ajax:error",[a,c,f])},crossDomain:i};
if(k)f.xhrFields={withCredentials:k};if(g)f.url=g;g=c.ajax(f);b.trigger("ajax:send",g);return g}else return!1},handleMethod:function(b){var f=c.href(b),g=b.data("method");b=b.attr("target");var h=a("meta[name=csrf-token]").attr("content"),i=a("meta[name=csrf-param]").attr("content");f=a('<form method="post" action="'+f+'"></form>');g='<input name="_method" value="'+g+'" type="hidden" />';i!==d&&h!==d&&(g+='<input name="'+i+'" value="'+h+'" type="hidden" />');b&&f.attr("target",b);f.hide().append(g).appendTo("body");
f.submit()},disableFormElements:function(b){b.find(c.disableSelector).each(function(){var c=a(this),b=c.is("button")?"html":"val";c.data("ujs:enable-with",c[b]());c[b](c.data("disable-with"));c.prop("disabled",!0)})},enableFormElements:function(b){b.find(c.enableSelector).each(function(){var c=a(this),b=c.is("button")?"html":"val";if(c.data("ujs:enable-with"))c[b](c.data("ujs:enable-with"));c.prop("disabled",!1)})},allowAction:function(a){var b=a.data("confirm"),d=!1,h;if(!b)return!0;c.fire(a,"confirm")&&
(d=c.confirm(b),h=c.fire(a,"confirm:complete",[d]));return d&&h},blankInputs:function(c,b,d){var h=a(),i,k,l=c.find(b||"input,textarea");l.each(function(){i=a(this);k=i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val();if(!k===!d){if(i.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;h=h.add(i)}});return h.length?h:!1},nonBlankInputs:function(a,b){return c.blankInputs(a,b,!0)},stopEverything:function(c){a(c.target).trigger("ujs:everythingStopped");
c.stopImmediatePropagation();return!1},disableElement:function(a){a.data("ujs:enable-with",a.html());a.html(a.data("disable-with"));a.bind("click.railsDisable",function(a){return c.stopEverything(a)})},enableElement:function(a){a.data("ujs:enable-with")!==d&&(a.html(a.data("ujs:enable-with")),a.removeData("ujs:enable-with"));a.unbind("click.railsDisable")}};c.fire(b,"rails:attachBindings")&&(a.ajaxPrefilter(function(a,b,d){a.crossDomain||c.CSRFProtection(d)}),b.delegate(c.linkDisableSelector,"ajax:complete",
function(){c.enableElement(a(this))}),b.delegate(c.linkClickSelector,"click.rails",function(b){var f=a(this),g=f.data("method"),h=f.data("params");if(!c.allowAction(f))return c.stopEverything(b);f.is(c.linkDisableSelector)&&c.disableElement(f);if(f.data("remote")!==d){if((b.metaKey||b.ctrlKey)&&(!g||g==="GET")&&!h)return!0;b=c.handleRemote(f);b===!1?c.enableElement(f):b.error(function(){c.enableElement(f)});return!1}else if(f.data("method"))return c.handleMethod(f),!1}),b.delegate(c.buttonClickSelector,
"click.rails",function(b){var f=a(this);if(!c.allowAction(f))return c.stopEverything(b);c.handleRemote(f);return!1}),b.delegate(c.inputChangeSelector,"change.rails",function(b){var f=a(this);if(!c.allowAction(f))return c.stopEverything(b);c.handleRemote(f);return!1}),b.delegate(c.formSubmitSelector,"submit.rails",function(b){var f=a(this),g=f.data("remote")!==d,h=c.blankInputs(f,c.requiredInputSelector),i=c.nonBlankInputs(f,c.fileInputSelector);if(!c.allowAction(f))return c.stopEverything(b);if(h&&
f.attr("novalidate")==d&&c.fire(f,"ajax:aborted:required",[h]))return c.stopEverything(b);if(g){if(i)return setTimeout(function(){c.disableFormElements(f)},13),(b=c.fire(f,"ajax:aborted:file",[i]))||setTimeout(function(){c.enableFormElements(f)},13),b;c.handleRemote(f);return!1}else setTimeout(function(){c.disableFormElements(f)},13)}),b.delegate(c.formInputClickSelector,"click.rails",function(b){var f=a(this);if(!c.allowAction(f))return c.stopEverything(b);b=(b=f.attr("name"))?{name:b,value:f.val()}:
null;f.closest("form").data("ujs:submit-button",b)}),b.delegate(c.formSubmitSelector,"ajax:beforeSend.rails",function(b){this==b.target&&c.disableFormElements(a(this))}),b.delegate(c.formSubmitSelector,"ajax:complete.rails",function(b){this==b.target&&c.enableFormElements(a(this))}),a(function(){var c=a("meta[name=csrf-token]").attr("content"),b=a("meta[name=csrf-param]").attr("content");a('form input[name="'+b+'"]').val(c)}))})(jQuery);
(function(){var a=this,d=a._,c={},b=Array.prototype,e=Object.prototype,f=b.push,g=b.slice,h=b.concat,i=e.toString,k=e.hasOwnProperty,l=b.forEach,p=b.map,j=b.reduce,q=b.reduceRight,t=b.filter,n=b.every,s=b.some,o=b.indexOf,u=b.lastIndexOf;e=Array.isArray;var v=Object.keys,y=Function.prototype.bind,m=function(a){if(a instanceof m)return a;if(!(this instanceof m))return new m(a);this._wrapped=a};if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=m;
exports._=m}else a._=m;m.VERSION="1.5.2";var r=m.each=m.forEach=function(a,b,e){if(a!=null)if(l&&a.forEach===l)a.forEach(b,e);else if(a.length===+a.length)for(var f=0,d=a.length;f<d;f++){if(b.call(e,a[f],f,a)===c)break}else{var g=m.keys(a);f=0;for(d=g.length;f<d;f++)if(b.call(e,a[g[f]],g[f],a)===c)break}};m.map=m.collect=function(a,c,b){var e=[];if(a==null)return e;if(p&&a.map===p)return a.map(c,b);r(a,function(a,f,d){e.push(c.call(b,a,f,d))});return e};m.reduce=m.foldl=m.inject=function(a,c,b,e){var f=
arguments.length>2;a==null&&(a=[]);if(j&&a.reduce===j)return e&&(c=m.bind(c,e)),f?a.reduce(c,b):a.reduce(c);r(a,function(a,d,g){f?b=c.call(e,b,a,d,g):(b=a,f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return b};m.reduceRight=m.foldr=function(a,c,b,e){var f=arguments.length>2;a==null&&(a=[]);if(q&&a.reduceRight===q)return e&&(c=m.bind(c,e)),f?a.reduceRight(c,b):a.reduceRight(c);var d=a.length;if(d!==+d){var g=m.keys(a);d=g.length}r(a,function(r,i,h){i=g?g[--d]:--d;
f?b=c.call(e,b,a[i],i,h):(b=a[i],f=!0)});if(!f)throw new TypeError("Reduce of empty array with no initial value");return b};m.find=m.detect=function(a,c,b){var e;A(a,function(a,f,d){if(c.call(b,a,f,d))return e=a,!0});return e};m.filter=m.select=function(a,c,b){var e=[];if(a==null)return e;if(t&&a.filter===t)return a.filter(c,b);r(a,function(a,f,d){c.call(b,a,f,d)&&e.push(a)});return e};m.reject=function(a,c,b){return m.filter(a,function(a,e,f){return!c.call(b,a,e,f)},b)};m.every=m.all=function(a,
b,e){b||(b=m.identity);var f=!0;if(a==null)return f;if(n&&a.every===n)return a.every(b,e);r(a,function(a,d,g){if(!(f=f&&b.call(e,a,d,g)))return c});return!!f};var A=m.some=m.any=function(a,b,e){b||(b=m.identity);var f=!1;if(a==null)return f;if(s&&a.some===s)return a.some(b,e);r(a,function(a,d,g){if(f||(f=b.call(e,a,d,g)))return c});return!!f};m.contains=m.include=function(a,b){if(a==null)return!1;if(o&&a.indexOf===o)return a.indexOf(b)!=-1;return A(a,function(a){return a===b})};m.invoke=function(a,
b){var c=g.call(arguments,2),e=m.isFunction(b);return m.map(a,function(a){return(e?b:a[b]).apply(a,c)})};m.pluck=function(a,b){return m.map(a,function(a){return a[b]})};m.where=function(a,b,c){if(m.isEmpty(b))return c?void 0:[];return m[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})};m.findWhere=function(a,b){return m.where(a,b,!0)};m.max=function(a,b,c){if(!b&&m.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&m.isEmpty(a))return-Infinity;
var e={computed:-Infinity,value:-Infinity};r(a,function(a,f,d){f=b?b.call(c,a,f,d):a;f>e.computed&&(e={value:a,computed:f})});return e.value};m.min=function(a,b,c){if(!b&&m.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&m.isEmpty(a))return Infinity;var e={computed:Infinity,value:Infinity};r(a,function(a,f,d){f=b?b.call(c,a,f,d):a;f<e.computed&&(e={value:a,computed:f})});return e.value};m.shuffle=function(a){var b,c=0,e=[];r(a,function(a){b=m.random(c++);e[c-1]=e[b];
e[b]=a});return e};m.sample=function(a,b,c){if(arguments.length<2||c)return a[m.random(a.length-1)];return m.shuffle(a).slice(0,Math.max(0,b))};var D=function(a){return m.isFunction(a)?a:function(b){return b[a]}};m.sortBy=function(a,b,c){var e=D(b);return m.pluck(m.map(a,function(a,b,f){return{value:a,index:b,criteria:e.call(c,a,b,f)}}).sort(function(a,b){var c=a.criteria,e=b.criteria;if(c!==e){if(c>e||c===void 0)return 1;if(c<e||e===void 0)return-1}return a.index-b.index}),"value")};var Q=function(a){return function(b,
c,e){var f={},d=c==null?m.identity:D(c);r(b,function(c,g){var r=d.call(e,c,g,b);a(f,r,c)});return f}};m.groupBy=Q(function(a,b,c){(m.has(a,b)?a[b]:a[b]=[]).push(c)});m.indexBy=Q(function(a,b,c){a[b]=c});m.countBy=Q(function(a,b){m.has(a,b)?a[b]++:a[b]=1});m.sortedIndex=function(a,b,c,e){c=c==null?m.identity:D(c);b=c.call(e,b);for(var f=0,d=a.length;f<d;){var g=f+d>>>1;c.call(e,a[g])<b?f=g+1:d=g}return f};m.toArray=function(a){if(!a)return[];if(m.isArray(a))return g.call(a);if(a.length===+a.length)return m.map(a,
m.identity);return m.values(a)};m.size=function(a){if(a==null)return 0;return a.length===+a.length?a.length:m.keys(a).length};m.first=m.head=m.take=function(a,b,c){if(a!=null)return b==null||c?a[0]:g.call(a,0,b)};m.initial=function(a,b,c){return g.call(a,0,a.length-(b==null||c?1:b))};m.last=function(a,b,c){if(a!=null)return b==null||c?a[a.length-1]:g.call(a,Math.max(a.length-b,0))};m.rest=m.tail=m.drop=function(a,b,c){return g.call(a,b==null||c?1:b)};m.compact=function(a){return m.filter(a,m.identity)};
var B=function(a,b,c){if(b&&m.every(a,m.isArray))return h.apply(c,a);r(a,function(a){m.isArray(a)||m.isArguments(a)?b?f.apply(c,a):B(a,b,c):c.push(a)});return c};m.flatten=function(a,b){return B(a,b,[])};m.without=function(a){return m.difference(a,g.call(arguments,1))};m.uniq=m.unique=function(a,b,c,e){m.isFunction(b)&&(e=c,c=b,b=!1);c=c?m.map(a,c,e):a;var f=[],d=[];r(c,function(c,e){if(b?!e||d[d.length-1]!==c:!m.contains(d,c))d.push(c),f.push(a[e])});return f};m.union=function(){return m.uniq(m.flatten(arguments,
!0))};m.intersection=function(a){var b=g.call(arguments,1);return m.filter(m.uniq(a),function(a){return m.every(b,function(b){return m.indexOf(b,a)>=0})})};m.difference=function(a){var c=h.apply(b,g.call(arguments,1));return m.filter(a,function(a){return!m.contains(c,a)})};m.zip=function(){for(var a=m.max(m.pluck(arguments,"length").concat(0)),b=Array(a),c=0;c<a;c++)b[c]=m.pluck(arguments,""+c);return b};m.object=function(a,b){if(a==null)return{};for(var c={},e=0,f=a.length;e<f;e++)b?c[a[e]]=b[e]:
c[a[e][0]]=a[e][1];return c};m.indexOf=function(a,b,c){if(a==null)return-1;var e=0,f=a.length;if(c)if(typeof c=="number")e=c<0?Math.max(0,f+c):c;else return e=m.sortedIndex(a,b),a[e]===b?e:-1;if(o&&a.indexOf===o)return a.indexOf(b,c);for(;e<f;e++)if(a[e]===b)return e;return-1};m.lastIndexOf=function(a,b,c){if(a==null)return-1;var e=c!=null;if(u&&a.lastIndexOf===u)return e?a.lastIndexOf(b,c):a.lastIndexOf(b);for(c=e?c:a.length;c--;)if(a[c]===b)return c;return-1};m.range=function(a,b,c){arguments.length<=
1&&(b=a||0,a=0);c=arguments[2]||1;for(var e=Math.max(Math.ceil((b-a)/c),0),f=0,d=Array(e);f<e;)d[f++]=a,a+=c;return d};var E=function(){};m.bind=function(a,b){var c,e;if(y&&a.bind===y)return y.apply(a,g.call(arguments,1));if(!m.isFunction(a))throw new TypeError;c=g.call(arguments,2);return e=function(){if(!(this instanceof e))return a.apply(b,c.concat(g.call(arguments)));E.prototype=a.prototype;var f=new E;E.prototype=null;var d=a.apply(f,c.concat(g.call(arguments)));if(Object(d)===d)return d;return f}};
m.partial=function(a){var b=g.call(arguments,1);return function(){return a.apply(this,b.concat(g.call(arguments)))}};m.bindAll=function(a){var b=g.call(arguments,1);if(b.length===0)throw Error("bindAll must be passed function names");r(b,function(b){a[b]=m.bind(a[b],a)});return a};m.memoize=function(a,b){var c={};b||(b=m.identity);return function(){var e=b.apply(this,arguments);return m.has(c,e)?c[e]:c[e]=a.apply(this,arguments)}};m.delay=function(a,b){var c=g.call(arguments,2);return setTimeout(function(){return a.apply(null,
c)},b)};m.defer=function(a){return m.delay.apply(m,[a,1].concat(g.call(arguments,1)))};m.throttle=function(a,b,c){var e,f,d,g=null,r=0;c||(c={});var i=function(){r=c.leading===!1?0:new Date;g=null;d=a.apply(e,f)};return function(){var h=new Date;!r&&c.leading===!1&&(r=h);var n=b-(h-r);e=this;f=arguments;n<=0?(clearTimeout(g),g=null,r=h,d=a.apply(e,f)):!g&&c.trailing!==!1&&(g=setTimeout(i,n));return d}};m.debounce=function(a,b,c){var e,f,d,g,r;return function(){d=this;f=arguments;g=new Date;var i=
function(){var h=new Date-g;h<b?e=setTimeout(i,b-h):(e=null,c||(r=a.apply(d,f)))},h=c&&!e;e||(e=setTimeout(i,b));h&&(r=a.apply(d,f));return r}};m.once=function(a){var b=!1,c;return function(){if(b)return c;b=!0;c=a.apply(this,arguments);a=null;return c}};m.wrap=function(a,b){return function(){var c=[a];f.apply(c,arguments);return b.apply(this,c)}};m.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}};m.after=function(a,
b){return function(){if(--a<1)return b.apply(this,arguments)}};m.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[],c;for(c in a)m.has(a,c)&&b.push(c);return b};m.values=function(a){for(var b=m.keys(a),c=b.length,e=Array(c),f=0;f<c;f++)e[f]=a[b[f]];return e};m.pairs=function(a){for(var b=m.keys(a),c=b.length,e=Array(c),f=0;f<c;f++)e[f]=[b[f],a[b[f]]];return e};m.invert=function(a){for(var b={},c=m.keys(a),e=0,f=c.length;e<f;e++)b[a[c[e]]]=c[e];return b};m.functions=
m.methods=function(a){var b=[],c;for(c in a)m.isFunction(a[c])&&b.push(c);return b.sort()};m.extend=function(a){r(g.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]});return a};m.pick=function(a){var c={},e=h.apply(b,g.call(arguments,1));r(e,function(b){b in a&&(c[b]=a[b])});return c};m.omit=function(a){var c={},e=h.apply(b,g.call(arguments,1)),f;for(f in a)m.contains(e,f)||(c[f]=a[f]);return c};m.defaults=function(a){r(g.call(arguments,1),function(b){if(b)for(var c in b)a[c]===void 0&&
(a[c]=b[c])});return a};m.clone=function(a){if(!m.isObject(a))return a;return m.isArray(a)?a.slice():m.extend({},a)};m.tap=function(a,b){b(a);return a};var J=function(a,b,c,e){if(a===b)return a!==0||1/a==1/b;if(a==null||b==null)return a===b;if(a instanceof m)a=a._wrapped;if(b instanceof m)b=b._wrapped;var f=i.call(a);if(f!=i.call(b))return!1;switch(f){case "[object String]":return a==String(b);case "[object Number]":return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case "[object Date]":case "[object Boolean]":return+a==
+b;case "[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if(typeof a!="object"||typeof b!="object")return!1;for(var d=c.length;d--;)if(c[d]==a)return e[d]==b;d=a.constructor;var g=b.constructor;if(d!==g&&(!m.isFunction(d)||!(d instanceof d&&m.isFunction(g)&&g instanceof g)))return!1;c.push(a);e.push(b);d=0;g=!0;if(f=="[object Array]"){if(d=a.length,g=d==b.length)for(;d--;)if(!(g=J(a[d],b[d],c,e)))break}else{for(var r in a)if(m.has(a,
r)&&(d++,!(g=m.has(b,r)&&J(a[r],b[r],c,e))))break;if(g){for(r in b)if(m.has(b,r)&&!d--)break;g=!d}}c.pop();e.pop();return g};m.isEqual=function(a,b){return J(a,b,[],[])};m.isEmpty=function(a){if(a==null)return!0;if(m.isArray(a)||m.isString(a))return a.length===0;for(var b in a)if(m.has(a,b))return!1;return!0};m.isElement=function(a){return!!(a&&a.nodeType===1)};m.isArray=e||function(a){return i.call(a)=="[object Array]"};m.isObject=function(a){return a===Object(a)};r(["Arguments","Function","String",
"Number","Date","RegExp"],function(a){m["is"+a]=function(b){return i.call(b)=="[object "+a+"]"}});if(!m.isArguments(arguments))m.isArguments=function(a){return!(!a||!m.has(a,"callee"))};if(typeof/./!=="function")m.isFunction=function(a){return typeof a==="function"};m.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))};m.isNaN=function(a){return m.isNumber(a)&&a!=+a};m.isBoolean=function(a){return a===!0||a===!1||i.call(a)=="[object Boolean]"};m.isNull=function(a){return a===null};m.isUndefined=
function(a){return a===void 0};m.has=function(a,b){return k.call(a,b)};m.noConflict=function(){a._=d;return this};m.identity=function(a){return a};m.times=function(a,b,c){for(var e=Array(Math.max(0,a)),f=0;f<a;f++)e[f]=b.call(c,f);return e};m.random=function(a,b){b==null&&(b=a,a=0);return a+Math.floor(Math.random()*(b-a+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=m.invert(P.escape);m.each(P.escape,function(a,b){var c=a.replace(/\#x([0-9a-f]+)/i,function(a,
b){if(a)return"#"+parseInt(b,16)});c!==a&&(P.unescape[c]=b)});var K={escape:RegExp("["+m.keys(P.escape).join("")+"]","g"),unescape:RegExp("("+m.keys(P.unescape).join("|")+")","g")};m.each(["escape","unescape"],function(a){m[a]=function(b){if(b==null)return"";return(""+b).replace(K[a],function(b){return P[a][b]})}});m.result=function(a,b){if(a!=null){var c=a[b];return m.isFunction(c)?c.call(a):c}};m.mixin=function(a){r(m.functions(a),function(b){var c=m[b]=a[b];m.prototype[b]=function(){var a=[this._wrapped];
f.apply(a,arguments);a=c.apply(m,a);return this._chain?m(a).chain():a}})};var S=0;m.uniqueId=function(a){var b=++S+"";return a?a+b:b};m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var R=/(.)^/,T={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},I=/\\|'|\r|\n|\t|\u2028|\u2029/g;m.template=function(a,b,c){var e;c=m.defaults({},c,m.templateSettings);var f=RegExp([(c.escape||R).source,(c.interpolate||R).source,(c.evaluate||
R).source].join("|")+"|$","g"),d=0,g="__p+='";a.replace(f,function(b,c,e,f,r){g+=a.slice(d,r).replace(I,function(a){return"\\"+T[a]});c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'");e&&(g+="'+\n((__t=("+e+"))==null?'':__t)+\n'");f&&(g+="';\n"+f+"\n__p+='");d=r+b.length;return b});g+="';\n";c.variable||(g="with(obj||{}){\n"+g+"}\n");g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{e=new Function(c.variable||"obj","_",g)}catch(r){throw r.source=
g,r;}if(b)return e(b,m);b=function(a){return e.call(this,a,m)};b.source="function("+(c.variable||"obj")+"){\n"+g+"}";return b};m.chain=function(a){return m(a).chain()};m.mixin(m);r(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var c=b[a];m.prototype[a]=function(){var b=this._wrapped;c.apply(b,arguments);(a=="shift"||a=="splice")&&b.length===0&&delete b[0];return this._chain?m(b).chain():b}});r(["concat","join","slice"],function(a){var c=b[a];m.prototype[a]=function(){var a=
c.apply(this._wrapped,arguments);return this._chain?m(a).chain():a}});m.extend(m.prototype,{chain:function(){this._chain=!0;return this},value:function(){return this._wrapped}})}).call(this);
(function(a,d){if(typeof exports==="object"&&exports)d(exports);else{var c={};d(c);typeof define==="function"&&define.amd?define(c):a.Mustache=c}})(this,function(a){function d(a){return typeof a==="function"}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function b(a){if(!n(a)||a.length!==2)throw Error("Invalid tags: "+a);return[RegExp(c(a[0])+"\\s*"),RegExp("\\s*"+c(a[1]))]}function e(a){this.tail=this.string=a;this.pos=0}function f(a,b){this.view=a==null?{}:a;this.cache={".":this.view};
this.parent=b}function g(){this.cache={}}var h=/\s*/,i=/\s+/,k=/\S/,l=/\s*=/,p=/\s*\}/,j=/#|\^|\/|>|\{|&|=|!/,q=RegExp.prototype.test,t=Object.prototype.toString,n=Array.isArray||function(a){return t.call(a)==="[object Array]"},s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.prototype.eos=function(){return this.tail===""};e.prototype.scan=function(a){if((a=this.tail.match(a))&&a.index===0)return a=a[0],this.tail=this.tail.substring(a.length),this.pos+=a.length,a;return""};
e.prototype.scanUntil=function(a){a=this.tail.search(a);var b;switch(a){case -1:b=this.tail;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,a),this.tail=this.tail.substring(a)}this.pos+=b.length;return b};f.prototype.push=function(a){return new f(a,this)};f.prototype.lookup=function(a){var b;if(a in this.cache)b=this.cache[a];else{for(var c=this;c;){if(a.indexOf(".")>0){b=c.view;for(var e=a.split("."),f=0;b!=null&&f<e.length;)b=b[e[f++]]}else b=c.view[a];if(b!=null)break;c=c.parent}this.cache[a]=
b}d(b)&&(b=b.call(this.view));return b};g.prototype.clearCache=function(){this.cache={}};g.prototype.parse=function(f,d){if(!(f in this.cache)){var g=this.cache,n,r;r=d||a.tags;n=f||"";typeof r==="string"&&(r=r.split(i));var o=b(r),s=new e(n),Q=[];n=[];for(var B=[],E=!1,J=!1,t,K,S,R;!s.eos();){t=s.pos;if(S=s.scanUntil(o[0])){R=0;for(var T=S.length;R<T;++R)if(K=S.charAt(R),!q.call(k,K)?B.push(n.length):J=!0,n.push(["text",K,t,t+1]),t+=1,K==="\n"){if(E&&!J)for(;B.length;)delete n[B.pop()];else B=[];
J=E=!1}}if(!s.scan(o[0]))break;E=!0;K=s.scan(j)||"name";s.scan(h);K==="="?(S=s.scanUntil(l),s.scan(l),s.scanUntil(o[1])):K==="{"?(S=s.scanUntil(RegExp("\\s*"+c("}"+r[1]))),s.scan(p),s.scanUntil(o[1]),K="&"):S=s.scanUntil(o[1]);if(!s.scan(o[1]))throw Error("Unclosed tag at "+s.pos);R=[K,S,t,s.pos];n.push(R);if(K==="#"||K==="^")Q.push(R);else if(K==="/"){K=Q.pop();if(!K)throw Error('Unopened section "'+S+'" at '+t);if(K[1]!==S)throw Error('Unclosed section "'+K[1]+'" at '+t);}else K==="name"||K==="{"||
K==="&"?J=!0:K==="="&&(o=b(r=S.split(i)))}if(K=Q.pop())throw Error('Unclosed section "'+K[1]+'" at '+s.pos);r=[];var I;s=0;for(Q=n.length;s<Q;++s)if(o=n[s])o[0]==="text"&&I&&I[0]==="text"?(I[1]+=o[1],I[3]=o[3]):(r.push(o),I=o);B=I=[];n=[];s=0;for(Q=r.length;s<Q;++s)switch(o=r[s],o[0]){case "#":case "^":B.push(o);n.push(o);B=o[4]=[];break;case "/":B=n.pop();B[5]=o[2];B=n.length>0?n[n.length-1][4]:I;break;default:B.push(o)}g[f]=I}return this.cache[f]};g.prototype.render=function(a,b,c){var e=this.parse(a);
b=b instanceof f?b:new f(b);return this.renderTokens(e,b,c,a)};g.prototype.renderTokens=function(b,c,e,f){function g(a){return h.render(a,c,e)}for(var i="",h=this,o,j,s=0,k=b.length;s<k;++s)switch(o=b[s],o[0]){case "#":j=c.lookup(o[1]);if(!j)continue;if(n(j))for(var l=0,p=j.length;l<p;++l)i+=this.renderTokens(o[4],c.push(j[l]),e,f);else if(typeof j==="object"||typeof j==="string")i+=this.renderTokens(o[4],c.push(j),e,f);else if(d(j)){if(typeof f!=="string")throw Error("Cannot use higher-order sections without the original template");
j=j.call(c.view,f.slice(o[3],o[5]),g);j!=null&&(i+=j)}else i+=this.renderTokens(o[4],c,e,f);break;case "^":j=c.lookup(o[1]);if(!j||n(j)&&j.length===0)i+=this.renderTokens(o[4],c,e,f);break;case ">":if(!e)continue;j=this.parse(d(e)?e(o[1]):e[o[1]]);j!=null&&(i+=this.renderTokens(j,c,e,f));break;case "&":j=c.lookup(o[1]);j!=null&&(i+=j);break;case "name":j=c.lookup(o[1]);j!=null&&(i+=a.escape(j));break;case "text":i+=o[1]}return i};a.name="mustache.js";a.version="0.8.0";a.tags=["{{","}}"];var o=new g;
a.clearCache=function(){return o.clearCache()};a.parse=function(a,b){return o.parse(a,b)};a.render=function(a,b,c){return o.render(a,b,c)};a.to_html=function(b,c,e,f){b=a.render(b,c,e);if(d(f))f(b);else return b};a.escape=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return s[a]})};a.Scanner=e;a.Context=f;a.Writer=g});
(function(a){a.extend(a.fn,{livequery:function(d,c,b){var e=this,f;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(a,h){if(e.selector==h.selector&&e.context==h.context&&d==h.type&&(!c||c.$lqguid==h.fn.$lqguid)&&(!b||b.$lqguid==h.fn2.$lqguid))return(f=h)&&!1});f=f||new a.livequery(this.selector,this.context,d,c,b);f.stopped=!1;f.run();return this},expire:function(d,c,b){var e=this;a.isFunction(d)&&(b=c,c=d,d=void 0);a.each(a.livequery.queries,function(f,g){e.selector==g.selector&&
e.context==g.context&&(!d||d==g.type)&&(!c||c.$lqguid==g.fn.$lqguid)&&(!b||b.$lqguid==g.fn2.$lqguid)&&!this.stopped&&a.livequery.stop(g.id)});return this}});a.livequery=function(d,c,b,e,f){this.selector=d;this.context=c;this.type=b;this.fn=e;this.fn2=f;this.elements=[];this.stopped=!1;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(f)f.$lqguid=f.$lqguid||a.livequery.guid++;return this};a.livequery.prototype={stop:function(){var a=this;this.type?this.elements.unbind(this.type,
this.fn):this.fn2&&this.elements.each(function(c,b){a.fn2.apply(b)});this.elements=[];this.stopped=!0},run:function(){if(!this.stopped){var d=this,c=this.elements,b=a(this.selector,this.context),e=b.not(c);this.elements=b;this.type?(e.bind(this.type,this.fn),c.length>0&&a.each(c,function(c,e){a.inArray(e,b)<0&&a.event.remove(e,d.type,d.fn)})):(e.each(function(){d.fn.apply(this)}),this.fn2&&c.length>0&&a.each(c,function(c,e){a.inArray(e,b)<0&&d.fn2.apply(e)}))}}};a.extend(a.livequery,{guid:0,queries:[],
queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var d=a.livequery.queue.length;d--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(d,c){if(a.fn[c]){var b=a.fn[c];a.fn[c]=function(){var c=b.apply(this,arguments);a.livequery.run();return c}}})},run:function(d){d!=void 0?a.inArray(d,a.livequery.queue)<
0&&a.livequery.queue.push(d):a.each(a.livequery.queries,function(c){a.inArray(c,a.livequery.queue)<0&&a.livequery.queue.push(c)});a.livequery.timeout&&clearTimeout(a.livequery.timeout);a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(d){d!=void 0?a.livequery.queries[d].stop():a.each(a.livequery.queries,function(c){a.livequery.queries[c].stop()})}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass",
"empty","remove","html");a(function(){a.livequery.play()})})(jQuery);
(function(a){var d=!1===a.support.boxModel&&a.support.objectAll&&$support.leadingWhitespace;a.jGrowl=function(c,b){a("#jGrowl").size()==0&&a('<div id="jGrowl"></div>').addClass(b&&b.position?b.position:a.jGrowl.defaults.position).appendTo("body");a("#jGrowl").jGrowl(c,b)};a.fn.jGrowl=function(c,b){if(a.isFunction(this.each)){var e=arguments;return this.each(function(){a(this).data("jGrowl.instance")==void 0&&(a(this).data("jGrowl.instance",a.extend(new a.fn.jGrowl,{notifications:[],element:null,interval:null})),
a(this).data("jGrowl.instance").startup(this));a.isFunction(a(this).data("jGrowl.instance")[c])?a(this).data("jGrowl.instance")[c].apply(a(this).data("jGrowl.instance"),a.makeArray(e).slice(1)):a(this).data("jGrowl.instance").create(c,b)})}};a.extend(a.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3E3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",
closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(c,b){b=a.extend({},this.defaults,b);if(typeof b.speed!=="undefined")b.openDuration=b.speed,b.closeDuration=b.speed;this.notifications.push({message:c,options:b});b.log.apply(this.element,[this.element,c,b])},render:function(c){var b=
this,e=c.message,f=c.options;f.themeState=f.themeState==""?"":"ui-state-"+f.themeState;c=a('<div class="jGrowl-notification '+f.themeState+" ui-corner-all"+(f.group!=void 0&&f.group!=""?" "+f.group:"")+'"><div class="jGrowl-close">'+f.closeTemplate+'</div><div class="jGrowl-header">'+f.header+'</div><div class="jGrowl-message">'+e+"</div></div>").data("jGrowl",f).addClass(f.theme).children("div.jGrowl-close").bind("click.jGrowl",function(){a(this).parent().trigger("jGrowl.beforeClose")}).parent();
a(c).bind("mouseover.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){a("div.jGrowl-notification",b.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){f.beforeOpen.apply(c,[c,e,f,b.element])!=!1&&a(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){f.open.apply(c,[c,e,f,b.element])!=!1&&(f.glue=="after"?a("div.jGrowl-notification:last",b.element).after(c):a("div.jGrowl-notification:first",b.element).before(c),
a(this).animate(f.animateOpen,f.openDuration,f.easing,function(){a.support.opacity===!1&&this.style.removeAttribute("filter");if(a(this).data("jGrowl")!=null)a(this).data("jGrowl").created=new Date;a(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){f.afterOpen.apply(c,[c,e,f,b.element])}).bind("jGrowl.beforeClose",function(){f.beforeClose.apply(c,[c,e,f,b.element])!=!1&&a(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){a(this).data("jGrowl.pause",!0);a(this).animate(f.animateClose,
f.closeDuration,f.easing,function(){a.isFunction(f.close)?f.close.apply(c,[c,e,f,b.element])!==!1&&a(this).remove():a(this).remove()})}).trigger("jGrowl.beforeOpen");f.corners!=""&&a.fn.corner!=void 0&&a(c).corner(f.corners);a("div.jGrowl-notification:parent",b.element).size()>1&&a("div.jGrowl-closer",b.element).size()==0&&this.defaults.closer!=!1&&a(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(b.element).animate(this.defaults.animateOpen,
this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){a(this).siblings().trigger("jGrowl.beforeClose");a.isFunction(b.defaults.closer)&&b.defaults.closer.apply(a(this).parent()[0],[a(this).parent()[0]])})},update:function(){a(this.element).find("div.jGrowl-notification:parent").each(function(){a(this).data("jGrowl")!=void 0&&a(this).data("jGrowl").created!=void 0&&a(this).data("jGrowl").created.getTime()+parseInt(a(this).data("jGrowl").life)<(new Date).getTime()&&a(this).data("jGrowl").sticky!=
!0&&(a(this).data("jGrowl.pause")==void 0||a(this).data("jGrowl.pause")!=!0)&&a(this).trigger("jGrowl.beforeClose")});this.notifications.length>0&&(this.defaults.pool==0||a(this.element).find("div.jGrowl-notification:parent").size()<this.defaults.pool)&&this.render(this.notifications.shift());a(this.element).find("div.jGrowl-notification:parent").size()<2&&a(this.element).find("div.jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){a(this).remove()})},
startup:function(c){this.element=a(c).addClass("jGrowl").append('<div class="jGrowl-notification"></div>');this.interval=setInterval(function(){a(c).data("jGrowl.instance").update()},parseInt(this.defaults.check));d&&a(this.element).addClass("ie6")},shutdown:function(){a(this.element).removeClass("jGrowl").find("div.jGrowl-notification").remove();clearInterval(this.interval)},close:function(){a(this.element).find("div.jGrowl-notification").each(function(){a(this).trigger("jGrowl.beforeClose")})}});
a.jGrowl.defaults=a.fn.jGrowl.prototype.defaults})(jQuery);
(function(a,d){a.effects={effect:{}};(function(a,b){function e(a,b,c){var e=p[b.type]||{};if(a==null)return c||!b.def?null:b.def;a=e.floor?~~a:parseFloat(a);if(isNaN(a))return b.def;if(e.mod)return(a+e.mod)%e.mod;return 0>a?0:e.max<a?e.max:a}function f(b){var e=k(),f=e._rgba=[];b=b.toLowerCase();n(i,function(a,c){var d,g=c.re.exec(b);d=g&&c.parse(g);g=c.space||"rgba";if(d)return d=e[g](d),e[l[g].cache]=d[l[g].cache],f=e._rgba=d._rgba,!1});if(f.length)return f.join()==="0,0,0,0"&&a.extend(f,t.transparent),
e;return t[b]}function d(a,b,c){c=(c+1)%1;if(c*6<1)return a+(b-a)*c*6;if(c*2<1)return b;if(c*3<2)return a+(b-a)*(2/3-c)*6;return a}var h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],k=a.Color=function(b,e,f,d){return new a.Color.fn.parse(b,e,f,d)},l={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},p={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},j=k.support={},q=a("<p>")[0],t,n=a.each;q.style.cssText="background-color:rgba(1,1,1,.5)";j.rgba=q.style.backgroundColor.indexOf("rgba")>-1;n(l,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});k.fn=a.extend(k.prototype,{parse:function(d,g,i,
h){if(d===b)return this._rgba=[null,null,null,null],this;if(d.jquery||d.nodeType)d=a(d).css(g),g=b;var j=this,m=a.type(d),r=this._rgba=[];g!==b&&(d=[d,g,i,h],m="array");if(m==="string")return this.parse(f(d)||t._default);if(m==="array")return n(l.rgba.props,function(a,b){r[b.idx]=e(d[b.idx],b)}),this;if(m==="object")return d instanceof k?n(l,function(a,b){d[b.cache]&&(j[b.cache]=d[b.cache].slice())}):n(l,function(b,f){var g=f.cache;n(f.props,function(a,b){if(!j[g]&&f.to){if(a==="alpha"||d[a]==null)return;
j[g]=f.to(j._rgba)}j[g][b.idx]=e(d[a],b,!0)});if(j[g]&&a.inArray(null,j[g].slice(0,3))<0&&(j[g][3]=1,f.from))j._rgba=f.from(j[g])}),this},is:function(a){var b=k(a),c=!0,e=this;n(l,function(a,f){var d,g=b[f.cache];g&&(d=e[f.cache]||f.to&&f.to(e._rgba)||[],n(f.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===d[b.idx]}));return c});return c},_space:function(){var a=[],b=this;n(l,function(c,e){b[e.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=k(a),f=c._space(),d=l[f],g=this.alpha()===
0?k("transparent"):this,r=g[d.cache]||d.to(g._rgba),i=r.slice();c=c[d.cache];n(d.props,function(a,f){var d=f.idx,g=r[d],h=c[d],n=p[f.type]||{};h!==null&&(g===null?i[d]=h:(n.mod&&(h-g>n.mod/2?g+=n.mod:g-h>n.mod/2&&(g-=n.mod)),i[d]=e((h-g)*b+g,f)))});return this[f](i)},blend:function(b){if(this._rgba[3]===1)return this;var e=this._rgba.slice(),f=e.pop(),d=k(b)._rgba;return k(a.map(e,function(a,b){return(1-f)*d[b]+f*a}))},toRgbaString:function(){var b="rgba(",e=a.map(this._rgba,function(a,b){return a==
null?b>2?1:0:a});e[3]===1&&(e.pop(),b="rgb(");return b+e.join()+")"},toHslaString:function(){var b="hsla(",e=a.map(this.hsla(),function(a,b){a==null&&(a=b>2?1:0);b&&b<3&&(a=Math.round(a*100)+"%");return a});e[3]===1&&(e.pop(),b="hsl(");return b+e.join()+")"},toHexString:function(b){var e=this._rgba.slice(),f=e.pop();b&&e.push(~~(f*255));return"#"+a.map(e,function(a){a=(a||0).toString(16);return a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}});
k.fn.parse.prototype=k.fn;l.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,e=a[2]/255;a=a[3];var f=Math.max(b,c,e),d=Math.min(b,c,e),g=f-d,i=f+d,h=i*0.5;return[Math.round(d===f?0:b===f?60*(c-e)/g+360:c===f?60*(e-b)/g+120:60*(b-c)/g+240)%360,g===0?0:h<=0.5?g/i:g/(2-i),h,a==null?1:a]};l.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],e=a[2];a=a[3];c=e<=0.5?e*(1+c):e+c-e*c;e=
2*e-c;return[Math.round(d(e,c,b+1/3)*255),Math.round(d(e,c,b)*255),Math.round(d(e,c,b-1/3)*255),a]};n(l,function(f,d){var g=d.props,i=d.cache,j=d.to,m=d.from;k.fn[f]=function(f){j&&!this[i]&&(this[i]=j(this._rgba));if(f===b)return this[i].slice();var d,h=a.type(f),o=h==="array"||h==="object"?f:arguments,s=this[i].slice();n(g,function(a,b){var c=o[h==="object"?a:b.idx];c==null&&(c=s[b.idx]);s[b.idx]=e(c,b)});return m?(d=k(m(s)),d[i]=s,d):k(s)};n(g,function(b,e){k.fn[b]||(k.fn[b]=function(d){var g=
a.type(d),i=b==="alpha"?this._hsla?"hsla":"rgba":f,n=this[i](),j=n[e.idx];if(g==="undefined")return j;g==="function"&&(d=d.call(this,j),g=a.type(d));if(d==null&&e.empty)return this;g==="string"&&(g=h.exec(d))&&(d=j+parseFloat(g[2])*(g[1]==="+"?1:-1));n[e.idx]=d;return this[i](n)})})});k.hook=function(b){b=b.split(" ");n(b,function(b,e){a.cssHooks[e]={set:function(b,d){var g,r="";if(d!=="transparent"&&(a.type(d)!=="string"||(g=f(d)))){d=k(g||d);if(!j.rgba&&d._rgba[3]!==1){for(g=e==="backgroundColor"?
b.parentNode:b;(r===""||r==="transparent")&&g&&g.style;)try{r=a.css(g,"backgroundColor"),g=g.parentNode}catch(i){}d=d.blend(r&&r!=="transparent"?r:"_default")}d=d.toRgbaString()}try{b.style[e]=d}catch(h){}}};a.fx.step[e]=function(b){if(!b.colorInit)b.start=k(b.elem,e),b.end=k(b.end),b.colorInit=!0;a.cssHooks[e].set(b.elem,b.start.transition(b.end,b.pos))}})};k.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");
a.cssHooks.borderColor={expand:function(a){var b={};n(["Top","Right","Bottom","Left"],function(c,e){b["border"+e+"Color"]=a});return b}};t=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(b){var c,
e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,d={};if(e&&e.length&&e[0]&&e[e[0]])for(b=e.length;b--;)c=e[b],typeof e[c]==="string"&&(d[a.camelCase(c)]=e[c]);else for(c in e)typeof e[c]==="string"&&(d[c]=e[c]);return d}var b=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,
c){a.fx.step[c]=function(a){if(a.end!=="none"&&!a.setAttr||a.pos===1&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});if(!a.fn.addBack)a.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))};a.effects.animateClass=function(f,d,h,i){var k=a.speed(d,h,i);return this.queue(function(){var d=a(this),g=d.attr("class")||"",i,h=k.children?d.find("*").addBack():d;h=h.map(function(){return{el:a(this),start:c(this)}});i=function(){a.each(b,function(a,b){if(f[b])d[b+
"Class"](f[b])})};i();h=h.map(function(){this.end=c(this.el[0]);var b=this.start,f=this.end,d={},g,i;for(g in f)if(i=f[g],b[g]!==i&&!e[g]&&(a.fx.step[g]||!isNaN(parseFloat(i))))d[g]=i;this.diff=d;return this});d.attr("class",g);h=h.map(function(){var b=this,c=a.Deferred();this.el.animate(this.diff,a.extend({},k,{queue:!1,complete:function(){c.resolve(b)}}));return c.promise()});a.when.apply(a,h.get()).done(function(){i();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,
"")})});k.complete.call(d[0])})})};a.fn.extend({addClass:function(b){return function(c,e,d,k){return e?a.effects.animateClass.call(this,{add:c},e,d,k):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,e,d,k){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},e,d,k):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,e,i,k,l){return typeof e==="boolean"||e===d?i?a.effects.animateClass.call(this,e?{add:c}:{remove:c},
i,k,l):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},e,i,k)}}(a.fn.toggleClass),switchClass:function(b,c,e,d,k){return a.effects.animateClass.call(this,{add:c,remove:b},e,d,k)}})})();(function(){function c(b,c,d,h){if(a.isPlainObject(b))c=b,b=b.effect;b={effect:b};c==null&&(c={});a.isFunction(c)&&(h=c,d=null,c={});if(typeof c==="number"||a.fx.speeds[c])h=d,d=c,c={};a.isFunction(d)&&(h=d,d=null);c&&a.extend(b,c);d=d||c.duration;b.duration=a.fx.off?0:typeof d==="number"?d:d in
a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=h||c.complete;return b}function b(b){if(!b||typeof b==="number"||a.fx.speeds[b])return!0;if(typeof b==="string"&&!a.effects.effect[b])return!0;if(a.isFunction(b))return!0;if(typeof b==="object"&&!b.effect)return!0;return!1}a.extend(a.effects,{version:"1.10.3",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,b){var c,h;for(h=0;h<b.length;h++)b[h]!==null&&(c=a.data("ui-effects-"+
b[h]),c===d&&(c=""),a.css(b[h],c))},setMode:function(a,b){b==="toggle"&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=0.5;break;case "bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case "left":d=0;break;case "center":d=0.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),
"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),h={width:b.width(),height:b.height()},i=document.activeElement;b.wrap(d);(b[0]===i||a.contains(b[0],i))&&a(i).focus();d=b.parent();b.css("position")==="static"?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);
isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(h);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,d,h){h=h||{};a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(h[c]=f[0]*d+f[1])});return h}});a.fn.extend({effect:function(){function b(c){function e(){a.isFunction(g)&&
g.call(d[0]);a.isFunction(c)&&c()}var d=a(this),g=f.complete,h=f.mode;(d.is(":hidden")?h==="hide":h==="show")?(d[h](),e()):i.call(d[0],f,e)}var f=c.apply(this,arguments),d=f.mode,h=f.queue,i=a.effects.effect[f.effect];if(a.fx.off||!i)return d?this[d](f.duration,f.complete):this.each(function(){f.complete&&f.complete.call(this)});return h===!1?this.each(b):this.queue(h||"fx",b)},show:function(a){return function(f){if(b(f))return a.apply(this,arguments);else{var d=c.apply(this,arguments);d.mode="show";
return this.effect.call(this,d)}}}(a.fn.show),hide:function(a){return function(f){if(b(f))return a.apply(this,arguments);else{var d=c.apply(this,arguments);d.mode="hide";return this.effect.call(this,d)}}}(a.fn.hide),toggle:function(a){return function(f){if(b(f)||typeof f==="boolean")return a.apply(this,arguments);else{var d=c.apply(this,arguments);d.mode="toggle";return this.effect.call(this,d)}}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>
0&&(d=[parseFloat(c),b])});return d}})})();(function(){var c={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,e){c[e]=function(c){return Math.pow(c,a+2)}});a.extend(c,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return a===0||a===1?a:-Math.pow(2,8*(a-1))*Math.sin(((a-1)*80-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var c,f=4;a<((c=Math.pow(2,--f))-1)/11;);return 1/Math.pow(4,3-f)-7.5625*
Math.pow((c*3-2)/22-a,2)}});a.each(c,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-c(1-a)};a.easing["easeInOut"+b]=function(a){return a<0.5?c(a*2)/2:1-c(a*-2+2)/2}})})()})(jQuery);
(function(a,d){function c(c,e){var f,d;f=c.nodeName.toLowerCase();if("area"===f){f=c.parentNode;d=f.name;if(!c.href||!d||f.nodeName.toLowerCase()!=="map")return!1;f=a("img[usemap=#"+d+"]")[0];return!!f&&b(f)}return(/input|select|textarea|button|object/.test(f)?!c.disabled:"a"===f?c.href||e:e)&&b(c)}function b(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return a.css(this,"visibility")==="hidden"}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.extend(a.ui,{version:"1.10.3",
keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});a.fn.extend({focus:function(b){return function(c,e){return typeof c==="number"?this.each(function(){var b=this;setTimeout(function(){a(b).focus();e&&e.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(b){if(b!==d)return this.css("zIndex",b);if(this.length){b=a(this[0]);for(var c;b.length&&b[0]!==document;){c=b.css("position");if(c==="absolute"||c==="relative"||c==="fixed")if(c=parseInt(b.css("zIndex"),10),!isNaN(c)&&c!==0)return c;b=b.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++e})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}});a.extend(a.expr[":"],{data:a.expr.createPseudo?
a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,e){return!!a.data(b,e[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var e=a.attr(b,"tabindex"),f=isNaN(e);return(f||e>=0)&&c(b,!f)}});a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(b,c){function e(b,c,d,g){a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(c-=parseFloat(a.css(b,"margin"+
this))||0)});return c}var f=c==="Width"?["Left","Right"]:["Top","Bottom"],l=c.toLowerCase(),p={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+c]=function(b){if(b===d)return p["inner"+c].call(this);return this.each(function(){a(this).css(l,e(this,b)+"px")})};a.fn["outer"+c]=function(b,f){if(typeof b!=="number")return p["outer"+c].call(this,b);return this.each(function(){a(this).css(l,e(this,b,!0,f)+"px")})}});if(!a.fn.addBack)a.fn.addBack=
function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))};if(a("<a>").data("a-b","a").removeData("a-b").data("a-b"))a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData);a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());a.support.selectstart="onselectstart"in document.createElement("div");a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});a.extend(a.ui,{plugin:{add:function(b,c,e){var f;b=a.ui[b].prototype;for(f in e)b.plugins[f]=b.plugins[f]||[],b.plugins[f].push([c,e[f]])},call:function(a,b,c){var e=a.plugins[b];if(e&&a.element[0].parentNode&&a.element[0].parentNode.nodeType!==11)for(b=0;b<e.length;b++)a.options[e[b][0]]&&e[b][1].apply(a.element,c)}},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;
var e=c&&c==="left"?"scrollLeft":"scrollTop",f=!1;if(b[e]>0)return!0;b[e]=1;f=b[e]>0;b[e]=0;return f}})})(jQuery);
(function(a,d){var c=0,b=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c=0,d;(d=b[c])!=null;c++)try{a(d).triggerHandler("remove")}catch(i){}e(b)};a.widget=function(b,c,e){var d,k,l,p,j={},q=b.split(".")[0];b=b.split(".")[1];d=q+"-"+b;if(!e)e=c,c=a.Widget;a.expr[":"][d.toLowerCase()]=function(b){return!!a.data(b,d)};a[q]=a[q]||{};k=a[q][b];l=a[q][b]=function(a,b){if(!this._createWidget)return new l(a,b);arguments.length&&this._createWidget(a,b)};a.extend(l,k,{version:e.version,
_proto:a.extend({},e),_childConstructors:[]});p=new c;p.options=a.widget.extend({},p.options);a.each(e,function(b,e){j[b]=a.isFunction(e)?function(){var a=function(){return c.prototype[b].apply(this,arguments)},f=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,d;this._super=a;this._superApply=f;d=e.apply(this,arguments);this._super=b;this._superApply=c;return d}}():e});l.prototype=a.widget.extend(p,{widgetEventPrefix:k?p.widgetEventPrefix:b},
j,{constructor:l,namespace:q,widgetName:b,widgetFullName:d});k?(a.each(k._childConstructors,function(b,c){var e=c.prototype;a.widget(e.namespace+"."+e.widgetName,l,c._proto)}),delete k._childConstructors):c._childConstructors.push(l);a.widget.bridge(b,l)};a.widget.extend=function(c){for(var e=b.call(arguments,1),h=0,i=e.length,k,l;h<i;h++)for(k in e[h])l=e[h][k],e[h].hasOwnProperty(k)&&l!==d&&(c[k]=a.isPlainObject(l)?a.isPlainObject(c[k])?a.widget.extend({},c[k],l):a.widget.extend({},l):l);return c};
a.widget.bridge=function(c,e){var h=e.prototype.widgetFullName||c;a.fn[c]=function(i){var k=typeof i==="string",l=b.call(arguments,1),p=this;i=!k&&l.length?a.widget.extend.apply(null,[i].concat(l)):i;k?this.each(function(){var b,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+i+"'");if(!a.isFunction(e[i])||i.charAt(0)==="_")return a.error("no such method '"+i+"' for "+c+" widget instance");b=e[i].apply(e,l);if(b!==e&&b!==d)return p=
b&&b.jquery?p.pushStack(b.get()):b,!1}):this.each(function(){var b=a.data(this,h);b?b.option(i||{})._init():a.data(this,h,new e(i,this))});return p}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,e){e=a(e||this.defaultElement||this)[0];this.element=a(e);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,
this._getCreateOptions(),b);this.bindings=a();this.hoverable=a();this.focusable=a();if(e!==this)a.data(e,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===e&&this.destroy()}}),this.document=a(e.style?e.ownerDocument:e.document||e),this.window=a(this.document[0].defaultView||this.document[0].parentWindow);this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(b,c){var e=b,i,k,l;if(arguments.length===0)return a.widget.extend({},this.options);if(typeof b==="string")if(e={},i=b.split("."),b=i.shift(),i.length){k=e[b]=a.widget.extend({},this.options[b]);for(l=0;l<i.length-1;l++)k[i[l]]=k[i[l]]||{},k=k[i[l]];b=i.pop();if(c===d)return k[b]===d?null:k[b];k[b]=c}else{if(c===d)return this.options[b]===d?null:this.options[b];e[b]=c}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;a==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,e){var d,k=this;typeof b!=="boolean"&&(e=c,c=b,b=!1);e?(c=d=a(c),this.bindings=this.bindings.add(c)):(e=c,c=this.element,d=
this.widget());a.each(e,function(e,h){function j(){if(b||!(k.options.disabled===!0||a(this).hasClass("ui-state-disabled")))return(typeof h==="string"?k[h]:h).apply(k,arguments)}if(typeof h!=="string")j.guid=h.guid=h.guid||j.guid||a.guid++;var q=e.match(/^(\w+)\s*(.*)$/),t=q[1]+k.eventNamespace;(q=q[2])?d.delegate(q,t,j):c.bind(t,j)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return(typeof a===
"string"?c[a]:a).apply(c,arguments)},b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,e){var d,
k=this.options[b];e=e||{};c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(d in b)d in c||(c[d]=b[d]);this.element.trigger(c,e);return!(a.isFunction(k)&&k.apply(this.element[0],[c].concat(e))===!1||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(e,d,k){typeof d==="string"&&(d={effect:d});var l,p=!d?b:d===!0||typeof d==="number"?c:d.effect||c;d=
d||{};typeof d==="number"&&(d={duration:d});l=!a.isEmptyObject(d);d.complete=k;d.delay&&e.delay(d.delay);if(l&&a.effects&&a.effects.effect[p])e[b](d);else if(p!==b&&e[p])e[p](d.duration,d.easing,k);else e.queue(function(c){a(this)[b]();k&&k.call(e[0]);c()})}})})(jQuery);
(function(a){var d=!1;a(document).mouseup(function(){d=!1});a.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(b){if(!0===a.data(b.target,c.widgetName+".preventClickEvent"))return a.removeData(b.target,c.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!d){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var b=this,e=c.which===1,f=typeof this.options.cancel==="string"&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(c))return!0;this.mouseDelayMet=
!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay);if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=this._mouseStart(c)!==!1,!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return b._mouseMove(a)};this._mouseUpDelegate=function(a){return b._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return d=!0}},_mouseMove:function(c){if(a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,c)!==!1)?this._mouseDrag(c):this._mouseUp(c);
return!this._mouseStarted},_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted)this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c);return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},
_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);
(function(a){function d(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))}a.widget("ui.sortable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",
zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?a.axis==="x"||d(this.items[0].item):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();
for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(c,b){c==="disabled"?(this.options[c]=b,this.widget().toggleClass("ui-sortable-disabled",!!b)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(c,b){var e=null,d=!1,g=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(c);a(c.target).parents().each(function(){if(a.data(this,g.widgetName+
"-item")===g)return e=a(this),!1});a.data(c.target,g.widgetName+"-item")===g&&(e=a(c.target));if(!e)return!1;if(this.options.handle&&!b&&(a(this.options.handle,e).find("*").addBack().each(function(){this===c.target&&(d=!0)}),!d))return!1;this.currentItem=e;this._removeCurrentsFromItems();return!0},_mouseStart:function(c,b,e){var d;b=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(c);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=
this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:c.pageX-this.offset.left,top:c.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(c);this.originalPageX=c.pageX;this.originalPageY=c.pageY;b.cursorAt&&
this._adjustOffsetFromHelper(b.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!==this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();b.containment&&this._setContainment();if(b.cursor&&b.cursor!=="auto")d=this.document.find("body"),this.storedCursor=d.css("cursor"),d.css("cursor",b.cursor),this.storedStylesheet=a("<style>*{ cursor: "+b.cursor+" !important; }</style>").appendTo(d);if(b.opacity){if(this.helper.css("opacity"))this._storedOpacity=
this.helper.css("opacity");this.helper.css("opacity",b.opacity)}if(b.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",b.zIndex)}if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",c,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!e)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",c,this._uiHash(this));
if(a.ui.ddmanager)a.ui.ddmanager.current=this;a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(c);return!0},_mouseDrag:function(c){var b,e,d,g;b=this.options;e=!1;this.position=this._generatePosition(c);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!==
"HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-c.pageY<b.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop+b.scrollSpeed;else if(c.pageY-this.overflowOffset.top<b.scrollSensitivity)this.scrollParent[0].scrollTop=e=this.scrollParent[0].scrollTop-b.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-c.pageX<b.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft+b.scrollSpeed;else if(c.pageX-this.overflowOffset.left<
b.scrollSensitivity)this.scrollParent[0].scrollLeft=e=this.scrollParent[0].scrollLeft-b.scrollSpeed}else c.pageY-a(document).scrollTop()<b.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-b.scrollSpeed):a(window).height()-(c.pageY-a(document).scrollTop())<b.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+b.scrollSpeed)),c.pageX-a(document).scrollLeft()<b.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-b.scrollSpeed):a(window).width()-(c.pageX-
a(document).scrollLeft())<b.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+b.scrollSpeed));e!==!1&&a.ui.ddmanager&&!b.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,c)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(b=this.items.length-1;b>=0;b--)if(e=this.items[b],d=e.item[0],
(g=this._intersectsWithPointer(e))&&e.instance===this.currentContainer&&d!==this.currentItem[0]&&this.placeholder[g===1?"next":"prev"]()[0]!==d&&!a.contains(this.placeholder[0],d)&&(this.options.type==="semi-dynamic"?!a.contains(this.element[0],d):1)){this.direction=g===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(e))this._rearrange(c,e);else break;this._trigger("change",c,this._uiHash());break}this._contactContainers(c);a.ui.ddmanager&&a.ui.ddmanager.drag(this,c);
this._trigger("sort",c,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(c,b){if(c){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,c);if(this.options.revert){var e=this,d=this.placeholder.offset(),g=this.options.axis,h={};if(!g||g==="x")h.left=d.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft);if(!g||g==="y")h.top=d.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===
document.body?0:this.offsetParent[0].scrollTop);this.reverting=!0;a(this.helper).animate(h,parseInt(this.options.revert,10)||500,function(){e._clear(c)})}else this._clear(c,b);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)if(this.containers[c]._trigger("deactivate",null,this._uiHash(this)),this.containers[c].containerCache.over)this.containers[c]._trigger("out",
null,this._uiHash(this)),this.containers[c].containerCache.over=0}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(c){var b=
this._getItemsAsjQuery(c&&c.connected),e=[];c=c||{};a(b).each(function(){var b=(a(c.item||this).attr(c.attribute||"id")||"").match(c.expression||/(.+)[\-=_](.+)/);b&&e.push((c.key||b[1]+"[]")+"="+(c.key&&c.expression?b[1]:b[2]))});!e.length&&c.key&&e.push(c.key+"=");return e.join("&")},toArray:function(c){var b=this._getItemsAsjQuery(c&&c.connected),e=[];c=c||{};b.each(function(){e.push(a(c.item||this).attr(c.attribute||"id")||"")});return e},_intersectsWith:function(a){var b=this.positionAbs.left,
e=b+this.helperProportions.width,d=this.positionAbs.top,g=d+this.helperProportions.height,h=a.left,i=h+a.width,k=a.top,l=k+a.height,p=this.offset.click.top,j=this.offset.click.left;j=this.options.axis==="y"||b+j>h&&b+j<i;p=(this.options.axis==="x"||d+p>k&&d+p<l)&&j;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?p:h<b+this.helperProportions.width/
2&&e-this.helperProportions.width/2<i&&k<d+this.helperProportions.height/2&&g-this.helperProportions.height/2<l},_intersectsWithPointer:function(a){var b=this.options.axis==="y"||this.positionAbs.left+this.offset.click.left>a.left&&this.positionAbs.left+this.offset.click.left<a.left+a.width;a=(this.options.axis==="x"||this.positionAbs.top+this.offset.click.top>a.top&&this.positionAbs.top+this.offset.click.top<a.top+a.height)&&b;b=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();
if(!a)return!1;return this.floating?e&&e==="right"||b==="down"?2:1:b&&(b==="down"?2:1)},_intersectsWithSides:function(a){var b=this.positionAbs.top+this.offset.click.top>a.top+a.height/2&&this.positionAbs.top+this.offset.click.top<a.top+a.height/2+a.height;a=this.positionAbs.left+this.offset.click.left>a.left+a.width/2&&this.positionAbs.left+this.offset.click.left<a.left+a.width/2+a.width;var e=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?d==="right"&&
a||d==="left"&&!a:e&&(e==="down"&&b||e==="up"&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return a!==0&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return a!==0&&(a>0?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(c){var b,
e,d,g=[],h=[],i=this._connectWith();if(i&&c)for(c=i.length-1;c>=0;c--){e=a(i[c]);for(b=e.length-1;b>=0;b--)(d=a.data(e[b],this.widgetFullName))&&d!==this&&!d.options.disabled&&h.push([a.isFunction(d.options.items)?d.options.items.call(d.element):a(d.options.items,d.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),d])}h.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),
this]);for(c=h.length-1;c>=0;c--)h[c][0].each(function(){g.push(this)});return a(g)},_removeCurrentsFromItems:function(){var c=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var e=0;e<c.length;e++)if(c[e]===a.item[0])return!1;return!0})},_refreshItems:function(c){this.items=[];this.containers=[this];var b,e,d,g,h,i=this.items,k=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],c,{item:this.currentItem}):a(this.options.items,
this.element),this]];if((h=this._connectWith())&&this.ready)for(b=h.length-1;b>=0;b--){d=a(h[b]);for(e=d.length-1;e>=0;e--)if((g=a.data(d[e],this.widgetFullName))&&g!==this&&!g.options.disabled)k.push([a.isFunction(g.options.items)?g.options.items.call(g.element[0],c,{item:this.currentItem}):a(g.options.items,g.element),g]),this.containers.push(g)}for(b=k.length-1;b>=0;b--){c=k[b][1];d=k[b][0];e=0;for(h=d.length;e<h;e++)g=a(d[e]),g.data(this.widgetName+"-item",c),i.push({item:g,instance:c,width:0,
height:0,left:0,top:0})}},refreshPositions:function(c){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();var b,e,d;for(b=this.items.length-1;b>=0;b--)if(e=this.items[b],!(e.instance!==this.currentContainer&&this.currentContainer&&e.item[0]!==this.currentItem[0])){d=this.options.toleranceElement?a(this.options.toleranceElement,e.item):e.item;if(!c)e.width=d.outerWidth(),e.height=d.outerHeight();d=d.offset();e.left=d.left;e.top=d.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(b=this.containers.length-1;b>=0;b--)d=this.containers[b].element.offset(),this.containers[b].containerCache.left=d.left,this.containers[b].containerCache.top=d.top,this.containers[b].containerCache.width=this.containers[b].element.outerWidth(),this.containers[b].containerCache.height=this.containers[b].element.outerHeight();return this},_createPlaceholder:function(c){c=c||this;var b,e=c.options;if(!e.placeholder||e.placeholder.constructor===String)b=e.placeholder,e.placeholder={element:function(){var e=
c.currentItem[0].nodeName.toLowerCase(),d=a("<"+e+">",c.document[0]).addClass(b||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");e==="tr"?c.currentItem.children().each(function(){a("<td>&#160;</td>",c.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(d)}):e==="img"&&d.attr("src",c.currentItem.attr("src"));b||d.css("visibility","hidden");return d},update:function(a,d){if(!b||e.forcePlaceholderSize)d.height()||d.height(c.currentItem.innerHeight()-
parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),d.width()||d.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10))}};c.placeholder=a(e.placeholder.element.call(c.element,c.currentItem));c.currentItem.after(c.placeholder);e.placeholder.update(c,c.placeholder)},_contactContainers:function(c){var b,e,f,g,h,i,k,l,p,j=e=null;for(b=this.containers.length-1;b>=0;b--)if(!a.contains(this.currentItem[0],
this.containers[b].element[0]))if(this._intersectsWith(this.containers[b].containerCache)){if(!e||!a.contains(this.containers[b].element[0],e.element[0]))e=this.containers[b],j=b}else if(this.containers[b].containerCache.over)this.containers[b]._trigger("out",c,this._uiHash(this)),this.containers[b].containerCache.over=0;if(e)if(this.containers.length===1){if(!this.containers[j].containerCache.over)this.containers[j]._trigger("over",c,this._uiHash(this)),this.containers[j].containerCache.over=1}else{b=
1E4;f=null;g=(p=e.floating||d(this.currentItem))?"left":"top";h=p?"width":"height";i=this.positionAbs[g]+this.offset.click[g];for(e=this.items.length-1;e>=0;e--)if(a.contains(this.containers[j].element[0],this.items[e].item[0])&&this.items[e].item[0]!==this.currentItem[0]&&(!p||this.positionAbs.top+this.offset.click.top>this.items[e].top&&this.positionAbs.top+this.offset.click.top<this.items[e].top+this.items[e].height))if(k=this.items[e].item.offset()[g],l=!1,Math.abs(k-i)>Math.abs(k+this.items[e][h]-
i)&&(l=!0,k+=this.items[e][h]),Math.abs(k-i)<b)b=Math.abs(k-i),f=this.items[e],this.direction=l?"up":"down";if((f||this.options.dropOnEmpty)&&this.currentContainer!==this.containers[j])f?this._rearrange(c,f,null,!0):this._rearrange(c,null,this.containers[j].element,!0),this._trigger("change",c,this._uiHash()),this.containers[j]._trigger("change",c,this._uiHash(this)),this.currentContainer=this.containers[j],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[j]._trigger("over",
c,this._uiHash(this)),this.containers[j].containerCache.over=1}},_createHelper:function(c){var b=this.options;c=a.isFunction(b.helper)?a(b.helper.apply(this.element[0],[c,this.currentItem])):b.helper==="clone"?this.currentItem.clone():this.currentItem;c.parents("body").length||a(b.appendTo!=="parent"?b.appendTo:this.currentItem[0].parentNode)[0].appendChild(c[0]);if(c[0]===this.currentItem[0])this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")};(!c[0].style.width||b.forceHelperSize)&&c.width(this.currentItem.width());(!c[0].style.height||b.forceHelperSize)&&c.height(this.currentItem.height());return c},_adjustOffsetFromHelper:function(c){typeof c==="string"&&(c=c.split(" "));a.isArray(c)&&(c={left:+c[0],top:+c[1]||0});if("left"in c)this.offset.click.left=c.left+this.margins.left;if("right"in c)this.offset.click.left=this.helperProportions.width-c.right+this.margins.left;
if("top"in c)this.offset.click.top=c.top+this.margins.top;if("bottom"in c)this.offset.click.top=this.helperProportions.height-c.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var c=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(c.left+=this.scrollParent.scrollLeft(),c.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&
this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)c={top:0,left:0};return{top:c.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:c.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var c,b,e;b=this.options;if(b.containment==="parent")b.containment=this.helper[0].parentNode;if(b.containment==="document"||b.containment==="window")this.containment=[0-this.offset.relative.left-
this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment))c=a(b.containment)[0],b=a(b.containment).offset(),e=a(c).css("overflow")!=="hidden",this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),
10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]},_convertPositionTo:function(c,b){if(!b)b=this.position;var e=c==="absolute"?1:-1,d=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(d[0].tagName);return{top:b.top+this.offset.relative.top*e+this.offset.parent.top*e-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():g?0:d.scrollTop())*e,left:b.left+this.offset.relative.left*
e+this.offset.parent.left*e-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():g?0:d.scrollLeft())*e}},_generatePosition:function(c){var b,e,d=this.options;e=c.pageX;b=c.pageY;var g=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(g[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]))this.offset.relative=
this._getRelativeOffset();this.originalPosition&&(this.containment&&(c.pageX-this.offset.click.left<this.containment[0]&&(e=this.containment[0]+this.offset.click.left),c.pageY-this.offset.click.top<this.containment[1]&&(b=this.containment[1]+this.offset.click.top),c.pageX-this.offset.click.left>this.containment[2]&&(e=this.containment[2]+this.offset.click.left),c.pageY-this.offset.click.top>this.containment[3]&&(b=this.containment[3]+this.offset.click.top)),d.grid&&(b=this.originalPageY+Math.round((b-
this.originalPageY)/d.grid[1])*d.grid[1],b=this.containment?b-this.offset.click.top>=this.containment[1]&&b-this.offset.click.top<=this.containment[3]?b:b-this.offset.click.top>=this.containment[1]?b-d.grid[1]:b+d.grid[1]:b,e=this.originalPageX+Math.round((e-this.originalPageX)/d.grid[0])*d.grid[0],e=this.containment?e-this.offset.click.left>=this.containment[0]&&e-this.offset.click.left<=this.containment[2]?e:e-this.offset.click.left>=this.containment[0]?e-d.grid[0]:e+d.grid[0]:e));return{top:b-
this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():h?0:g.scrollTop()),left:e-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():h?0:g.scrollLeft())}},_rearrange:function(a,b,e,d){e?e[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?b.item[0]:b.item[0].nextSibling);var g=this.counter=
this.counter?++this.counter:1;this._delay(function(){g===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){this.reverting=!1;var e,d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(e in this._storedCSS)if(this._storedCSS[e]==="auto"||this._storedCSS[e]==="static")this._storedCSS[e]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();
this.fromOutside&&!b&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!b&&d.push(function(a){this._trigger("update",a,this._uiHash())});this!==this.currentContainer&&!b&&(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,
this.currentContainer)),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(e=this.containers.length-1;e>=0;e--)if(b||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over)d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[e])),this.containers[e].containerCache.over=0;this.storedCursor&&
(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove());this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!b){this._trigger("beforeStop",a,this._uiHash());for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1}b||this._trigger("beforeStop",a,this._uiHash());
this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!==this.currentItem[0]&&this.helper.remove();this.helper=null;if(!b){for(e=0;e<d.length;e++)d[e].call(this,a);this._trigger("stop",a,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(c){var b=c||this;return{helper:b.helper,placeholder:b.placeholder||a([]),position:b.position,originalPosition:b.originalPosition,offset:b.positionAbs,
item:b.currentItem,sender:c?c.element:null}}})})(jQuery);
var swfobject=function(){function a(){if(!I&&document.getElementsByTagName("body")[0]){try{var a,b=A.createElement("span");b.style.display="none";a=A.getElementsByTagName("body")[0].appendChild(b);a.parentNode.removeChild(a)}catch(c){return}I=!0;a=B.length;for(b=0;b<a;b++)B[b]()}}function d(a){I?a():B[B.length]=a}function c(){var a=A.getElementsByTagName("body")[0],c=A.createElement(v);c.setAttribute("style","visibility: hidden;");c.setAttribute("type",y);var e=a.appendChild(c);if(e){var d=0;(function w(){if(typeof e.GetVariable!=
u)try{var f=e.GetVariable("$version");if(f)f=f.split(" ")[1].split(","),F.pv=[j(f[0]),j(f[1]),j(f[2])]}catch(g){F.pv=[8,0,0]}else if(d<10){d++;setTimeout(w,10);return}a.removeChild(c);e=null;b()})()}else b()}function b(){var a=E.length;if(a>0)for(var b=0;b<a;b++){var c=E[b].id,d=E[b].callbackFn,r={success:!1,id:c};if(F.pv[0]>0){var i=p(c);if(i)if(t(E[b].swfVersion)&&!(F.wk&&F.wk<312)){if(s(c,!0),d)r.success=!0,r.ref=e(c),r.id=c,d(r)}else if(E[b].expressInstall&&f()){r={};r.data=E[b].expressInstall;
r.width=i.getAttribute("width")||"0";r.height=i.getAttribute("height")||"0";if(i.getAttribute("class"))r.styleclass=i.getAttribute("class");if(i.getAttribute("align"))r.align=i.getAttribute("align");var n={};i=i.getElementsByTagName("param");for(var j=i.length,o=0;o<j;o++)i[o].getAttribute("name").toLowerCase()!="movie"&&(n[i[o].getAttribute("name")]=i[o].getAttribute("value"));g(r,n,c,d)}else c=i,F.ie&&c.readyState!=4?(c.style.display="none",n=A.createElement("div"),c.parentNode.insertBefore(n,c),
n.parentNode.replaceChild(h(c),n),k(c)):c.parentNode.replaceChild(h(c),c),d&&d(r)}else if(s(c,!0),d){if((c=e(c))&&typeof c.SetVariable!=u)r.success=!0,r.ref=c,r.id=c.id;d(r)}}}function e(a){var b=null;(a=p(a))&&a.nodeName.toUpperCase()==="OBJECT"&&(b=typeof a.SetVariable!==u?a:a.getElementsByTagName(v)[0]||a);return b}function f(){return!ba&&t("6.0.65")&&(F.win||F.mac)&&!(F.wk&&F.wk<312)}function g(a,b,c,e){var d=p(c);c=l(c)?c.id:c;ba=!0;R=e||null;T={success:!1,id:c};if(d){d.nodeName.toUpperCase()==
"OBJECT"?(K=h(d),S=null):(K=d,S=c);a.id=m;if(typeof a.width==u||!/%$/.test(a.width)&&j(a.width)<310)a.width="310";if(typeof a.height==u||!/%$/.test(a.height)&&j(a.height)<137)a.height="137";e=F.ie?"ActiveX":"PlugIn";e="MMredirectURL="+encodeURIComponent(r.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+e+"&MMdoctitle="+encodeURIComponent(A.title.slice(0,47)+" - Flash Player Installation");typeof b.flashvars!=u?b.flashvars+="&"+e:b.flashvars=e;if(F.ie&&d.readyState!=4)e=A.createElement("div"),
c+="SWFObjectNew",e.setAttribute("id",c),d.parentNode.insertBefore(e,d),d.style.display="none",k(d);i(a,b,c)}}function h(a){var b=A.createElement("div");if(F.win&&F.ie)b.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(v)[0])if(a=a.childNodes)for(var c=a.length,e=0;e<c;e++)!(a[e].nodeType==1&&a[e].nodeName=="PARAM")&&a[e].nodeType!=8&&b.appendChild(a[e].cloneNode(!0));return b}function i(a,b,c){var e,d=p(c);c=l(c)?c.id:c;if(F.wk&&F.wk<312)return e;if(d){e=F.ie?A.createElement("div"):A.createElement(v);
var f,g;if(typeof a.id==u)a.id=c;for(g in b)if(b.hasOwnProperty(g)&&g.toLowerCase()!=="movie"){c=e;var r=g,i=b[g],n=A.createElement("param");n.setAttribute("name",r);n.setAttribute("value",i);c.appendChild(n)}if(F.ie)b=a.data,e=e.innerHTML,g=A.createElement("div"),g.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+b+"'>"+e+"</object>",e=g.firstChild;for(f in a)a.hasOwnProperty(f)&&(b=f.toLowerCase(),b==="styleclass"?e.setAttribute("class",a[f]):
b!=="classid"&&b!=="data"&&e.setAttribute(f,a[f]));F.ie?J[J.length]=a.id:(e.setAttribute("type",y),e.setAttribute("data",a.data));d.parentNode.replaceChild(e,d)}return e}function k(a){var b=p(a);if(b&&b.nodeName.toUpperCase()=="OBJECT")F.ie?(b.style.display="none",function z(){if(b.readyState==4){for(var a in b)typeof b[a]=="function"&&(b[a]=null);b.parentNode.removeChild(b)}else setTimeout(z,10)}()):b.parentNode.removeChild(b)}function l(a){return a&&a.nodeType&&a.nodeType===1}function p(a){if(l(a))return a;
var b=null;try{b=A.getElementById(a)}catch(c){}return b}function j(a){return parseInt(a,10)}function q(a,b,c){a.attachEvent(b,c);P[P.length]=[a,b,c]}function t(a){a+="";var b=F.pv;a=a.split(".");a[0]=j(a[0]);a[1]=j(a[1])||0;a[2]=j(a[2])||0;return b[0]>a[0]||b[0]==a[0]&&b[1]>a[1]||b[0]==a[0]&&b[1]==a[1]&&b[2]>=a[2]?!0:!1}function n(a,b,c,e){var d=A.getElementsByTagName("head")[0];if(d){c=typeof c=="string"?c:"screen";e&&(ea=aa=null);if(!aa||ea!=c)e=A.createElement("style"),e.setAttribute("type","text/css"),
e.setAttribute("media",c),aa=d.appendChild(e),F.ie&&typeof A.styleSheets!=u&&A.styleSheets.length>0&&(aa=A.styleSheets[A.styleSheets.length-1]),ea=c;aa&&(typeof aa.addRule!=u?aa.addRule(a,b):typeof A.createTextNode!=u&&aa.appendChild(A.createTextNode(a+" {"+b+"}")))}}function s(a,b){if(ca){var c=b?"visible":"hidden",e=p(a);I&&e?e.style.visibility=c:typeof a==="string"&&n("#"+a,"visibility:"+c)}}function o(a){return/[\\\"<>\.;]/.exec(a)!=null&&typeof encodeURIComponent!=u?encodeURIComponent(a):a}var u=
"undefined",v="object",y="application/x-shockwave-flash",m="SWFObjectExprInst",r=window,A=document,D=navigator,Q=!1,B=[],E=[],J=[],P=[],K,S,R,T,I=!1,ba=!1,aa,ea,ca=!0,V=!1,F=function(){var a=typeof A.getElementById!=u&&typeof A.getElementsByTagName!=u&&typeof A.createElement!=u,b=D.userAgent.toLowerCase(),c=D.platform.toLowerCase(),e=c?/win/.test(c):/win/.test(b);c=c?/mac/.test(c):/mac/.test(b);b=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1;var d=D.appName==="Microsoft Internet Explorer",
f=[0,0,0],g=null;if(typeof D.plugins!=u&&typeof D.plugins["Shockwave Flash"]==v){if((g=D.plugins["Shockwave Flash"].description)&&typeof D.mimeTypes!=u&&D.mimeTypes[y]&&D.mimeTypes[y].enabledPlugin)Q=!0,d=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),f[0]=j(g.replace(/^(.*)\..*$/,"$1")),f[1]=j(g.replace(/^.*\.(.*)\s.*$/,"$1")),f[2]=/[a-zA-Z]/.test(g)?j(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0}else if(typeof r.ActiveXObject!=u)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i&&(g=i.GetVariable("$version")))d=
!0,g=g.split(" ")[1].split(","),f=[j(g[0]),j(g[1]),j(g[2])]}catch(n){}return{w3:a,pv:f,wk:b,ie:d,win:e,mac:c}}();(function(){F.w3&&((typeof A.readyState!=u&&(A.readyState==="complete"||A.readyState==="interactive")||typeof A.readyState==u&&(A.getElementsByTagName("body")[0]||A.body))&&a(),I||(typeof A.addEventListener!=u&&A.addEventListener("DOMContentLoaded",a,!1),F.ie&&(A.attachEvent("onreadystatechange",function x(){A.readyState=="complete"&&(A.detachEvent("onreadystatechange",x),a())}),r==top&&
function L(){if(!I){try{A.documentElement.doScroll("left")}catch(b){setTimeout(L,0);return}a()}}()),F.wk&&function z(){I||(/loaded|complete/.test(A.readyState)?a():setTimeout(z,0))}()))})();B[0]=function(){Q?c():b()};(function(){F.ie&&window.attachEvent("onunload",function(){for(var a=P.length,b=0;b<a;b++)P[b][0].detachEvent(P[b][1],P[b][2]);a=J.length;for(b=0;b<a;b++)k(J[b]);for(var c in F)F[c]=null;F=null;for(var e in swfobject)swfobject[e]=null;swfobject=null})})();return{registerObject:function(a,
b,c,e){if(F.w3&&a&&b){var d={};d.id=a;d.swfVersion=b;d.expressInstall=c;d.callbackFn=e;E[E.length]=d;s(a,!1)}else e&&e({success:!1,id:a})},getObjectById:function(a){if(F.w3)return e(a)},embedSWF:function(a,b,c,e,r,n,h,j,o,k){var A=l(b)?b.id:b,m={success:!1,id:A};F.w3&&!(F.wk&&F.wk<312)&&a&&b&&c&&e&&r?(s(A,!1),d(function(){c+="";e+="";var d={};if(o&&typeof o===v)for(var D in o)d[D]=o[D];d.data=a;d.width=c;d.height=e;D={};if(j&&typeof j===v)for(var l in j)D[l]=j[l];if(h&&typeof h===v)for(var p in h)if(h.hasOwnProperty(p)){l=
V?encodeURIComponent(p):p;var q=V?encodeURIComponent(h[p]):h[p];typeof D.flashvars!=u?D.flashvars+="&"+l+"="+q:D.flashvars=l+"="+q}if(t(r))p=i(d,D,b),d.id==A&&s(A,!0),m.success=!0,m.ref=p,m.id=p.id;else if(n&&f()){d.data=n;g(d,D,b,k);return}else s(A,!0);k&&k(m)})):k&&k(m)},switchOffAutoHideShow:function(){ca=!1},enableUriEncoding:function(a){V=typeof a===u?!0:a},ua:F,getFlashPlayerVersion:function(){return{major:F.pv[0],minor:F.pv[1],release:F.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,
b,c){if(F.w3)return i(a,b,c)},showExpressInstall:function(a,b,c,e){F.w3&&f()&&g(a,b,c,e)},removeSWF:function(a){F.w3&&k(a)},createCSS:function(a,b,c,e){F.w3&&n(a,b,c,e)},addDomLoadEvent:d,addLoadEvent:function(a){if(typeof r.addEventListener!=u)r.addEventListener("load",a,!1);else if(typeof A.addEventListener!=u)A.addEventListener("load",a,!1);else if(typeof r.attachEvent!=u)q(r,"onload",a);else if(typeof r.onload=="function"){var b=r.onload;r.onload=function(){b();a()}}else r.onload=a},getQueryParamValue:function(a){var b=
A.location.search||A.location.hash;if(b){/\?/.test(b)&&(b=b.split("?")[1]);if(a==null)return o(b);b=b.split("&");for(var c=0;c<b.length;c++)if(b[c].substring(0,b[c].indexOf("="))==a)return o(b[c].substring(b[c].indexOf("=")+1))}return""},expressInstallCallback:function(){if(ba){var a=p(m);if(a&&K){a.parentNode.replaceChild(K,a);if(S&&(s(S,!0),F.ie))K.style.display="block";R&&R(T)}ba=!1}},version:"2.3"}}();
(function(a){function d(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function b(){}function e(a){o(a);g(this,a)}function f(a){a=q(a);var b=a.year||0,c=a.month||0,e=a.week||0,d=a.day||0;this._milliseconds=+(a.millisecond||0)+(a.second||0)*1E3+(a.minute||0)*6E4+(a.hour||0)*36E5;this._days=+d+e*7;this._months=+c+b*12;this._data={};this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);if(b.hasOwnProperty("toString"))a.toString=
b.toString;if(b.hasOwnProperty("valueOf"))a.valueOf=b.valueOf;return a}function h(a){return a<0?Math.ceil(a):Math.floor(a)}function i(a,b,c){for(var e=Math.abs(a)+"";e.length<b;)e="0"+e;return(a>=0?c?"+":"":"-")+e}function k(a,b,c,e){var d=b._milliseconds,f=b._days;b=b._months;var g,r;d&&a._d.setTime(+a._d+d*c);if(f||b)g=a.minute(),r=a.hour();f&&a.date(a.date()+f*c);b&&a.month(a.month()+b*c);d&&!e&&z.updateOffset(a);if(f||b)a.minute(g),a.hour(r)}function l(a){return Object.prototype.toString.call(a)===
"[object Array]"}function p(a,b,c){var e=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),f=0,g;for(g=0;g<e;g++)(c&&a[g]!==b[g]||!c&&n(a[g])!==n(b[g]))&&f++;return f+d}function j(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Fa[a]||Ga[b]||b}return a}function q(a){var b={},c,e;for(e in a)a.hasOwnProperty(e)&&(c=j(e))&&(b[c]=a[e]);return b}function t(b){var c,e;if(b.indexOf("week")===0)c=7,e="day";else if(b.indexOf("month")===0)c=12,e="month";else return;z[b]=function(d,f){var g,r,
i=z.fn._lang[b],n=[];typeof d==="number"&&(f=d,d=a);r=function(a){a=z().utc().set(e,a);return i.call(z.fn._lang,a,d||"")};if(f!=null)return r(f);else{for(g=0;g<c;g++)n.push(r(g));return n}}}function n(a){a=+a;var b=0;a!==0&&isFinite(a)&&(b=a>=0?Math.floor(a):Math.ceil(a));return b}function s(a){return a%4===0&&a%100!==0||a%400===0}function o(a){var b;if(a._a&&a._pf.overflow===-2){b=a._a[U]<0||a._a[U]>11?U:a._a[C]<1||a._a[C]>(new Date(Date.UTC(a._a[N],a._a[U]+1,0))).getUTCDate()?C:a._a[M]<0||a._a[M]>
23?M:a._a[W]<0||a._a[W]>59?W:a._a[X]<0||a._a[X]>59?X:a._a[O]<0||a._a[O]>999?O:-1;if(a._pf._overflowDayOfYear&&(b<N||b>C))b=C;a._pf.overflow=b}}function u(a){a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function v(a){if(a._isValid==null&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict))a._isValid=
a._isValid&&a._pf.charsLeftOver===0&&a._pf.unusedTokens.length===0;return a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function m(a,b){return b._isUTC?z(a).zone(b._offset||0):z(a).local()}function r(a){var b=0,c,e,d,f,g=function(a){if(!Z[a]&&fa)try{require("./lang/"+a)}catch(b){}return Z[a]};if(!a)return z.fn._lang;if(!l(a)){if(e=g(a))return e;a=[a]}for(;b<a.length;){f=y(a[b]).split("-");c=f.length;for(d=(d=y(a[b+1]))?d.split("-"):null;c>0;){if(e=g(f.slice(0,c).join("-")))return e;
if(d&&d.length>=c&&p(f,d,!0)>=c-1)break;c--}b++}return z.fn._lang}function A(a){if(a.match(/\[[\s\S]/))return a.replace(/^\[|\]$/g,"");return a.replace(/\\/g,"")}function D(a){var b=a.match(ka),c,e;c=0;for(e=b.length;c<e;c++)b[c]=ia[b[c]]?ia[b[c]]:A(b[c]);return function(d){var f="";for(c=0;c<e;c++)f+=b[c]instanceof Function?b[c].call(d,a):b[c];return f}}function Q(a,b){if(!a.isValid())return a.lang().invalidDate();b=B(b,a.lang());wa[b]||(wa[b]=D(b));return wa[b](a)}function B(a,b){function c(a){return b.longDateFormat(a)||
a}var e=5;for(Y.lastIndex=0;e>=0&&Y.test(a);)a=a.replace(Y,c),Y.lastIndex=0,e-=1;return a}function E(a,b){var c=b._strict;switch(a){case "DDDD":return Aa;case "YYYY":case "GGGG":case "gggg":return c?Ha:ha;case "YYYYYY":case "YYYYY":case "GGGGG":case "ggggg":return c?Ia:ja;case "S":if(c)return la;case "SS":if(c)return ra;case "SSS":case "DDD":return c?Aa:oa;case "MMM":case "MMMM":case "dd":case "ddd":case "dddd":return sa;case "a":case "A":return r(b._l)._meridiemParse;case "X":return ma;case "Z":case "ZZ":return ga;
case "T":return na;case "SSSS":return ta;case "MM":case "DD":case "YY":case "GG":case "gg":case "HH":case "hh":case "mm":case "ss":case "ww":case "WW":return c?ra:pa;case "M":case "D":case "d":case "H":case "h":case "m":case "s":case "w":case "W":case "e":case "E":return c?la:pa;default:c=RegExp;var e;e=R(a.replace("\\","")).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");return c(e)}}function J(a){a=(a||"").match(ga)||[];a=((a[a.length-1]||[])+"").match(Ja)||["-",0,0];var b=+(a[1]*60)+n(a[2]);return a[0]===
"+"?-b:b}function P(a){var b,c=[],e,d,f,g,i;if(!a._d){e=K(a);if(a._w&&a._a[C]==null&&a._a[U]==null)b=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2E3+c:c:a._a[N]==null?z().weekYear():a._a[N]},d=a._w,d.GG!=null||d.W!=null||d.E!=null?b=ca(b(d.GG),d.W||1,d.E,4,1):(f=r(a._l),g=d.d!=null?ba(d.d,f):d.e!=null?parseInt(d.e,10)+f._week.dow:0,i=parseInt(d.w,10)||1,d.d!=null&&g<f._week.dow&&i++,b=ca(b(d.gg),i,g,f._week.doy,f._week.dow)),a._a[N]=b.year,a._dayOfYear=b.dayOfYear;if(a._dayOfYear){b=
a._a[N]==null?e[N]:a._a[N];if(a._dayOfYear>(s(b)?366:365))a._pf._overflowDayOfYear=!0;b=I(b,0,a._dayOfYear);a._a[U]=b.getUTCMonth();a._a[C]=b.getUTCDate()}for(b=0;b<3&&a._a[b]==null;++b)a._a[b]=c[b]=e[b];for(;b<7;b++)a._a[b]=c[b]=a._a[b]==null?b===2?1:0:a._a[b];c[M]+=n((a._tzm||0)/60);c[W]+=n((a._tzm||0)%60);a._d=(a._useUTC?I:T).apply(null,c)}}function K(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function S(a){a._a=
[];a._pf.empty=!0;var b=r(a._l),c=""+a._i,e,d,f,g,i=c.length,h=0;d=B(a._f,b).match(ka)||[];for(b=0;b<d.length;b++){f=d[b];if(e=(c.match(E(f,a))||[])[0])g=c.substr(0,c.indexOf(e)),g.length>0&&a._pf.unusedInput.push(g),c=c.slice(c.indexOf(e)+e.length),h+=e.length;if(ia[f]){e?a._pf.empty=!1:a._pf.unusedTokens.push(f);g=a;var j=void 0,k=g._a;switch(f){case "M":case "MM":e!=null&&(k[U]=n(e)-1);break;case "MMM":case "MMMM":j=r(g._l).monthsParse(e);j!=null?k[U]=j:g._pf.invalidMonth=e;break;case "D":case "DD":e!=
null&&(k[C]=n(e));break;case "DDD":case "DDDD":if(e!=null)g._dayOfYear=n(e);break;case "YY":k[N]=n(e)+(n(e)>68?1900:2E3);break;case "YYYY":case "YYYYY":case "YYYYYY":k[N]=n(e);break;case "a":case "A":g._isPm=r(g._l).isPM(e);break;case "H":case "HH":case "h":case "hh":k[M]=n(e);break;case "m":case "mm":k[W]=n(e);break;case "s":case "ss":k[X]=n(e);break;case "S":case "SS":case "SSS":case "SSSS":k[O]=n(("0."+e)*1E3);break;case "X":g._d=new Date(parseFloat(e)*1E3);break;case "Z":case "ZZ":g._useUTC=!0;
g._tzm=J(e);break;case "w":case "ww":case "W":case "WW":case "d":case "dd":case "ddd":case "dddd":case "e":case "E":f=f.substr(0,1);case "gg":case "gggg":case "GG":case "GGGG":case "GGGGG":if(f=f.substr(0,2),e)g._w=g._w||{},g._w[f]=e}}else a._strict&&!e&&a._pf.unusedTokens.push(f)}a._pf.charsLeftOver=i-h;c.length>0&&a._pf.unusedInput.push(c);a._isPm&&a._a[M]<12&&(a._a[M]+=12);a._isPm===!1&&a._a[M]===12&&(a._a[M]=0);P(a);o(a)}function R(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,
b,c,e,d){return b||c||e||d})}function T(a,b,c,e,d,f,g){b=new Date(a,b,c,e,d,f,g);a<1970&&b.setFullYear(a);return b}function I(a){var b=new Date(Date.UTC.apply(null,arguments));a<1970&&b.setUTCFullYear(a);return b}function ba(a,b){if(typeof a==="string")if(isNaN(a)){if(a=b.weekdaysParse(a),typeof a!=="number")return null}else a=parseInt(a,10);return a}function aa(a,b,c,e,d){return d.relativeTime(b||1,!!c,a,e)}function ea(a,b,c){b=c-b;c-=a.day();c>b&&(c-=7);c<b-7&&(c+=7);a=z(a).add("d",c);return{week:Math.ceil(a.dayOfYear()/
7),year:a.year()}}function ca(a,b,c,e,d){var f=(new Date(i(a,6,!0)+"-01-01")).getUTCDay();b=7*(b-1)+((c!=null?c:d)-d)+(d-f+(f>e?7:0))+1;return{year:b>0?a:a-1,dayOfYear:b>0?b:(s(a-1)?366:365)+b}}function V(b){var c=b._i,d=b._f;typeof b._pf==="undefined"&&u(b);if(c===null)return z.invalid({nullInput:!0});if(typeof c==="string")b._i=c=r().preparse(c);if(z.isMoment(c))b=g({},c),b._d=new Date(+c._d);else if(d)if(l(d)){c=b;var f,i,n,h;if(c._f.length===0)c._pf.invalidFormat=!0,c._d=new Date(NaN);else{for(d=
0;d<c._f.length;d++)if(h=0,f=g({},c),u(f),f._f=c._f[d],S(f),v(f)&&(h+=f._pf.charsLeftOver,h+=f._pf.unusedTokens.length*10,f._pf.score=h,n==null||h<n))n=h,i=f;g(c,i||f)}}else S(b);else if(f=b,i=f._i,n=qa.exec(i),i===a)f._d=new Date;else if(n)f._d=new Date(+n[1]);else if(typeof i==="string")if(n=f._i,c=Ka.exec(n)){f._pf.iso=!0;for(i=4;i>0;i--)if(c[i]){f._f=xa[i-1]+(c[6]||" ");break}for(i=0;i<4;i++)if(Ba[i][1].exec(n)){f._f+=Ba[i][0];break}n.match(ga)&&(f._f+="Z");S(f)}else f._d=new Date(n);else if(l(i))f._a=
i.slice(0),P(f);else if(Object.prototype.toString.call(i)==="[object Date]"||i instanceof Date)f._d=new Date(+i);else if(typeof i==="object"){if(!f._d)i=q(f._i),f._a=[i.year,i.month,i.day,i.hour,i.minute,i.second,i.millisecond],P(f)}else f._d=new Date(i);return new e(b)}function F(a,b){z.fn[a]=z.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return a!=null?(this._d["set"+c+b](a),z.updateOffset(this),this):this._d["get"+c+b]()}}function H(a){z.duration.fn[a]=function(){return this._data[a]}}function x(a,
b){z.duration.fn["as"+a]=function(){return+this/b}}function L(a){var b=!1,c=z;if(typeof ender==="undefined")a?(da.moment=function(){!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release."));return c.apply(null,arguments)},g(da.moment,c)):da.moment=z}for(var z,da=this,w=Math.round,G,N=0,U=1,C=2,M=3,W=4,X=5,O=6,Z={},fa=typeof module!=="undefined"&&module.exports&&typeof require!=="undefined",qa=/^\/?Date\((\-?\d+)/i,
ua=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,va=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ka=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Y=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,pa=/\d\d?/,oa=/\d{1,3}/,ha=/\d{1,4}/,ja=/[+\-]?\d{1,6}/,ta=/\d+/,sa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
ga=/Z|[\+\-]\d\d:?\d\d/gi,na=/T/i,ma=/[\+\-]?\d+(\.\d{1,3})?/,la=/\d/,ra=/\d\d/,Aa=/\d{3}/,Ha=/\d{4}/,Ia=/[+\-]?\d{6}/,Ka=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xa=["YYYY-MM-DD","GGGG-[W]WW","GGGG-[W]WW-E","YYYY-DDD"],Ba=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ja=/([\+\-]|\d\d)/gi,ya="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),
za={Milliseconds:1,Seconds:1E3,Minutes:6E4,Hours:36E5,Days:864E5,Months:2592E6,Years:31536E6},Fa={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ga={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},wa={},Ca="DDD w W M D d".split(" "),Da="M D H h m s w W".split(" "),ia={M:function(){return this.month()+1},
MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),
4)},YYYYY:function(){return i(this.year(),5)},YYYYYY:function(){var a=this.year();return(a>=0?"+":"-")+i(Math.abs(a),6)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),
this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return n(this.milliseconds()/100)},SS:function(){return i(n(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},SSSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");return b+
i(n(a/60),2)+":"+i(n(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";a<0&&(a=-a,b="-");return b+i(n(a/60),2)+i(n(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Ea=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Ca.length;)G=Ca.pop(),ia[G+"o"]=c(ia[G],G);for(;Da.length;)G=Da.pop(),ia[G+G]=d(ia[G],2);ia.DDDD=d(ia.DDD,3);g(b.prototype,{set:function(a){var b,c;for(c in a)b=a[c],
typeof b==="function"?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c;if(!this._monthsParse)this._monthsParse=[];for(b=0;b<12;b++)if(this._monthsParse[b]||(c=z.utc([2E3,b]),c="^"+this.months(c,"")+"|^"+
this.monthsShort(c,""),this._monthsParse[b]=RegExp(c.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,
c;if(!this._weekdaysParse)this._weekdaysParse=[];for(b=0;b<7;b++)if(this._weekdaysParse[b]||(c=z([2E3,1]).day(b),c="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=RegExp(c.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];!b&&this._longDateFormat[a.toUpperCase()]&&
(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b);return b},isPM:function(a){return(a+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return typeof c===
"function"?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,e){var d=this._relativeTime[c];return typeof d==="function"?d(a,b,c,e):d.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return typeof c==="function"?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",
a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ea(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});z=function(b,c,e,d){typeof e==="boolean"&&(d=e,e=a);return V({_i:b,_f:c,_l:e,_strict:d,_isUTC:!1})};z.utc=function(b,c,e,d){typeof e==="boolean"&&(d=e,e=a);return V({_useUTC:!0,_isUTC:!0,_l:e,_i:b,_f:c,_strict:d}).utc()};z.unix=function(a){return z(a*1E3)};
z.duration=function(a,b){var c=a,e=null,d;if(z.isDuration(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if(typeof a==="number")c={},b?c[b]=a:c.milliseconds=a;else if(e=ua.exec(a))d=e[1]==="-"?-1:1,c={y:0,d:n(e[C])*d,h:n(e[M])*d,m:n(e[W])*d,s:n(e[X])*d,ms:n(e[O])*d};else if(e=va.exec(a))d=e[1]==="-"?-1:1,c=function(a){a=a&&parseFloat(a.replace(",","."));return(isNaN(a)?0:a)*d},c={y:c(e[2]),M:c(e[3]),d:c(e[4]),h:c(e[5]),m:c(e[6]),s:c(e[7]),w:c(e[8])};e=new f(c);if(z.isDuration(a)&&a.hasOwnProperty("_lang"))e._lang=
a._lang;return e};z.version="2.5.0";z.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";z.updateOffset=function(){};z.lang=function(a,c){if(!a)return z.fn._lang._abbr;if(c){var e=y(a);c.abbr=e;Z[e]||(Z[e]=new b);Z[e].set(c)}else c===null?(delete Z[a],a="en"):Z[a]||r(a);return(z.duration.fn._lang=z.fn._lang=r(a))._abbr};z.langData=function(a){if(a&&a._lang&&a._lang._abbr)a=a._lang._abbr;return r(a)};z.isMoment=function(a){return a instanceof e};z.isDuration=function(a){return a instanceof f};for(G=Ea.length-1;G>=
0;--G)t(Ea[G]);z.normalizeUnits=function(a){return j(a)};z.invalid=function(a){var b=z.utc(NaN);a!=null?g(b._pf,a):b._pf.userInvalidated=!0;return b};z.parseZone=function(a){return z(a).parseZone()};g(z.fn=e.prototype,{clone:function(){return z(this)},valueOf:function(){return+this._d+(this._offset||0)*6E4},unix:function(){return Math.floor(+this/1E3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):
this._d},toISOString:function(){var a=z(this).utc();return 0<a.year()&&a.year()<=9999?Q(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):Q(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){return[this.year(),this.month(),this.date(),this.hours(),this.minutes(),this.seconds(),this.milliseconds()]},isValid:function(){return v(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&p(this._a,(this._isUTC?z.utc(this._a):z(this._a)).toArray())>0;return!1},parsingFlags:function(){return g({},this._pf)},
invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=!1;return this},format:function(a){a=Q(this,a||z.defaultFormat);return this.lang().postformat(a)},add:function(a,b){var c;c=typeof a==="string"?z.duration(+b,a):z.duration(a,b);k(this,c,1);return this},subtract:function(a,b){var c;c=typeof a==="string"?z.duration(+b,a):z.duration(a,b);k(this,c,-1);return this},diff:function(a,b,c){a=m(a,this);var e=(this.zone()-a.zone())*6E4,
d;b=j(b);b==="year"||b==="month"?(d=(this.daysInMonth()+a.daysInMonth())*432E5,e=(this.year()-a.year())*12+(this.month()-a.month()),e+=(this-z(this).startOf("month")-(a-z(a).startOf("month")))/d,e-=(this.zone()-z(this).startOf("month").zone()-(a.zone()-z(a).startOf("month").zone()))*6E4/d,b==="year"&&(e/=12)):(d=this-a,e=b==="second"?d/1E3:b==="minute"?d/6E4:b==="hour"?d/36E5:b==="day"?(d-e)/864E5:b==="week"?(d-e)/6048E5:d);return c?e:h(e)},from:function(a,b){return z.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},
fromNow:function(a){return this.from(z(),a)},calendar:function(){var a=this.diff(m(z(),this).startOf("day"),"days",!0);return this.format(this.lang().calendar(a<-6?"sameElse":a<-1?"lastWeek":a<0?"lastDay":a<1?"sameDay":a<2?"nextDay":a<7?"nextWeek":"sameElse",this))},isLeapYear:function(){return s(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return a!=
null?(a=ba(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b=this._isUTC?"UTC":"",c;if(a!=null){if(typeof a==="string"&&(a=this.lang().monthsParse(a),typeof a!=="number"))return this;c=this.date();this.date(1);this._d["set"+b+"Month"](a);this.date(Math.min(c,this.daysInMonth()));z.updateOffset(this);return this}else return this._d["get"+b+"Month"]()},startOf:function(a){a=j(a);switch(a){case "year":this.month(0);case "month":this.date(1);case "week":case "isoWeek":case "day":this.hours(0);
case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}a==="week"?this.weekday(0):a==="isoWeek"&&this.isoWeekday(1);return this},endOf:function(a){a=j(a);return this.startOf(a).add(a==="isoWeek"?"week":a,1).subtract("ms",1)},isAfter:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)>+z(a).startOf(b)},isBefore:function(a,b){b=typeof b!=="undefined"?b:"millisecond";return+this.clone().startOf(b)<+z(a).startOf(b)},isSame:function(a,
b){b=b||"ms";return+this.clone().startOf(b)===+m(a,this).startOf(b)},min:function(a){a=z.apply(null,arguments);return a<this?this:a},max:function(a){a=z.apply(null,arguments);return a>this?this:a},zone:function(a){var b=this._offset||0;if(a!=null)typeof a==="string"&&(a=J(a)),Math.abs(a)<16&&(a*=60),this._offset=a,this._isUTC=!0,b!==a&&k(this,z.duration(b-a,"m"),1,!0);else return this._isUTC?b:this._d.getTimezoneOffset();return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?
"Coordinated Universal Time":""},parseZone:function(){this._tzm?this.zone(this._tzm):typeof this._i==="string"&&this.zone(this._i);return this},hasAlignedHourOffset:function(a){a=a?z(a).zone():0;return(this.zone()-a)%60===0},daysInMonth:function(){var a=this.year(),b=this.month();return(new Date(Date.UTC(a,b+1,0))).getUTCDate()},dayOfYear:function(a){var b=w((z(this).startOf("day")-z(this).startOf("year"))/864E5)+1;return a==null?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+
1)/3)},weekYear:function(a){var b=ea(this,this.lang()._week.dow,this.lang()._week.doy).year;return a==null?b:this.add("y",a-b)},isoWeekYear:function(a){var b=ea(this,1,4).year;return a==null?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return a==null?b:this.add("d",(a-b)*7)},isoWeek:function(a){var b=ea(this,1,4).week;return a==null?b:this.add("d",(a-b)*7)},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return a==null?b:this.add("d",a-b)},isoWeekday:function(a){return a==
null?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){a=j(a);return this[a]()},set:function(a,b){a=j(a);if(typeof this[a]==="function")this[a](b);return this},lang:function(b){return b===a?this._lang:(this._lang=r(b),this)}});for(G=0;G<ya.length;G++)F(ya[G].toLowerCase().replace(/s$/,""),ya[G]);F("year","FullYear");z.fn.days=z.fn.day;z.fn.months=z.fn.month;z.fn.weeks=z.fn.week;z.fn.isoWeeks=z.fn.isoWeek;z.fn.toJSON=z.fn.toISOString;g(z.duration.fn=f.prototype,{_bubble:function(){var a=
this._milliseconds,b=this._days,c=this._months,e=this._data;e.milliseconds=a%1E3;a=h(a/1E3);e.seconds=a%60;a=h(a/60);e.minutes=a%60;a=h(a/60);e.hours=a%24;b+=h(a/24);e.days=b%30;c+=h(b/30);e.months=c%12;b=h(c/12);e.years=b},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864E5+this._months%12*2592E6+n(this._months/12)*31536E6},humanize:function(a){var b=+this,c;c=!a;var e=this.lang(),d=w(Math.abs(b)/1E3),f=w(d/60),g=w(f/60),r=w(g/24),i=w(r/365);d=
d<45&&["s",d]||f===1&&["m"]||f<45&&["mm",f]||g===1&&["h"]||g<22&&["hh",g]||r===1&&["d"]||r<=25&&["dd",r]||r<=45&&["M"]||r<345&&["MM",w(r/30)]||i===1&&["y"]||["yy",i];d[2]=c;d[3]=b>0;d[4]=e;c=aa.apply({},d);a&&(c=this.lang().pastFuture(b,c));return this.lang().postformat(c)},add:function(a,b){var c=z.duration(a,b);this._milliseconds+=c._milliseconds;this._days+=c._days;this._months+=c._months;this._bubble();return this},subtract:function(a,b){var c=z.duration(a,b);this._milliseconds-=c._milliseconds;
this._days-=c._days;this._months-=c._months;this._bubble();return this},get:function(a){a=j(a);return this[a.toLowerCase()+"s"]()},as:function(a){a=j(a);return this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:z.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),e=Math.abs(this.hours()),d=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1E3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+
"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(e||d||f?"T":"")+(e?e+"H":"")+(d?d+"M":"")+(f?f+"S":"")}});for(G in za)za.hasOwnProperty(G)&&(x(G,za[G]),H(G.toLowerCase()));x("Weeks",6048E5);z.duration.fn.asMonths=function(){return(+this-this.years()*31536E6)/2592E6+this.years()*12};z.lang("en",{ordinal:function(a){var b=a%10;b=n(a%100/10)===1?"th":b===1?"st":b===2?"nd":b===3?"rd":"th";return a+b}});fa?(module.exports=z,L(!0)):typeof define==="function"&&define.amd?define("moment",function(b,c,e){e.config&&
e.config()&&e.config().noGlobal!==!0&&L(e.config().noGlobal===a);return z}):L()}).call(this);
(function(a){function d(a){for(;a=a.parentNode;)if(a==document)return!0;return!1}function c(b,c){this.$element=a(b);this.options=c;this.enabled=!0;this.fixTitle()}var b=0;c.prototype={show:function(){if(d(this.$element[0])&&(!(typeof HTMLElement==="object"?this.$element instanceof HTMLElement:this.$element&&typeof this.$element==="object"&&this.$element.nodeType===1&&typeof this.$element.nodeName==="string")||this.$element.is(":visible"))){var c;if(this.enabled&&(c=this.getTitle())){var f=this.tip();
f.find(".tipsy-inner"+this.options.theme)[this.options.html?"html":"text"](c);f[0].className="tipsy"+this.options.theme;this.options.className&&f.addClass(typeof this.options.className=="function"?this.options.className.call(this.$element[0]):this.options.className);f.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);c=a.extend({},this.$element.offset());c=this.$element.parents("svg").size()>0?a.extend(c,this.$element[0].getBBox()):a.extend(c,{width:this.$element[0].offsetWidth||
0,height:this.$element[0].offsetHeight||0});var g=f[0].offsetWidth,h=f[0].offsetHeight,i=typeof this.options.gravity=="function"?this.options.gravity.call(this.$element[0]):this.options.gravity,k;switch(i.charAt(0)){case "n":k={top:c.top+c.height+this.options.offset,left:c.left+c.width/2-g/2};break;case "s":k={top:c.top-h-this.options.offset,left:c.left+c.width/2-g/2};break;case "e":k={top:c.top+c.height/2-h/2,left:c.left-g-this.options.offset};break;case "w":k={top:c.top+c.height/2-h/2,left:c.left+
c.width+this.options.offset}}if(i.length==2)k.left=i.charAt(1)=="w"?c.left+c.width/2-15:c.left+c.width/2-g+15;f.css(k).addClass("tipsy-"+i+this.options.theme);f.find(".tipsy-arrow"+this.options.theme)[0].className="tipsy-arrow"+this.options.theme+" tipsy-arrow-"+i.charAt(0)+this.options.theme;this.options.fade?(this.options.shadow&&a(".tipsy-inner").css({"box-shadow":"0px 0px "+this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")","-webkit-box-shadow":"0px 0px "+
this.options.shadowBlur+"px "+this.options.shadowSpread+"px rgba(0, 0, 0, "+this.options.shadowOpacity+")"}),f.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})):f.css({visibility:"visible",opacity:this.options.opacity});this.options.aria&&(k="tipsyuid"+b++,f.attr("id",k),this.$element.attr("aria-describedby",k))}}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){a(this).remove()}):this.tip().remove();this.options.aria&&this.$element.removeAttr("aria-describedby")},
fixTitle:function(){var a=this.$element;if(a.attr("title")||typeof a.attr("original-title")!="string")a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,c=this.options;this.fixTitle();typeof c.title=="string"?a=b.attr(c.title=="title"?"original-title":c.title):typeof c.title=="function"&&(a=c.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||c.fallback},tip:function(){if(!this.$tip)this.$tip=a('<div class="tipsy'+this.options.theme+
'"></div>').html('<div class="tipsy-arrow'+this.options.theme+'"></div><div class="tipsy-inner'+this.options.theme+'"></div>').attr("role","tooltip"),this.$tip.data("tipsy-pointee",this.$element[0]);return this.$tip},validate:function(){if(!this.$element[0].parentNode)this.hide(),this.options=this.$element=null},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};a.fn.tipsy=function(b){function f(d){var f=a.data(d,"tipsy");f||
(f=new c(d,a.fn.tipsy.elementOptions(d,b)),a.data(d,"tipsy",f));return f}function g(){if(a.fn.tipsy.enabled===!0){var c=f(this);c.hoverState="in";b.delayIn===0?c.show():(c.fixTitle(),setTimeout(function(){c.hoverState=="in"&&d(c.$element)&&c.show()},b.delayIn))}}function h(){var a=f(this);a.hoverState="out";b.delayOut===0?a.hide():setTimeout(function(){(a.hoverState=="out"||!a.$element||!a.$element.is(":visible"))&&a.hide()},b.delayOut)}a.fn.tipsy.enable();if(b===!0)return this.data("tipsy");else if(typeof b==
"string"){var i=this.data("tipsy");if(i)i[b]();return this}b=a.extend({},a.fn.tipsy.defaults,b);b.theme=b.theme&&b.theme!==""?"-"+b.theme:"";b.live||this.each(function(){f(this)});if(b.trigger!="manual"){i=b.trigger=="hover"?"mouseenter mouseover":"focus";var k=b.trigger=="hover"?"mouseleave mouseout":"blur";if(b.live&&b.live!==!0)a(this).on(i,b.live,g),a(this).on(k,b.live,h);else{if(b.live&&!a.live)throw"Since jQuery 1.9, pass selector as live argument. eg. $(document).tipsy({live: 'a.live'});";
var l=b.live?"live":"bind";this[l](i,g)[l](k,h)}}return this};a.fn.tipsy.defaults={aria:!1,className:null,delayIn:0,delayOut:0,fade:!1,shadow:!1,shadowBlur:8,shadowOpacity:1,shadowSpread:0,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:0.8,title:"title",trigger:"hover",theme:""};a.fn.tipsy.revalidate=function(){a(".tipsy").each(function(){var b=a.data(this,"tipsy-pointee");(!b||!d(b))&&a(this).remove()})};a.fn.tipsy.enable=function(){a.fn.tipsy.enabled=!0};a.fn.tipsy.disable=function(){a.fn.tipsy.enabled=
!1};a.fn.tipsy.elementOptions=function(b,c){return a.metadata?a.extend({},c,a(b).metadata()):c};a.fn.tipsy.autoNS=function(){return a(this).offset().top>a(document).scrollTop()+a(window).height()/2?"s":"n"};a.fn.tipsy.autoWE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"e":"w"};a.fn.tipsy.autoNWNE=function(){return a(this).offset().left>a(document).scrollLeft()+a(window).width()/2?"ne":"nw"};a.fn.tipsy.autoSWSE=function(){return a(this).offset().left>a(document).scrollLeft()+
a(window).width()/2?"se":"sw"};a.fn.tipsy.autoBounds=function(b,c,d){return function(){var h={ns:d[0],ew:d.length>1?d[1]:!1},i=a(document).scrollTop()+b,k=a(document).scrollLeft()+c,l=a(this);if(l.offset().top<i)h.ns="n";if(l.offset().left<k)h.ew="w";if(a(window).width()+a(document).scrollLeft()-l.offset().left<c)h.ew="e";if(a(window).height()+a(document).scrollTop()-l.offset().top<b)h.ns="s";return h.ns+(h.ew?h.ew:"")}}})(jQuery);
(function(a){function d(a){return typeof a=="object"?a:{top:a,left:a}}var c=a.scrollTo=function(b,c,d){return a(window).scrollTo(b,c,d)};c.defaults={axis:"xy",duration:parseFloat(a.fn.jquery)>=1.3?0:1,limit:!0};c.window=function(){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
b.compatMode=="BackCompat"?b.body:b.documentElement})};a.fn.scrollTo=function(b,e,f){typeof e=="object"&&(f=e,e=0);typeof f=="function"&&(f={onAfter:f});b=="max"&&(b=9E9);f=a.extend({},c.defaults,f);e=e||f.duration;f.queue=f.queue&&f.axis.length>1;f.queue&&(e/=2);f.offset=d(f.offset);f.over=d(f.over);return this._scrollable().each(function(){function g(a){i.animate(p,e,f.easing,a&&function(){a.call(this,k,f)})}if(b!=null){var h=this,i=a(h),k=b,l,p={},j=i.is("html,body");switch(typeof k){case "number":case "string":if(/^([+-]=?)?\d+(\.\d+)?(px|%)?$/.test(k)){k=
d(k);break}k=a(k,this);if(!k.length)return;case "object":if(k.is||k.style)l=(k=a(k)).offset()}a.each(f.axis.split(""),function(a,b){var e=b=="x"?"Left":"Top",d=e.toLowerCase(),o="scroll"+e,u=h[o],v=c.max(h,b);l?(p[o]=l[d]+(j?0:u-i.offset()[d]),f.margin&&(p[o]-=parseInt(k.css("margin"+e))||0,p[o]-=parseInt(k.css("border"+e+"Width"))||0),p[o]+=f.offset[d]||0,f.over[d]&&(p[o]+=k[b=="x"?"width":"height"]()*f.over[d])):(e=k[d],p[o]=e.slice&&e.slice(-1)=="%"?parseFloat(e)/100*v:e);f.limit&&/^\d+$/.test(p[o])&&
(p[o]=p[o]<=0?0:Math.min(p[o],v));!a&&f.queue&&(u!=p[o]&&g(f.onAfterFirst),delete p[o])});g(f.onAfter)}}).end()};c.max=function(b,c){var d=c=="x"?"Width":"Height",g="scroll"+d;if(!a(b).is("html,body"))return b[g]-a(b)[d.toLowerCase()]();d="client"+d;var h=b.ownerDocument.documentElement,i=b.ownerDocument.body;return Math.max(h[g],i[g])-Math.min(h[d],i[d])}})(jQuery);
(function(a){var d=".serialScroll",c=a.serialScroll=function(b){return a(window).serialScroll(b)};c.defaults={duration:1E3,axis:"x",event:"click",start:0,step:1,lock:!0,cycle:!0,constant:!0};a.fn.serialScroll=function(b){return this.each(function(){function e(a){a.data+=u;f(a,this)}function f(a,b){if(isNaN(b))b=a.data;var c,e=a.type,d=l.exclude?h().slice(0,-l.exclude):h(),f=d.length-1;c=d[b];var o=l.duration;e&&a.preventDefault();v&&(clearTimeout(m),m=setTimeout(g,l.interval));if(!c){c=b<0?0:f;if(u!==
c)b=c;else if(l.cycle)b=f-c;else return;c=d[b]}if(c&&!(l.lock&&n._scrollable().is(":animated")||e&&l.onBefore&&l.onBefore(a,c,n,h(),b)===!1))l.stop&&n._scrollable().stop(!0),l.constant&&(o=Math.abs(o/j*(u-b))),n.scrollTo(c,o,l),i("notify",b)}function g(){i("next")}function h(){return a(o,s)}function i(a){n.trigger(a+d,[].slice.call(arguments,1))}function k(a){if(!isNaN(a))return a;for(var b=h(),c;(c=b.index(a))===-1&&a!==s;)a=a.parentNode;return c}var l=a.extend({},c.defaults,b),p=l.event,j=l.step,
q=l.lazy,t=l.target?this:document,n=a(l.target||this,t),s=n[0],o=l.items,u=l.start,v=l.interval,y=l.navigation,m;if(s)q||(o=h()),(l.force||v)&&f({},u),a(l.prev||[],t).bind(p,-j,e),a(l.next||[],t).bind(p,j,e),s.ssbound||n.bind("prev"+d,-j,e).bind("next"+d,j,e).bind("goto"+d,f),v&&n.bind("start"+d,function(){v||(clearTimeout(m),v=!0,g())}).bind("stop"+d,function(){clearTimeout(m);v=!1}),n.bind("notify"+d,function(a,b){var c=k(b);c>-1&&(u=c)}),s.ssbound=!0,l.jump&&(q?n:h()).bind(p,function(a){f(a,k(a.target))}),
y&&(y=a(y,t).bind(p,function(a){a.data=Math.round(h().length/y.length)*y.index(this);f(a,this)}))})}})(jQuery);
(function(a){a.color={};a.color.make=function(c,b,e,d){var g={};g.r=c||0;g.g=b||0;g.b=e||0;g.a=d!=null?d:1;g.add=function(a,b){for(var c=0;c<a.length;++c)g[a.charAt(c)]+=b;return g.normalize()};g.scale=function(a,b){for(var c=0;c<a.length;++c)g[a.charAt(c)]*=b;return g.normalize()};g.toString=function(){return g.a>=1?"rgb("+[g.r,g.g,g.b].join(",")+")":"rgba("+[g.r,g.g,g.b,g.a].join(",")+")"};g.normalize=function(){function a(b,c,e){return c<b?b:c>e?e:c}g.r=a(0,parseInt(g.r),255);g.g=a(0,parseInt(g.g),
255);g.b=a(0,parseInt(g.b),255);g.a=a(0,g.a,1);return g};g.clone=function(){return a.color.make(g.r,g.b,g.g,g.a)};return g.normalize()};a.color.extract=function(c,b){var e;do{e=c.css(b).toLowerCase();if(e!=""&&e!="transparent")break;c=c.parent()}while(!a.nodeName(c.get(0),"body"));e=="rgba(0, 0, 0, 0)"&&(e="transparent");return a.color.parse(e)};a.color.parse=function(c){var b,e=a.color.make;if(b=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(c))return e(parseInt(b[1],10),
parseInt(b[2],10),parseInt(b[3],10));if(b=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3],10),parseFloat(b[4]));if(b=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(c))return e(parseFloat(b[1])*2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55);if(b=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(c))return e(parseFloat(b[1])*
2.55,parseFloat(b[2])*2.55,parseFloat(b[3])*2.55,parseFloat(b[4]));if(b=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(c))return e(parseInt(b[1],16),parseInt(b[2],16),parseInt(b[3],16));if(b=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(c))return e(parseInt(b[1]+b[1],16),parseInt(b[2]+b[2],16),parseInt(b[3]+b[3],16));c=a.trim(c).toLowerCase();return c=="transparent"?e(255,255,255,0):(b=d[c]||[0,0,0],e(b[0],b[1],b[2]))};var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,
0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,
211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(a){function d(b,c){var d=c.children("."+b)[0];if(d==null&&(d=document.createElement("canvas"),d.className=b,a(d).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!d.getContext))if(window.G_vmlCanvasManager)d=window.G_vmlCanvasManager.initElement(d);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
d;d=this.context=d.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1);this.resize(c.width(),c.height());this.textContainer=null;this.text={};this._textCache={}}function c(b,c,g,h){function i(a,b){b=[O].concat(b);for(var c=0;c<a.length;++c)a[c].apply(this,b)}function k(b){for(var c=[],e=0;e<b.length;++e){var d=a.extend(!0,{},x.series);b[e].data!=
null?(d.data=b[e].data,delete b[e].data,a.extend(!0,d,b[e]),b[e].data=d.data):d.data=b[e];c.push(d)}H=c;e=H.length;c=-1;for(b=0;b<H.length;++b)d=H[b].color,d!=null&&(e--,typeof d=="number"&&d>c&&(c=d));e<=c&&(e=c+1);c=[];var f=x.colors,g=f.length,r=0;for(b=0;b<e;b++)d=a.color.parse(f[b%g]||"#666"),b%g==0&&b&&(r=r>=0?r<0.5?-r-0.2:0:-r),c[b]=d.scale("rgb",1+r);for(b=e=0;b<H.length;++b){d=H[b];if(d.color==null)d.color=c[e].toString(),++e;else if(typeof d.color=="number")d.color=c[d.color].toString();
if(d.lines.show==null){var i;f=!0;for(i in d)if(d[i]&&d[i].show){f=!1;break}if(f)d.lines.show=!0}if(d.lines.zero==null)d.lines.zero=!!d.lines.fill;d.xaxis=q(N,l(d,"x"));d.yaxis=q(U,l(d,"y"))}t()}function l(a,b){var c=a[b+"axis"];if(typeof c=="object")c=c.n;typeof c!="number"&&(c=1);return c}function p(){return a.grep(N.concat(U),function(a){return a})}function j(a){var b={},c,e;for(c=0;c<N.length;++c)(e=N[c])&&e.used&&(b["x"+e.n]=e.c2p(a.left));for(c=0;c<U.length;++c)(e=U[c])&&e.used&&(b["y"+e.n]=
e.c2p(a.top));if(b.x1!==void 0)b.x=b.x1;if(b.y1!==void 0)b.y=b.y1;return b}function q(b,c){b[c-1]||(b[c-1]={n:c,direction:b==N?"x":"y",options:a.extend(!0,{},b==N?x.xaxis:x.yaxis)});return b[c-1]}function t(){function b(a,c,e){if(c<a.datamin&&c!=-d)a.datamin=c;if(e>a.datamax&&e!=d)a.datamax=e}var c=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,d=Number.MAX_VALUE,f,g,r,n,h,j,o,k,s,A,m,D;a.each(p(),function(a,b){b.datamin=c;b.datamax=e;b.used=!1});for(f=0;f<H.length;++f)h=H[f],h.datapoints={points:[]},
i(X.processRawData,[h,h.data,h.datapoints]);for(f=0;f<H.length;++f){h=H[f];m=h.data;D=h.datapoints.format;if(!D){D=[];D.push({x:!0,number:!0,required:!0});D.push({y:!0,number:!0,required:!0});if(h.bars.show||h.lines.show&&h.lines.fill)if(D.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(h.bars.show&&h.bars.zero||h.lines.show&&h.lines.zero)}),h.bars.horizontal)delete D[D.length-1].y,D[D.length-1].x=!0;h.datapoints.format=D}if(h.datapoints.pointsize==null){h.datapoints.pointsize=D.length;
o=h.datapoints.pointsize;j=h.datapoints.points;var l=h.lines.show&&h.lines.steps;h.xaxis.used=h.yaxis.used=!0;for(g=r=0;g<m.length;++g,r+=o){A=m[g];var u=A==null;if(!u)for(n=0;n<o;++n){k=A[n];if(s=D[n])if(s.number&&k!=null&&(k=+k,isNaN(k)?k=null:k==Infinity?k=d:k==-Infinity&&(k=-d)),k==null&&(s.required&&(u=!0),s.defaultValue!=null))k=s.defaultValue;j[r+n]=k}if(u)for(n=0;n<o;++n)k=j[r+n],k!=null&&(s=D[n],s.autoscale&&(s.x&&b(h.xaxis,k,k),s.y&&b(h.yaxis,k,k))),j[r+n]=null;else if(l&&r>0&&j[r-o]!=null&&
j[r-o]!=j[r]&&j[r-o+1]!=j[r+1]){for(n=0;n<o;++n)j[r+o+n]=j[r+n];j[r+1]=j[r-o+1];r+=o}}}}for(f=0;f<H.length;++f)h=H[f],i(X.processDatapoints,[h,h.datapoints]);for(f=0;f<H.length;++f){h=H[f];j=h.datapoints.points;o=h.datapoints.pointsize;D=h.datapoints.format;A=r=c;l=m=e;for(g=0;g<j.length;g+=o)if(j[g]!=null)for(n=0;n<o;++n)if(k=j[g+n],(s=D[n])&&!(s.autoscale===!1||k==d||k==-d))s.x&&(k<r&&(r=k),k>m&&(m=k)),s.y&&(k<A&&(A=k),k>l&&(l=k));if(h.bars.show){switch(h.bars.align){case "left":g=0;break;case "right":g=
-h.bars.barWidth;break;case "center":g=-h.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+h.bars.align);}h.bars.horizontal?(A+=g,l+=g+h.bars.barWidth):(r+=g,m+=g+h.bars.barWidth)}b(h.xaxis,r,m);b(h.yaxis,A,l)}a.each(p(),function(a,b){if(b.datamin==c)b.datamin=null;if(b.datamax==e)b.datamax=null})}function n(a){function b(a){return a}var c,e,d=a.options.transform||b,f=a.options.inverseTransform;a.direction=="x"?(c=a.scale=M/Math.abs(d(a.max)-d(a.min)),e=Math.min(d(a.max),d(a.min))):
(c=a.scale=W/Math.abs(d(a.max)-d(a.min)),c=-c,e=Math.max(d(a.max),d(a.min)));a.p2c=d==b?function(a){return(a-e)*c}:function(a){return(d(a)-e)*c};a.c2p=f?function(a){return f(e+a/c)}:function(a){return e+a/c}}function s(b){var c=b.labelWidth,e=b.labelHeight,d=b.options.position,f=b.options.tickLength,g=x.grid.axisMargin,r=x.grid.labelMargin,i=b.direction=="x"?N:U,n,h=a.grep(i,function(a){return a&&a.options.position==d&&a.reserveSpace});a.inArray(b,h)==h.length-1&&(g=0);f==null&&(f=a.grep(i,function(a){return a&&
a.reserveSpace}),f=(n=a.inArray(b,f)==0)?"full":5);isNaN(+f)||(r+=+f);b.direction=="x"?(e+=r,d=="bottom"?(C.bottom+=e+g,b.box={top:L.height-C.bottom,height:e}):(b.box={top:C.top+g,height:e},C.top+=e+g)):(c+=r,d=="left"?(b.box={left:C.left+g,width:c},C.left+=c+g):(C.right+=c+g,b.box={left:L.width-C.right,width:c}));b.position=d;b.tickLength=f;b.box.padding=r;b.innermost=n}function o(){var b=x.grid.minBorderMargin,c={x:0,y:0},e;if(b==null)for(e=b=0;e<H.length;++e)b=Math.max(b,2*(H[e].points.radius+
H[e].points.lineWidth/2));c.x=c.y=Math.ceil(b);a.each(p(),function(a,b){var e=b.direction;b.reserveSpace&&(c[e]=Math.ceil(Math.max(c[e],(e=="x"?b.labelWidth:b.labelHeight)/2)))});C.left=Math.max(c.x,C.left);C.right=Math.max(c.x,C.right);C.top=Math.max(c.y,C.top);C.bottom=Math.max(c.y,C.bottom)}function u(){var b,c=p(),e=x.grid.show;for(b in C){var d=x.grid.margin||0;C[b]=typeof d=="number"?d:d[b]||0}i(X.processOffset,[C]);for(b in C)C[b]+=typeof x.grid.borderWidth=="object"?e?x.grid.borderWidth[b]:
0:e?x.grid.borderWidth:0;a.each(c,function(a,b){b.show=b.options.show;if(b.show==null)b.show=b.used;b.reserveSpace=b.show||b.options.reserveSpace;var c=b.options,e=+(c.min!=null?c.min:b.datamin),d=+(c.max!=null?c.max:b.datamax),f=d-e;if(f==0){if(f=d==0?1:0.01,c.min==null&&(e-=f),c.max==null||c.min!=null)d+=f}else{var g=c.autoscaleMargin;g!=null&&(c.min==null&&(e-=f*g,e<0&&b.datamin!=null&&b.datamin>=0&&(e=0)),c.max==null&&(d+=f*g,d>0&&b.datamax!=null&&b.datamax<=0&&(d=0)))}b.min=e;b.max=d});if(e){d=
a.grep(c,function(a){return a.reserveSpace});a.each(d,function(b,c){v(c);var e=c.options.ticks,d=[];e==null||typeof e=="number"&&e>0?d=c.tickGenerator(c):e&&(d=a.isFunction(e)?e(c):e);var f;c.ticks=[];for(e=0;e<d.length;++e){var g=null,r=d[e];typeof r=="object"?(f=+r[0],r.length>1&&(g=r[1])):f=+r;g==null&&(g=c.tickFormatter(f,c));isNaN(f)||c.ticks.push({v:f,label:g})}d=c.ticks;if(c.options.autoscaleMargin&&d.length>0){if(c.options.min==null)c.min=Math.min(c.min,d[0].v);if(c.options.max==null&&d.length>
1)c.max=Math.max(c.max,d[d.length-1].v)}d=c.options;e=c.ticks||[];f=d.labelWidth||0;g=d.labelHeight||0;r=f||c.direction=="x"?Math.floor(L.width/(e.length||1)):null;legacyStyles=c.direction+"Axis "+c.direction+c.n+"Axis";layer="flot-"+c.direction+"-axis flot-"+c.direction+c.n+"-axis "+legacyStyles;font=d.font||"flot-tick-label tickLabel";for(var i=0;i<e.length;++i){var n=e[i];n.label&&(n=L.getTextInfo(layer,n.label,font,null,r),f=Math.max(f,n.width),g=Math.max(g,n.height))}c.labelWidth=d.labelWidth||
f;c.labelHeight=d.labelHeight||g});for(b=d.length-1;b>=0;--b)s(d[b]);o();a.each(d,function(a,b){b.direction=="x"?(b.box.left=C.left-b.labelWidth/2,b.box.width=L.width-C.left-C.right+b.labelWidth):(b.box.top=C.top-b.labelHeight/2,b.box.height=L.height-C.bottom-C.top+b.labelHeight)})}M=L.width-C.left-C.right;W=L.height-C.bottom-C.top;a.each(c,function(a,b){n(b)});e&&A();P()}function v(b){var c=b.options,e=(b.max-b.min)/(typeof c.ticks=="number"&&c.ticks>0?c.ticks:0.3*Math.sqrt(b.direction=="x"?L.width:
L.height)),d=-Math.floor(Math.log(e)/Math.LN10),f=c.tickDecimals;f!=null&&d>f&&(d=f);var g=Math.pow(10,-d),r=e/g,i;if(r<1.5)i=1;else if(r<3){if(i=2,r>2.25&&(f==null||d+1<=f))i=2.5,++d}else i=r<7.5?5:10;i*=g;if(c.minTickSize!=null&&i<c.minTickSize)i=c.minTickSize;b.delta=e;b.tickDecimals=Math.max(0,f!=null?f:d);b.tickSize=c.tickSize||i;if(c.mode=="time"&&!b.tickGenerator)throw Error("Time mode requires the flot.time plugin.");if(!b.tickGenerator)b.tickGenerator=function(a){var b=[],c=a.tickSize*Math.floor(a.min/
a.tickSize),e=0,d=Number.NaN,f;do f=d,d=c+e*a.tickSize,b.push(d),++e;while(d<a.max&&d!=f);return b},b.tickFormatter=function(a,b){var c=b.tickDecimals?Math.pow(10,b.tickDecimals):1,e=""+Math.round(a*c)/c;if(b.tickDecimals!=null){var d=e.indexOf(".");d=d==-1?0:e.length-d-1;if(d<b.tickDecimals)return(d?e:e+".")+(""+c).substr(1,b.tickDecimals-d)}return e};if(a.isFunction(c.tickFormatter))b.tickFormatter=function(a,b){return""+c.tickFormatter(a,b)};if(c.alignTicksWithAxis!=null){var n=(b.direction=="x"?
N:U)[c.alignTicksWithAxis-1];if(n&&n.used&&n!=b){e=b.tickGenerator(b);if(e.length>0){if(c.min==null)b.min=Math.min(b.min,e[0]);if(c.max==null&&e.length>1)b.max=Math.max(b.max,e[e.length-1])}b.tickGenerator=function(a){var b=[],c,e;for(e=0;e<n.ticks.length;++e)c=(n.ticks[e].v-n.min)/(n.max-n.min),c=a.min+c*(a.max-a.min),b.push(c);return b};if(!b.mode&&c.tickDecimals==null&&(e=Math.max(0,-Math.floor(Math.log(b.delta)/Math.LN10)+1),d=b.tickGenerator(b),!(d.length>1&&/\..*0$/.test((d[1]-d[0]).toFixed(e)))))b.tickDecimals=
e}}}function y(){L.clear();i(X.drawBackground,[w]);var a=x.grid;if(a.show&&a.backgroundColor)w.save(),w.translate(C.left,C.top),w.fillStyle=F(x.grid.backgroundColor,W,0,"rgba(255, 255, 255, 0)"),w.fillRect(0,0,M,W),w.restore();a.show&&!a.aboveData&&r();for(var b=0;b<H.length;++b){i(X.drawSeries,[w,H[b]]);var c=H[b];c.lines.show&&D(c);c.bars.show&&E(c);c.points.show&&Q(c)}i(X.draw,[w]);a.show&&a.aboveData&&r();L.render();I()}function m(a,b){for(var c,e,d,f,g=p(),r=0;r<g.length;++r)if(c=g[r],c.direction==
b&&(f=b+c.n+"axis",!a[f]&&c.n==1&&(f=b+"axis"),a[f])){e=a[f].from;d=a[f].to;break}a[f]||(c=b=="x"?N[0]:U[0],e=a[b+"1"],d=a[b+"2"]);e!=null&&d!=null&&e>d&&(f=e,e=d,d=f);return{from:e,to:d,axis:c}}function r(){var b,c,e;w.save();w.translate(C.left,C.top);if(e=x.grid.markings){if(a.isFunction(e))c=O.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,e=e(c);for(b=0;b<e.length;++b){c=e[b];var d=m(c,"x"),f=m(c,"y");if(d.from==null)d.from=d.axis.min;if(d.to==null)d.to=
d.axis.max;if(f.from==null)f.from=f.axis.min;if(f.to==null)f.to=f.axis.max;if(!(d.to<d.axis.min||d.from>d.axis.max||f.to<f.axis.min||f.from>f.axis.max))if(d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),!(d.from==d.to&&f.from==f.to))d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),d.from==d.to||f.from==f.to?(w.beginPath(),w.strokeStyle=c.color||x.grid.markingsColor,w.lineWidth=
c.lineWidth||x.grid.markingsLineWidth,w.moveTo(d.from,f.from),w.lineTo(d.to,f.to),w.stroke()):(w.fillStyle=c.color||x.grid.markingsColor,w.fillRect(d.from,f.to,d.to-d.from,f.from-f.to))}}c=p();e=x.grid.borderWidth;for(d=0;d<c.length;++d){f=c[d];b=f.box;var g=f.tickLength,r,i,n,h;if(f.show&&f.ticks.length!=0){w.lineWidth=1;f.direction=="x"?(r=0,i=g=="full"?f.position=="top"?0:W:b.top-C.top+(f.position=="top"?b.height:0)):(i=0,r=g=="full"?f.position=="left"?0:M:b.left-C.left+(f.position=="left"?b.width:
0));if(!f.innermost)w.strokeStyle=f.options.color,w.beginPath(),n=h=0,f.direction=="x"?n=M+1:h=W+1,w.lineWidth==1&&(f.direction=="x"?i=Math.floor(i)+0.5:r=Math.floor(r)+0.5),w.moveTo(r,i),w.lineTo(r+n,i+h),w.stroke();w.strokeStyle=f.options.tickColor;w.beginPath();for(b=0;b<f.ticks.length;++b){var j=f.ticks[b].v;n=h=0;if(!isNaN(j)&&!(j<f.min||j>f.max||g=="full"&&(typeof e=="object"&&e[f.position]>0||e>0)&&(j==f.min||j==f.max)))f.direction=="x"?(r=f.p2c(j),h=g=="full"?-W:g,f.position=="top"&&(h=-h)):
(i=f.p2c(j),n=g=="full"?-M:g,f.position=="left"&&(n=-n)),w.lineWidth==1&&(f.direction=="x"?r=Math.floor(r)+0.5:i=Math.floor(i)+0.5),w.moveTo(r,i),w.lineTo(r+n,i+h)}w.stroke()}}if(e)if(b=x.grid.borderColor,typeof e=="object"||typeof b=="object"){typeof e!=="object"&&(e={top:e,right:e,bottom:e,left:e});typeof b!=="object"&&(b={top:b,right:b,bottom:b,left:b});if(e.top>0)w.strokeStyle=b.top,w.lineWidth=e.top,w.beginPath(),w.moveTo(0-e.left,0-e.top/2),w.lineTo(M,0-e.top/2),w.stroke();if(e.right>0)w.strokeStyle=
b.right,w.lineWidth=e.right,w.beginPath(),w.moveTo(M+e.right/2,0-e.top),w.lineTo(M+e.right/2,W),w.stroke();if(e.bottom>0)w.strokeStyle=b.bottom,w.lineWidth=e.bottom,w.beginPath(),w.moveTo(M+e.right,W+e.bottom/2),w.lineTo(0,W+e.bottom/2),w.stroke();if(e.left>0)w.strokeStyle=b.left,w.lineWidth=e.left,w.beginPath(),w.moveTo(0-e.left/2,W+e.bottom),w.lineTo(0-e.left/2,0),w.stroke()}else w.lineWidth=e,w.strokeStyle=x.grid.borderColor,w.strokeRect(-e/2,-e/2,M+e,W+e);w.restore()}function A(){a.each(p(),function(a,
b){if(b.show&&b.ticks.length!=0){var c=b.box,e="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+(b.direction+"Axis "+b.direction+b.n+"Axis"),d=b.options.font||"flot-tick-label tickLabel",f,g,r,i,n;L.removeText(e);for(var h=0;h<b.ticks.length;++h)if(f=b.ticks[h],f.label&&!(f.v<b.min||f.v>b.max))b.direction=="x"?(i="center",g=C.left+b.p2c(f.v),b.position=="bottom"?r=c.top+c.padding:(r=c.top+c.height-c.padding,n="bottom")):(n="middle",r=C.top+b.p2c(f.v),b.position=="left"?(g=c.left+c.width-
c.padding,i="right"):g=c.left+c.padding),L.addText(e,g,r,f.label,d,null,null,i,n)}})}function D(a){function b(a,c,e,d,f){var g=a.points;a=a.pointsize;var r=null,i=null;w.beginPath();for(var n=a;n<g.length;n+=a){var h=g[n-a],j=g[n-a+1],o=g[n],k=g[n+1];if(!(h==null||o==null)){if(j<=k&&j<f.min){if(k<f.min)continue;h=(f.min-j)/(k-j)*(o-h)+h;j=f.min}else if(k<=j&&k<f.min){if(j<f.min)continue;o=(f.min-j)/(k-j)*(o-h)+h;k=f.min}if(j>=k&&j>f.max){if(k>f.max)continue;h=(f.max-j)/(k-j)*(o-h)+h;j=f.max}else if(k>=
j&&k>f.max){if(j>f.max)continue;o=(f.max-j)/(k-j)*(o-h)+h;k=f.max}if(h<=o&&h<d.min){if(o<d.min)continue;j=(d.min-h)/(o-h)*(k-j)+j;h=d.min}else if(o<=h&&o<d.min){if(h<d.min)continue;k=(d.min-h)/(o-h)*(k-j)+j;o=d.min}if(h>=o&&h>d.max){if(o>d.max)continue;j=(d.max-h)/(o-h)*(k-j)+j;h=d.max}else if(o>=h&&o>d.max){if(h>d.max)continue;k=(d.max-h)/(o-h)*(k-j)+j;o=d.max}(h!=r||j!=i)&&w.moveTo(d.p2c(h)+c,f.p2c(j)+e);r=o;i=k;w.lineTo(d.p2c(o)+c,f.p2c(k)+e)}}w.stroke()}function c(a,b,e){var d=a.points;a=a.pointsize;
for(var f=Math.min(Math.max(0,e.min),e.max),g=0,r=!1,i=1,h=0,n=0;;){if(a>0&&g>d.length+a)break;g+=a;var j=d[g-a],o=d[g-a+i],k=d[g],s=d[g+i];if(r){if(a>0&&j!=null&&k==null){n=g;a=-a;i=2;continue}if(a<0&&g==h+a){w.fill();r=!1;a=-a;i=1;g=h=n+a;continue}}if(!(j==null||k==null)){if(j<=k&&j<b.min){if(k<b.min)continue;o=(b.min-j)/(k-j)*(s-o)+o;j=b.min}else if(k<=j&&k<b.min){if(j<b.min)continue;s=(b.min-j)/(k-j)*(s-o)+o;k=b.min}if(j>=k&&j>b.max){if(k>b.max)continue;o=(b.max-j)/(k-j)*(s-o)+o;j=b.max}else if(k>=
j&&k>b.max){if(j>b.max)continue;s=(b.max-j)/(k-j)*(s-o)+o;k=b.max}r||(w.beginPath(),w.moveTo(b.p2c(j),e.p2c(f)),r=!0);if(o>=e.max&&s>=e.max)w.lineTo(b.p2c(j),e.p2c(e.max)),w.lineTo(b.p2c(k),e.p2c(e.max));else if(o<=e.min&&s<=e.min)w.lineTo(b.p2c(j),e.p2c(e.min)),w.lineTo(b.p2c(k),e.p2c(e.min));else{var A=j,m=k;if(o<=s&&o<e.min&&s>=e.min)j=(e.min-o)/(s-o)*(k-j)+j,o=e.min;else if(s<=o&&s<e.min&&o>=e.min)k=(e.min-o)/(s-o)*(k-j)+j,s=e.min;if(o>=s&&o>e.max&&s<=e.max)j=(e.max-o)/(s-o)*(k-j)+j,o=e.max;else if(s>=
o&&s>e.max&&o<=e.max)k=(e.max-o)/(s-o)*(k-j)+j,s=e.max;j!=A&&w.lineTo(b.p2c(A),e.p2c(o));w.lineTo(b.p2c(j),e.p2c(o));w.lineTo(b.p2c(k),e.p2c(s));k!=m&&(w.lineTo(b.p2c(k),e.p2c(s)),w.lineTo(b.p2c(m),e.p2c(s)))}}}}w.save();w.translate(C.left,C.top);w.lineJoin="round";var e=a.lines.lineWidth,d=a.shadowSize;if(e>0&&d>0){w.lineWidth=d;w.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(e/2+d/2),Math.cos(f)*(e/2+d/2),a.xaxis,a.yaxis);w.lineWidth=d/2;b(a.datapoints,Math.sin(f)*(e/
2+d/4),Math.cos(f)*(e/2+d/4),a.xaxis,a.yaxis)}w.lineWidth=e;w.strokeStyle=a.color;if(d=J(a.lines,a.color,0,W))w.fillStyle=d,c(a.datapoints,a.xaxis,a.yaxis);e>0&&b(a.datapoints,0,0,a.xaxis,a.yaxis);w.restore()}function Q(a){function b(a,c,e,d,f,g,r,i){var h=a.points;a=a.pointsize;for(var n=0;n<h.length;n+=a){var j=h[n],o=h[n+1];if(!(j==null||j<g.min||j>g.max||o<r.min||o>r.max)){w.beginPath();j=g.p2c(j);o=r.p2c(o)+d;i=="circle"?w.arc(j,o,c,0,f?Math.PI:Math.PI*2,!1):i(w,j,o,c,f);w.closePath();if(e)w.fillStyle=
e,w.fill();w.stroke()}}}w.save();w.translate(C.left,C.top);var c=a.points.lineWidth,e=a.shadowSize,d=a.points.radius,f=a.points.symbol;c==0&&(c=1.0E-4);if(c>0&&e>0)e/=2,w.lineWidth=e,w.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,d,null,e+e/2,!0,a.xaxis,a.yaxis,f),w.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,d,null,e/2,!0,a.xaxis,a.yaxis,f);w.lineWidth=c;w.strokeStyle=a.color;b(a.datapoints,d,J(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);w.restore()}function B(a,b,c,e,d,f,g,r,i,h,n,j){var o,k,s,A;
n?(A=k=s=!0,o=!1,n=c,c=b+e,d=b+d,a<n&&(b=a,a=n,n=b,o=!0,k=!1)):(o=k=s=!0,A=!1,n=a+e,a+=d,d=c,c=b,c<d&&(b=c,c=d,d=b,A=!0,s=!1));if(!(a<r.min||n>r.max||c<i.min||d>i.max)){if(n<r.min)n=r.min,o=!1;if(a>r.max)a=r.max,k=!1;if(d<i.min)d=i.min,A=!1;if(c>i.max)c=i.max,s=!1;n=r.p2c(n);d=i.p2c(d);a=r.p2c(a);c=i.p2c(c);if(g)h.beginPath(),h.moveTo(n,d),h.lineTo(n,c),h.lineTo(a,c),h.lineTo(a,d),h.fillStyle=g(d,c),h.fill();if(j>0&&(o||k||s||A))h.beginPath(),h.moveTo(n,d+f),o?h.lineTo(n,c+f):h.moveTo(n,c+f),s?h.lineTo(a,
c+f):h.moveTo(a,c+f),k?h.lineTo(a,d+f):h.moveTo(a,d+f),A?h.lineTo(n,d+f):h.moveTo(n,d+f),h.stroke()}}function E(a){w.save();w.translate(C.left,C.top);w.lineWidth=a.bars.lineWidth;w.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;case "center":b=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(b,c,e,d,f,g,r){var i=b.points;b=b.pointsize;for(var h=0;h<i.length;h+=b)i[h]!=null&&B(i[h],i[h+1],i[h+
2],c,e,d,f,g,r,w,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?function(b,c){return J(a.bars,a.color,b,c)}:null,a.xaxis,a.yaxis);w.restore()}function J(b,c,e,d){var f=b.fill;if(!f)return null;if(b.fillColor)return F(b.fillColor,e,d,c);b=a.color.parse(c);b.a=typeof f=="number"?f:0.4;b.normalize();return b.toString()}function P(){b.find(".legend").remove();if(x.legend.show){for(var c=[],d=[],f=!1,g=x.legend.labelFormatter,r,i,h=0;h<H.length;++h)r=H[h],r.label&&
(i=g?g(r.label,r):r.label)&&d.push({label:i,color:r.color});if(x.legend.sorted)if(a.isFunction(x.legend.sorted))d.sort(x.legend.sorted);else if(x.legend.sorted=="reverse")d.reverse();else{var n=x.legend.sorted!="descending";d.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=n?1:-1})}for(h=0;h<d.length;++h)g=d[h],h%x.legend.noColumns==0&&(f&&c.push("</tr>"),c.push("<tr>"),f=!0),c.push('<td class="legendColorBox"><div style="border:1px solid '+x.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
g.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g.label+"</td>");f&&c.push("</tr>");if(c.length!=0)if(d='<table style="font-size:smaller;color:'+x.grid.color+'">'+c.join("")+"</table>",x.legend.container!=null)a(x.legend.container).html(d);else if(c="",f=x.legend.position,h=x.legend.margin,h[0]==null&&(h=[h,h]),f.charAt(0)=="n"?c+="top:"+(h[1]+C.top)+"px;":f.charAt(0)=="s"&&(c+="bottom:"+(h[1]+C.bottom)+"px;"),f.charAt(1)=="e"?c+="right:"+(h[0]+C.right)+"px;":f.charAt(1)=="w"&&
(c+="left:"+(h[0]+C.left)+"px;"),d=a('<div class="legend">'+d.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(b),x.legend.backgroundOpacity!=0){f=x.legend.backgroundColor;if(f==null)f=(f=x.grid.backgroundColor)&&typeof f=="string"?a.color.parse(f):a.color.extract(d,"background-color"),f.a=1,f=f.toString();h=d.children();a('<div style="position:absolute;width:'+h.width()+"px;height:"+h.height()+"px;"+c+"background-color:"+f+';"> </div>').prependTo(d).css("opacity",x.legend.backgroundOpacity)}}}
function K(a){x.grid.hoverable&&T("plothover",a,function(a){return a.hoverable!=!1})}function S(a){x.grid.hoverable&&T("plothover",a,function(){return!1})}function R(a){T("plotclick",a,function(a){return a.clickable!=!1})}function T(a,c,d){var f=da.offset(),g=c.pageX-f.left-C.left,r=c.pageY-f.top-C.top,i=j({left:g,top:r});i.pageX=c.pageX;i.pageY=c.pageY;c=x.grid.mouseActiveRadius;var h=c*c+1,n=null,o,k,s;for(o=H.length-1;o>=0;--o)if(d(H[o])){var A=H[o],m=A.xaxis,D=A.yaxis,l=A.datapoints.points,u=
m.c2p(g),p=D.c2p(r),q=c/m.scale,Q=c/D.scale;s=A.datapoints.pointsize;if(m.options.inverseTransform)q=Number.MAX_VALUE;if(D.options.inverseTransform)Q=Number.MAX_VALUE;if(A.lines.show||A.points.show)for(k=0;k<l.length;k+=s){var E=l[k],v=l[k+1];if(E!=null&&!(E-u>q||E-u<-q||v-p>Q||v-p<-Q))E=Math.abs(m.p2c(E)-g),v=Math.abs(D.p2c(v)-r),v=E*E+v*v,v<h&&(h=v,n=[o,k/s])}if(A.bars.show&&!n){m=A.bars.align=="left"?0:-A.bars.barWidth/2;A=m+A.bars.barWidth;for(k=0;k<l.length;k+=s)if(E=l[k],v=l[k+1],D=l[k+2],E!=
null&&(H[o].bars.horizontal?u<=Math.max(D,E)&&u>=Math.min(D,E)&&p>=v+m&&p<=v+A:u>=E+m&&u<=E+A&&p>=Math.min(D,v)&&p<=Math.max(D,v)))n=[o,k/s]}}n?(o=n[0],k=n[1],s=H[o].datapoints.pointsize,d={datapoint:H[o].datapoints.points.slice(k*s,(k+1)*s),dataIndex:k,series:H[o],seriesIndex:o}):d=null;if(d)d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+f.left+C.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+f.top+C.top,10);if(x.grid.autoHighlight){for(f=0;f<Z.length;++f)g=Z[f],g.auto==a&&(!d||
!(g.series==d.series&&g.point[0]==d.datapoint[0]&&g.point[1]==d.datapoint[1]))&&ea(g.series,g.point);d&&aa(d.series,d.datapoint,a)}b.trigger(a,[i,d])}function I(){var a=x.interaction.redrawOverlayInterval;a==-1?ba():fa||(fa=setTimeout(ba,a))}function ba(){fa=null;G.save();z.clear();G.translate(C.left,C.top);var b,c;for(b=0;b<Z.length;++b)if(c=Z[b],c.series.bars.show)V(c.series,c.point);else{var e=c.series,d=c.point;c=d[0];d=d[1];var f=e.xaxis,g=e.yaxis,r=typeof e.highlightColor==="string"?e.highlightColor:
a.color.parse(e.color).scale("a",0.5).toString();if(!(c<f.min||c>f.max||d<g.min||d>g.max)){var h=e.points.radius+e.points.lineWidth/2;G.lineWidth=h;G.strokeStyle=r;r=1.5*h;c=f.p2c(c);d=g.p2c(d);G.beginPath();e.points.symbol=="circle"?G.arc(c,d,r,0,2*Math.PI,!1):e.points.symbol(G,c,d,r,!1);G.closePath();G.stroke()}}G.restore();i(X.drawOverlay,[G])}function aa(a,b,c){typeof a=="number"&&(a=H[a]);if(typeof b=="number"){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=ca(a,b);if(e==
-1)Z.push({series:a,point:b,auto:c}),I();else if(!c)Z[e].auto=!1}function ea(a,b){if(a==null&&b==null)Z=[],I();else{typeof a=="number"&&(a=H[a]);if(typeof b=="number"){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}c=ca(a,b);c!=-1&&(Z.splice(c,1),I())}}function ca(a,b){for(var c=0;c<Z.length;++c){var e=Z[c];if(e.series==a&&e.point[0]==b[0]&&e.point[1]==b[1])return c}return-1}function V(b,c){var e=typeof b.highlightColor==="string"?b.highlightColor:a.color.parse(b.color).scale("a",
0.5).toString(),d=b.bars.align=="left"?0:-b.bars.barWidth/2;G.lineWidth=b.bars.lineWidth;G.strokeStyle=e;B(c[0],c[1],c[2]||0,d,d+b.bars.barWidth,0,function(){return e},b.xaxis,b.yaxis,G,b.bars.horizontal,b.bars.lineWidth)}function F(b,c,e,d){if(typeof b=="string")return b;else{c=w.createLinearGradient(0,e,0,c);e=0;for(var f=b.colors.length;e<f;++e){var g=b.colors[e];if(typeof g!="string"){var r=a.color.parse(d);g.brightness!=null&&(r=r.scale("rgb",g.brightness));g.opacity!=null&&(r.a*=g.opacity);
g=r.toString()}c.addColorStop(e/(f-1),g)}return c}}var H=[],x={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,
reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,
borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},L=null,z=null,da=null,w=null,G=null,N=[],U=[],C={left:0,right:0,top:0,bottom:0},M=0,W=0,X={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],
shutdown:[]},O=this;O.setData=k;O.setupGrid=u;O.draw=y;O.getPlaceholder=function(){return b};O.getCanvas=function(){return L.element};O.getPlotOffset=function(){return C};O.width=function(){return M};O.height=function(){return W};O.offset=function(){var a=da.offset();a.left+=C.left;a.top+=C.top;return a};O.getData=function(){return H};O.getAxes=function(){var b={};a.each(N.concat(U),function(a,c){c&&(b[c.direction+(c.n!=1?c.n:"")+"axis"]=c)});return b};O.getXAxes=function(){return N};O.getYAxes=function(){return U};
O.c2p=j;O.p2c=function(a){var b={},c,e,d;for(c=0;c<N.length;++c)if((e=N[c])&&e.used)if(d="x"+e.n,a[d]==null&&e.n==1&&(d="x"),a[d]!=null){b.left=e.p2c(a[d]);break}for(c=0;c<U.length;++c)if((e=U[c])&&e.used)if(d="y"+e.n,a[d]==null&&e.n==1&&(d="y"),a[d]!=null){b.top=e.p2c(a[d]);break}return b};O.getOptions=function(){return x};O.highlight=aa;O.unhighlight=ea;O.triggerRedrawOverlay=I;O.pointOffset=function(a){return{left:parseInt(N[l(a,"x")-1].p2c(+a.x)+C.left,10),top:parseInt(U[l(a,"y")-1].p2c(+a.y)+
C.top,10)}};O.shutdown=function(){fa&&clearTimeout(fa);da.unbind("mousemove",K);da.unbind("mouseleave",S);da.unbind("click",R);i(X.shutdown,[da])};O.resize=function(){var a=b.width(),c=b.height();L.resize(a,c);z.resize(a,c)};O.hooks=X;(function(){for(var b={Canvas:d},c=0;c<h.length;++c){var e=h[c];e.init(O,b);e.options&&a.extend(!0,x,e.options)}})(O);(function(c){a.extend(!0,x,c);if(c&&c.colors)x.colors=c.colors;if(x.xaxis.color==null)x.xaxis.color=a.color.parse(x.grid.color).scale("a",0.22).toString();
if(x.yaxis.color==null)x.yaxis.color=a.color.parse(x.grid.color).scale("a",0.22).toString();if(x.xaxis.tickColor==null)x.xaxis.tickColor=x.grid.tickColor||x.xaxis.color;if(x.yaxis.tickColor==null)x.yaxis.tickColor=x.grid.tickColor||x.yaxis.color;if(x.grid.borderColor==null)x.grid.borderColor=x.grid.color;if(x.grid.tickColor==null)x.grid.tickColor=a.color.parse(x.grid.color).scale("a",0.22).toString();var d,f,g={style:b.css("font-style"),size:Math.round(0.8*(+b.css("font-size").replace("px","")||13)),
variant:b.css("font-variant"),weight:b.css("font-weight"),family:b.css("font-family")};g.lineHeight=g.size*1.15;f=x.xaxes.length||1;for(c=0;c<f;++c){if((d=x.xaxes[c])&&!d.tickColor)d.tickColor=d.color;d=a.extend(!0,{},x.xaxis,d);x.xaxes[c]=d;if(d.font&&(d.font=a.extend({},g,d.font),!d.font.color))d.font.color=d.color}f=x.yaxes.length||1;for(c=0;c<f;++c){if((d=x.yaxes[c])&&!d.tickColor)d.tickColor=d.color;d=a.extend(!0,{},x.yaxis,d);x.yaxes[c]=d;if(d.font&&(d.font=a.extend({},g,d.font),!d.font.color))d.font.color=
d.color}if(x.xaxis.noTicks&&x.xaxis.ticks==null)x.xaxis.ticks=x.xaxis.noTicks;if(x.yaxis.noTicks&&x.yaxis.ticks==null)x.yaxis.ticks=x.yaxis.noTicks;if(x.x2axis)x.xaxes[1]=a.extend(!0,{},x.xaxis,x.x2axis),x.xaxes[1].position="top";if(x.y2axis)x.yaxes[1]=a.extend(!0,{},x.yaxis,x.y2axis),x.yaxes[1].position="right";if(x.grid.coloredAreas)x.grid.markings=x.grid.coloredAreas;if(x.grid.coloredAreasColor)x.grid.markingsColor=x.grid.coloredAreasColor;x.lines&&a.extend(!0,x.series.lines,x.lines);x.points&&
a.extend(!0,x.series.points,x.points);x.bars&&a.extend(!0,x.series.bars,x.bars);if(x.shadowSize!=null)x.series.shadowSize=x.shadowSize;if(x.highlightColor!=null)x.series.highlightColor=x.highlightColor;for(c=0;c<x.xaxes.length;++c)q(N,c+1).options=x.xaxes[c];for(c=0;c<x.yaxes.length;++c)q(U,c+1).options=x.yaxes[c];for(var r in X)x.hooks[r]&&x.hooks[r].length&&(X[r]=X[r].concat(x.hooks[r]));i(X.processOptions,[x])})(g);(function(){b.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();
b.css("position")=="static"&&b.css("position","relative");L=new d("flot-base",b);z=new d("flot-overlay",b);w=L.context;G=z.context;da=a(z.element).unbind();var c=b.data("plot");c&&(c.shutdown(),z.clear());b.data("plot",O)})();k(c);u();y();x.grid.hoverable&&(da.mousemove(K),da.bind("mouseleave",S));x.grid.clickable&&da.click(R);i(X.bindEvents,[da]);var Z=[],fa=null}var b=Object.prototype.hasOwnProperty;d.prototype.resize=function(a,b){if(a<=0||b<=0)throw Error("Invalid dimensions for plot, width = "+
a+", height = "+b);var c=this.element,d=this.context,i=this.pixelRatio;if(this.width!=a)c.width=a*i,c.style.width=a+"px",this.width=a;if(this.height!=b)c.height=b*i,c.style.height=b+"px",this.height=b;d.restore();d.save();d.scale(i,i)};d.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};d.prototype.render=function(){var a=this._textCache,c;for(c in a)if(b.call(a,c)){var d=this.getTextLayer(c),h=a[c];d.hide();for(var i in h)if(b.call(h,i)){var k=h[i],l;for(l in k)if(b.call(k,
l)){for(var p=k[l].positions,j=0,q;q=p[j];j++)if(q.active){if(!q.rendered)d.append(q.element),q.rendered=!0}else p.splice(j--,1),q.rendered&&q.element.detach();p.length==0&&delete k[l]}}d.show()}};d.prototype.getTextLayer=function(b){var c=this.text[b];if(c==null){if(this.textContainer==null)this.textContainer=a("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element);c=this.text[b]=a("<div></div>").addClass(b).css({position:"absolute",
top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)}return c};d.prototype.getTextInfo=function(b,c,d,h,i){var k,l;c=""+c;h=typeof d==="object"?d.style+" "+d.variant+" "+d.weight+" "+d.size+"px/"+d.lineHeight+"px "+d.family:d;k=this._textCache[b];k==null&&(k=this._textCache[b]={});l=k[h];l==null&&(l=k[h]={});k=l[c];k==null&&(b=a("<div></div>").html(c).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(b)),typeof d==="object"?b.css({font:h,color:d.color}):typeof d===
"string"&&b.addClass(d),k=l[c]={width:b.outerWidth(!0),height:b.outerHeight(!0),element:b,positions:[]},b.detach());return k};d.prototype.addText=function(a,b,c,d,i,k,l,p,j){a=this.getTextInfo(a,d,i,k,l);d=a.positions;p=="center"?b-=a.width/2:p=="right"&&(b-=a.width);j=="middle"?c-=a.height/2:j=="bottom"&&(c-=a.height);for(j=0;i=d[j];j++)if(i.x==b&&i.y==c){i.active=!0;return}i={active:!0,rendered:!1,element:d.length?a.element.clone():a.element,x:b,y:c};d.push(i);i.element.css({top:Math.round(c),left:Math.round(b),
"text-align":p})};d.prototype.removeText=function(a,c,d,h,i,k){if(h==null){if(c=this._textCache[a],c!=null)for(var l in c)if(b.call(c,l))for(var p in d=c[l],d)if(b.call(d,p)){a=d[p].positions;for(h=0;i=a[h];h++)i.active=!1}}else{a=this.getTextInfo(a,h,i,k).positions;for(h=0;i=a[h];h++)if(i.x==c&&i.y==d)i.active=!1}};a.plot=function(b,d,g){return new c(a(b),d,g,a.plot.plugins)};a.plot.version="0.8.1";a.plot.plugins=[];a.fn.plot=function(b,c){return this.each(function(){a.plot(this,b,c)})}})(jQuery);
(function(a){function d(a,b){return b*Math.floor(a/b)}function c(a,b,c,e){if(typeof a.strftime=="function")return a.strftime(b);var d=function(a,b){a=""+a;return a.length==1?""+(b==null?"0":b)+a:a},f=[],g=!1,i=a.getHours(),h=i<12;c==null&&(c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);e==null&&(e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var u;u=i>12?i-12:i==0?12:i;for(var v=0;v<b.length;++v){var y=b.charAt(v);if(g){switch(y){case "a":y=""+e[a.getDay()];break;case "b":y=
""+c[a.getMonth()];break;case "d":y=d(a.getDate());break;case "e":y=d(a.getDate()," ");break;case "h":case "H":y=d(i);break;case "I":y=d(u);break;case "l":y=d(u," ");break;case "m":y=d(a.getMonth()+1);break;case "M":y=d(a.getMinutes());break;case "q":y=""+(Math.floor(a.getMonth()/3)+1);break;case "S":y=d(a.getSeconds());break;case "y":y=d(a.getFullYear()%100);break;case "Y":y=""+a.getFullYear();break;case "p":y=h?"am":"pm";break;case "P":y=h?"AM":"PM";break;case "w":y=""+a.getDay()}f.push(y);g=!1}else y==
"%"?g=!0:f.push(y)}return f.join("")}function b(a){function b(a,c,e,d){a[c]=function(){return e[d].apply(e,arguments)}}var c={date:a};a.strftime!=void 0&&b(c,"strftime",a,"strftime");b(c,"getTime",a,"getTime");b(c,"setTime",a,"setTime");for(var e=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],d=0;d<e.length;d++)b(c,"get"+e[d],a,"getUTC"+e[d]),b(c,"set"+e[d],a,"setUTC"+e[d]);return c}function e(a,c){if(c.timezone=="browser")return new Date(a);else if(!c.timezone||c.timezone==
"utc")return b(new Date(a));else if(typeof timezoneJS!="undefined"&&typeof timezoneJS.Date!="undefined"){var e=new timezoneJS.Date;e.setTimezone(c.timezone);e.setTime(a);return e}else return b(new Date(a))}var f={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,quarter:7776E6,year:525949.2*6E4},g=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],
[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"]],h=g.concat([[3,"month"],[6,"month"],[1,"year"]]),i=g.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);a.plot.plugins.push({init:function(b){b.hooks.processOptions.push(function(b){a.each(b.getAxes(),function(a,b){var g=b.options;if(g.mode=="time")b.tickGenerator=function(a){var b=[],c=e(a.min,g),j=0,k=g.tickSize&&g.tickSize[1]==="quarter"||g.minTickSize&&g.minTickSize[1]==="quarter"?i:h;g.minTickSize!=null&&(j=typeof g.tickSize==
"number"?g.tickSize:g.minTickSize[0]*f[g.minTickSize[1]]);for(var l=0;l<k.length-1;++l)if(a.delta<(k[l][0]*f[k[l][1]]+k[l+1][0]*f[k[l+1][1]])/2&&k[l][0]*f[k[l][1]]>=j)break;j=k[l][0];k=k[l][1];k=="year"&&(g.minTickSize!=null&&g.minTickSize[1]=="year"?j=Math.floor(g.minTickSize[0]):(l=Math.pow(10,Math.floor(Math.log(a.delta/f.year)/Math.LN10)),j=a.delta/f.year/l,j=j<1.5?1:j<3?2:j<7.5?5:10,j*=l),j<1&&(j=1));a.tickSize=g.tickSize||[j,k];j=a.tickSize[0];k=a.tickSize[1];l=j*f[k];k=="second"?c.setSeconds(d(c.getSeconds(),
j)):k=="minute"?c.setMinutes(d(c.getMinutes(),j)):k=="hour"?c.setHours(d(c.getHours(),j)):k=="month"?c.setMonth(d(c.getMonth(),j)):k=="quarter"?c.setMonth(3*d(c.getMonth()/3,j)):k=="year"&&c.setFullYear(d(c.getFullYear(),j));c.setMilliseconds(0);l>=f.minute&&c.setSeconds(0);l>=f.hour&&c.setMinutes(0);l>=f.day&&c.setHours(0);l>=f.day*4&&c.setDate(1);l>=f.month*2&&c.setMonth(d(c.getMonth(),3));l>=f.quarter*2&&c.setMonth(d(c.getMonth(),6));l>=f.year&&c.setMonth(0);var p=0,m=Number.NaN,r;do if(r=m,m=
c.getTime(),b.push(m),k=="month"||k=="quarter")if(j<1){c.setDate(1);var A=c.getTime();c.setMonth(c.getMonth()+(k=="quarter"?3:1));var D=c.getTime();c.setTime(m+p*f.hour+(D-A)*j);p=c.getHours();c.setHours(0)}else c.setMonth(c.getMonth()+j*(k=="quarter"?3:1));else k=="year"?c.setFullYear(c.getFullYear()+j):c.setTime(m+l);while(m<a.max&&m!=r);return b},b.tickFormatter=function(a,b){var d=e(a,b.options);if(g.timeformat!=null)return c(d,g.timeformat,g.monthNames,g.dayNames);var i=b.options.tickSize&&b.options.tickSize[1]==
"quarter"||b.options.minTickSize&&b.options.minTickSize[1]=="quarter",h=b.tickSize[0]*f[b.tickSize[1]],j=b.max-b.min,k=g.twelveHourClock?" %p":"",m=g.twelveHourClock?"%I":"%H";return c(d,h<f.minute?m+":%M:%S"+k:h<f.day?j<2*f.day?m+":%M"+k:"%b %d "+m+":%M"+k:h<f.month?"%b %d":i&&h<f.quarter||!i&&h<f.year?j<f.year?"%b":"%b %Y":i&&h<f.year?j<f.year?"Q%q":"Q%q %Y":"%Y",g.monthNames,g.dayNames)}})})},options:{xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},name:"time",version:"1.0"});
a.plot.formatDate=c})(jQuery);
(function(a){var d=10,c=0.95,b={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,b){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+b.color+";'>"+a+"<br/>"+Math.round(b.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};a.plot.plugins.push({init:function(e){function f(c){for(var e=
0,d=0,f=0,g=b.series.pie.combine.color,i=[],h=0;h<c.length;++h){var n=c[h].data;a.isArray(n)&&n.length==1&&(n=n[0]);a.isArray(n)?n[1]=!isNaN(parseFloat(n[1]))&&isFinite(n[1])?+n[1]:0:n=!isNaN(parseFloat(n))&&isFinite(n)?[1,+n]:[1,0];c[h].data=[n]}for(h=0;h<c.length;++h)e+=c[h].data[0][1];for(h=0;h<c.length;++h)if(n=c[h].data[0][1],n/e<=b.series.pie.combine.threshold&&(d+=n,f++,!g))g=c[h].color;for(h=0;h<c.length;++h)n=c[h].data[0][1],(f<2||n/e>b.series.pie.combine.threshold)&&i.push({data:[[1,n]],
color:c[h].color,label:c[h].label,angle:n*Math.PI*2/e,percent:n/(e/100)});f>1&&i.push({data:[[1,d]],color:g,label:b.series.pie.combine.label,angle:d*Math.PI*2/e,percent:d/(e/100)});return i}function g(e,f){function g(){v.clearRect(0,0,k,l);t.children().filter(".pieLabel, .pieLabelBackground").remove()}function i(){var a=b.series.pie.shadow.left,c=b.series.pie.shadow.top,e=b.series.pie.shadow.alpha,d=b.series.pie.radius>1?b.series.pie.radius:n*b.series.pie.radius;if(!(d>=k/2-a||d*b.series.pie.tilt>=
l/2-c||d<=10)){v.save();v.translate(a,c);v.globalAlpha=e;v.fillStyle="#000";v.translate(s,o);v.scale(1,b.series.pie.tilt);for(a=1;a<=10;a++)v.beginPath(),v.arc(0,0,d,0,Math.PI*2,!1),v.fill(),d-=a;v.restore()}}function j(){function c(a,b,e){if(!(a<=0||isNaN(a)))e?v.fillStyle=b:(v.strokeStyle=b,v.lineJoin="round"),v.beginPath(),Math.abs(a-Math.PI*2)>1.0E-9&&v.moveTo(0,0),v.arc(0,0,f,g,g+a/2,!1),v.arc(0,0,f,g+a/2,g+a,!1),v.closePath(),g+=a,e?v.fill():v.stroke()}function e(){function c(e,d,f){if(e.data[0][1]==
0)return!0;var r=b.legend.labelFormatter,i=b.series.pie.label.formatter;r=r?r(e.label,e):e.label;i&&(r=i(r,e));i=(d+e.angle+d)/2;d=s+Math.round(Math.cos(i)*g);i=o+Math.round(Math.sin(i)*g)*b.series.pie.tilt;t.append("<span class='pieLabel' id='pieLabel"+f+"' style='position:absolute;top:"+i+"px;left:"+d+"px;'>"+r+"</span>");f=t.children("#pieLabel"+f);r=i-f.height()/2;d-=f.width()/2;f.css("top",r);f.css("left",d);if(0-r>0||0-d>0||l-(r+f.height())<0||k-(d+f.width())<0)return!1;if(b.series.pie.label.background.opacity!=
0){i=b.series.pie.label.background.color;if(i==null)i=e.color;a("<div class='pieLabelBackground' style='position:absolute;width:"+f.width()+"px;height:"+f.height()+"px;"+("top:"+r+"px;left:"+d+"px;")+"background-color:"+i+";'></div>").css("opacity",b.series.pie.label.background.opacity).insertBefore(f)}return!0}for(var f=d,g=b.series.pie.label.radius>1?b.series.pie.label.radius:n*b.series.pie.label.radius,r=0;r<q.length;++r){if(q[r].percent>=b.series.pie.label.threshold*100&&!c(q[r],f,r))return!1;
f+=q[r].angle}return!0}var d=Math.PI*b.series.pie.startAngle,f=b.series.pie.radius>1?b.series.pie.radius:n*b.series.pie.radius;v.save();v.translate(s,o);v.scale(1,b.series.pie.tilt);v.save();for(var g=d,r=0;r<q.length;++r)q[r].startAngle=g,c(q[r].angle,q[r].color,!0);v.restore();if(b.series.pie.stroke.width>0){v.save();v.lineWidth=b.series.pie.stroke.width;g=d;for(r=0;r<q.length;++r)c(q[r].angle,b.series.pie.stroke.color,!1);v.restore()}h(v);v.restore();return b.series.pie.label.show?e():!0}if(t){var k=
e.getPlaceholder().width(),l=e.getPlaceholder().height(),p=t.children().filter(".legend").children().width()||0;v=f;u=!1;n=Math.min(k,l/b.series.pie.tilt)/2;o=l/2+b.series.pie.offset.top;s=k/2;b.series.pie.offset.left=="auto"?b.legend.position.match("w")?s+=p/2:s-=p/2:s+=b.series.pie.offset.left;s<n?s=n:s>k-n&&(s=k-n);var q=e.getData();p=0;do p>0&&(n*=c),p+=1,g(),b.series.pie.tilt<=0.8&&i();while(!j()&&p<d);p>=d&&(g(),t.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));
e.setSeries&&e.insertLegend&&(e.setSeries(q),e.insertLegend())}}function h(a){if(b.series.pie.innerRadius>0){a.save();var c=b.series.pie.innerRadius>1?b.series.pie.innerRadius:n*b.series.pie.innerRadius;a.globalCompositeOperation="destination-out";a.beginPath();a.fillStyle=b.series.pie.stroke.color;a.arc(0,0,c,0,Math.PI*2,!1);a.fill();a.closePath();a.restore();a.save();a.beginPath();a.strokeStyle=b.series.pie.stroke.color;a.arc(0,0,c,0,Math.PI*2,!1);a.stroke();a.closePath();a.restore()}}function i(a){l("plothover",
a)}function k(a){l("plotclick",a)}function l(a,c){var d=e.offset(),f=parseInt(c.pageX-d.left);a:{d=parseInt(c.pageY-d.top);var g=e.getData(),i=e.getOptions();i=i.series.pie.radius>1?i.series.pie.radius:n*i.series.pie.radius;for(var h,j,k=0;k<g.length;++k){var l=g[k];if(l.pie.show){v.save();v.beginPath();v.moveTo(0,0);v.arc(0,0,i,l.startAngle,l.startAngle+l.angle/2,!1);v.arc(0,0,i,l.startAngle+l.angle/2,l.startAngle+l.angle,!1);v.closePath();h=f-s;j=d-o;if(v.isPointInPath){if(v.isPointInPath(f-s,d-
o)){v.restore();f={datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:k};break a}}else{var u=[[0,0],[i*Math.cos(l.startAngle),i*Math.sin(l.startAngle)],[i*Math.cos(l.startAngle+l.angle/4),i*Math.sin(l.startAngle+l.angle/4)],[i*Math.cos(l.startAngle+l.angle/2),i*Math.sin(l.startAngle+l.angle/2)],[i*Math.cos(l.startAngle+l.angle/1.5),i*Math.sin(l.startAngle+l.angle/1.5)],[i*Math.cos(l.startAngle+l.angle),i*Math.sin(l.startAngle+l.angle)]];h=[h,j];j=!1;for(var q=-1,T=u.length,I=T-1;++q<T;I=
q)(u[q][1]<=h[1]&&h[1]<u[I][1]||u[I][1]<=h[1]&&h[1]<u[q][1])&&h[0]<(u[I][0]-u[q][0])*(h[1]-u[q][1])/(u[I][1]-u[q][1])+u[q][0]&&(j=!j);if(j){v.restore();f={datapoint:[l.percent,l.data],dataIndex:0,series:l,seriesIndex:k};break a}}v.restore()}}f=null}if(b.grid.autoHighlight)for(d=0;d<y.length;++d)if(g=y[d],g.auto==a&&!(f&&g.series==f.series))g=g.series,g==null&&(y=[],e.triggerRedrawOverlay()),g=p(g),g!=-1&&(y.splice(g,1),e.triggerRedrawOverlay());if(f)if(d=f.series,g=p(d),g==-1)y.push({series:d,auto:a}),
e.triggerRedrawOverlay();else if(!a)y[g].auto=!1;t.trigger(a,[{pageX:c.pageX,pageY:c.pageY},f])}function p(a){for(var b=0;b<y.length;++b)if(y[b].series==a)return b;return-1}function j(a,b){function c(a){if(!(a.angle<=0||isNaN(a.angle)))b.fillStyle="rgba(255, 255, 255, "+e.series.pie.highlight.opacity+")",b.beginPath(),Math.abs(a.angle-Math.PI*2)>1.0E-9&&b.moveTo(0,0),b.arc(0,0,d,a.startAngle,a.startAngle+a.angle/2,!1),b.arc(0,0,d,a.startAngle+a.angle/2,a.startAngle+a.angle,!1),b.closePath(),b.fill()}
var e=a.getOptions(),d=e.series.pie.radius>1?e.series.pie.radius:n*e.series.pie.radius;b.save();b.translate(s,o);b.scale(1,e.series.pie.tilt);for(var f=0;f<y.length;++f)c(y[f].series);h(b);b.restore()}var q=null,t=null,n=null,s=null,o=null,u=!1,v=null,y=[];e.hooks.processOptions.push(function(a,b){if(b.series.pie.show){b.grid.show=!1;if(b.series.pie.label.show=="auto")b.series.pie.label.show=b.legend.show?!1:!0;if(b.series.pie.radius=="auto")b.series.pie.radius=b.series.pie.label.show?0.75:1;if(b.series.pie.tilt>
1)b.series.pie.tilt=1;else if(b.series.pie.tilt<0)b.series.pie.tilt=0}});e.hooks.bindEvents.push(function(a,b){var c=a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(i),c.grid.clickable&&b.unbind("click").click(k))});e.hooks.processDatapoints.push(function(c){c.getOptions().series.pie.show&&!u&&(u=!0,q=c.getCanvas(),t=a(q).parent(),b=c.getOptions(),c.setData(f(c.getData())))});e.hooks.drawOverlay.push(function(a,b){a.getOptions().series.pie.show&&j(a,b)});e.hooks.draw.push(function(a,
b){a.getOptions().series.pie.show&&g(a,b)})},options:b,name:"pie",version:"1.1"})})(jQuery);
(function(a){a.plot.plugins.push({init:function(a){function c(a,c){var d;for(d=0;d<c.length;++d)if(c[d].id===a.fillBetween)return c[d];if(typeof a.fillBetween==="number"){if(a.fillBetween<0||a.fillBetween>=c.length)return null;return c[a.fillBetween]}return null}a.hooks.processDatapoints.push(function(a,e,d){if(e.fillBetween!=null){var g=c(e,a.getData());if(g){a=d.pointsize;var h=d.points,i=g.datapoints.pointsize;g=g.datapoints.points;for(var k=[],l,p,j,q,t=e.lines.show,n=a>2&&d.format[2].y,s=t&&
e.lines.steps,o=!0,u=0,v=0,y;;){if(u>=h.length)break;y=k.length;if(h[u]==null){for(p=0;p<a;++p)k.push(h[u+p]);u+=a}else if(v>=g.length){if(!t)for(p=0;p<a;++p)k.push(h[u+p]);u+=a}else if(g[v]==null){for(p=0;p<a;++p)k.push(null);o=!0;v+=i}else{l=h[u];p=h[u+1];e=g[v];j=g[v+1];q=0;if(l===e){for(p=0;p<a;++p)k.push(h[u+p]);q=j;u+=a;v+=i}else if(l>e){if(t&&u>0&&h[u-a]!=null){l=p+(h[u-a+1]-p)*(e-l)/(h[u-a]-l);k.push(e);k.push(l);for(p=2;p<a;++p)k.push(h[u+p]);q=j}v+=i}else{if(o&&t){u+=a;continue}for(p=0;p<
a;++p)k.push(h[u+p]);t&&v>0&&g[v-i]!=null&&(q=j+(g[v-i+1]-j)*(l-e)/(g[v-i]-e));u+=a}o=!1;y!==k.length&&n&&(k[y+2]=q)}if(s&&y!==k.length&&y>0&&k[y]!==null&&k[y]!==k[y-a]&&k[y+1]!==k[y-a+1]){for(p=0;p<a;++p)k[y+a+p]=k[y+p];k[y+1]=k[y-a+1]}}d.points=k}}})},options:{series:{fillBetween:null}},name:"fillbetween",version:"1.0"})})(jQuery);
(function(a){a.extend({tablesorter:new function(){function c(){var a=arguments.length>1?Array.prototype.slice.call(arguments):arguments[0];typeof console!=="undefined"&&typeof console.log!=="undefined"?console.log(a):alert(a)}function b(a,b){c(a+" ("+((new Date).getTime()-b.getTime())+"ms)")}function e(a){for(var b in a)return!1;return!0}function d(b,c,e){if(!c)return"";var f=b.config,g=f.textExtraction,i="";i=g==="simple"?f.supportsTextContent?c.textContent:a(c).text():typeof g==="function"?g(c,
b,e):typeof g==="object"&&g.hasOwnProperty(e)?g[e](c,b,e):f.supportsTextContent?c.textContent:a(c).text();return a.trim(i)}function g(a){var e=a.config,g=e.$tbodies=e.$table.children("tbody:not(."+e.cssInfoBlock+")"),i,h,n,j,k,o,s,l="";if(g.length===0)return e.debug?c("*Empty table!* Not building a parser cache"):"";else e.debug&&(s=new Date,c("Detecting parsers for each column"));g=g[0].rows;if(g[0]){i=[];h=g[0].cells.length;for(n=0;n<h;n++){j=e.$headers.filter(":not([colspan])");j=j.add(e.$headers.filter('[colspan="1"]')).filter('[data-column="'+
n+'"]:last');k=e.headers[n];o=m.getParserById(m.getData(j,k,"sorter"));e.empties[n]=m.getData(j,k,"empty")||e.emptyTo||(e.emptyToBottom?"bottom":"top");e.strings[n]=m.getData(j,k,"string")||e.stringTo||"max";if(!o)a:{j=a;k=g;o=-1;var u=n,p=void 0,q=m.parsers.length,v=!1,y="";for(p=!0;y===""&&p;)o++,k[o]?(v=k[o].cells[u],y=d(j,v,u),j.config.debug&&c("Checking if value was empty on row "+o+", column: "+u+': "'+y+'"')):p=!1;for(;--q>=0;)if((p=m.parsers[q])&&p.id!=="text"&&p.is&&p.is(y,j,v)){o=p;break a}o=
m.getParserById("text")}e.debug&&(l+="column:"+n+"; parser:"+o.id+"; string:"+e.strings[n]+"; empty: "+e.empties[n]+"\n");i.push(o)}}e.debug&&(c(l),b("Completed detecting parsers",s));e.parsers=i}function h(e){var g=e.tBodies,i=e.config,h,n,j=i.parsers,o,k,s,l,u,p,q,v=[];i.cache={};if(!j)return i.debug?c("*Empty table!* Not building a cache"):"";i.debug&&(q=new Date);i.showProcessing&&m.isProcessing(e,!0);for(l=0;l<g.length;l++)if(i.cache[l]={row:[],normalized:[]},!a(g[l]).hasClass(i.cssInfoBlock)){h=
g[l]&&g[l].rows.length||0;n=g[l].rows[0]&&g[l].rows[0].cells.length||0;for(k=0;k<h;++k)if(u=a(g[l].rows[k]),p=[],u.hasClass(i.cssChildRow))i.cache[l].row[i.cache[l].row.length-1]=i.cache[l].row[i.cache[l].row.length-1].add(u);else{i.cache[l].row.push(u);for(s=0;s<n;++s)if(o=d(e,u[0].cells[s],s),o=j[s].format(o,e,u[0].cells[s],s),p.push(o),(j[s].type||"").toLowerCase()==="numeric")v[s]=Math.max(Math.abs(o)||0,v[s]||0);p.push(i.cache[l].normalized.length);i.cache[l].normalized.push(p)}i.cache[l].colMax=
v}i.showProcessing&&m.isProcessing(e);i.debug&&b("Building cache for "+h+" rows",q)}function i(c,d){var f=c.config,g=f.widgetOptions,i=c.tBodies,h=[],n=f.cache,j,o,k,s,l,u,p,q,v,y,t;if(!e(n)){f.debug&&(t=new Date);for(q=0;q<i.length;q++)if(j=a(i[q]),j.length&&!j.hasClass(f.cssInfoBlock)){l=m.processTbody(c,j,!0);j=n[q].row;o=n[q].normalized;s=(k=o.length)?o[0].length-1:0;for(u=0;u<k;u++)if(y=o[u][s],h.push(j[y]),!f.appender||f.pager&&(!f.pager.removeRows||!g.pager_removeRows)&&!f.pager.ajax){v=j[y].length;
for(p=0;p<v;p++)l.append(j[y][p])}m.processTbody(c,l,!1)}f.appender&&f.appender(c,h);f.debug&&b("Rebuilt table",t);!d&&!f.appender&&m.applyWidget(c);a(c).trigger("sortEnd",c);a(c).trigger("updateComplete",c)}}function k(b){var c=[],e={},d=0,f=a(b).find("thead:eq(0), tfoot").children("tr"),g,i,h,n,j,o,k,s,l,m;for(g=0;g<f.length;g++){j=f[g].cells;for(i=0;i<j.length;i++){n=j[i];o=n.parentNode.rowIndex;k=o+"-"+n.cellIndex;s=n.rowSpan||1;l=n.colSpan||1;typeof c[o]==="undefined"&&(c[o]=[]);for(h=0;h<c[o].length+
1;h++)if(typeof c[o][h]==="undefined"){m=h;break}e[k]=m;d=Math.max(m,d);a(n).attr({"data-column":m});for(h=o;h<o+s;h++){typeof c[h]==="undefined"&&(c[h]=[]);k=c[h];for(n=m;n<m+l;n++)k[n]="x"}}}b.config.columns=d+1;return e}function l(e){var d=k(e),f,g,i,h,n,o,s,l=e.config;l.headerList=[];l.headerContent=[];l.debug&&(s=new Date);h=l.cssIcon?'<i class="'+l.cssIcon+" "+m.css.icon+'"></i>':"";l.$headers=a(e).find(l.selectorHeaders).each(function(b){g=a(this);f=l.headers[b];l.headerContent[b]=a(this).html();
n=l.headerTemplate.replace(/\{content\}/g,a(this).html()).replace(/\{icon\}/g,h);l.onRenderTemplate&&(i=l.onRenderTemplate.apply(g,[b,n]))&&typeof i==="string"&&(n=i);a(this).html('<div class="tablesorter-header-inner">'+n+"</div>");l.onRenderHeader&&l.onRenderHeader.apply(g,[b]);this.column=d[this.parentNode.rowIndex+"-"+this.cellIndex];var c=m.getData(g,f,"sortInitialOrder")||l.sortInitialOrder;this.order=/^d/i.test(c)||c===1?[1,0,2]:[0,1,2];this.count=-1;this.lockedOrder=!1;o=m.getData(g,f,"lockedOrder")||
!1;if(typeof o!=="undefined"&&o!==!1)this.order=this.lockedOrder=/^d/i.test(o)||o===1?[1,1,1]:[0,0,0];g.addClass(m.css.header+" "+l.cssHeader);l.headerList[b]=this;g.parent().addClass(m.css.headerRow+" "+l.cssHeaderRow);g.attr("tabindex",0)});j(e);l.debug&&(b("Built headers:",s),c(l.$headers))}function p(a,b,c){var e=a.config;e.$table.find(e.selectorRemove).remove();g(a);h(a);v(e.$table,b,c)}function j(b){var c,e=b.config;e.$headers.each(function(b,d){c=m.getData(d,e.headers[b],"sorter")==="false";
d.sortDisabled=c;a(d)[c?"addClass":"removeClass"]("sorter-false")})}function q(b){var c,e,d,f=b.config,g=f.sortList,i=[m.css.sortAsc+" "+f.cssAsc,m.css.sortDesc+" "+f.cssDesc],h=a(b).find("tfoot tr").children().removeClass(i.join(" "));f.$headers.removeClass(i.join(" "));d=g.length;for(c=0;c<d;c++)if(g[c][1]!==2&&(b=f.$headers.not(".sorter-false").filter('[data-column="'+g[c][0]+'"]'+(d===1?":last":"")),b.length))for(e=0;e<b.length;e++)b[e].sortDisabled||(b.eq(e).addClass(i[g[c][1]]),h.length&&h.filter('[data-column="'+
g[c][0]+'"]').eq(e).addClass(i[g[c][1]]))}function t(b){if(b.config.widthFixed&&a(b).find("colgroup").length===0){var c=a("<colgroup>"),e=a(b).width();a(b.tBodies[0]).find("tr:first").children("td:visible").each(function(){c.append(a("<col>").css("width",parseInt(a(this).width()/e*1E3,10)/10+"%"))});a(b).prepend(c)}}function n(b,c){var e,d,f,g=b.config,i=c||g.sortList;g.sortList=[];a.each(i,function(b,c){e=[parseInt(c[0],10),parseInt(c[1],10)];if(f=g.$headers[e[0]])g.sortList.push(e),d=a.inArray(e[1],
f.order),f.count=d>=0?d:e[1]%(g.sortReset?3:2)})}function s(b,c,e){var d,f,g,h=b.config,n=!e[h.sortMultiSortKey],j=a(b);j.trigger("sortStart",b);c.count=e[h.sortResetKey]?2:(c.count+1)%(h.sortReset?3:2);h.sortRestart&&(f=c,h.$headers.each(function(){if(this!==f&&(n||!a(this).is("."+m.css.sortDesc+",."+m.css.sortAsc)))this.count=-1}));f=c.column;if(n){h.sortList=[];if(h.sortForce!==null){d=h.sortForce;for(e=0;e<d.length;e++)d[e][0]!==f&&h.sortList.push(d[e])}d=c.order[c.count];if(d<2&&(h.sortList.push([f,
d]),c.colSpan>1))for(e=1;e<c.colSpan;e++)h.sortList.push([f+e,d])}else if(h.sortAppend&&h.sortList.length>1&&m.isValueInArray(h.sortAppend[0][0],h.sortList)&&h.sortList.pop(),m.isValueInArray(f,h.sortList))for(e=0;e<h.sortList.length;e++){if(g=h.sortList[e],d=h.$headers[g[0]],g[0]===f&&(g[1]=d.order[c.count],g[1]===2))h.sortList.splice(e,1),d.count=-1}else if(d=c.order[c.count],d<2&&(h.sortList.push([f,d]),c.colSpan>1))for(e=1;e<c.colSpan;e++)h.sortList.push([f+e,d]);if(h.sortAppend!==null){d=h.sortAppend;
for(e=0;e<d.length;e++)d[e][0]!==f&&h.sortList.push(d[e])}j.trigger("sortBegin",b);setTimeout(function(){q(b);o(b);i(b)},1)}function o(a){var c,d,f,g,i,h,n,j,o,k,s,l,u,p=0,q=a.config,v=q.textSorter||"",y=q.sortList,t=y.length,H=a.tBodies.length;if(!q.serverSideSorting&&!e(q.cache)){q.debug&&(k=new Date);for(d=0;d<H;d++)h=q.cache[d].colMax,o=(n=q.cache[d].normalized)&&n[0]?n[0].length-1:0,n.sort(function(b,e){for(c=0;c<t;c++){i=y[c][0];j=y[c][1];l=(p=j===0)?b:e;u=p?e:b;f=q.string[q.empties[i]||q.emptyTo];
if(l[i]===""&&f!==0)return(typeof f==="boolean"?f?-1:1:f||1)*(p?1:-1);if(u[i]===""&&f!==0)return(typeof f==="boolean"?f?1:-1:-f||-1)*(p?1:-1);(g=/n/i.test(q.parsers&&q.parsers[i]?q.parsers[i].type||"":""))&&q.strings[i]?(g=typeof q.string[q.strings[i]]==="boolean"?(p?1:-1)*(q.string[q.strings[i]]?-1:1):q.strings[i]?q.string[q.strings[i]]||0:0,s=q.numberSorter?q.numberSorter(l[i],u[i],p,h[i],a):m.sortNumeric(l[i],u[i],g,h[i])):s=typeof v==="function"?v(l[i],u[i],p,i,a):typeof v==="object"&&v.hasOwnProperty(i)?
v[i](l[i],u[i],p,i,a):m.sortNatural(l[i],u[i]);if(s)return s}return b[o]-e[o]});q.debug&&b("Sorting on "+y.toString()+" and dir "+j+" time",k)}}function u(a,b){var c=a[0].config;c.pager&&!c.pager.ajax&&a.trigger("updateComplete");typeof b==="function"&&b(a[0])}function v(a,b,c){b!==!1&&!a[0].isProcessing?a.trigger("sorton",[a[0].config.sortList,function(){u(a,c)}]):u(a,c)}function y(b){var c=b.config,k=c.$table,u,t;c.$headers.find(c.selectorSort).add(c.$headers.filter(c.selectorSort)).unbind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter").bind("mousedown.tablesorter mouseup.tablesorter sort.tablesorter keypress.tablesorter",
function(d,f){if(!((d.which||d.button)!==1&&!/sort|keypress/.test(d.type)||d.type==="keypress"&&d.which!==13)&&!(d.type==="mouseup"&&f!==!0&&(new Date).getTime()-t>250)){if(d.type==="mousedown")return t=(new Date).getTime(),d.target.tagName==="INPUT"?"":!c.cancelSelection;c.delayInit&&e(c.cache)&&h(b);var g=(/TH|TD/.test(this.tagName)?a(this):a(this).parents("th, td").filter(":first"))[0];g.sortDisabled||s(b,g,d)}});c.cancelSelection&&c.$headers.attr("unselectable","on").bind("selectstart",!1).css({"user-select":"none",
MozUserSelect:"none"});k.unbind("sortReset update updateRows updateCell updateAll addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave ".split(" ").join(".tablesorter ")).bind("sortReset.tablesorter",function(a){a.stopPropagation();c.sortList=[];q(b);o(b);i(b)}).bind("updateAll.tablesorter",function(a,c,e){a.stopPropagation();m.refreshWidgets(b,!0,!0);m.restoreHeaders(b);l(b);y(b);p(b,c,e)}).bind("update.tablesorter updateRows.tablesorter",function(a,c,e){a.stopPropagation();
j(b);p(b,c,e)}).bind("updateCell.tablesorter",function(e,g,i,h){e.stopPropagation();k.find(c.selectorRemove).remove();var n,j,o;n=k.find("tbody");e=n.index(a(g).parents("tbody").filter(":first"));var s=a(g).parents("tr").filter(":first");g=a(g)[0];if(n.length&&e>=0)j=n.eq(e).find("tr").index(s),o=g.cellIndex,n=c.cache[e].normalized[j].length-1,c.cache[e].row[b.config.cache[e].normalized[j][n]]=s,c.cache[e].normalized[j][o]=c.parsers[o].format(d(b,g,o),b,g,o),v(k,i,h)}).bind("addRows.tablesorter",
function(a,e,i,h){a.stopPropagation();var n=e.filter("tr").length,j=[],o=e[0].cells.length,s=k.find("tbody").index(e.parents("tbody").filter(":first"));c.parsers||g(b);for(a=0;a<n;a++){for(u=0;u<o;u++)j[u]=c.parsers[u].format(d(b,e[a].cells[u],u),b,e[a].cells[u],u);j.push(c.cache[s].row.length);c.cache[s].row.push([e[a]]);c.cache[s].normalized.push(j);j=[]}v(k,i,h)}).bind("sorton.tablesorter",function(a,c,d,f){var g=b.config;a.stopPropagation();k.trigger("sortStart",this);n(b,c);q(b);g.delayInit&&
e(g.cache)&&h(b);k.trigger("sortBegin",this);o(b);i(b,f);typeof d==="function"&&d(b)}).bind("appendCache.tablesorter",function(a,c,e){a.stopPropagation();i(b,e);typeof c==="function"&&c(b)}).bind("applyWidgetId.tablesorter",function(a,e){a.stopPropagation();m.getWidgetById(e).format(b,c,c.widgetOptions)}).bind("applyWidgets.tablesorter",function(a,c){a.stopPropagation();m.applyWidget(b,c)}).bind("refreshWidgets.tablesorter",function(a,c,e){a.stopPropagation();m.refreshWidgets(b,c,e)}).bind("destroy.tablesorter",
function(a,c,e){a.stopPropagation();m.destroy(b,c,e)})}var m=this;m.version="2.13.3";m.parsers=[];m.widgets=[];m.defaults={theme:"default",widthFixed:!1,showProcessing:!1,headerTemplate:"{content}",onRenderTemplate:null,onRenderHeader:null,cancelSelection:!0,dateFormat:"mmddyyyy",sortMultiSortKey:"shiftKey",sortResetKey:"ctrlKey",usNumberFormat:!0,delayInit:!1,serverSideSorting:!1,headers:{},ignoreCase:!0,sortForce:null,sortList:[],sortAppend:null,sortInitialOrder:"asc",sortLocaleCompare:!1,sortReset:!1,
sortRestart:!1,emptyTo:"bottom",stringTo:"max",textExtraction:"simple",textSorter:null,numberSorter:null,widgets:[],widgetOptions:{zebra:["even","odd"]},initWidgets:!0,initialized:null,tableClass:"",cssAsc:"",cssDesc:"",cssHeader:"",cssHeaderRow:"",cssProcessing:"",cssChildRow:"tablesorter-childRow",cssIcon:"tablesorter-icon",cssInfoBlock:"tablesorter-infoOnly",selectorHeaders:"> thead th, > thead td",selectorSort:"th, td",selectorRemove:".remove-me",debug:!1,headerList:[],empties:{},strings:{},parsers:[]};
m.css={table:"tablesorter",childRow:"tablesorter-childRow",header:"tablesorter-header",headerRow:"tablesorter-headerRow",icon:"tablesorter-icon",info:"tablesorter-infoOnly",processing:"tablesorter-processing",sortAsc:"tablesorter-headerAsc",sortDesc:"tablesorter-headerDesc"};m.log=c;m.benchmark=b;m.construct=function(b){return this.each(function(){var c=a.extend(!0,{},m.defaults,b);!this.hasInitialized&&m.buildTable&&this.tagName!=="TABLE"&&m.buildTable(this,c);m.setup(this,c)})};m.setup=function(b,
e){if(!b||!b.tHead||b.tBodies.length===0||b.hasInitialized===!0)return e.debug?c("stopping initialization! No table, thead, tbody or tablesorter has already been initialized"):"";var d="",f=a(b),i=a.metadata;b.hasInitialized=!1;b.isProcessing=!0;b.config=e;a.data(b,"tablesorter",e);e.debug&&a.data(b,"startoveralltimer",new Date);e.supportsTextContent=a("<span>x</span>")[0].textContent==="x";e.supportsDataObject=function(a){a[0]=parseInt(a[0],10);return a[0]>1||a[0]===1&&parseInt(a[1],10)>=4}(a.fn.jquery.split("."));
e.string={max:1,min:-1,"max+":1,"max-":-1,zero:0,none:0,"null":0,top:!0,bottom:!1};/tablesorter\-/.test(f.attr("class"))||(d=e.theme!==""?" tablesorter-"+e.theme:"");e.$table=f.addClass(m.css.table+" "+e.tableClass+d);e.$tbodies=f.children("tbody:not(."+e.cssInfoBlock+")");e.widgetInit={};l(b);t(b);g(b);e.delayInit||h(b);y(b);if(e.supportsDataObject&&typeof f.data().sortlist!=="undefined")e.sortList=f.data().sortlist;else if(i&&f.metadata()&&f.metadata().sortlist)e.sortList=f.metadata().sortlist;
m.applyWidget(b,!0);e.sortList.length>0?f.trigger("sorton",[e.sortList,{},!e.initWidgets]):e.initWidgets&&m.applyWidget(b);e.showProcessing&&f.unbind("sortBegin.tablesorter sortEnd.tablesorter").bind("sortBegin.tablesorter sortEnd.tablesorter",function(a){m.isProcessing(b,a.type==="sortBegin")});b.hasInitialized=!0;b.isProcessing=!1;e.debug&&m.benchmark("Overall initialization time",a.data(b,"startoveralltimer"));f.trigger("tablesorter-initialized",b);typeof e.initialized==="function"&&e.initialized(b)};
m.isProcessing=function(b,c,e){b=a(b);var d=b[0].config;b=e||b.find("."+m.css.header);c?(d.sortList.length>0&&(b=b.filter(function(){return this.sortDisabled?!1:m.isValueInArray(parseFloat(a(this).attr("data-column")),d.sortList)})),b.addClass(m.css.processing+" "+d.cssProcessing)):b.removeClass(m.css.processing+" "+d.cssProcessing)};m.processTbody=function(b,c,e){if(e)return b.isProcessing=!0,c.before('<span class="tablesorter-savemyplace"/>'),e=a.fn.detach?c.detach():c.remove();e=a(b).find("span.tablesorter-savemyplace");
c.insertAfter(e);e.remove();b.isProcessing=!1};m.clearTableBody=function(b){a(b)[0].config.$tbodies.empty()};m.restoreHeaders=function(b){var c=b.config;c.$table.find(c.selectorHeaders).each(function(b){a(this).find(".tablesorter-header-inner").length&&a(this).html(c.headerContent[b])})};m.destroy=function(b,c,e){b=a(b)[0];if(b.hasInitialized){m.refreshWidgets(b,!0,!0);var d=a(b),f=b.config,g=d.find("thead:first"),i=g.find("tr."+m.css.headerRow).removeClass(m.css.headerRow+" "+f.cssHeaderRow),h=d.find("tfoot:first > tr").children("th, td");
g.find("tr").not(i).remove();d.removeData("tablesorter").unbind("sortReset update updateAll updateRows updateCell addRows sorton appendCache applyWidgetId applyWidgets refreshWidgets destroy mouseup mouseleave keypress sortBegin sortEnd ".split(" ").join(".tablesorter "));f.$headers.add(h).removeClass([m.css.header,f.cssHeader,f.cssAsc,f.cssDesc,m.css.sortAsc,m.css.sortDesc].join(" ")).removeAttr("data-column");i.find(f.selectorSort).unbind("mousedown.tablesorter mouseup.tablesorter keypress.tablesorter");
m.restoreHeaders(b);c!==!1&&d.removeClass(m.css.table+" "+f.tableClass+" tablesorter-"+f.theme);b.hasInitialized=!1;typeof e==="function"&&e(b)}};m.regex={chunk:/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,hex:/^0x[0-9a-f]+$/i};m.sortNatural=function(a,b){if(a===b)return 0;var c,e,d,f,g,i;e=m.regex;if(e.hex.test(b)){c=parseInt(a.match(e.hex),16);d=parseInt(b.match(e.hex),16);if(c<d)return-1;if(c>d)return 1}c=a.replace(e.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,
"").split("\\0");e=b.replace(e.chunk,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0");i=Math.max(c.length,e.length);for(g=0;g<i;g++){d=isNaN(c[g])?c[g]||0:parseFloat(c[g])||0;f=isNaN(e[g])?e[g]||0:parseFloat(e[g])||0;if(isNaN(d)!==isNaN(f))return isNaN(d)?1:-1;typeof d!==typeof f&&(d+="",f+="");if(d<f)return-1;if(d>f)return 1}return 0};m.sortText=function(a,b){return a>b?1:a<b?-1:0};m.getTextValue=function(a,b,c){if(c){var e=a?a.length:0,d=c+b;for(c=0;c<e;c++)d+=a.charCodeAt(c);return b*
d}return 0};m.sortNumeric=function(a,b,c,e){if(a===b)return 0;isNaN(a)&&(a=m.getTextValue(a,c,e));isNaN(b)&&(b=m.getTextValue(b,c,e));return a-b};m.characterEquivalents={a:"\u00e1\u00e0\u00e2\u00e3\u00e4\u0105\u00e5",A:"\u00c1\u00c0\u00c2\u00c3\u00c4\u0104\u00c5",c:"\u00e7\u0107\u010d",C:"\u00c7\u0106\u010c",e:"\u00e9\u00e8\u00ea\u00eb\u011b\u0119",E:"\u00c9\u00c8\u00ca\u00cb\u011a\u0118",i:"\u00ed\u00ec\u0130\u00ee\u00ef\u0131",I:"\u00cd\u00cc\u0130\u00ce\u00cf",o:"\u00f3\u00f2\u00f4\u00f5\u00f6",
O:"\u00d3\u00d2\u00d4\u00d5\u00d6",ss:"\u00df",SS:"\u1e9e",u:"\u00fa\u00f9\u00fb\u00fc\u016f",U:"\u00da\u00d9\u00db\u00dc\u016e"};m.replaceAccents=function(a){var b,c="[",e=m.characterEquivalents;if(!m.characterRegex){m.characterRegexArray={};for(b in e)typeof b==="string"&&(c+=e[b],m.characterRegexArray[b]=RegExp("["+e[b]+"]","g"));m.characterRegex=RegExp(c+"]")}if(m.characterRegex.test(a))for(b in e)typeof b==="string"&&(a=a.replace(m.characterRegexArray[b],b));return a};m.isValueInArray=function(a,
b){var c,e=b.length;for(c=0;c<e;c++)if(b[c][0]===a)return!0;return!1};m.addParser=function(a){var b,c=m.parsers.length,e=!0;for(b=0;b<c;b++)m.parsers[b].id.toLowerCase()===a.id.toLowerCase()&&(e=!1);e&&m.parsers.push(a)};m.getParserById=function(a){var b,c=m.parsers.length;for(b=0;b<c;b++)if(m.parsers[b].id.toLowerCase()===a.toString().toLowerCase())return m.parsers[b];return!1};m.addWidget=function(a){m.widgets.push(a)};m.getWidgetById=function(a){var b,c,e=m.widgets.length;for(b=0;b<e;b++)if((c=
m.widgets[b])&&c.hasOwnProperty("id")&&c.id.toLowerCase()===a.toLowerCase())return c};m.applyWidget=function(c,e){c=a(c)[0];var d=c.config,f=d.widgetOptions,g=[],i,h,n;d.debug&&(i=new Date);if(d.widgets.length)d.widgets=a.grep(d.widgets,function(b,c){return a.inArray(b,d.widgets)===c}),a.each(d.widgets||[],function(a,b){if((n=m.getWidgetById(b))&&n.id){if(!n.priority)n.priority=10;g[a]=n}}),g.sort(function(a,b){return a.priority<b.priority?-1:a.priority===b.priority?0:1}),a.each(g,function(b,g){if(g){if(e||
!d.widgetInit[g.id]){if(g.hasOwnProperty("options"))f=c.config.widgetOptions=a.extend(!0,{},g.options,f),d.widgetInit[g.id]=!0;g.hasOwnProperty("init")&&g.init(c,g,d,f)}!e&&g.hasOwnProperty("format")&&g.format(c,d,f,!1)}});if(d.debug)h=d.widgets.length,b("Completed "+(e===!0?"initializing ":"applying ")+h+" widget"+(h!==1?"s":""),i)};m.refreshWidgets=function(b,e,d){b=a(b)[0];var f,g=b.config,i=g.widgets,h=m.widgets,n=h.length;for(f=0;f<n;f++)if(h[f]&&h[f].id&&(e||a.inArray(h[f].id,i)<0))g.debug&&
c("Refeshing widgets: Removing "+h[f].id),h[f].hasOwnProperty("remove")&&(h[f].remove(b,g,g.widgetOptions),g.widgetInit[h[f].id]=!1);d!==!0&&m.applyWidget(b,e)};m.getData=function(b,c,e){var d="";b=a(b);var f,g;if(!b.length)return"";f=a.metadata?b.metadata():!1;g=" "+(b.attr("class")||"");typeof b.data(e)!=="undefined"||typeof b.data(e.toLowerCase())!=="undefined"?d+=b.data(e)||b.data(e.toLowerCase()):f&&typeof f[e]!=="undefined"?d+=f[e]:c&&typeof c[e]!=="undefined"?d+=c[e]:g!==" "&&g.match(" "+e+
"-")&&(d=g.match(RegExp("\\s"+e+"-([\\w-]+)"))[1]||"");return a.trim(d)};m.formatFloat=function(b,c){if(typeof b!=="string"||b==="")return b;var e;b=(c&&c.config?c.config.usNumberFormat!==!1:typeof c!=="undefined"?c:1)?b.replace(/,/g,""):b.replace(/[\s|\.]/g,"").replace(/,/g,".");/^\s*\([.\d]+\)/.test(b)&&(b=b.replace(/^\s*\(([.\d]+)\)/,"-$1"));e=parseFloat(b);return isNaN(e)?a.trim(b):e};m.isDigit=function(a){return isNaN(a)?/^[\-+(]?\d+[)]?$/.test(a.toString().replace(/[,.'"\s]/g,"")):!0}}});var d=
a.tablesorter;a.fn.extend({tablesorter:d.construct});d.addParser({id:"text",is:function(){return!0},format:function(c,b){var e=b.config;c&&(c=a.trim(e.ignoreCase?c.toLocaleLowerCase():c),c=e.sortLocaleCompare?d.replaceAccents(c):c);return c},type:"text"});d.addParser({id:"digit",is:function(a){return d.isDigit(a)},format:function(c,b){var e=d.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),b);return c&&typeof e==="number"?e:c?a.trim(c&&b.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});
d.addParser({id:"currency",is:function(a){return/^\(?\d+[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]|[\u00a3$\u20ac\u00a4\u00a5\u00a2?.]\d+\)?$/.test((a||"").replace(/[,. ]/g,""))},format:function(c,b){var e=d.formatFloat((c||"").replace(/[^\w,. \-()]/g,""),b);return c&&typeof e==="number"?e:c?a.trim(c&&b.config.ignoreCase?c.toLocaleLowerCase():c):c},type:"numeric"});d.addParser({id:"ipAddress",is:function(a){return/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/.test(a)},format:function(a,b){var e,f=a?a.split("."):
"",g="",h=f.length;for(e=0;e<h;e++)g+=("00"+f[e]).slice(-3);return a?d.formatFloat(g,b):a},type:"numeric"});d.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\//.test(a)},format:function(c){return c?a.trim(c.replace(/(https?|ftp|file):\/\//,"")):c},type:"text"});d.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/.test(a)},format:function(a,b){return a?d.formatFloat(a!==""?(new Date(a.replace(/-/g,"/"))).getTime()||"":"",b):a},type:"numeric"});d.addParser({id:"percent",
is:function(a){return/(\d\s*?%|%\s*?\d)/.test(a)&&a.length<15},format:function(a,b){return a?d.formatFloat(a.replace(/%/g,""),b):a},type:"numeric"});d.addParser({id:"usLongDate",is:function(a){return/^[A-Z]{3,10}\.?\s+\d{1,2},?\s+(\d{4})(\s+\d{1,2}:\d{2}(:\d{2})?(\s+[AP]M)?)?$/i.test(a)||/^\d{1,2}\s+[A-Z]{3,10}\s+\d{4}/i.test(a)},format:function(a,b){return a?d.formatFloat((new Date(a.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||"",b):a},type:"numeric"});d.addParser({id:"shortDate",is:function(a){return/(^\d{1,2}[\/\s]\d{1,2}[\/\s]\d{4})|(^\d{4}[\/\s]\d{1,2}[\/\s]\d{1,2})/.test((a||
"").replace(/\s+/g," ").replace(/[\-.,]/g,"/"))},format:function(a,b,e,f){if(a){e=b.config;var g=e.headerList[f];f=g.dateFormat||d.getData(g,e.headers[f],"dateFormat")||e.dateFormat;a=a.replace(/\s+/g," ").replace(/[\-.,]/g,"/");f==="mmddyyyy"?a=a.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$1/$2"):f==="ddmmyyyy"?a=a.replace(/(\d{1,2})[\/\s](\d{1,2})[\/\s](\d{4})/,"$3/$2/$1"):f==="yyyymmdd"&&(a=a.replace(/(\d{4})[\/\s](\d{1,2})[\/\s](\d{1,2})/,"$1/$2/$3"))}return a?d.formatFloat((new Date(a)).getTime()||
"",b):a},type:"numeric"});d.addParser({id:"time",is:function(a){return/^(([0-2]?\d:[0-5]\d)|([0-1]?\d:[0-5]\d\s?([AP]M)))$/i.test(a)},format:function(a,b){return a?d.formatFloat((new Date("2000/01/01 "+a.replace(/(\S)([AP]M)$/i,"$1 $2"))).getTime()||"",b):a},type:"numeric"});d.addParser({id:"metadata",is:function(){return!1},format:function(c,b,e){c=b.config;c=!c.parserMetadataName?"sortValue":c.parserMetadataName;return a(e).metadata()[c]},type:"numeric"});d.addWidget({id:"zebra",priority:90,format:function(c,
b,e){var f,g,h,i,k,l,p=RegExp(b.cssChildRow,"i"),j=b.$tbodies;b.debug&&(k=new Date);for(c=0;c<j.length;c++)f=j.eq(c),l=f.children("tr").length,l>1&&(h=0,f=f.children("tr:visible"),f.each(function(){g=a(this);p.test(this.className)||h++;i=h%2===0;g.removeClass(e.zebra[i?1:0]).addClass(e.zebra[i?0:1])}));b.debug&&d.benchmark("Applying Zebra widget",k)},remove:function(c,b,e){var d;b=b.$tbodies;var g=(e.zebra||["even","odd"]).join(" ");for(e=0;e<b.length;e++)d=a.tablesorter.processTbody(c,b.eq(e),!0),
d.children().removeClass(g),a.tablesorter.processTbody(c,d,!1)}})})(jQuery);
(function(a){a.fn.hoverIntent=function(d,c,b){var e={interval:100,sensitivity:7,timeout:0};e=typeof d==="object"?a.extend(e,d):a.isFunction(c)?a.extend(e,{over:d,out:c,selector:b}):a.extend(e,{over:d,out:d,selector:c});var f,g,h,i,k=function(a){f=a.pageX;g=a.pageY},l=function(b,c){c.hoverIntent_t=clearTimeout(c.hoverIntent_t);if(Math.abs(h-f)+Math.abs(i-g)<e.sensitivity)return a(c).off("mousemove.hoverIntent",k),c.hoverIntent_s=1,e.over.apply(c,[b]);else h=f,i=g,c.hoverIntent_t=setTimeout(function(){l(b,
c)},e.interval)};d=function(b){var c=jQuery.extend({},b),d=this;if(d.hoverIntent_t)d.hoverIntent_t=clearTimeout(d.hoverIntent_t);if(b.type=="mouseenter"){if(h=c.pageX,i=c.pageY,a(d).on("mousemove.hoverIntent",k),d.hoverIntent_s!=1)d.hoverIntent_t=setTimeout(function(){l(c,d)},e.interval)}else if(a(d).off("mousemove.hoverIntent",k),d.hoverIntent_s==1)d.hoverIntent_t=setTimeout(function(){d.hoverIntent_t=clearTimeout(d.hoverIntent_t);d.hoverIntent_s=0;e.out.apply(d,[c])},e.timeout)};return this.on({"mouseenter.hoverIntent":d,
"mouseleave.hoverIntent":d},e.selector)}})(jQuery);typeof JSON!=="object"&&(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function d(a){e.lastIndex=0;return e.test(a)?'"'+a.replace(e,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,b){var e,h,q,t,n=f,s,o=b[a];o&&typeof o==="object"&&typeof o.toJSON==="function"&&(o=o.toJSON(a));typeof i==="function"&&(o=i.call(b,a,o));switch(typeof o){case "string":return d(o);case "number":return isFinite(o)?String(o):"null";case "boolean":case "null":return String(o);
case "object":if(!o)return"null";f+=g;s=[];if(Object.prototype.toString.apply(o)==="[object Array]"){t=o.length;for(e=0;e<t;e+=1)s[e]=c(e,o)||"null";q=s.length===0?"[]":f?"[\n"+f+s.join(",\n"+f)+"\n"+n+"]":"["+s.join(",")+"]";f=n;return q}if(i&&typeof i==="object"){t=i.length;for(e=0;e<t;e+=1)typeof i[e]==="string"&&(h=i[e],(q=c(h,o))&&s.push(d(h)+(f?": ":":")+q))}else for(h in o)Object.prototype.hasOwnProperty.call(o,h)&&(q=c(h,o))&&s.push(d(h)+(f?": ":":")+q);q=s.length===0?"{}":f?"{\n"+f+s.join(",\n"+
f)+"\n"+n+"}":"{"+s.join(",")+"}";f=n;return q}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,e){var d;g=f="";if(typeof e==="number")for(d=0;d<e;d+=1)g+=" ";else typeof e==="string"&&(g=e);if((i=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,c){function e(a,b){var d,f,g=a[b];if(g&&typeof g==="object")for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f=e(g,d),f!==void 0?g[d]=f:delete g[d]);return c.call(a,b,g)}var d;a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof c==="function"?e({"":d},""):d;throw new SyntaxError("JSON.parse");}})();
(function(){var a=function(){var a=/\-([a-z])/g,b=function(a,b){return b.toUpperCase()};return function(c){return c.replace(a,b)}}(),d=function(b,c){var e,d,f,g,i;window.getComputedStyle?e=window.getComputedStyle(b,null).getPropertyValue(c):(e=a(c),e=b.currentStyle?b.currentStyle[e]:b.style[e]);if(c==="cursor"&&(!e||e==="auto")){d=b.tagName.toLowerCase();f=["a"];g=0;for(i=f.length;g<i;g++)if(d===f[g])return"pointer"}return e},c=function(a){if(k.prototype._singleton){if(!a)a=window.event;var b;if(this!==
window)b=this;else if(a.target)b=a.target;else if(a.srcElement)b=a.srcElement;k.prototype._singleton.setCurrent(b)}},b=function(a,b){if(a.addClass)return a.addClass(b),a;if(b&&typeof b==="string"){var c=(b||"").split(/\s+/);if(a.nodeType===1)if(a.className){for(var e=" "+a.className+" ",d=a.className,f=0,g=c.length;f<g;f++)e.indexOf(" "+c[f]+" ")<0&&(d+=" "+c[f]);a.className=d.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},e=function(a,b){if(a.removeClass)return a.removeClass(b),a;if(b&&typeof b===
"string"||b===void 0){var c=(b||"").split(/\s+/);if(a.nodeType===1&&a.className)if(b){for(var e=(" "+a.className+" ").replace(/[\n\t]/g," "),d=0,f=c.length;d<f;d++)e=e.replace(" "+c[d]+" "," ");a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=""}return a},f=function(a,b){return!(b&&b.useNoCache===!1)?(a.indexOf("?")===-1?"?":"&")+"nocache="+(new Date).getTime():""},g=function(a,b){if(b.indexOf)return b.indexOf(a);for(var c=0,e=b.length;c<e;c++)if(b[c]===a)return c;return-1},h=function(a){if(typeof a===
"string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!a.length)return[a];return a},i=function(a,b,c,e,d){d?window.setTimeout(function(){a.call(b,c,e)},0):a.call(b,c,e)},k=function(a,b){a&&(k.prototype._singleton||this).glue(a);if(k.prototype._singleton)return k.prototype._singleton;k.prototype._singleton=this;this.options={};for(var c in j)this.options[c]=j[c];for(var e in b)this.options[e]=b[e];this.handlers={};if(k.detectFlashSupport()){var d,g;c=k.prototype._singleton;
e=document.getElementById("global-zeroclipboard-html-bridge");if(!e){e={};for(d in c.options)e[d]=c.options[d];e.amdModuleId=q;e.cjsModuleId=t;d=[];var i=[];e.trustedOrigins&&(typeof e.trustedOrigins==="string"?i.push(e.trustedOrigins):typeof e.trustedOrigins==="object"&&"length"in e.trustedOrigins&&(i=i.concat(e.trustedOrigins)));e.trustedDomains&&(typeof e.trustedDomains==="string"?i.push(e.trustedDomains):typeof e.trustedDomains==="object"&&"length"in e.trustedDomains&&(i=i.concat(e.trustedDomains)));
i.length&&d.push("trustedOrigins="+encodeURIComponent(i.join(",")));typeof e.amdModuleId==="string"&&e.amdModuleId&&d.push("amdModuleId="+encodeURIComponent(e.amdModuleId));typeof e.cjsModuleId==="string"&&e.cjsModuleId&&d.push("cjsModuleId="+encodeURIComponent(e.cjsModuleId));d=d.join("&");d='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+c.options.moviePath+f(c.options.moviePath,
c.options)+'"/>         <param name="allowScriptAccess" value="'+c.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+d+'"/>         <embed src="'+c.options.moviePath+f(c.options.moviePath,c.options)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+
d+'"           scale="exactfit">         </embed>       </object>';e=document.createElement("div");e.id="global-zeroclipboard-html-bridge";e.setAttribute("class","global-zeroclipboard-container");e.setAttribute("data-clipboard-ready",!1);e.style.position="absolute";e.style.left="-9999px";e.style.top="-9999px";e.style.width="15px";e.style.height="15px";e.style.zIndex="9999";e.innerHTML=d;document.body.appendChild(e)}c.htmlBridge=e;if((d=document["global-zeroclipboard-flash-bridge"])&&(g=d.length))d=
d[g-1];c.flashBridge=d||e.children[0].lastElementChild}},l,p=[];k.prototype.setCurrent=function(a){l=a;this.reposition();var b=a.getAttribute("title");b&&this.setTitle(b);a=this.options.forceHandCursor===!0||d(a,"cursor")==="pointer";this.ready()&&this.flashBridge.setHandCursor(a);return this};k.prototype.setText=function(a){if(a&&a!=="")this.options.text=a,this.ready()&&this.flashBridge.setText(a);return this};k.prototype.setTitle=function(a){a&&a!==""&&this.htmlBridge.setAttribute("title",a);return this};
k.prototype.setSize=function(a,b){this.ready()&&this.flashBridge.setSize(a,b);return this};k.prototype.setHandCursor=function(a){var b=a=typeof a==="boolean"?a:!!a;this.ready()&&this.flashBridge.setHandCursor(b);this.options.forceHandCursor=a;return this};k.version="1.2.3";var j={moviePath:"ZeroClipboard.swf",trustedOrigins:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:!0,forceHandCursor:!1};k.setDefaults=function(a){for(var b in a)j[b]=
a[b]};k.destroy=function(){k.prototype._singleton.unglue(p);var a=k.prototype._singleton.htmlBridge;a.parentNode.removeChild(a);delete k.prototype._singleton};k.detectFlashSupport=function(){var a=!1;if(typeof ActiveXObject==="function")try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(a=!0)}catch(b){}!a&&navigator.mimeTypes["application/x-shockwave-flash"]&&(a=!0);return a};var q=null,t=null;k.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top=
"-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");e(l,this.options.activeClass);l=null;this.options.text=null;return this};k.prototype.ready=function(){var a=this.htmlBridge.getAttribute("data-clipboard-ready");return a==="true"||a===!0};k.prototype.reposition=function(){if(!l)return!1;var a=l,b={left:0,top:0,width:0,height:0,zIndex:999999999},c=d(a,"z-index");if(c&&c!=="auto")b.zIndex=parseInt(c,10);if(a.getBoundingClientRect){a=a.getBoundingClientRect();
var e;if("pageXOffset"in window&&"pageYOffset"in window)c=window.pageXOffset,e=window.pageYOffset;else{c=1;if(typeof document.body.getBoundingClientRect==="function")c=document.body.getBoundingClientRect(),c=c.right-c.left,e=document.body.offsetWidth,c=Math.round(c/e*100)/100;e=c;c=Math.round(document.documentElement.scrollLeft/e);e=Math.round(document.documentElement.scrollTop/e)}var f=document.documentElement.clientTop||0;b.left=a.left+c-(document.documentElement.clientLeft||0);b.top=a.top+e-f;
b.width="width"in a?a.width:a.right-a.left;b.height="height"in a?a.height:a.bottom-a.top}this.htmlBridge.style.top=b.top+"px";this.htmlBridge.style.left=b.left+"px";this.htmlBridge.style.width=b.width+"px";this.htmlBridge.style.height=b.height+"px";this.htmlBridge.style.zIndex=b.zIndex+1;this.setSize(b.width,b.height);return this};k.dispatch=function(a,b){k.prototype._singleton.receiveEvent(a,b)};k.prototype.on=function(a,b){for(var c=a.toString().split(/\s/g),e=0;e<c.length;e++)a=c[e].toLowerCase().replace(/^on/,
""),this.handlers[a]||(this.handlers[a]=b);this.handlers.noflash&&!k.detectFlashSupport()&&this.receiveEvent("onNoFlash",null);return this};k.prototype.addEventListener=k.prototype.on;k.prototype.off=function(a,b){for(var c=a.toString().split(/\s/g),e=0;e<c.length;e++)for(var d in a=c[e].toLowerCase().replace(/^on/,""),this.handlers)d===a&&this.handlers[d]===b&&delete this.handlers[d];return this};k.prototype.removeEventListener=k.prototype.off;k.prototype.receiveEvent=function(a,c){a=a.toString().toLowerCase().replace(/^on/,
"");var d=l,f=!0;switch(a){case "load":if(c&&parseFloat(c.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:c.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",!0);break;case "mouseover":b(d,this.options.hoverClass);break;case "mouseout":e(d,this.options.hoverClass);this.resetBridge();break;case "mousedown":b(d,this.options.activeClass);break;case "mouseup":e(d,this.options.activeClass);break;case "datarequested":f=d.getAttribute("data-clipboard-target");
(f=(f=!f?null:document.getElementById(f))?f.value||f.textContent||f.innerText:d.getAttribute("data-clipboard-text"))&&this.setText(f);f=!1;break;case "complete":this.options.text=null}if(this.handlers[a]){var g=this.handlers[a];typeof g==="string"&&typeof window[g]==="function"&&(g=window[g]);typeof g==="function"&&i(g,d,this,c,f)}};k.prototype.glue=function(a){a=h(a);for(var b=0;b<a.length;b++)if(g(a[b],p)==-1){p.push(a[b]);var e=a[b],d=c;e.addEventListener?e.addEventListener("mouseover",d,!1):e.attachEvent&&
e.attachEvent("onmouseover",d)}return this};k.prototype.unglue=function(a){a=h(a);for(var b=0;b<a.length;b++){var e=a[b],d=c;e.removeEventListener?e.removeEventListener("mouseover",d,!1):e.detachEvent&&e.detachEvent("onmouseover",d);e=g(a[b],p);e!=-1&&p.splice(e,1)}return this};typeof define==="function"&&define.amd?define(["require","exports","module"],function(a,b,c){q=c&&c.id||null;return k}):typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports?(t=module.id||null,
module.exports=k):window.ZeroClipboard=k})();
(function(a,d,c){function b(){g=d[h](function(){e.each(function(){var b=a(this),c=b.width(),e=b.height(),d=a.data(this,k);if(c!==d.w||e!==d.h)b.trigger(i,[d.w=c,d.h=e])});b()},f[l])}var e=a([]),f=a.resize=a.extend(a.resize,{}),g,h="setTimeout",i="resize",k=i+"-special-event",l="delay";f[l]=250;f.throttleWindow=!0;a.event.special[i]={setup:function(){if(!f.throttleWindow&&this[h])return!1;var c=a(this);e=e.add(c);a.data(this,k,{w:c.width(),h:c.height()});e.length===1&&b()},teardown:function(){if(!f.throttleWindow&&
this[h])return!1;var b=a(this);e=e.not(b);b.removeData(k);e.length||clearTimeout(g)},add:function(b){function e(b,f,g){var i=a(this),h=a.data(this,k);h.w=f!==c?f:i.width();h.h=g!==c?g:i.height();d.apply(this,arguments)}if(!f.throttleWindow&&this[h])return!1;var d;if(a.isFunction(b))return d=b,e;else d=b.handler,b.handler=e}}})(jQuery,this);
(function(a,d){typeof exports=="object"?module.exports=d():typeof define=="function"&&define.amd?define(d):a.Spinner=d()})(this,function(){function a(a,b){var c=document.createElement(a||"div"),e;for(e in b)c[e]=b[e];return c}function d(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,e){var d=["opacity",b,~~(a*100),c,e].join("-");c=0.01+c/e*100;e=Math.max(1-(1-a)/b*(100-c),a);var f=p.substring(0,p.indexOf("Animation")).toLowerCase();l[d]||(j.insertRule("@"+
(f&&"-"+f+"-"||"")+"keyframes "+d+"{0%{opacity:"+e+"}"+c+"%{opacity:"+a+"}"+(c+0.01)+"%{opacity:1}"+(c+b)%100+"%{opacity:"+a+"}100%{opacity:"+e+"}}",j.cssRules.length),l[d]=1);return d}function b(a,b){var c=a.style,e,d;b=b.charAt(0).toUpperCase()+b.slice(1);for(d=0;d<k.length;d++)if(e=k[d]+b,c[e]!==void 0)return e;if(c[b]!==void 0)return b}function e(a,c){for(var e in c)a.style[b(a,e)||e]=c[e];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)a[e]===void 0&&
(a[e]=c[e])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){if(typeof this=="undefined")return new h(a);this.opts=f(a||{},h.defaults,q)}function i(){function b(c,e){return a("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',e)}j.addRule(".spin-vml","behavior:url(#default#VML)");h.prototype.lines=function(a,c){function f(){return e(b("group",{coordsize:h+" "+h,coordorigin:-i+" "+-i}),{width:h,
height:h})}function g(a,h,j){d(k,d(e(f(),{rotation:360/c.lines*a+"deg",left:~~h}),d(e(b("roundrect",{arcsize:c.corners}),{width:i,height:c.width,left:c.radius,top:-c.width>>1,filter:j}),b("fill",{color:typeof c.color=="string"?c.color:c.color[a%c.color.length],opacity:c.opacity}),b("stroke",{opacity:0}))))}var i=c.length+c.width,h=2*i,j=-(c.width+c.length)*2+"px",k=e(f(),{position:"absolute",top:j,left:j});if(c.shadow)for(j=1;j<=c.lines;j++)g(j,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");
for(j=1;j<=c.lines;j++)g(j);return d(a,k)};h.prototype.opacity=function(a,b,c,e){a=a.firstChild;e=e.shadow&&e.lines||0;if(a&&b+e<a.childNodes.length&&(a=(a=(a=a.childNodes[b+e])&&a.firstChild)&&a.firstChild))a.opacity=c}}var k=["webkit","Moz","ms","O"],l={},p,j=function(){var b=a("style",{type:"text/css"});d(document.getElementsByTagName("head")[0],b);return b.sheet||b.styleSheet}(),q={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:0.25,fps:20,
zIndex:2E9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={};f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=e(a(0,{className:d.className}),{position:d.position,width:0,zIndex:d.zIndex}),i=d.radius+d.length+d.width,h,j;b&&(b.insertBefore(f,b.firstChild||null),j=g(b),h=g(f),e(f,{left:(d.left=="auto"?j.x-h.x+(b.offsetWidth>>1):parseInt(d.left,10)+i)+"px",top:(d.top=="auto"?j.y-h.y+(b.offsetHeight>>1):parseInt(d.top,10)+i)+"px"}));f.setAttribute("role",
"progressbar");c.lines(f,c.opts);if(!p){var r=0,k=(d.lines-1)*(1-d.direction)/2,l,q=d.fps,t=q/d.speed,E=(1-d.opacity)/(t*d.trail/100),J=t/d.lines;(function K(){r++;for(var a=0;a<d.lines;a++)l=Math.max(1-(r+(d.lines-a)*J)%t*E,d.opacity),c.opacity(f,a*d.direction+k,l,d);c.timeout=c.el&&setTimeout(K,~~(1E3/q))})()}return c},stop:function(){var a=this.el;if(a)clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0;return this},lines:function(b,f){function g(b,c){return e(a(),
{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var i=0,h=(f.lines-1)*(1-f.direction)/2,j;i<f.lines;i++)j=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:p&&c(f.opacity,f.trail,h+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),
f.shadow&&d(j,e(g("#000","0 0 4px #000"),{top:"2px"})),d(b,d(j,g(typeof f.color=="string"?f.color:f.color[i%f.color.length],"0 0 1px rgba(0,0,0,.1)")));return b},opacity:function(a,b,c){if(b<a.childNodes.length)a.childNodes[b].style.opacity=c}});var t=e(a("group"),{behavior:"url(#default#VML)"});!b(t,"transform")&&t.adj?i():p=b(t,"animation");return h});
(function(a){if(typeof exports=="object")a(require("jquery"),require("spin"));else if(typeof define=="function"&&define.amd)define(["jquery","spin"],a);else{if(!window.Spinner)throw Error("Spin.js not present");a(window.jQuery,window.Spinner)}})(function(a,d){a.fn.spin=function(c,b){return this.each(function(){var e=a(this),f=e.data();f.spinner&&(f.spinner.stop(),delete f.spinner);if(c!==!1)c=a.extend({color:b||e.css("color")},a.fn.spin.presets[c]||c),f.spinner=(new d(c)).spin(this)})};a.fn.spin.presets=
{tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}});
(function(a,d){window.mixpanel=d;var c,b,e,f;c=a.createElement("script");c.type="text/javascript";c.async=!0;c.src=("https:"===a.location.protocol?"https:":"http:")+"//cdn.mxpnl.com/libs/mixpanel-2.2.min.js";b=a.getElementsByTagName("script")[0];b.parentNode.insertBefore(c,b);d._i=[];d.init=function(a,b,c){function k(a,b){var c=b.split(".");2==c.length&&(a=a[c[0]],b=c[1]);a[b]=function(){a.push([b].concat(Array.prototype.slice.call(arguments,0)))}}var l=d;"undefined"!==typeof c?l=d[c]=[]:c="mixpanel";
l.people=l.people||[];e=["disable","track","track_pageview","track_links","track_forms","register","register_once","unregister","identify","alias","name_tag","set_config","people.set","people.set_once","people.increment","people.track_charge","people.append"];for(f=0;f<e.length;f++)k(l,e[f]);d._i.push([a,b,c])};d.__SV=1.2})(document,window.mixpanel||[]);
(function(a){var d={cursor:"move",decelerate:!0,triggerHardware:!1,y:!0,x:!0,slowdown:0.9,maxvelocity:40,throttleFPS:60,movingClass:{up:"kinetic-moving-up",down:"kinetic-moving-down",left:"kinetic-moving-left",right:"kinetic-moving-right"},deceleratingClass:{up:"kinetic-decelerating-up",down:"kinetic-decelerating-down",left:"kinetic-decelerating-left",right:"kinetic-decelerating-right"}};if(!window.requestAnimationFrame)window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}();a.support=a.support||{};a.extend(a.support,{touch:"ontouchend"in document});var c=function(){return!1},b=function(a,b){var c=a;a>0?a>b&&(c=b):a<0-b&&(c=0-b);return c},e=function(a,b){this.removeClass(a.movingClass.up).removeClass(a.movingClass.down).removeClass(a.movingClass.left).removeClass(a.movingClass.right).removeClass(a.deceleratingClass.up).removeClass(a.deceleratingClass.down).removeClass(a.deceleratingClass.left).removeClass(a.deceleratingClass.right);
a.velocity>0&&this.addClass(b.right);a.velocity<0&&this.addClass(b.left);a.velocityY>0&&this.addClass(b.down);a.velocityY<0&&this.addClass(b.up)},f=function(a,b){b.velocity=0;b.velocityY=0;b.decelerate=!0;typeof b.stopped==="function"&&b.stopped.call(a,b)},g=function(a,b){var c=a[0];if(b.x&&c.scrollWidth>0){if(c.scrollLeft=b.scrollLeft=c.scrollLeft+b.velocity,Math.abs(b.velocity)>0)b.velocity=b.decelerate?Math.floor(Math.abs(b.velocity))===0?0:b.velocity*b.slowdown:b.velocity}else b.velocity=0;if(b.y&&
c.scrollHeight>0){if(c.scrollTop=b.scrollTop=c.scrollTop+b.velocityY,Math.abs(b.velocityY)>0)b.velocityY=b.decelerate?Math.floor(Math.abs(b.velocityY))===0?0:b.velocityY*b.slowdown:b.velocityY}else b.velocityY=0;e.call(a,b,b.deceleratingClass);typeof b.moved==="function"&&b.moved.call(a,b);Math.abs(b.velocity)>0||Math.abs(b.velocityY)>0?window.requestAnimationFrame(function(){g(a,b)}):f(a,b)},h=function(b){var c=a.kinetic.callMethods[b],e=Array.prototype.slice.call(arguments);c&&this.each(function(){var b=
e.slice(1),d=a(this).data("kinetic-settings");b.unshift(d);c.apply(this,b)})},i=function(b,e){a.support.touch?b.bind("touchstart",e.events.touchStart).bind("touchend",e.events.inputEnd).bind("touchmove",e.events.touchMove):b.mousedown(e.events.inputDown).mouseup(e.events.inputEnd).mousemove(e.events.inputMove);b.click(e.events.inputClick).scroll(e.events.scroll).bind("selectstart",c).bind("dragstart",e.events.dragStart)},k=function(c){this.addClass("kinetic-active").each(function(){var f=this,h=a(this);
if(!h.data("kinetic-settings")){var k=a.extend({},d,c),t,n=!1,s,o=!1,u=!1,v=1E3/k.throttleFPS,y,m;k.velocity=0;k.velocityY=0;var r=function(){u=s=t=!1};a(document).mouseup(r).click(r);var A=function(){k.velocity=b(n-t,k.maxvelocity);k.velocityY=b(o-s,k.maxvelocity)},D=function(b){if(a.isFunction(k.filterTarget))return k.filterTarget.call(f,b)!==!1;return!0},Q=function(a,b){u=!0;k.velocity=n=0;k.velocityY=o=0;t=a;s=b},B=function(b,c){if(!y||new Date>new Date(y.getTime()+v))if(y=new Date,u&&(t||s))m&&
(a(m).blur(),m=null,h.focus()),k.decelerate=!1,k.velocity=k.velocityY=0,h[0].scrollLeft=k.scrollLeft=k.x?h[0].scrollLeft-(b-t):h[0].scrollLeft,h[0].scrollTop=k.scrollTop=k.y?h[0].scrollTop-(c-s):h[0].scrollTop,n=t,o=s,t=b,s=c,A(),e.call(h,k,k.movingClass),typeof k.moved==="function"&&k.moved.call(h,k)};k.events={touchStart:function(a){var b;D(a.target)&&(b=a.originalEvent.touches[0],Q(b.clientX,b.clientY),a.stopPropagation())},touchMove:function(a){var b;u&&(b=a.originalEvent.touches[0],B(b.clientX,
b.clientY),a.preventDefault&&a.preventDefault())},inputDown:function(a){if(D(a.target))Q(a.clientX,a.clientY),m=a.target,a.target.nodeName==="IMG"&&a.preventDefault(),a.stopPropagation()},inputEnd:function(a){if(t&&n&&k.decelerate===!1)k.decelerate=!0,A(),t=n=u=!1,g(h,k);m=null;a.preventDefault&&a.preventDefault()},inputMove:function(a){u&&(B(a.clientX,a.clientY),a.preventDefault&&a.preventDefault())},scroll:function(a){typeof k.moved==="function"&&k.moved.call(h,k);a.preventDefault&&a.preventDefault()},
inputClick:function(a){if(Math.abs(k.velocity)>0)return a.preventDefault(),!1},dragStart:function(){if(m)return!1}};i(h,k);h.data("kinetic-settings",k).css("cursor",k.cursor);k.triggerHardware&&h.css({"-webkit-transform":"translate3d(0,0,0)","-webkit-perspective":"1000","-webkit-backface-visibility":"hidden"})}})};a.kinetic={settingsKey:"kinetic-settings",callMethods:{start:function(b,c){var e=a(this);if(b=a.extend(b,c))b.decelerate=!1,g(e,b)},end:function(b){a(this);if(b)b.decelerate=!0},stop:function(b){var c=
a(this);f(c,b)},detach:function(b){var e=a(this);a.support.touch?e.unbind("touchstart",b.events.touchStart).unbind("touchend",b.events.inputEnd).unbind("touchmove",b.events.touchMove):e.unbind("mousedown",b.events.inputDown).unbind("mouseup",b.events.inputEnd).unbind("mousemove",b.events.inputMove).unbind("scroll",b.events.scroll);e.unbind("click",b.events.inputClick).unbind("selectstart",c);e.unbind("dragstart",b.events.dragStart);e.removeClass("kinetic-active").css("cursor","")},attach:function(b){var c=
a(this);i(c,b);c.addClass("kinetic-active").css("cursor","move")}}};a.fn.kinetic=function(a){typeof a==="string"?h.apply(this,arguments):k.call(this,a);return this}})(window.jQuery||window.Zepto);
(function(){var a=[].indexOf||function(a){for(var b=0,e=this.length;b<e;b++)if(b in this&&this[b]===a)return b;return-1},d=[].slice;(function(a,b){return typeof define==="function"&&define.amd?define("waypoints",["jquery"],function(e){return b(e,a)}):b(a.jQuery,a)})(this,function(c,b){var e,f,g,h,i,k,l,p,j,q,t,n,s,o,u,v;e=c(b);p=a.call(b,"ontouchstart")>=0;h={horizontal:{},vertical:{}};i=1;l={};k="waypoints-context-id";t="resize.waypoints";n="scroll.waypoints";s=1;o="waypoints-waypoint-ids";u="waypoint";
v="waypoints";f=function(){function a(e){var d=this;this.$element=e;this.element=e[0];this.didScroll=this.didResize=!1;this.id="context"+i++;this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()};this.waypoints={horizontal:{},vertical:{}};e.data(k,this.id);l[this.id]=this;e.bind(n,function(){var a;if(!d.didScroll&&!p)return d.didScroll=!0,b.setTimeout(function(){d.doScroll();return d.didScroll=!1},c[v].settings.scrollThrottle)});e.bind(t,function(){var a;if(!d.didResize)return d.didResize=!0,b.setTimeout(function(){c[v]("refresh");
return d.didResize=!1},c[v].settings.resizeThrottle)})}a.prototype.doScroll=function(){var a,b=this;a={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};if(p&&(!a.vertical.oldScroll||!a.vertical.newScroll))c[v]("refresh");c.each(a,function(a,e){var d,f,g;g=[];d=(f=e.newScroll>e.oldScroll)?e.forward:e.backward;c.each(b.waypoints[a],function(a,
b){var c,d;if(e.oldScroll<(c=b.offset)&&c<=e.newScroll)return g.push(b);else if(e.newScroll<(d=b.offset)&&d<=e.oldScroll)return g.push(b)});g.sort(function(a,b){return a.offset-b.offset});f||g.reverse();return c.each(g,function(a,b){if(b.options.continuous||a===g.length-1)return b.trigger([d])})});return this.oldScroll={x:a.horizontal.newScroll,y:a.vertical.newScroll}};a.prototype.refresh=function(){var a,b,e=this;b=c.isWindow(this.element);a=this.$element.offset();this.doScroll();a={horizontal:{contextOffset:b?
0:a.left,contextScroll:b?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:b?0:a.top,contextScroll:b?0:this.oldScroll.y,contextDimension:b?c[v]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};return c.each(a,function(a,b){return c.each(e.waypoints[a],function(a,e){var d,f,g,i,h;d=e.options.offset;g=e.offset;f=c.isWindow(e.element)?
0:e.$element.offset()[b.offsetProp];c.isFunction(d)?d=d.apply(e.element):typeof d==="string"&&(d=parseFloat(d),e.options.offset.indexOf("%")>-1&&(d=Math.ceil(b.contextDimension*d/100)));e.offset=f-b.contextOffset+b.contextScroll-d;if(!(e.options.onlyOnScroll&&g!=null)&&e.enabled)if(g!==null&&g<(i=b.oldScroll)&&i<=e.offset)return e.trigger([b.backward]);else if(g!==null&&g>(h=b.oldScroll)&&h>=e.offset)return e.trigger([b.forward]);else if(g===null&&b.oldScroll>=e.offset)return e.trigger([b.forward])})})};
a.prototype.checkEmpty=function(){if(c.isEmptyObject(this.waypoints.horizontal)&&c.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([t,n].join(" ")),delete l[this.id]};return a}();g=function(){function a(b,e,d){var f;d=c.extend({},c.fn[u].defaults,d);if(d.offset==="bottom-in-view")d.offset=function(){var a;a=c[v]("viewportHeight");c.isWindow(e.element)||(a=e.$element.height());return a-c(this).outerHeight()};this.$element=b;this.element=b[0];this.axis=d.horizontal?"horizontal":"vertical";
this.callback=d.handler;this.context=e;this.enabled=d.enabled;this.id="waypoints"+s++;this.offset=null;this.options=d;e.waypoints[this.axis][this.id]=this;h[this.axis][this.id]=this;d=(f=b.data(o))!=null?f:[];d.push(this.id);b.data(o,d)}a.prototype.trigger=function(a){if(this.enabled&&(this.callback!=null&&this.callback.apply(this.element,a),this.options.triggerOnce))return this.destroy()};a.prototype.disable=function(){return this.enabled=!1};a.prototype.enable=function(){this.context.refresh();
return this.enabled=!0};a.prototype.destroy=function(){delete h[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty()};a.getWaypointsByElement=function(a){var b;a=c(a).data(o);if(!a)return[];b=c.extend({},h.horizontal,h.vertical);return c.map(a,function(a){return b[a]})};return a}();q={init:function(a,b){b==null&&(b={});if(b.handler==null)b.handler=a;this.each(function(){var a,e,d;a=c(this);d=(e=b.context)!=null?e:c.fn[u].defaults.context;c.isWindow(d)||
(d=a.closest(d));d=c(d);(e=l[d.data(k)])||(e=new f(d));return new g(a,e,b)});c[v]("refresh");return this},disable:function(){return q._invoke(this,"disable")},enable:function(){return q._invoke(this,"enable")},destroy:function(){return q._invoke(this,"destroy")},prev:function(a,b){return q._traverse.call(this,a,b,function(a,b,c){if(b>0)return a.push(c[b-1])})},next:function(a,b){return q._traverse.call(this,a,b,function(a,b,c){if(b<c.length-1)return a.push(c[b+1])})},_traverse:function(a,e,d){var f,
g;a==null&&(a="vertical");e==null&&(e=b);g=j.aggregate(e);f=[];this.each(function(){var b;b=c.inArray(this,g[a]);return d(f,b,g[a])});return this.pushStack(f)},_invoke:function(a,b){a.each(function(){var a;a=g.getWaypointsByElement(this);return c.each(a,function(a,c){c[b]();return!0})});return this}};c.fn[u]=function(){var a,b;b=arguments[0];a=2<=arguments.length?d.call(arguments,1):[];return q[b]?q[b].apply(this,a):c.isFunction(b)?q.init.apply(this,arguments):c.isPlainObject(b)?q.init.apply(this,
[null,b]):b?c.error("The "+b+" method does not exist in jQuery Waypoints."):c.error("jQuery Waypoints needs a callback function or handler option.")};c.fn[u].defaults={context:b,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1};j={refresh:function(){return c.each(l,function(a,b){return b.refresh()})},viewportHeight:function(){var a;return(a=b.innerHeight)!=null?a:e.height()},aggregate:function(a){var b,e,d;b=h;a&&(b=(d=l[c(a).data(k)])!=null?d.waypoints:void 0);if(!b)return[];e={horizontal:[],
vertical:[]};c.each(e,function(a,d){c.each(b[a],function(a,b){return d.push(b)});d.sort(function(a,b){return a.offset-b.offset});e[a]=c.map(d,function(a){return a.element});return e[a]=c.unique(e[a])});return e},above:function(a){a==null&&(a=b);return j._filter(a,"vertical",function(a,b){return b.offset<=a.oldScroll.y})},below:function(a){a==null&&(a=b);return j._filter(a,"vertical",function(a,b){return b.offset>a.oldScroll.y})},left:function(a){a==null&&(a=b);return j._filter(a,"horizontal",function(a,
b){return b.offset<=a.oldScroll.x})},right:function(a){a==null&&(a=b);return j._filter(a,"horizontal",function(a,b){return b.offset>a.oldScroll.x})},enable:function(){return j._invoke("enable")},disable:function(){return j._invoke("disable")},destroy:function(){return j._invoke("destroy")},extendFn:function(a,b){return q[a]=b},_invoke:function(a){var b;b=c.extend({},h.vertical,h.horizontal);return c.each(b,function(b,c){c[a]();return!0})},_filter:function(a,b,e){var d,f;d=l[c(a).data(k)];if(!d)return[];
f=[];c.each(d.waypoints[b],function(a,b){if(e(d,b))return f.push(b)});f.sort(function(a,b){return a.offset-b.offset});return c.map(f,function(a){return a.element})}};c[v]=function(){var a,b;b=arguments[0];a=2<=arguments.length?d.call(arguments,1):[];return j[b]?j[b].apply(null,a):j.aggregate.call(null,b)};c[v].settings={resizeThrottle:100,scrollThrottle:30};return e.load(function(){return c[v]("refresh")})})}).call(this);
(function(a,d){typeof exports==="object"?module.exports=d(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):typeof define==="function"&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],d):a.URI=d(a.punycode,a.IPv6,a.SecondLevelDomains,a)})(this,function(a,d,c,b){function e(a,b){if(!(this instanceof e))return new e(a,b);a===void 0&&(a=typeof location!=="undefined"?location.href+"":"");this.href(a);if(b!==void 0)return this.absoluteTo(b);return this}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,
"\\$1")}function g(a){if(a===void 0)return"Undefined";return String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return g(a)==="Array"}function i(a,b){var c,e;if(h(b)){c=0;for(e=b.length;c<e;c++)if(!i(a,b[c]))return!1;return!0}var d=g(b);c=0;for(e=a.length;c<e;c++)if(d==="RegExp"){if(typeof a[c]==="string"&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b))return!1;if(a.length!==b.length)return!1;a.sort();b.sort();for(var c=0,e=a.length;c<e;c++)if(a[c]!==
b[c])return!1;return!0}function l(a){return escape(a)}function p(a){return encodeURIComponent(a).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}var j=b&&b.URI;e.version="1.12.0";var q=e.prototype,t=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}};e.duplicateQueryParameters=!1;e.escapeQuerySpace=
!0;e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i;e.idn_expression=/[^a-z0-9\.-]/i;e.punycode_expression=/(xn--)/i;e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/;e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/;
e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u2018\u2019]))/ig;e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?\u00ab\u00bb\u201c\u201d\u201e\u2018\u2019]+$/};e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"};e.invalid_hostname_characters=
/[^a-zA-Z0-9\.-]/;e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src"};e.getDomAttribute=function(a){if(a&&a.nodeName){var b=a.nodeName.toLowerCase();if(!(b==="input"&&a.type!=="image"))return e.domAttributes[b]}};e.encode=p;e.decode=decodeURIComponent;e.iso8859=function(){e.encode=escape;e.decode=unescape};e.unicode=function(){e.encode=p;e.decode=decodeURIComponent};e.characters=
{pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}};e.encodeQuery=
function(a,b){var c=e.encode(a+"");return b?c.replace(/%20/g,"+"):c};e.decodeQuery=function(a,b){a+="";try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}};e.recodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.encodePathSegment(e.decode(a[b]));return a.join("/")};e.decodePath=function(a){a=(a+"").split("/");for(var b=0,c=a.length;b<c;b++)a[b]=e.decodePathSegment(a[b]);return a.join("/")};var n={encode:"encode",decode:"decode"},s,o=function(a,b){return function(c){return e[b](c+
"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}};for(s in n)e[s+"PathSegment"]=o("pathname",n[s]);e.encodeReserved=o("reserved","encode");e.parse=function(a,b){var c;b||(b={});c=a.indexOf("#");if(c>-1)b.fragment=a.substring(c+1)||null,a=a.substring(0,c);c=a.indexOf("?");if(c>-1)b.query=a.substring(c+1)||null,a=a.substring(0,c);if(a.substring(0,2)==="//")b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b);else if(c=a.indexOf(":"),c>-1)b.protocol=a.substring(0,
c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:b.protocol==="file"?a=a.substring(c+3):a.substring(c+1,c+3)==="//"?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0);b.path=a;return b};e.parseHost=function(a,b){var c=a.indexOf("/"),e;if(c===-1)c=a.length;a.charAt(0)==="["?(e=a.indexOf("]"),b.hostname=a.substring(1,e)||null,b.port=a.substring(e+2,c)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,c)||null,b.port=null):(e=
a.substring(0,c).split(":"),b.hostname=e[0]||null,b.port=e[1]||null);b.hostname&&a.substring(c).charAt(0)!=="/"&&(c++,a="/"+a);return a.substring(c)||"/"};e.parseAuthority=function(a,b){a=e.parseUserinfo(a,b);return e.parseHost(a,b)};e.parseUserinfo=function(a,b){var c=a.indexOf("/"),d=c>-1?a.lastIndexOf("@",c):a.indexOf("@");d>-1&&(c===-1||d<c)?(c=a.substring(0,d).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(d+1)):(b.username=null,
b.password=null);return a};e.parseQuery=function(a,b){if(!a)return{};a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,"");if(!a)return{};for(var c={},d=a.split("&"),f=d.length,g,i,h=0;h<f;h++)g=d[h].split("="),i=e.decodeQuery(g.shift(),b),g=g.length?e.decodeQuery(g.join("="),b):null,c[i]?(typeof c[i]==="string"&&(c[i]=[c[i]]),c[i].push(g)):c[i]=g;return c};e.build=function(a){var b="";a.protocol&&(b+=a.protocol+":");if(!a.urn&&(b||a.hostname))b+="//";b+=e.buildAuthority(a)||"";typeof a.path==="string"&&
(a.path.charAt(0)!=="/"&&typeof a.hostname==="string"&&(b+="/"),b+=a.path);typeof a.query==="string"&&a.query&&(b+="?"+a.query);typeof a.fragment==="string"&&a.fragment&&(b+="#"+a.fragment);return b};e.buildHost=function(a){var b="";if(a.hostname)e.ip6_expression.test(a.hostname)?b+=a.port?"["+a.hostname+"]:"+a.port:a.hostname:(b+=a.hostname,a.port&&(b+=":"+a.port));else return"";return b};e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)};e.buildUserinfo=function(a){var b="";
a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@");return b};e.buildQuery=function(a,b,c){var d="",f,g,i,j;for(g in a)if(t.call(a,g)&&g)if(h(a[g])){f={};i=0;for(j=a[g].length;i<j;i++)a[g][i]!==void 0&&f[a[g][i]+""]===void 0&&(d+="&"+e.buildQueryParameter(g,a[g][i],c),b!==!0&&(f[a[g][i]+""]=!0))}else a[g]!==void 0&&(d+="&"+e.buildQueryParameter(g,a[g],c));return d.substring(1)};e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(b!==null?"="+e.encodeQuery(b,
c):"")};e.addQuery=function(a,b,c){if(typeof b==="object")for(var d in b)t.call(b,d)&&e.addQuery(a,d,b[d]);else if(typeof b==="string")a[b]===void 0?a[b]=c:(typeof a[b]==="string"&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=a[b].concat(c));else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");};e.removeQuery=function(a,b,c){var d;if(h(b)){c=0;for(d=b.length;c<d;c++)a[b[c]]=void 0}else if(typeof b==="object")for(d in b)t.call(b,d)&&e.removeQuery(a,d,b[d]);else if(typeof b===
"string")if(c!==void 0)if(a[b]===c)a[b]=void 0;else{if(h(a[b])){d=a[b];var f={},g,i;if(h(c)){g=0;for(i=c.length;g<i;g++)f[c[g]]=!0}else f[c]=!0;g=0;for(i=d.length;g<i;g++)f[d[g]]!==void 0&&(d.splice(g,1),i--,g--);a[b]=d}}else a[b]=void 0;else throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");};e.hasQuery=function(a,b,c,d){if(typeof b==="object"){for(var f in b)if(t.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}else if(typeof b!=="string")throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");
switch(g(c)){case "Undefined":return b in a;case "Boolean":return a=Boolean(h(a[b])?a[b].length:a[b]),c===a;case "Function":return!!c(a[b],b,a);case "Array":if(!h(a[b]))return!1;return(d?i:k)(a[b],c);case "RegExp":if(!h(a[b]))return Boolean(a[b]&&a[b].match(c));if(!d)return!1;return i(a[b],c);case "Number":c=String(c);case "String":if(!h(a[b]))return a[b]===c;if(!d)return!1;return i(a[b],c);default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter");
}};e.commonPath=function(a,b){var c=Math.min(a.length,b.length),e;for(e=0;e<c;e++)if(a.charAt(e)!==b.charAt(e)){e--;break}if(e<1)return a.charAt(0)===b.charAt(0)&&a.charAt(0)==="/"?"/":"";if(a.charAt(e)!=="/"||b.charAt(e)!=="/")e=a.substring(0,e).lastIndexOf("/");return a.substring(0,e+1)};e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,i=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var h=d.exec(a);if(!h)break;h=h.index;if(c.ignoreHtml){var j=
a.slice(Math.max(h-3,0),h);if(j&&i.test(j))continue}j=h+a.slice(h).search(f);var k=a.slice(h,j).replace(g,"");if(!c.ignore||!c.ignore.test(k))j=h+k.length,k=b(k,h,j,a),a=a.slice(0,h)+k+a.slice(j),d.lastIndex=h+k.length}d.lastIndex=0;return a};e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError("Hostname '"+
b+"' contains characters other than [A-Z0-9.-]");}};e.noConflict=function(a){if(a){a={URI:this.noConflict()};if(URITemplate&&typeof URITemplate.noConflict=="function")a.URITemplate=URITemplate.noConflict();if(d&&typeof d.noConflict=="function")a.IPv6=d.noConflict();if(SecondLevelDomains&&typeof SecondLevelDomains.noConflict=="function")a.SecondLevelDomains=SecondLevelDomains.noConflict();return a}else if(b.URI===this)b.URI=j;return this};q.build=function(a){if(a===!0)this._deferred_build=!0;else if(a===
void 0||this._deferred_build)this._string=e.build(this._parts),this._deferred_build=!1;return this};q.clone=function(){return new e(this)};q.valueOf=q.toString=function(){return this.build(!1)._string};n={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"};o=function(a){return function(b,c){return b===void 0?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}};for(s in n)q[s]=o(n[s]);n={query:"?",fragment:"#"};o=function(a,b){return function(c,
e){return c===void 0?this._parts[a]||"":(c!==null&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!e),this)}};for(s in n)q[s]=o(s,n[s]);n={search:["?","query"],hash:["#","fragment"]};o=function(a,b){return function(c,e){var d=this[a](c,e);return typeof d==="string"&&d.length?b+d:d}};for(s in n)q[s]=o(n[s][1],n[s][0]);q.pathname=function(a,b){if(a===void 0||a===!0){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}else return this._parts.path=
a?e.recodePath(a):"/",this.build(!b),this};q.path=q.pathname;q.href=function(a,b){var c;if(a===void 0)return this.toString();this._string="";this._parts=e._parts();var d=a instanceof e,f=typeof a==="object"&&(a.hostname||a.path||a.pathname);a.nodeName&&(f=e.getDomAttribute(a),a=a[f]||"",f=!1);!d&&f&&a.pathname!==void 0&&(a=a.toString());if(typeof a==="string")this._parts=e.parse(a,this._parts);else if(d||f)for(c in d=d?a._parts:a,d)t.call(this._parts,c)&&(this._parts[c]=d[c]);else throw new TypeError("invalid input");
this.build(!b);return this};q.is=function(a){var b=!1,d=!1,f=!1,g=!1,i=!1,h=!1,j=!1,k=!this._parts.urn;this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,i=(g=!b)&&c&&c.has(this._parts.hostname),h=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname));switch(a.toLowerCase()){case "relative":return k;case "absolute":return!k;case "domain":case "name":return g;case "sld":return i;
case "ip":return b;case "ip4":case "ipv4":case "inet4":return d;case "ip6":case "ipv6":case "inet6":return f;case "idn":return h;case "url":return!this._parts.urn;case "urn":return!!this._parts.urn;case "punycode":return j}return null};var u=q.protocol,v=q.port,y=q.hostname;q.protocol=function(a,b){if(a!==void 0&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return u.call(this,
a,b)};q.scheme=q.protocol;q.port=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0&&(a===0&&(a=null),a&&(a+="",a.charAt(0)===":"&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return v.call(this,a,b)};q.hostname=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a!==void 0){var c={};e.parseHost(a,c);a=c.hostname}return y.call(this,a,b)};q.host=function(a,b){if(this._parts.urn)return a===void 0?"":this;
return a===void 0?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)};q.authority=function(a,b){if(this._parts.urn)return a===void 0?"":this;return a===void 0?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)};q.userinfo=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}else return a[a.length-
1]!=="@"&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this};q.resource=function(a,b){var c;if(a===void 0)return this.path()+this.search()+this.hash();c=e.parse(a);this._parts.path=c.path;this._parts.query=c.query;this._parts.fragment=c.fragment;this.build(!b);return this};q.subdomain=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";return this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length-
1)||""}else{var c=this._parts.hostname.substring(0,this._parts.hostname.length-this.domain().length);c=RegExp("^"+f(c));a&&a.charAt(a.length-1)!=="."&&(a+=".");a&&e.ensureValidHostname(a);this._parts.hostname=this._parts.hostname.replace(c,a);this.build(!b);return this}};q.domain=function(a,b){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&(b=a,a=void 0);if(a===void 0){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&c.length<2)return this._parts.hostname;
c=this._parts.hostname.length-this.tld(b).length-1;c=this._parts.hostname.lastIndexOf(".",c-1)+1;return this._parts.hostname.substring(c)||""}else{if(!a)throw new TypeError("cannot set domain empty");e.ensureValidHostname(a);this._parts.hostname=!this._parts.hostname||this.is("IP")?a:this._parts.hostname.replace(RegExp(f(this.domain())+"$"),a);this.build(!b);return this}};q.tld=function(a,b){if(this._parts.urn)return a===void 0?"":this;typeof a==="boolean"&&(b=a,a=void 0);if(a===void 0){if(!this._parts.hostname||
this.is("IP"))return"";var e=this._parts.hostname.substring(this._parts.hostname.lastIndexOf(".")+1);if(b!==!0&&c&&c.list[e.toLowerCase()])return c.get(this._parts.hostname)||e;return e}else{if(a)if(a.match(/[^a-zA-Z0-9-]/))if(c&&c.is(a))e=RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(e,a);else throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");else if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");
else e=RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(e,a);else throw new TypeError("cannot set TLD empty");this.build(!b);return this}};q.directory=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var c=this._parts.path.substring(0,this._parts.path.length-this.filename().length-1)||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}else return c=
this._parts.path.substring(0,this._parts.path.length-this.filename().length),c=RegExp("^"+f(c)),this.is("relative")||(a||(a="/"),a.charAt(0)!=="/"&&(a="/"+a)),a&&a.charAt(a.length-1)!=="/"&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(c,a),this.build(!b),this};q.filename=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var c=this._parts.path.substring(this._parts.path.lastIndexOf("/")+1);
return a?e.decodePathSegment(c):c}else{c=!1;a.charAt(0)==="/"&&(a=a.substring(1));a.match(/\.?\//)&&(c=!0);var d=RegExp(f(this.filename())+"$");a=e.recodePath(a);this._parts.path=this._parts.path.replace(d,a);c?this.normalizePath(b):this.build(!b);return this}};q.suffix=function(a,b){if(this._parts.urn)return a===void 0?"":this;if(a===void 0||a===!0){if(!this._parts.path||this._parts.path==="/")return"";var c=this.filename(),d=c.lastIndexOf(".");if(d===-1)return"";c=c.substring(d+1);c=/^[a-z0-9%]+$/i.test(c)?
c:"";return a?e.decodePathSegment(c):c}else{a.charAt(0)==="."&&(a=a.substring(1));if(c=this.suffix())d=a?RegExp(f(c)+"$"):RegExp(f("."+c)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}if(d)a=e.recodePath(a),this._parts.path=this._parts.path.replace(d,a);this.build(!b);return this}};q.segment=function(a,b,c){var e=this._parts.urn?":":"/",d=this.path(),f=d.substring(0,1)==="/";d=d.split(e);a!==void 0&&typeof a!=="number"&&(c=b,b=a,a=void 0);if(a!==void 0&&typeof a!=="number")throw Error("Bad segment '"+
a+"', must be 0-based integer");f&&d.shift();a<0&&(a=Math.max(d.length+a,0));if(b===void 0)return a===void 0?d:d[a];else if(a===null||d[a]===void 0)if(h(b)){d=[];a=0;for(var g=b.length;a<g;a++)if(b[a].length||d.length&&d[d.length-1].length)d.length&&!d[d.length-1].length&&d.pop(),d.push(b[a])}else{if(b||typeof b==="string")d[d.length-1]===""?d[d.length-1]=b:d.push(b)}else b||typeof b==="string"&&b.length?d[a]=b:d.splice(a,1);f&&d.unshift("");return this.path(d.join(e),c)};q.segmentCoded=function(a,
b,c){var d,f;typeof a!=="number"&&(c=b,b=a,a=void 0);if(b===void 0){a=this.segment(a,b,c);if(h(a)){d=0;for(f=a.length;d<f;d++)a[d]=e.decode(a[d])}else a=a!==void 0?e.decode(a):void 0;return a}if(h(b)){d=0;for(f=b.length;d<f;d++)b[d]=e.decode(b[d])}else b=typeof b==="string"?e.encode(b):b;return this.segment(a,b,c)};var m=q.query;q.query=function(a,b){if(a===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);else if(typeof a==="function"){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),
d=a.call(this,c);this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);this.build(!b);return this}else return a!==void 0&&typeof a!=="string"?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):m.call(this,a,b)};q.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof a==="object")for(var f in a)t.call(a,f)&&(d[f]=a[f]);else if(typeof a===
"string")d[a]=b!==void 0?b:null;else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);typeof a!=="string"&&(c=b);this.build(!c);return this};q.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.addQuery(d,a,b===void 0?null:b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);
typeof a!=="string"&&(c=b);this.build(!c);return this};q.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);e.removeQuery(d,a,b);this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace);typeof a!=="string"&&(c=b);this.build(!c);return this};q.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)};q.setSearch=q.setQuery;q.addSearch=q.addQuery;q.removeSearch=
q.removeQuery;q.hasSearch=q.hasQuery;q.normalize=function(){if(this._parts.urn)return this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build();return this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()};q.normalizeProtocol=function(a){if(typeof this._parts.protocol==="string")this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a);return this};q.normalizeHostname=function(b){if(this._parts.hostname){if(this.is("IDN")&&
a)this._parts.hostname=a.toASCII(this._parts.hostname);else if(this.is("IPv6")&&d)this._parts.hostname=d.best(this._parts.hostname);this._parts.hostname=this._parts.hostname.toLowerCase();this.build(!b)}return this};q.normalizePort=function(a){if(typeof this._parts.protocol==="string"&&this._parts.port===e.defaultPorts[this._parts.protocol])this._parts.port=null,this.build(!a);return this};q.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||this._parts.path==="/")return this;
var b,c=this._parts.path,d="",f,g;c.charAt(0)!=="/"&&(b=!0,c="/"+c);c=c.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/");b&&(d=c.substring(1).match(/^(\.\.\/)+/)||"")&&(d=d[0]);for(;;){f=c.indexOf("/..");if(f===-1)break;else if(f===0){c=c.substring(3);continue}g=c.substring(0,f).lastIndexOf("/");g===-1&&(g=f);c=c.substring(0,g)+c.substring(f+3)}b&&this.is("relative")&&(c=d+c.substring(1));c=e.recodePath(c);this._parts.path=c;this.build(!a);return this};q.normalizePathname=q.normalizePath;
q.normalizeQuery=function(a){if(typeof this._parts.query==="string")this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a);return this};q.normalizeFragment=function(a){if(!this._parts.fragment)this._parts.fragment=null,this.build(!a);return this};q.normalizeSearch=q.normalizeQuery;q.normalizeHash=q.normalizeFragment;q.iso8859=function(){var a=e.encode,b=e.decode;e.encode=escape;e.decode=decodeURIComponent;this.normalize();
e.encode=a;e.decode=b;return this};q.unicode=function(){var a=e.encode,b=e.decode;e.encode=p;e.decode=unescape;this.normalize();e.encode=a;e.decode=b;return this};q.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";b._parts.protocol&&(c+=b._parts.protocol+"://");b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host());b._parts.hostname&&b._parts.path&&b._parts.path.charAt(0)!=="/"&&(c+="/");
c+=b.path(!0);if(b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),i=g.length;f<i;f++){var h=(g[f]||"").split("=");d+="&"+e.decodeQuery(h[0],this._parts.escapeQuerySpace).replace(/&/g,"%26");h[1]!==void 0&&(d+="="+e.decodeQuery(h[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}c+=e.decodeQuery(b.hash(),!0);return c};q.absoluteTo=function(a){var b=this.clone(),c=["protocol","username","password","hostname","port"],d,f;if(this._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");
a instanceof e||(a=new e(a));if(!b._parts.protocol)b._parts.protocol=a._parts.protocol;if(this._parts.hostname)return b;for(d=0;f=c[d];d++)b._parts[f]=a._parts[f];if(b._parts.path)b._parts.path.substring(-2)===".."&&(b._parts.path+="/");else if(b._parts.path=a._parts.path,!b._parts.query)b._parts.query=a._parts.query;if(b.path().charAt(0)!=="/")a=a.directory(),b._parts.path=(a?a+"/":"")+b._parts.path,b.normalizePath();b.build();return b};q.relativeTo=function(a){var b=this.clone().normalize(),c,d,
f,g;if(b._parts.urn)throw Error("URNs do not have any generally defined hierarchical components");a=(new e(a)).normalize();c=b._parts;d=a._parts;f=b.path();g=a.path();if(f.charAt(0)!=="/")throw Error("URI is already relative");if(g.charAt(0)!=="/")throw Error("Cannot calculate a URI relative to another relative URI");if(c.protocol===d.protocol)c.protocol=null;if(c.username!==d.username||c.password!==d.password)return b.build();if(c.protocol!==null||c.username!==null||c.password!==null)return b.build();
if(c.hostname===d.hostname&&c.port===d.port)c.hostname=null,c.port=null;else return b.build();if(f===g)return c.path="",b.build();a=e.commonPath(b.path(),a.path());if(!a)return b.build();d=d.path.substring(a.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");c.path=d+c.path.substring(a.length);return b.build()};q.equals=function(a){var b=this.clone();a=new e(a);var c={},d={},f={},g;b.normalize();a.normalize();if(b.toString()===a.toString())return!0;c=b.query();d=a.query();b.query("");a.query("");
if(b.toString()!==a.toString())return!1;if(c.length!==d.length)return!1;c=e.parseQuery(c,this._parts.escapeQuerySpace);d=e.parseQuery(d,this._parts.escapeQuerySpace);for(g in c)if(t.call(c,g)){if(h(c[g])){if(!k(c[g],d[g]))return!1}else if(c[g]!==d[g])return!1;f[g]=!0}for(g in d)if(t.call(d,g)&&!f[g])return!1;return!0};q.duplicateQueryParameters=function(a){this._parts.duplicateQueryParameters=!!a;return this};q.escapeQuerySpace=function(a){this._parts.escapeQuerySpace=!!a;return this};return e});
(function(a,d){typeof exports==="object"?module.exports=d(require("jquery","./URI")):typeof define==="function"&&define.amd?define(["jquery","./URI"],d):d(a.jQuery,a.URI)})(this,function(a,d){function c(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function b(a){var b=a.nodeName.toLowerCase();if(!(b==="input"&&a.type!=="image"))return d.domAttributes[b]}function e(b){return{get:function(c){return a(c).uri()[b]()},set:function(c,e){a(c).uri()[b](e);return e}}}function f(c,e){var d,f,i;if(!b(c)||
!e)return!1;d=e.match(l);if(!d||!d[5]&&d[2]!==":"&&!h[d[2]])return!1;i=a(c).uri();if(d[5])return i.is(d[5]);else if(d[2]===":"){f=d[1].toLowerCase()+":";if(!h[f])return!1;return h[f](i,d[4])}else{f=d[1].toLowerCase();if(!g[f])return!1;return h[d[2]](i[f](),d[4],f)}}var g={},h={"=":function(a,b){return a===b},"^=":function(a,b){return!!(a+"").match(RegExp("^"+c(b),"i"))},"$=":function(a,b){return!!(a+"").match(RegExp(c(b)+"$","i"))},"*=":function(a,b,e){e=="directory"&&(a+="/");return!!(a+"").match(RegExp(c(b),
"i"))},"equals:":function(a,b){return a.equals(b)},"is:":function(a,b){return a.is(b)}};a.each("authority directory domain filename fragment hash host hostname href password path pathname port protocol query resource scheme search subdomain suffix tld username".split(" "),function(b,c){g[c]=!0;a.attrHooks["uri:"+c]=e(c)});var i={get:function(b){return a(b).uri()},set:function(b,c){return a(b).uri().href(c).toString()}};a.each(["src","href","action","uri","cite"],function(b,c){a.attrHooks[c]={set:i.set}});
a.attrHooks.uri.get=i.get;a.fn.uri=function(a){var c=this.first(),e=c.get(0),f=b(e);if(!f)throw Error('Element "'+e.nodeName+'" does not have either property: href, src, action, cite');if(a!==void 0){var g=c.data("uri");if(g)return g.href(a);a instanceof d||(a=d(a||""))}else if(a=c.data("uri"))return a;else a=d(c.attr(f)||"");a._dom_element=e;a._dom_attribute=f;a.normalize();c.data("uri",a);return a};d.prototype.build=function(a){if(this._dom_element)this._string=d.build(this._parts),this._deferred_build=
!1,this._dom_element.setAttribute(this._dom_attribute,this._string),this._dom_element[this._dom_attribute]=this._string;else if(a===!0)this._deferred_build=!0;else if(a===void 0||this._deferred_build)this._string=d.build(this._parts),this._deferred_build=!1;return this};var k,l=/^([a-zA-Z]+)\s*([\^\$*]?=|:)\s*(['"]?)(.+)\3|^\s*([a-zA-Z0-9]+)\s*$/;k=a.expr.createPseudo?a.expr.createPseudo(function(a){return function(b){return f(b,a)}}):function(a,b,c){return f(a,c[3])};a.expr[":"].uri=k;return{}});
(function(a){function d(a){return(a||"").toLowerCase()}a.fn.cycle=function(c){var b;if(this.length===0&&!a.isReady)return b={s:this.selector,c:this.context},a.fn.cycle.log("requeuing slideshow (dom not ready)"),a(function(){a(b.s,b.c).cycle(c)}),this;return this.each(function(){var b,f,g,h,i=a(this),k=a.fn.cycle.log;if(!i.data("cycle.opts")){if(i.data("cycle-log")===!1||c&&c.log===!1||f&&f.log===!1)k=a.noop;k("--c2 init--");b=i.data();for(var l in b)b.hasOwnProperty(l)&&/^cycle[A-Z]+/.test(l)&&(h=
b[l],g=l.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,d),k(g+":",h,"("+typeof h+")"),b[g]=h);f=a.extend({},a.fn.cycle.defaults,b,c||{});f.timeoutId=0;f.paused=f.paused||!1;f.container=i;f._maxZ=f.maxZ;f.API=a.extend({_container:i},a.fn.cycle.API);f.API.log=k;f.API.trigger=function(a,b){f.container.trigger(a,b);return f.API};i.data("cycle.opts",f);i.data("cycle.API",f.API);f.API.trigger("cycle-bootstrap",[f,f.API]);f.API.addInitialSlides();f.API.preInitSlideshow();f.slides.length&&f.API.initSlideshow()}})};
a.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var c=this.opts(),b=c.slides;c.slideCount=0;c.slides=a();b=b.jquery?b:c.container.find(b);c.random&&b.sort(function(){return Math.random()-0.5});c.API.add(b)},preInitSlideshow:function(){var c=this.opts();c.API.trigger("cycle-pre-initialize",[c]);var b=a.fn.cycle.transitions[c.fx];b&&a.isFunction(b.preInit)&&b.preInit(c);c._preInitialized=!0},postInitSlideshow:function(){var c=this.opts();c.API.trigger("cycle-post-initialize",
[c]);var b=a.fn.cycle.transitions[c.fx];b&&a.isFunction(b.postInit)&&b.postInit(c)},initSlideshow:function(){var c=this.opts(),b=c.container;c.API.calcFirstSlide();c.container.css("position")=="static"&&c.container.css("position","relative");a(c.slides[c.currSlide]).css("opacity",1).show();c.API.stackSlides(c.slides[c.currSlide],c.slides[c.nextSlide],!c.reverse);c.pauseOnHover&&(c.pauseOnHover!==!0&&(b=a(c.pauseOnHover)),b.hover(function(){c.API.pause(!0)},function(){c.API.resume(!0)}));c.timeout&&
(b=c.API.getSlideOpts(c.currSlide),c.API.queueTransition(b,b.timeout+c.delay));c._initialized=!0;c.API.updateView(!0);c.API.trigger("cycle-initialized",[c]);c.API.postInitSlideshow()},pause:function(c){var b=this.opts(),e=b.API.getSlideOpts(),d=b.hoverPaused||b.paused;c?b.hoverPaused=!0:b.paused=!0;if(!d&&(b.container.addClass("cycle-paused"),b.API.trigger("cycle-paused",[b]).log("cycle-paused"),e.timeout&&(clearTimeout(b.timeoutId),b.timeoutId=0,b._remainingTimeout-=a.now()-b._lastQueue,b._remainingTimeout<
0||isNaN(b._remainingTimeout))))b._remainingTimeout=void 0},resume:function(a){var b=this.opts(),e=!b.hoverPaused&&!b.paused;a?b.hoverPaused=!1:b.paused=!1;e||(b.container.removeClass("cycle-paused"),b.slides.filter(":animated").length===0&&b.API.queueTransition(b.API.getSlideOpts(),b._remainingTimeout),b.API.trigger("cycle-resumed",[b,b._remainingTimeout]).log("cycle-resumed"))},add:function(c,b){var e=this.opts(),d=e.slideCount,g=!1;a.type(c)=="string"&&(c=a.trim(c));a(c).each(function(){var c,
d=a(this);b?e.container.prepend(d):e.container.append(d);e.slideCount++;c=e.API.buildSlideOpts(d);e.slides=b?a(d).add(e.slides):e.slides.add(d);e.API.initSlide(c,d,--e._maxZ);d.data("cycle.opts",c);e.API.trigger("cycle-slide-added",[e,c,d])});e.API.updateView(!0);if(g=e._preInitialized&&d<2&&e.slideCount>=1)if(e._initialized){if(e.timeout)d=e.slides.length,e.nextSlide=e.reverse?d-1:1,e.timeoutId||e.API.queueTransition(e)}else e.API.initSlideshow()},calcFirstSlide:function(){var a=this.opts(),b;b=
parseInt(a.startingSlide||0,10);if(b>=a.slides.length||b<0)b=0;a.currSlide=b;if(a.reverse){if(a.nextSlide=b-1,a.nextSlide<0)a.nextSlide=a.slides.length-1}else if(a.nextSlide=b+1,a.nextSlide==a.slides.length)a.nextSlide=0},calcNextSlide:function(){var a=this.opts(),b;a.reverse?(b=a.nextSlide-1<0,a.nextSlide=b?a.slideCount-1:a.nextSlide-1,a.currSlide=b?0:a.nextSlide+1):(b=a.nextSlide+1==a.slides.length,a.nextSlide=b?0:a.nextSlide+1,a.currSlide=b?a.slides.length-1:a.nextSlide-1)},calcTx:function(c,b){var e;
b&&c.manualFx&&(e=a.fn.cycle.transitions[c.manualFx]);e||(e=a.fn.cycle.transitions[c.fx]);if(!e)e=a.fn.cycle.transitions.fade,c.API.log('Transition "'+c.fx+'" not found.  Using fade.');return e},prepareTx:function(a,b){var e=this.opts(),d,g,h,i,k;if(e.slideCount<2)e.timeoutId=0;else{if(a&&(!e.busy||e.manualTrump))e.API.stopTransition(),e.busy=!1,clearTimeout(e.timeoutId),e.timeoutId=0;if(!e.busy&&(e.timeoutId!==0||a)){g=e.slides[e.currSlide];h=e.slides[e.nextSlide];i=e.API.getSlideOpts(e.nextSlide);
k=e.API.calcTx(i,a);e._tx=k;if(a&&i.manualSpeed!==void 0)i.speed=i.manualSpeed;e.nextSlide!=e.currSlide&&(a||!e.paused&&!e.hoverPaused&&e.timeout)?(e.API.trigger("cycle-before",[i,g,h,b]),k.before&&k.before(i,g,h,b),d=function(){e.busy=!1;e.container.data("cycle.opts")&&(k.after&&k.after(i,g,h,b),e.API.trigger("cycle-after",[i,g,h,b]),e.API.queueTransition(i),e.API.updateView(!0))},e.busy=!0,k.transition?k.transition(i,g,h,b,d):e.API.doTransition(i,g,h,b,d),e.API.calcNextSlide(),e.API.updateView()):
e.API.queueTransition(i)}}},doTransition:function(c,b,e,d,g){var h=a(b),i=a(e),k=function(){i.animate(c.animIn||{opacity:1},c.speed,c.easeIn||c.easing,g)};i.css(c.cssBefore||{});h.animate(c.animOut||{},c.speed,c.easeOut||c.easing,function(){h.css(c.cssAfter||{});c.sync||k()});c.sync&&k()},queueTransition:function(c,b){var e=this.opts(),d=b!==void 0?b:c.timeout;if(e.nextSlide===0&&--e.loop===0)e.API.log("terminating; loop=0"),e.timeout=0,d?setTimeout(function(){e.API.trigger("cycle-finished",[e])},
d):e.API.trigger("cycle-finished",[e]),e.nextSlide=e.currSlide;else if(d){e._lastQueue=a.now();if(b===void 0)e._remainingTimeout=c.timeout;if(!e.paused&&!e.hoverPaused)e.timeoutId=setTimeout(function(){e.API.prepareTx(!1,!e.reverse)},d)}},stopTransition:function(){var a=this.opts();a.slides.filter(":animated").length&&(a.slides.stop(!1,!0),a.API.trigger("cycle-transition-stopped",[a]));a._tx&&a._tx.stopTransition&&a._tx.stopTransition(a)},advanceSlide:function(a){var b=this.opts();clearTimeout(b.timeoutId);
b.timeoutId=0;b.nextSlide=b.currSlide+a;if(b.nextSlide<0)b.nextSlide=b.slides.length-1;else if(b.nextSlide>=b.slides.length)b.nextSlide=0;b.API.prepareTx(!0,a>=0);return!1},buildSlideOpts:function(c){var b=this.opts(),e,f=c.data()||{},g;for(g in f)f.hasOwnProperty(g)&&/^cycle[A-Z]+/.test(g)&&(c=f[g],e=g.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,d),b.API.log("["+(b.slideCount-1)+"]",e+":",c,"("+typeof c+")"),f[e]=c);f=a.extend({},a.fn.cycle.defaults,b,f);f.slideNum=b.slideCount;try{delete f.API,delete f.slideCount,
delete f.currSlide,delete f.nextSlide,delete f.slides}catch(h){}return f},getSlideOpts:function(c){var b=this.opts();if(c===void 0)c=b.currSlide;c=a(b.slides[c]).data("cycle.opts");return a.extend({},b,c)},initSlide:function(c,b,e){var d=this.opts();b.css(c.slideCss||{});e>0&&b.css("zIndex",e);if(isNaN(c.speed))c.speed=a.fx.speeds[c.speed]||a.fx.speeds._default;c.sync||(c.speed/=2);b.addClass(d.slideClass)},updateView:function(a,b){var e=this.opts();if(e._initialized){var d=e.API.getSlideOpts(),g=
e.slides[e.currSlide];if(!a&&b!==!0&&(e.API.trigger("cycle-update-view-before",[e,d,g]),e.updateView<0))return;e.slideActiveClass&&e.slides.removeClass(e.slideActiveClass).eq(e.currSlide).addClass(e.slideActiveClass);a&&e.hideNonActive&&e.slides.filter(":not(."+e.slideActiveClass+")").hide();e.updateView===0&&setTimeout(function(){e.API.trigger("cycle-update-view",[e,d,g,a])},d.speed/(e.sync?2:1));e.updateView!==0&&e.API.trigger("cycle-update-view",[e,d,g,a]);a&&e.API.trigger("cycle-update-view-after",
[e,d,g])}},getComponent:function(c){var b=this.opts();c=b[c];if(typeof c==="string")return/^\s*[\>|\+|~]/.test(c)?b.container.find(c):a(c);if(c.jquery)return c;return a(c)},stackSlides:function(c,b,e){var d=this.opts();c||(c=d.slides[d.currSlide],b=d.slides[d.nextSlide],e=!d.reverse);a(c).css("zIndex",d.maxZ);c=d.maxZ-2;var g=d.slideCount;if(e){for(e=d.currSlide+1;e<g;e++)a(d.slides[e]).css("zIndex",c--);for(e=0;e<d.currSlide;e++)a(d.slides[e]).css("zIndex",c--)}else{for(e=d.currSlide-1;e>=0;e--)a(d.slides[e]).css("zIndex",
c--);for(e=g-1;e>d.currSlide;e--)a(d.slides[e]).css("zIndex",c--)}a(b).css("zIndex",d.maxZ-1)},getSlideIndex:function(a){return this.opts().slides.index(a)}};a.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))};a.fn.cycle.version=function(){return"Cycle2: 2.0.2"};a.fn.cycle.transitions={custom:{},none:{before:function(a,b,e,d){a.API.stackSlides(e,b,d);a.cssBefore={opacity:1,display:"block"}}},fade:{before:function(c,b,e,d){var g=
c.API.getSlideOpts(c.nextSlide).slideCss||{};c.API.stackSlides(b,e,d);c.cssBefore=a.extend(g,{opacity:0,display:"block"});c.animIn={opacity:1};c.animOut={opacity:0}}},fadeout:{before:function(c,b,e,d){var g=c.API.getSlideOpts(c.nextSlide).slideCss||{};c.API.stackSlides(b,e,d);c.cssBefore=a.extend(g,{opacity:1,display:"block"});c.animOut={opacity:0}}},scrollHorz:{before:function(a,b,e,d){a.API.stackSlides(b,e,d);b=a.container.css("overflow","hidden").width();a.cssBefore={left:d?b:-b,top:0,opacity:1,
display:"block"};a.cssAfter={zIndex:a._maxZ-2,left:0};a.animIn={left:0};a.animOut={left:d?-b:b}}}};a.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4E3,
updateView:0};a(document).ready(function(){a(a.fn.cycle.defaults.autoSelector).cycle()})})(jQuery);
(function(a){function d(b,c,d){var g;b.API.getComponent("pager").each(function(){var h=a(this);if(c.pagerTemplate){var i=b.API.tmpl(c.pagerTemplate,c,b,d[0]);g=a(i).appendTo(h)}else g=h.children().eq(b.slideCount-1);g.on(b.pagerEvent,function(a){a.preventDefault();b.API.page(h,a.currentTarget)})})}function c(a,c){var d=this.opts();if(!d.busy||d.manualTrump){var g=a.children().index(c),h=d.currSlide<g;if(d.currSlide!=g)d.nextSlide=g,d.API.prepareTx(!0,h),d.API.trigger("cycle-pager-activated",[d,a,
c])}}a.extend(a.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerTemplate:"<span>&bull;</span>"});a(document).on("cycle-bootstrap",function(a,c,f){f.buildPagerLink=d});a(document).on("cycle-slide-added",function(a,e,d,g){if(e.pager)e.API.buildPagerLink(e,d,g),e.API.page=c});a(document).on("cycle-slide-removed",function(b,c,d){c.pager&&c.API.getComponent("pager").each(function(){var b=a(this);a(b.children()[d]).remove()})});a(document).on("cycle-update-view",
function(b,c){var d;c.pager&&(d=c.API.getComponent("pager"),d.each(function(){a(this).children().removeClass(c.pagerActiveClass).eq(c.currSlide).addClass(c.pagerActiveClass)}))});a(document).on("cycle-destroyed",function(a,c){var d=c.API.getComponent("pager");d&&(d.children().off(c.pagerEvent),c.pagerTemplate&&d.empty())})})(jQuery);
(function(a){var d=a.fn.cycle;a.fn.cycle=function(c){var b,e,f,g=a.makeArray(arguments);if(a.type(c)=="number")return this.cycle("goto",c);return a.type(c)=="string"?this.each(function(){var h;b=c;f=a(this).data("cycle.opts");if(f===void 0)d.log('slideshow must be initialized before sending commands; "'+b+'" ignored');else if(b=b=="goto"?"jump":b,e=f.API[b],a.isFunction(e))return h=a.makeArray(g),h.shift(),e.apply(f.API,h);else d.log("unknown command: ",b)}):d.apply(this,arguments)};a.extend(a.fn.cycle,
d);a.extend(d.API,{next:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?-1:1;a.allowWrap===!1&&a.currSlide+b>=a.slideCount||(a.API.advanceSlide(b),a.API.trigger("cycle-next",[a]).log("cycle-next"))}},prev:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?1:-1;a.allowWrap===!1&&a.currSlide+b<0||(a.API.advanceSlide(b),a.API.trigger("cycle-prev",[a]).log("cycle-prev"))}},destroy:function(){this.stop();var c=this.opts(),b=a.isFunction(a._data)?a._data:a.noop;
clearTimeout(c.timeoutId);c.timeoutId=0;c.API.stop();c.API.trigger("cycle-destroyed",[c]).log("cycle-destroyed");c.container.removeData();b(c.container[0],"parsedAttrs",!1);c.retainStylesOnDestroy||(c.container.removeAttr("style"),c.slides.removeAttr("style"),c.slides.removeClass(c.slideActiveClass));c.slides.each(function(){a(this).removeData();b(this,"parsedAttrs",!1)})},jump:function(a){var b=this.opts();if(!b.busy||b.manualTrump)a=parseInt(a,10),isNaN(a)||a<0||a>=b.slides.length?b.API.log("goto: invalid slide index: "+
a):a==b.currSlide?b.API.log("goto: skipping, already on slide",a):(b.nextSlide=a,clearTimeout(b.timeoutId),b.timeoutId=0,b.API.log("goto: ",a," (zero-index)"),b.API.prepareTx(!0,b.currSlide<b.nextSlide))},stop:function(){var c=this.opts(),b=c.container;clearTimeout(c.timeoutId);c.timeoutId=0;c.API.stopTransition();c.pauseOnHover&&(c.pauseOnHover!==!0&&(b=a(c.pauseOnHover)),b.off("mouseenter mouseleave"));c.API.trigger("cycle-stopped",[c]).log("cycle-stopped")},reinit:function(){var a=this.opts();
a.API.destroy();a.container.cycle()},remove:function(c){for(var b=this.opts(),e,d,g=[],h=1,i=0;i<b.slides.length;i++)e=b.slides[i],i==c?d=e:(g.push(e),a(e).data("cycle.opts").slideNum=h,h++);if(d)b.slides=a(g),b.slideCount--,a(d).remove(),c==b.currSlide?b.API.advanceSlide(1):c<b.currSlide?b.currSlide--:b.currSlide++,b.API.trigger("cycle-slide-removed",[b,c,d]).log("cycle-slide-removed"),b.API.updateView()}});a(document).on("click.cycle","[data-cycle-cmd]",function(c){c.preventDefault();c=a(this);
var b=c.data("cycle-cmd"),e=c.data("cycle-context")||".cycle-slideshow";a(e).cycle(b,c.data("cycle-arg"))})})(jQuery);
(function(a){a.extend(a.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1});a(document).on("cycle-initialized",function(a,c){c.API.getComponent("next").on(c.nextEvent,function(a){a.preventDefault();c.API.next()});c.API.getComponent("prev").on(c.prevEvent,function(a){a.preventDefault();c.API.prev()});if(c.swipe){var b=c.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";c.container.on(c.swipeVert?
"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",function(){c.API.next()});c.container.on(b,function(){c.API.prev()})}});a(document).on("cycle-update-view",function(a,c){if(!c.allowWrap){var b=c.disabledClass,e=c.API.getComponent("next"),f=c.API.getComponent("prev"),g=c._prevBoundry||0;c.currSlide==(c._nextBoundry!==void 0?c._nextBoundry:c.slideCount-1)?e.addClass(b).prop("disabled",!0):e.removeClass(b).prop("disabled",!1);c.currSlide===g?f.addClass(b).prop("disabled",!0):f.removeClass(b).prop("disabled",
!1)}});a(document).on("cycle-destroyed",function(a,c){c.API.getComponent("prev").off(c.nextEvent);c.API.getComponent("next").off(c.prevEvent);c.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})})(jQuery);
(function(a){function d(b,e){var d;d=e.autoHeight;if(d=="container")d=a(e.slides[e.currSlide]).outerHeight(),e.container.height(d);else if(e._autoHeightRatio)e.container.height(e.container.width()/e._autoHeightRatio);else if(d==="calc"||a.type(d)=="number"&&d>=0)if(d=d==="calc"?c(b,e):d>=e.slides.length?0:d,d!=e._sentinelIndex)e._sentinelIndex=d,e._sentinel&&e._sentinel.remove(),d=a(e.slides[d].cloneNode(!0)),d.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),d.css({position:"static",
visibility:"hidden",display:"block"}).prependTo(e.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),d.find("*").css("visibility","hidden"),e._sentinel=d}function c(b,c){var e=0,d=-1;c.slides.each(function(b){var c=a(this).height();c>d&&(d=c,e=b)});return e}function b(b,c,e,d){b=a(d).outerHeight();c.container.animate({height:b},c.autoHeightSpeed,c.autoHeightEasing)}function e(c,g){if(g._autoHeightOnResize)a(window).off("resize orientationchange",g._autoHeightOnResize),
g._autoHeightOnResize=null;g.container.off("cycle-slide-added cycle-slide-removed",d);g.container.off("cycle-destroyed",e);g.container.off("cycle-before",b);if(g._sentinel)g._sentinel.remove(),g._sentinel=null}a.extend(a.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null});a(document).on("cycle-initialized",function(c,g){function h(){d(c,g)}var i=g.autoHeight,k=a.type(i),l=null;if(!(k!=="string"&&k!=="number")){g.container.on("cycle-slide-added cycle-slide-removed",d);g.container.on("cycle-destroyed",
e);if(i=="container")g.container.on("cycle-before",b);else if(k==="string"&&/\d+\:\d+/.test(i))i=i.match(/(\d+)\:(\d+)/),i=i[1]/i[2],g._autoHeightRatio=i;if(k!=="number")g._autoHeightOnResize=function(){clearTimeout(l);l=setTimeout(h,50)},a(window).on("resize orientationchange",g._autoHeightOnResize);setTimeout(h,30)}})})(jQuery);
(function(a){a.extend(a.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"});a.extend(a.fn.cycle.API,{tmpl:function(d,c){var b=RegExp(c.tmplRegex||a.fn.cycle.defaults.tmplRegex,"g"),e=a.makeArray(arguments);e.shift();return d.replace(b,function(b,c){var d,i,k,l,p=c.split(".");for(d=0;d<e.length;d++)if(k=e[d]){if(p.length>1){l=k;for(i=0;i<p.length;i++)k=l,l=l[p[i]]||c}else l=k[c];if(a.isFunction(l))return l.apply(k,e);if(l!==void 0&&l!==null&&l!=c)return l}return c})}})})(jQuery);
(function(a){window.XDomainRequest&&a.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout)d.xdrTimeout=d.timeout,delete d.timeout;var c;return{send:function(b,e){function f(b,d,f,k){c.onload=c.onerror=c.ontimeout=a.noop;c=void 0;e(b,d,f,k)}c=new XDomainRequest;c.onload=function(){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){f(404,"Not Found")};c.onprogress=function(){};c.ontimeout=function(){f(0,"timeout")};c.timeout=d.xdrTimeout||Number.MAX_VALUE;
c.open(d.type,d.url);c.send(d.hasContent&&d.data||null)},abort:function(){if(c)c.onerror=a.noop,c.abort()}}}})})(jQuery);
(function(a,d){var c=a.console||d,b=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,k=a.clearInterval,l=a.JSON,p=a.alert,j=a.History=a.History||{},q=a.history;try{f.setItem("TEST","1"),f.removeItem("TEST")}catch(t){f=!1}l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if(typeof j.init!=="undefined")throw Error("History.js Core has already been loaded...");j.init=function(){if(typeof j.Adapter==="undefined")return!1;typeof j.initCore!=="undefined"&&
j.initCore();typeof j.initHtml4!=="undefined"&&j.initHtml4();return!0};j.initCore=function(){if(typeof j.initCore.initialized!=="undefined")return!1;else j.initCore.initialized=!0;j.options=j.options||{};j.options.hashChangeInterval=j.options.hashChangeInterval||100;j.options.safariPollInterval=j.options.safariPollInterval||500;j.options.doubleCheckInterval=j.options.doubleCheckInterval||500;j.options.disableSuid=j.options.disableSuid||!1;j.options.storeInterval=j.options.storeInterval||1E3;j.options.busyDelay=
j.options.busyDelay||250;j.options.debug=j.options.debug||!1;j.options.initialTitle=j.options.initialTitle||b.title;j.options.html4Mode=j.options.html4Mode||!1;j.options.delayInit=j.options.delayInit||!1;j.intervalList=[];j.clearAllIntervals=function(){var a,b=j.intervalList;if(typeof b!=="undefined"&&b!==null){for(a=0;a<b.length;a++)k(b[a]);j.intervalList=null}};j.debug=function(){j.options.debug&&j.log.apply(j,arguments)};j.log=function(){var a=!(typeof c==="undefined"||typeof c.log==="undefined"||
typeof c.log.apply==="undefined"),e=b.getElementById("log"),d,f,g,i;a?(f=Array.prototype.slice.call(arguments),d=f.shift(),typeof c.debug!=="undefined"?c.debug.apply(c,[d,f]):c.log.apply(c,[d,f])):d="\n"+arguments[0]+"\n";f=1;for(g=arguments.length;f<g;++f){i=arguments[f];if(typeof i==="object"&&typeof l!=="undefined")try{i=l.stringify(i)}catch(h){}d+="\n"+i+"\n"}e?(e.value+=d+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):a||p(d);return!0};j.getInternetExplorerMajorVersion=function(){return j.getInternetExplorerMajorVersion.cached=
typeof j.getInternetExplorerMajorVersion.cached!=="undefined"?j.getInternetExplorerMajorVersion.cached:function(){for(var a=3,c=b.createElement("div"),e=c.getElementsByTagName("i");(c.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>")&&e[0];);return a>4?a:!1}()};j.isInternetExplorer=function(){return j.isInternetExplorer.cached=typeof j.isInternetExplorer.cached!=="undefined"?j.isInternetExplorer.cached:Boolean(j.getInternetExplorerMajorVersion())};j.emulated=j.options.html4Mode?{pushState:!0,
hashChange:!0}:{pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent))),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in b)||j.isInternetExplorer()&&j.getInternetExplorerMajorVersion()<8)};j.enabled=!j.emulated.pushState;j.bugs={setHash:Boolean(!j.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),
safariPoll:Boolean(!j.emulated.pushState&&e.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(j.isInternetExplorer()&&j.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(j.isInternetExplorer()&&j.getInternetExplorerMajorVersion()<7)};j.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};j.cloneObject=function(a){a?(a=l.stringify(a),a=l.parse(a)):a={};return a};j.getRootUrl=function(){var a=b.location.protocol+
"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);a+="/";return a};j.getBaseHref=function(){var a=b.getElementsByTagName("base"),c=null;c="";a.length===1&&(c=a[0],c=c.href.replace(/[^\/]+$/,""));(c=c.replace(/\/+$/,""))&&(c+="/");return c};j.getBaseUrl=function(){return j.getBaseHref()||j.getBasePageUrl()||j.getRootUrl()};j.getPageUrl=function(){return((j.getState(!1,!1)||{}).url||j.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?
a:a+"/"})};j.getBasePageUrl=function(){return j.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};j.getFullUrl=function(a,b){var c=a,e=a.substring(0,1);b=typeof b==="undefined"?!0:b;/[a-z]+\:\/\//.test(a)||(c=e==="/"?j.getRootUrl()+a.replace(/^\/+/,""):e==="#"?j.getPageUrl().replace(/#.*/,"")+a:e==="?"?j.getPageUrl().replace(/[\?#].*/,"")+a:b?j.getBaseUrl()+a.replace(/^(\.\/)+/,""):j.getBasePageUrl()+a.replace(/^(\.\/)+/,""));
return c.replace(/\#$/,"")};j.getShortUrl=function(a){var b=j.getBaseUrl(),c=j.getRootUrl();j.emulated.pushState&&(a=a.replace(b,""));a=a.replace(c,"/");j.isTraditionalAnchor(a)&&(a="./"+a);return a=a.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")};j.getLocationHref=function(a){a=a||b;if(a.URL===a.location.href)return a.location.href;if(a.location.href===decodeURIComponent(a.URL))return a.URL;if(a.location.hash&&decodeURIComponent(a.location.href.replace(/^[^#]+/,""))===a.location.hash)return a.location.href;
if(a.URL.indexOf("#")==-1&&a.location.href.indexOf("#")!=-1)return a.location.href;return a.URL||a.location.href};j.store={};j.idToState=j.idToState||{};j.stateToId=j.stateToId||{};j.urlToId=j.urlToId||{};j.storedStates=j.storedStates||[];j.savedStates=j.savedStates||[];j.normalizeStore=function(){j.store.idToState=j.store.idToState||{};j.store.urlToId=j.store.urlToId||{};j.store.stateToId=j.store.stateToId||{}};j.getState=function(a,b){typeof a==="undefined"&&(a=!0);typeof b==="undefined"&&(b=!0);
var c=j.getLastSavedState();!c&&b&&(c=j.createStateObject());if(a)c=j.cloneObject(c),c.url=c.cleanUrl||c.url;return c};j.getIdByState=function(a){var b=j.extractId(a.url),c;if(!b)if(c=j.getStateString(a),typeof j.stateToId[c]!=="undefined")b=j.stateToId[c];else if(typeof j.store.stateToId[c]!=="undefined")b=j.store.stateToId[c];else{for(;;)if(b=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),typeof j.idToState[b]==="undefined"&&typeof j.store.idToState[b]==="undefined")break;j.stateToId[c]=
b;j.idToState[b]=a}return b};j.normalizeState=function(a){var b;if(!a||typeof a!=="object")a={};if(typeof a.normalized!=="undefined")return a;if(!a.data||typeof a.data!=="object")a.data={};b={};b.normalized=!0;b.title=a.title||"";b.url=j.getFullUrl(a.url?a.url:j.getLocationHref());b.hash=j.getShortUrl(b.url);b.data=j.cloneObject(a.data);b.id=j.getIdByState(b);b.cleanUrl=b.url.replace(/\??\&_suid.*/,"");b.url=b.cleanUrl;a=!j.isEmptyObject(b.data);if((b.title||a)&&j.options.disableSuid!==!0)b.hash=
j.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id;b.hashedUrl=j.getFullUrl(b.hash);if((j.emulated.pushState||j.bugs.safariPoll)&&j.hasUrlDuplicate(b))b.url=b.hashedUrl;return b};j.createStateObject=function(a,b,c){a={data:a,title:b,url:c};return a=j.normalizeState(a)};j.getStateById=function(a){a=String(a);return j.idToState[a]||j.store.idToState[a]||d};j.getStateString=function(a){a={data:j.normalizeState(a).data,title:a.title,url:a.url};return l.stringify(a)};
j.getStateId=function(a){return j.normalizeState(a).id};j.getHashByState=function(a){return j.normalizeState(a).hash};j.extractId=function(a){return((a=/(.*)\&_suid=([0-9]+)$/.exec(a.indexOf("#")!=-1?a.split("#")[0]:a))?String(a[2]||""):"")||!1};j.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};j.extractState=function(a,b,c){var e=null,d,f;b=b||!1;(d=j.extractId(a))&&(e=j.getStateById(d));e||(f=j.getFullUrl(a),(d=j.getIdByUrl(f)||!1)&&(e=j.getStateById(d)),!e&&b&&!j.isTraditionalAnchor(a)&&
(e=j.createStateObject(null,c||null,f)));return e};j.getIdByUrl=function(a){return j.urlToId[a]||j.store.urlToId[a]||d};j.getLastSavedState=function(){return j.savedStates[j.savedStates.length-1]||d};j.getLastStoredState=function(){return j.storedStates[j.storedStates.length-1]||d};j.hasUrlDuplicate=function(a){var b=!1;return b=(b=j.extractState(a.url))&&b.id!==a.id};j.storeState=function(a){j.urlToId[a.url]=a.id;j.storedStates.push(j.cloneObject(a));return a};j.isLastSavedState=function(a){var b=
!1;if(j.savedStates.length)a=a.id,b=j.getLastSavedState(),b=b.id,b=a===b;return b};j.saveState=function(a){if(j.isLastSavedState(a))return!1;j.savedStates.push(j.cloneObject(a));return!0};j.getStateByIndex=function(a){var b=null;return b=typeof a==="undefined"?j.savedStates[j.savedStates.length-1]:a<0?j.savedStates[j.savedStates.length+a]:j.savedStates[a]};j.getCurrentIndex=function(){var a=null;return a=j.savedStates.length<1?0:j.savedStates.length-1};j.getHash=function(a){a=j.getLocationHref(a);
return j.getHashByUrl(a)};j.unescapeHash=function(a){a=j.normalizeHash(a);return a=decodeURIComponent(a)};j.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};j.setHash=function(a,c){var e;if(c!==!1&&j.busy())return j.pushQueue({scope:j,callback:j.setHash,args:arguments,queue:c}),!1;j.busy(!0);if((e=j.extractState(a,!0))&&!j.emulated.pushState)j.pushState(e.data,e.title,e.url,!1);else if(j.getHash()!==a)j.bugs.setHash?(e=j.getPageUrl(),j.pushState(null,null,e+"#"+a,!1)):b.location.hash=
a;return j};j.escapeHash=function(b){b=j.normalizeHash(b);b=a.encodeURIComponent(b);j.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?"));return b};j.getHashByUrl=function(a){a=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return a=j.unescapeHash(a)};j.setTitle=function(a){var c=a.title,e;if(!c&&(e=j.getStateByIndex(0))&&e.url===a.url)c=e.title;if(!c)c=j.options.initialTitle;try{b.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">",
"&gt;").replace(" & "," &amp; ")}catch(d){}b.title=c;return j};j.queues=[];j.busy=function(a){if(typeof a!=="undefined")j.busy.flag=a;else if(typeof j.busy.flag==="undefined")j.busy.flag=!1;if(!j.busy.flag){h(j.busy.timeout);var b=function(){var a,c;if(!j.busy.flag)for(a=j.queues.length-1;a>=0;--a)if(c=j.queues[a],c.length!==0)c=c.shift(),j.fireQueueItem(c),j.busy.timeout=g(b,j.options.busyDelay)};j.busy.timeout=g(b,j.options.busyDelay)}return j.busy.flag};j.busy.flag=!1;j.fireQueueItem=function(a){return a.callback.apply(a.scope||
j,a.args||[])};j.pushQueue=function(a){j.queues[a.queue||0]=j.queues[a.queue||0]||[];j.queues[a.queue||0].push(a);return j};j.queue=function(a,b){typeof a==="function"&&(a={callback:a});if(typeof b!=="undefined")a.queue=b;j.busy()?j.pushQueue(a):j.fireQueueItem(a);return j};j.clearQueue=function(){j.busy.flag=!1;j.queues=[];return j};j.stateChanged=!1;j.doubleChecker=!1;j.doubleCheckComplete=function(){j.stateChanged=!0;j.doubleCheckClear();return j};j.doubleCheckClear=function(){if(j.doubleChecker)h(j.doubleChecker),
j.doubleChecker=!1;return j};j.doubleCheck=function(a){j.stateChanged=!1;j.doubleCheckClear();if(j.bugs.ieDoubleCheck)j.doubleChecker=g(function(){j.doubleCheckClear();j.stateChanged||a();return!0},j.options.doubleCheckInterval);return j};j.safariStatePoll=function(){var b=j.extractState(j.getLocationHref());if(!j.isLastSavedState(b))return b||j.createStateObject(),j.Adapter.trigger(a,"popstate"),j};j.back=function(a){if(a!==!1&&j.busy())return j.pushQueue({scope:j,callback:j.back,args:arguments,
queue:a}),!1;j.busy(!0);j.doubleCheck(function(){j.back(!1)});q.go(-1);return!0};j.forward=function(a){if(a!==!1&&j.busy())return j.pushQueue({scope:j,callback:j.forward,args:arguments,queue:a}),!1;j.busy(!0);j.doubleCheck(function(){j.forward(!1)});q.go(1);return!0};j.go=function(a,b){var c;if(a>0)for(c=1;c<=a;++c)j.forward(b);else if(a<0)for(c=-1;c>=a;--c)j.back(b);else throw Error("History.go: History.go requires a positive or negative integer passed.");return j};if(j.emulated.pushState){var n=
function(){};j.pushState=j.pushState||n;j.replaceState=j.replaceState||n}else j.onPopState=function(b,c){var e=!1;e=!1;j.doubleCheckComplete();if(e=j.getHash())return(e=j.extractState(e||j.getLocationHref(),!0))?j.replaceState(e.data,e.title,e.url,!1):(j.Adapter.trigger(a,"anchorchange"),j.busy(!1)),j.expectedStateId=!1;(e=(e=j.Adapter.extractEventData("state",b,c)||!1)?j.getStateById(e):j.expectedStateId?j.getStateById(j.expectedStateId):j.extractState(j.getLocationHref()))||(e=j.createStateObject(null,
null,j.getLocationHref()));j.expectedStateId=!1;if(j.isLastSavedState(e))return j.busy(!1),!1;j.storeState(e);j.saveState(e);j.setTitle(e);j.Adapter.trigger(a,"statechange");j.busy(!1);return!0},j.Adapter.bind(a,"popstate",j.onPopState),j.pushState=function(b,c,e,d){if(j.getHashByUrl(e)&&j.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&j.busy())return j.pushQueue({scope:j,callback:j.pushState,args:arguments,queue:d}),!1;
j.busy(!0);var f=j.createStateObject(b,c,e);j.isLastSavedState(f)?j.busy(!1):(j.storeState(f),j.expectedStateId=f.id,q.pushState(f.id,f.title,f.url),j.Adapter.trigger(a,"popstate"));return!0},j.replaceState=function(b,c,e,d){if(j.getHashByUrl(e)&&j.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(d!==!1&&j.busy())return j.pushQueue({scope:j,callback:j.replaceState,args:arguments,queue:d}),!1;j.busy(!0);var f=j.createStateObject(b,
c,e);j.isLastSavedState(f)?j.busy(!1):(j.storeState(f),j.expectedStateId=f.id,q.replaceState(f.id,f.title,f.url),j.Adapter.trigger(a,"popstate"));return!0};if(f)try{j.store=l.parse(f.getItem("History.store"))||{}}catch(s){j.store={}}else j.store={};j.normalizeStore();j.Adapter.bind(a,"unload",j.clearAllIntervals);j.saveState(j.storeState(j.extractState(j.getLocationHref(),!0,b.title)));if(f)j.onUnload=function(){var a,b;try{a=l.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||
{};a.urlToId=a.urlToId||{};a.stateToId=a.stateToId||{};for(b in j.idToState)j.idToState.hasOwnProperty(b)&&(a.idToState[b]=j.idToState[b]);for(b in j.urlToId)j.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=j.urlToId[b]);for(b in j.stateToId)j.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=j.stateToId[b]);j.store=a;j.normalizeStore();a=l.stringify(a);try{f.setItem("History.store",a)}catch(e){if(e.code===DOMException.QUOTA_EXCEEDED_ERR)f.length&&(f.removeItem("History.store"),f.setItem("History.store",a));
else throw e;}},j.intervalList.push(i(j.onUnload,j.options.storeInterval)),j.Adapter.bind(a,"beforeunload",j.onUnload),j.Adapter.bind(a,"unload",j.onUnload);if(!j.emulated.pushState&&(j.bugs.safariPoll&&j.intervalList.push(i(j.safariStatePoll,j.options.safariPollInterval)),e.vendor==="Apple Computer, Inc."||(e.appCodeName||"")==="Mozilla"))if(j.Adapter.bind(a,"hashchange",function(){j.Adapter.trigger(a,"popstate")}),j.getHash())j.Adapter.onDomLoad(function(){j.Adapter.trigger(a,"hashchange")})};(!j.options||
!j.options.delayInit)&&j.init()})(window);
(function(a){var d=a.document,c=a.setInterval||c,b=a.History=a.History||{};if(typeof b.initHtml4!=="undefined")throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if(typeof b.initHtml4.initialized!=="undefined")return!1;else b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(a){var c=b.getHashByIndex();return a===c};b.isHashEqual=function(a,b){a=encodeURIComponent(a).replace(/%25/g,"%");b=encodeURIComponent(b).replace(/%25/g,"%");return a===
b};b.saveHash=function(a){if(b.isLastHash(a))return!1;b.savedHashes.push(a);return!0};b.getHashByIndex=function(a){var c=null;return c=typeof a==="undefined"?b.savedHashes[b.savedHashes.length-1]:a<0?b.savedHashes[b.savedHashes.length+a]:b.savedHashes[a]};b.discardedHashes={};b.discardedStates={};b.discardState=function(a,c,d){var h=b.getHashByState(a);b.discardedStates[h]={discardedState:a,backState:d,forwardState:c};return!0};b.discardHash=function(a,c,d){b.discardedHashes[a]={discardedHash:a,backState:d,
forwardState:c};return!0};b.discardedState=function(a){a=b.getHashByState(a);return b.discardedStates[a]||!1};b.discardedHash=function(a){return b.discardedHashes[a]||!1};b.recycleState=function(a){var c=b.getHashByState(a);b.discardedState(a)&&delete b.discardedStates[c];return!0};if(b.emulated.hashChange)b.hashChangeInit=function(){b.checkerFunction=null;var e="",f,g,h,i=Boolean(b.getHash());b.isInternetExplorer()?(f=d.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.setAttribute("src",
"#"),f.style.display="none",d.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),g="",h=!1,b.checkerFunction=function(){if(h)return!1;h=!0;var c=b.getHash(),d=b.getHash(f.contentWindow.document);if(c!==e){e=c;if(d!==c)g=c,f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(c);b.Adapter.trigger(a,"hashchange")}else d!==g&&(g=d,i&&d===""?b.back():b.setHash(d,!1));h=!1;return!0}):b.checkerFunction=function(){var c=
b.getHash()||"";c!==e&&(e=c,b.Adapter.trigger(a,"hashchange"));return!0};b.intervalList.push(c(b.checkerFunction,b.options.hashChangeInterval));return!0},b.Adapter.onDomLoad(b.hashChangeInit);if(b.emulated.pushState)b.onHashChange=function(c){c=c&&c.newURL||b.getLocationHref();var d=b.getHashByUrl(c);c=null;if(b.isLastHash(d))return b.busy(!1),!1;b.doubleCheckComplete();b.saveHash(d);if(d&&b.isTraditionalAnchor(d))return b.Adapter.trigger(a,"anchorchange"),b.busy(!1),!1;c=b.extractState(b.getFullUrl(d||
b.getLocationHref()),!0);if(b.isLastSavedState(c))return b.busy(!1),!1;b.getHashByState(c);if(d=b.discardedState(c))return b.getHashByIndex(-2)===b.getHashByState(d.forwardState)?b.back(!1):b.forward(!1),!1;b.pushState(c.data,c.title,encodeURI(c.url),!1);return!0},b.Adapter.bind(a,"hashchange",b.onHashChange),b.pushState=function(c,d,g,h){g=encodeURI(g).replace(/%25/g,"%");if(b.getHashByUrl(g))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(h!==!1&&
b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:h}),!1;b.busy(!0);var i=b.createStateObject(c,d,g),k=b.getHashByState(i),l=b.getState(!1);l=b.getHashByState(l);var p=b.getHash(),j=b.expectedStateId==i.id;b.storeState(i);b.expectedStateId=i.id;b.recycleState(i);b.setTitle(i);if(k===l)return b.busy(!1),!1;b.saveState(i);j||b.Adapter.trigger(a,"statechange");!b.isHashEqual(k,p)&&!b.isHashEqual(k,b.getShortUrl(b.getLocationHref()))&&b.setHash(k,!1);b.busy(!1);return!0},
b.replaceState=function(c,d,g,h){g=encodeURI(g).replace(/%25/g,"%");if(b.getHashByUrl(g))throw Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(h!==!1&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:h}),!1;b.busy(!0);var i=b.createStateObject(c,d,g),k=b.getHashByState(i),l=b.getState(!1),p=b.getHashByState(l),j=b.getStateByIndex(-2);b.discardState(l,i,j);k===p?(b.storeState(i),b.expectedStateId=i.id,b.recycleState(i),b.setTitle(i),
b.saveState(i),b.Adapter.trigger(a,"statechange"),b.busy(!1)):b.pushState(i.data,i.title,i.url,!1);return!0};if(b.emulated.pushState&&b.getHash()&&!b.emulated.hashChange)b.Adapter.onDomLoad(function(){b.Adapter.trigger(a,"hashchange")})};typeof b.init!=="undefined"&&b.init()})(window);
(function(a,d){var c=a.History=a.History||{},b=a.jQuery;if(typeof c.Adapter!=="undefined")throw Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,c,d){b(a).bind(c,d)},trigger:function(a,c,d){b(a).trigger(c,d)},extractEventData:function(a,b,c){return b&&b.originalEvent&&b.originalEvent[a]||c&&c[a]||d},onDomLoad:function(a){b(a)}};typeof c.init!=="undefined"&&c.init()})(window);
(function(){(function(a){var b={},e=a.TraceKit,d=[].slice,g="?";b.noConflict=function(){a.TraceKit=e;return b};b.wrap=function(a){return function(){try{return a.apply(this,arguments)}catch(c){throw b.report(c),c;}}};b.report=function(){function e(a,c){var g=null;if(!c||b.collectWindowErrors){for(var i in l)if(Object.prototype.hasOwnProperty.call(l,i))try{l[i].apply(null,[a].concat(d.call(arguments,2)))}catch(h){g=h}if(g)throw g;}}function g(a,c,d){var f=null;j?(b.computeStackTrace.augmentStackTraceWithInitialElement(j,
c,d,a),f=j,p=j=null):(f={url:c,line:d},f.func=b.computeStackTrace.guessFunctionName(f.url,f.line),f.context=b.computeStackTrace.gatherContext(f.url,f.line),f={mode:"onerror",message:a,url:document.location.href,stack:[f],useragent:navigator.userAgent});e(f,"from window.onerror");if(q)return q.apply(this,arguments);return!1}function k(g){var i=d.call(arguments,1);if(j)if(p===g)return;else{var k=j;p=j=null;e.apply(null,[k,null].concat(i))}var l=b.computeStackTrace(g);j=l;p=g;a.setTimeout(function(){p===
g&&(p=j=null,e.apply(null,[l,null].concat(i)))},l.incomplete?2E3:0);throw g;}var l=[],p=null,j=null,q,t=!0;k.subscribe=function(b){if(t!==!0)q=a.onerror,a.onerror=g,t=!0;l.push(b)};k.unsubscribe=function(a){for(var b=l.length-1;b>=0;--b)l[b]===a&&l.splice(b,1)};return k}();b.computeStackTrace=function(){function e(d){if(!Object.prototype.hasOwnProperty.call(v,d)){var f="";if(d.indexOf(document.domain)!==-1)if(b.remoteFetching)try{var g;try{g=new a.XMLHttpRequest}catch(i){g=new a.ActiveXObject("Microsoft.XMLHTTP")}g.open("GET",
d,!1);g.send("");f=g.responseText}catch(h){f=""}else f="";v[d]=f?f.split("\n"):[]}return v[d]}function d(a,b){var c=/function ([^(]*)\(([^)]*)\)/,f=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,i="",j=e(a),k;if(!j.length)return g;for(var n=0;n<10;++n)if(i=j[b-n]+i,typeof i!=="undefined")if(k=f.exec(i))return k[1];else if(k=c.exec(i))return k[1];return g}function f(a,c){var d=e(a);if(!d.length)return null;var g=[],i=Math.floor(b.linesOfContext/2),j=Math.min(d.length,c+(i+b.linesOfContext%
2)-1);for(i=Math.max(0,c-i-1);i<j;++i)typeof d[i]==="undefined"||g.push(d[i]);return g.length>0?g:null}function l(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function p(a){return l(a).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function j(a,b){for(var c,d,f=0,g=b.length;f<g;++f)if((c=e(b[f])).length)if(c=c.join("\n"),d=a.exec(c))return{url:b[f],line:c.substring(0,d.index).split("\n").length,column:d.index-
c.lastIndexOf("\n",d.index)-1};return null}function q(a,b,c){b=e(b);a=RegExp("\\b"+l(a)+"\\b");var d;c-=1;if(b&&b.length>c&&(d=a.exec(b[c])))return d.index;return null}function t(b){var e=[a.location.href],d=document.getElementsByTagName("script");b=""+b;var f;for(f=0;f<d.length;++f){var g=d[f];g.src&&e.push(g.src)}(d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b))?(f=d[1]?"\\s+"+d[1]:"",g=d[2].split(",").join("\\s*,\\s*"),d=l(d[3]).replace(/;$/,";?"),d=RegExp("function"+
f+"\\s*\\(\\s*"+g+"\\s*\\)\\s*{\\s*"+d+"\\s*}")):d=RegExp(l(b).replace(/\s+/g,"\\s+"));if(f=j(d,e))return f;if(d=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(b)){b=d[1];d=p(d[2]);if(f=j(RegExp("on"+b+"=[\\'\"]\\s*"+d+"\\s*[\\'\"]","i"),e[0]))return f;if(f=j(RegExp(d),e))return f}return null}function n(a,b,c,e){b={url:b,line:c};if(b.url&&b.line){a.incomplete=!1;if(!b.func)b.func=d(b.url,b.line);if(!b.context)b.context=f(b.url,b.line);if(e=/ '([^']+)' /.exec(e))b.column=q(e[1],
b.url,b.line);if(a.stack.length>0&&a.stack[0].url===b.url)if(a.stack[0].line===b.line)return!1;else if(!a.stack[0].line&&a.stack[0].func===b.func)return a.stack[0].line=b.line,a.stack[0].context=b.context,!1;a.stack.unshift(b);return a.partial=!0}else a.incomplete=!0;return!1}function s(a,c){for(var e=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,f=[],h={},j=!1,k,l,p=s.caller;p&&!j;p=p.caller)if(!(p===o||p===b.report)){l={url:null,func:g,line:null,column:null};if(p.name)l.func=
p.name;else if(k=e.exec(p.toString()))l.func=k[1];if(k=t(p)){l.url=k.url;l.line=k.line;if(l.func===g)l.func=d(l.url,l.line);var u=/ '([^']+)' /.exec(a.message||a.description);if(u)l.column=q(u[1],k.url,k.line)}h[""+p]?j=!0:h[""+p]=!0;f.push(l)}c&&f.splice(0,c);e={mode:"callers",name:a.name,message:a.message,url:document.location.href,stack:f,useragent:navigator.userAgent};n(e,a.sourceURL||a.fileName,a.line||a.lineNumber,a.message||a.description);return e}function o(b,n){var l=null;n=n==null?0:+n;
try{for(var o=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,v=b.stacktrace.split("\n"),t=[],B,E=0,J=v.length;E<J;E+=2)if(B=o.exec(v[E])){var P={line:+B[1],column:+B[2],func:B[3]||B[4],args:B[5]?B[5].split(","):[],url:B[6]};if(!P.func&&P.line)P.func=d(P.url,P.line);if(P.line)try{P.context=f(P.url,P.line)}catch(K){}if(!P.context)P.context=[v[E+1]];t.push(P)}l=t.length?{mode:"stacktrace",name:b.name,message:b.message,url:document.location.href,stack:t,
useragent:navigator.userAgent}:null;if(l)return l}catch(S){if(u)throw S;}try{if(b.stack){o=/^\s*at (?:((?:\[object object\])?\S+(?: \[as \S+\])?) )?\(?((?:file|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i;v=/^\s*(\S*)(?:\((.*?)\))?@((?:file|http|https).*?):(\d+)(?::(\d+))?\s*$/i;var R=b.stack.split("\n");t=[];var T,I,ba=/^(.*) is undefined$/.exec(b.message);B=0;for(var aa=R.length;B<aa;++B){if(T=v.exec(R[B]))I={url:T[3],func:T[1]||g,args:T[2]?T[2].split(","):"",line:+T[4],column:T[5]?+T[5]:null};else if(T=
o.exec(R[B]))I={url:T[2],func:T[1]||g,line:+T[3],column:T[4]?+T[4]:null};else continue;if(!I.func&&I.line)I.func=d(I.url,I.line);if(I.line)I.context=f(I.url,I.line);t.push(I)}if(t[0]&&t[0].line&&!t[0].column&&ba)t[0].column=q(ba[1],t[0].url,t[0].line);l=t.length?{mode:"stack",name:b.name,message:b.message,url:document.location.href,stack:t,useragent:navigator.userAgent}:null}else l=null;if(l)return l}catch(ea){if(u)throw ea;}try{var ca=b.message.split("\n");if(ca.length<4)l=null;else{R=/^\s*Line (\d+) of linked script ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;
T=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|http|https)\S+)(?:: in function (\S+))?\s*$/i;I=/^\s*Line (\d+) of function script\s*$/i;ba=[];var V=document.getElementsByTagName("script");aa=[];var F,H,x,L;for(H in V)Object.prototype.hasOwnProperty.call(V,H)&&!V[H].src&&aa.push(V[H]);H=2;for(x=ca.length;H<x;H+=2){V=null;if(F=R.exec(ca[H]))V={url:F[2],func:F[3],line:+F[1]};else if(F=T.exec(ca[H])){V={url:F[3],func:F[4]};var z=+F[1],da=aa[F[2]-1];if(da&&(L=e(V.url))){L=L.join("\n");var w=L.indexOf(da.innerText);
if(w>=0)V.line=z+L.substring(0,w).split("\n").length}}else if(F=I.exec(ca[H])){var G=a.location.href.replace(/#.*$/,""),N=F[1],U=RegExp(p(ca[H+1]));L=j(U,[G]);V={url:G,line:L?L.line:N,func:""}}if(V){if(!V.func)V.func=d(V.url,V.line);var C=f(V.url,V.line),M=C?C[Math.floor(C.length/2)]:null;V.context=C&&M.replace(/^\s*/,"")===ca[H+1].replace(/^\s*/,"")?C:[ca[H+1]];ba.push(V)}}l=ba.length?{mode:"multiline",name:b.name,message:ca[0],url:document.location.href,stack:ba,useragent:navigator.userAgent}:null}if(l)return l}catch(W){if(u)throw W;
}try{if(l=s(b,n+1))return l}catch(X){if(u)throw X;}return{mode:"failed"}}var u=!1,v={};o.augmentStackTraceWithInitialElement=n;o.guessFunctionName=d;o.gatherContext=f;o.ofCaller=function(a){try{throw Error();}catch(b){return o(b,(a==null?0:+a)+2)}};return o}();if(!b.remoteFetching)b.remoteFetching=!0;if(!b.collectWindowErrors)b.collectWindowErrors=!1;if(!b.linesOfContext||b.linesOfContext<1)b.linesOfContext=11;a.TraceKit=b})(window);var a;a=function(){function a(b){var c,f,g,h;this.options=b!=null?
b:{};this.stackInfo=this.options.stackInfo||this.options.error&&TraceKit.computeStackTrace(this.options.error);this.trace=this._parseBacktrace((f=this.stackInfo)!=null?f.stack:void 0);this["class"]=(g=this.stackInfo)!=null?g.name:void 0;this.message=(h=this.stackInfo)!=null?h.message:void 0;this.source=this.stackInfo&&this._extractSource(this.stackInfo.stack);this.url=document.URL;this.project_root=d.configuration.project_root;this.environment=d.configuration.environment;this.component=d.configuration.component;
this.action=d.configuration.action;this.context={};f=d.context;for(c in f)b=f[c],this.context[c]=b;if(this.options.context)for(c in f=this.options.context,f)b=f[c],this.context[c]=b}a.prototype.toJSON=function(){return JSON.stringify({notifier:{name:"honeybadger.js",url:"https://github.com/honeybadger-io/honeybadger-js",version:d.version,language:"javascript"},error:{"class":this["class"],message:this.message,backtrace:this.trace,source:this.source},request:{url:this.url,component:this.component,
action:this.action,context:this.context,cgi_data:this._cgiData()},server:{project_root:this.project_root,environment_name:this.environment}})};a.prototype._parseBacktrace=function(a){var c,f,g,h,i,k;a==null&&(a=[]);c=[];g=0;for(h=a.length;g<h;g++)if(f=a[g],!((i=f.url)!=null&&i.match(/honeybadger(?:\.min)?\.js/)))c.push({file:((k=f.url)!=null?k.replace(d.configuration.project_root,"[PROJECT_ROOT]"):void 0)||"unknown",number:f.line,method:f.func});return c};a.prototype._extractSource=function(a){var c,
d,g,h,i;a==null&&(a=[]);g={};a=(c=(d=a[0])!=null?d.context:void 0)!=null?c:[];c=h=0;for(i=a.length;h<i;c=++h)d=a[c],g[c]=d;return g};a.prototype._cgiData=function(){var a,c,d;a={};for(c in navigator)d=navigator[c],typeof d!=="object"&&(a[c.split(/(?=[A-Z][a-z]*)/).join("_").toUpperCase()]=d);a.HTTP_USER_AGENT=a.USER_AGENT;delete a.USER_AGENT;if(document.referrer.match(/\S/))a.HTTP_REFERER=document.referrer;return a};return a}();var d;d=function(){function c(){}c.version="0.0.2";c.default_configuration=
{api_key:null,host:"api.honeybadger.io",ssl:!0,project_root:window.location.protocol+"//"+window.location.host,environment:"production",component:null,action:null,disabled:!0,onerror:!1};c.configured=!1;c.configure=function(a){var c,d;a==null&&(a={});if(this.configured===!1)typeof a.disabled==="undefined"&&(a.disabled=!1),this.configured=!0;for(c in a)d=a[c],this.configuration[c]=d;TraceKit.collectWindowErrors=!1;return this};c.configuration={reset:function(){var a,e,d;c.configured=!1;d=c.default_configuration;
for(a in d)e=d[a],c.configuration[a]=e;TraceKit.collectWindowErrors=!1;return c}};c.configuration.reset();c.context={};c.resetContext=function(a){a==null&&(a={});this.context=a;return this};c.setContext=function(a){var c,d;a==null&&(a={});for(c in a)d=a[c],this.context[c]=d;return this};c.notify=function(b,c){c==null&&(c={});if(this.configuration.disabled===!0)return!1;b&&(c.error=b);return this._sendRequest((new a(c)).toJSON())};c._sendRequest=function(a){return this._crossDomainPost("http"+(this.configuration.ssl&&
"s"||"")+"://"+this.configuration.host+"/v1/notices.html",a)};c._crossDomainPost=function(a,c){var d,g;d=document.createElement("iframe");g="_hb_"+(new Date).getTime();document.body.appendChild(d);d.style.display="none";d.contentWindow.name=g;d=document.createElement("form");d.target=g;d.action=a;d.method="POST";g=document.createElement("input");g.type="hidden";g.name="payload";g.value=c;d.appendChild(g);g=document.createElement("input");g.type="hidden";g.name="api_key";g.value=this.configuration.api_key;
d.appendChild(g);document.body.appendChild(d);return d.submit()};c._handleTraceKitSubscription=function(a){return c.notify(null,{stackInfo:a})};return c}.call(this);TraceKit.report.subscribe(d._handleTraceKitSubscription);(typeof exports!=="undefined"&&exports!==null?exports:this).Honeybadger=d}).call(this);
(function(a){function d(b){var e=(new Date).getTime();b.find("label,input,textarea,select").each(function(b,d){var h=a(d);h.attr("id")&&h.attr("id",h.attr("id").replace("_"+c+"_","_"+e+"_"));h.attr("for")&&h.attr("for",h.attr("for").replace("_"+c+"_","_"+e+"_"));h.attr("name")&&h.attr("name",h.attr("name").replace("["+c+"]","["+e+"]"))});return b.removeClass("template").show()}a.fn.clone_form_template=function(){return a(this).map(function(){return d(a(this).clone())[0]})};var c="-1"})(jQuery);
(function(a){function d(b,c){this.$elem=b;this.$form=b.closest("form");this.options=a.extend({delay:400,minimum_characters:3,serialize:this.$form,client_side_cache:!0,process_data:!1,dataType:"json"},c);this.url=this.options.url||this.$form.attr("action");this.ajax_url=this.options.file_extension?this.ensure_file_extension(this.options.file_extension):this.url;this.search_xhr=this.last_search=!1;this.cache=this.options.client_side_cache?{}:!1;this.active=!0;this._attach()}var c;a.fn.livesearch=function(b){b=
b||{};return a(this).each(function(){var c=a(this).data("livesearch");c||(c=new d(a(this),b),a(this).data("livesearch",c))})};a.extend(d.prototype,{_attach:function(){var a=this;this.$elem.attr("autocomplete","off");this.$elem.on("keypress cut paste input",function(){a.active&&(clearTimeout(c),c=setTimeout(function(){a.search()},a.options.delay))});if(!this.options.process_data)this.options.serialize.on("change",function(){a.search()});this.$elem.on("livesearch:suspend",function(){a.active=!1});this.$elem.on("livesearch:activate",
function(){a.active=!0});this.$elem.on("livesearch:cancel",function(){a.search_xhr&&a.search_xhr.abort();a.last_search=!1})},ensure_file_extension:function(a){var c=window.location.host.replace(/[^\w\d]/g,function(a){return"\\"+a});return this.url.replace(RegExp("((?:"+c+")?[^\\.$#\\?]+)(\\.\\w*|)($|#|\\?)"),function(c,e,d,i){return e+"."+a+i})},suspend_while:function(a){this.active=!1;a();var c=this;setTimeout(function(){c.active=!0},100)},search:function(){var b=this,c=this.options.serialize.serialize();
this.options.process_data&&(c=this.options.process_data.apply(this,[c]),typeof c==="object"&&(c=a.param(c)));if(c!==this.last_search&&!(this.$elem.val().length<this.options.minimum_characters))this.search_xhr&&this.search_xhr.abort(),this.cache&&this.cache[c]&&typeof this.cache[c]!=="function"?this.$elem.trigger("livesearch:results",[this.cache[c]]):(this.$elem.trigger("livesearch:searching"),this.$elem.addClass("searching"),this.search_xhr=a.ajax({type:"get",url:this.ajax_url,dataType:this.options.dataType,
data:c,global:!1,success:function(a){a!==null&&(b.$elem.trigger("livesearch:results",[a]),b.$elem.removeClass("searching"),b.cache&&(b.cache[c]=a))},error:function(){b.$elem.trigger("livesearch:ajax_error");b.$elem.removeClass("searching")},statusCode:{304:function(){}}})),this.last_search=c}})})(jQuery);
(function(a){function d(b,c){this.$elem=b;this.options=a.extend({update_input:!0,no_results_html:"Sorry, we couldn't find anything.",ignore_history:!0,process_results:function(a){return a}},c);var d=this.$elem.closest(".field_with_icon"),g=a([]);g=d.length?d.siblings(".results"):this.$elem.siblings(".results");g.length?(this.$results=g,this.$results.find("div.no_results").remove()):(this.$results=a('<div class="results"></div>'),d.length?d.after(this.$results):this.$elem.after(this.$results));this.$results.find("ul.result_list").length||
this.$results.append('<ul class="result_list"></ul>');this.$no_results=a('<div class="no_results">'+this.options.no_results_html+"</div>");this.$no_results.hide();this.$results.append(this.$no_results);this.handle_optional_content();this.livesearch=b.livesearch(this.options).data("livesearch");this._attach()}var c={UP:38,DOWN:40,DEL:46,TAB:9,ENTER:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};a.fn.livesearch_input_dropdown=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("livesearch.input_dropdown");
c||(c=new d(a(this),b),a(this).data("livesearch.input_dropdown",c))})};a.extend(d.prototype,{_attach:function(){var a=this;this.$elem.on("livesearch:results",function(c,d){a.options.process_results&&(d=a.options.process_results(d));a.show_results(d);a.push_history(d)});this.bind_results();this.bind_popstate();this.$elem.on("keydown.autocomplete",function(e){var d=!!a.$results.find(".selected").length;switch(e.keyCode){case c.UP:d?(d=a.$results.find(".selected").prev(":not(.not_result)"),d.length||
(d=a.$results.find("li:not(.not_result)").last()),a.select(d,!1)):a.select(a.$results.find("li:not(.not_result)").last(),!1);e.preventDefault();break;case c.DOWN:d?(d=a.$results.find(".selected").next(":not(.not_result)"),d.length||(d=a.$results.find("li:not(.not_result)").first()),a.select(d,!1)):a.select(a.$results.find("li:not(.not_result)").first(),!1);e.preventDefault();break;case c.ENTER:d=a.$results.find(".selected"),a.input_can_submit()||e.preventDefault(),d.length&&(e.preventDefault(),a.select(d,
!0))}})},history_api_supported:function(){return window.history&&window.history.pushState},bind_popstate:function(){if(this.history_api_supported()&&!this.options.ignore_history){var a=this;this.replacing_history_state=!1;window.onpopstate=function(c){c.state&&c.state.livesearch?(a.show_results(c.state.livesearch.results),a.livesearch.suspend_while(function(){a.$elem.val(c.state.livesearch.input_value).trigger("input")})):a.reset(!0)}}},input_can_submit:function(){var a=this.livesearch.search_xhr.readyState;
return this.options.input_can_submit_on_enter&&!(a>0&&a<4)&&this.$elem.is(":focus")},bind_results:function(){var b=this;this.$results.find("li").on("click",function(c){b.select(a(this),!0);c.preventDefault()});this.$results.find("li").on("mouseover",function(){b.select(a(this));b.unselect_on_mouseout=!0});this.$results.on("mouseout",function(){b.unselect_on_mouseout&&b.unselect_currently_selected()});this.$elem.on("livesearch:reveal_results",function(){b.reveal_results()})},build_result_names_list:function(b){var c=
[],d=this;a.each(b,function(a,b){d.options.return_name_from_result?b=d.options.return_name_from_result(b):typeof b!=="string"&&(b=b[0]);c.push(b)});return c},show_results:function(b){var c=this.$results.children("ul"),d=a([]),g;if(b.results)g=b,b=b.results;this.unselect_currently_selected();c.empty();b.length?(this.$no_results.hide(),c.show()):(this.$no_results.show(),c.hide());d=this.build_result_names_list(b);a.each(d,function(d,f){var g=a("<li>"+f+"</li>");g.data("livesearch_result",b[d]);c.append(g)});
g&&g.count>b.length&&(g="see all "+g.count+" results",d=a("<a>").attr({href:this.livesearch.url+"?"+this.livesearch.last_search,title:g,"class":"see_all not_result"}).html(g).wrap("<li>"),c.append(d));this.bind_results();this.reveal_results()},push_history:function(a){if(this.history_api_supported()&&!this.options.ignore_history)typeof a==="string"&&(a=JSON.parse(a)),a={livesearch:{input_value:this.$elem.val(),results:a}},this.replacing_history_state?(history.replaceState(a),this.replacing_history_state=
!1):history.pushState(a,"","?"+this.livesearch.last_search)},reveal_results:function(){var b=this;this.$results.slideDown(function(){a(window).resize();b.$results.trigger("sticky_bar:fix_to_bottom");b.$results.trigger("shifted");b.$results.trigger("livesearch:revealed_results")})},reset:function(a){this.$results.hide();this.$elem.val("");a&&this.$results.children("ul.result_list").html("")},unselect_currently_selected:function(){var a=this.$results.children("ul").children("li.selected");a.trigger("livesearch:unselect");
a.removeClass("selected");this.unselect_on_mouseout=!1},select:function(a,c){var d=this;a.is(".not_result")||(this.unselect_currently_selected(),a.addClass("selected"),this.options.update_input&&this.livesearch.suspend_while(function(){d.$elem.val(a.text());d.$elem.focus()}),a.trigger("livesearch:soft_select"),c&&a.trigger("livesearch:selected",[a.data("livesearch_result")]))},handle_optional_content:function(){this.options.prepend&&this.$results.prepend(this.options.prepend)}})})(jQuery);
(function(a){a.fn.livesearch_pretty_input_dropdown=function(d){d=d||{};return a(this).each(function(){function c(){this.value?g.show():g.hide()}function b(){f.val("");f.trigger("livesearch:cancel").trigger("livesearch:close_results")}var e=a(this),f=e.find("input[type=text]"),g=e.find(".ss-delete"),h=f.siblings(".ss-search"),i;f.livesearch_input_dropdown(a.extend(d,{update_input:!1}));i=f.data("livesearch.input_dropdown");c.call(f[0]);f.on("keypress cut paste input livesearch:close_results blur",
c);f.on("livesearch:searching",function(){h.removeClass("ss-search").addClass("icon-loading-small")});f.on("livesearch:results livesearch:ajax_error",function(){h.removeClass("icon-loading-small").addClass("ss-search")});f.on("livesearch:results",function(){if(!d.input_can_submit_on_enter){var a=f.siblings(".results");i.select(a.find("li:first"))}});g.on("click",function(){f.focus();b()});f.on("livesearch:close_results",function(){f.siblings(".results").slideUp(function(){a(window).resize();a(this).trigger("sticky_bar:fix_to_bottom")})});
f.on("blur",function(){f.val().length<3&&b()})})}})(jQuery);(function(a){a.fn.livesearch_navigator=function(d){d=d||{};return a(this).each(function(){var c=a(this);c.livesearch_pretty_input_dropdown(d);c.on("livesearch:selected",function(a,c){if(c)window.location=c[1]})})}})(jQuery);
(function(a){a.fn.livesearch_selector=function(d){d=a.extend({url:!1,cancel_copy:"Cancel",target_input:!1},d);return a(this).each(function(){function c(){e.hide();e.attr("disabled","disabled");e.siblings(".ss-delete, .ss-search").hide();var b=a('<div class="field-selected"><span class="value">'+e.val()+'</span><a class="ss-icon ss-delete cancel-link" href="#">'+d.cancel_copy+"</a></div>");e.siblings("div.field-selected").remove();e.after(b);e.siblings(".results").slideUp();e.trigger("livesearch_selector:select",
[e.val()]);b.find("a.cancel-link").click(function(a){a.preventDefault();e.val("");b.remove();e.removeAttr("disabled");e.siblings(".ss-delete, .ss-search").show();e.show();e.focus();f.val("");e.trigger("dirty");e.trigger("livesearch_selector:unselect")})}var b=a(this),e=b.find('input[type="text"]'),f=d.target_input||b.find('input[type="hidden"]'),g=e.siblings(".ss-search"),h;b.addClass("search");f.val()&&e.val()&&c();d.url=d.url||b.closest("form").attr("action");b.livesearch_pretty_input_dropdown(d);
h=e.data("livesearch.input_dropdown");e.on("livesearch:searching",function(){g.removeClass("ss-search").addClass("icon-loading-small")});e.on("livesearch:results livesearch:ajax_error",function(){g.removeClass("icon-loading-small").addClass("ss-search")});e.on("livesearch:results",function(){var a=e.siblings(".results");h.select(a.find("li:first"))});b.on("livesearch:selected",function(a,b){b&&(e.val(b[0]),f.val(b[1]),c())})})}})(jQuery);
(function(a){a.fn.livesearch_multi_selector=function(d){d=a.extend({url:!1,cancel_copy:"Remove",sortable:!1,update_input:!1},d);return a(this).each(function(){var c=a(this),b=c.find(".field_with_icon"),e=b.find("input.text"),f=c.find("ol.search-selected,ul.search-selected"),g=e.siblings(".ss-search"),h=c.find(".template"),i=d;i.url=d.url||c.closest("form").attr("action");e.livesearch_input_dropdown(i);d.sortable&&f.sortable({containment:"document",axis:"y",update:function(){f.find("input.position").each(function(b){a(this).val(b)})}});
c.addClass("search");f.find("li").each(function(){var b=a(this),c=a('<a class="ss-icon ss-delete cancel-link" href="#">'+d.cancel_copy+"</a>");b.append(c)});c.on("click","a.cancel-link",function(b){var c=a(this).closest("li"),e=c.find(".destroy");b.preventDefault();c.fadeOut(function(){e.length?e.val("1"):c.remove()})});e.on("livesearch:searching",function(){g.removeClass("ss-search").addClass("icon-loading-small")});e.on("livesearch:results livesearch:ajax_error",function(){g.removeClass("icon-loading-small").addClass("ss-search")});
c.on("livesearch:selected",function(c,g){if(g){var i=h.clone_form_template();i.find("input.destroy").val(!1);i.find(".name").html(g[0]);i.find(".value").val(g[1]);f.append(i);d.sortable&&f.find("input.position").each(function(b){a(this).val(b)});e.val("");b.siblings(".results").slideUp();e.trigger("livesearch:cancel")}})})}})(jQuery);
(function(a){function d(c,b,e){this.url=c;this.finished=b||function(){};this.options=a.extend({delay:3E4,on_error:function(){},on_complete:function(){},continue_on_error:!1},e);this.running=this.xhr=!1;this.go()}a.pollster=function(a,b,e){return new d(a,b,e)};window.Pollster=d;d.prototype.start=function(){var a=this;this.running=!0;this.timeout=setTimeout(function(){a.go()},this.options.delay)};d.prototype.stop=function(){this.running=!1;this.timeout&&clearTimeout(this.timeout)};d.prototype.go=function(){var c=
!1,b=this;if(!this.xhr)this.xhr=a.ajax({url:this.url,dataType:"json",type:"get",global:!1,success:function(a){(c=b.finished(a))?b.stop():b.start()},error:function(){b.options.continue_on_error&&(c?b.stop():b.start());b.options.on_error()},complete:function(){b.xhr=!1;b.options.on_complete()}})}})(jQuery);
(function(a){function d(a,b){a.val()===""?a.data("placeholder").removeClass(b.hideClass):a.data("placeholder").addClass(b.hideClass)}function c(a,b){var c=b.is("textarea"),e=parseFloat(b.css("padding-top")),d=parseFloat(b.css("padding-left")),f=b.offset();e&&(f.top+=e);d&&(f.left+=d);a.css({width:b.innerWidth()-(c?20:4),height:b.innerHeight()-6,lineHeight:b.css("line-height"),whiteSpace:c?"normal":"nowrap",overflow:"hidden"}).offset(f)}function b(a,b){var c=a.val();(function j(){h=requestAnimationFrame(j);
a.val()!==c&&(a.data("placeholder").addClass(b.hideClass),window.cancelAnimationFrame&&cancelAnimationFrame(h),e(a,b))})()}function e(a,b){(function p(){h=requestAnimationFrame(p);d(a,b)})()}function f(a){g&&window.console&&window.console.log&&window.console.log(a)}var g=!1,h;a.fn.placeHolder=function(e){f("init placeHolder");var g=this,l=a(this).length;this.options=a.extend({className:"placeholder",visibleToScreenreaders:!0,visibleToScreenreadersHideClass:"placeholder-hide-except-screenreader",visibleToNoneHideClass:"placeholder-hide",
hideOnFocus:!1,removeLabelClass:"visuallyhidden",hiddenOverrideClass:"visuallyhidden-with-placeholder",forceHiddenOverride:!0,forceApply:!1,autoInit:!0},e);this.options.hideClass=this.options.visibleToScreenreaders?this.options.visibleToScreenreadersHideClass:this.options.visibleToNoneHideClass;return a(this).each(function(e){function i(){if(!g.options.hideOnFocus&&window.requestAnimationFrame)b(q,g.options);else{var a=g.options;q.data("placeholder").addClass(a.hideClass)}}var q=a(this),t=q.attr("placeholder"),
n=q.attr("id"),s,o;if(t===""||t===void 0)t=q[0].attributes.placeholder.value;s=q.closest("label");q.removeAttr("placeholder");if(!s.length&&!n)f("the input element with the placeholder needs an id!");else if(s=s.length?s:a('label[for="'+n+'"]').first(),s.length){n=a(s).find(".placeholder");if(n.length)return c(n,q),n.text(t),q;s.hasClass(g.options.removeLabelClass)&&s.removeClass(g.options.removeLabelClass).addClass(g.options.hiddenOverrideClass);o=a("<span>").addClass(g.options.className).text(t).appendTo(s);
o.width()>q.width()&&o.attr("title",t);c(o,q);q.data("placeholder",o);o.data("input",q);o.click(function(){a(this).data("input").focus()});q.focusin(i);q.focusout(function(){d(a(this),g.options);g.options.hideOnFocus||window.cancelAnimationFrame&&cancelAnimationFrame(h)});d(q,g.options);a(document).bind("fontresize resize",function(){c(o,q)});a.event.special.resize?a("textarea").bind("resize",function(b){a(this).is(":visible")&&c(o,q);b.stopPropagation();b.preventDefault()}):a("textarea").css("resize",
"none");if(e>=l-1&&typeof a.attrHooks!=="undefined")a.attrHooks.placeholder={get:function(b){if(b.nodeName.toLowerCase()==="input"||b.nodeName.toLowerCase()==="textarea")return a(b).data("placeholder")?a(a(b).data("placeholder")).text():a(b)[0].placeholder},set:function(b,c){return a(a(b).data("placeholder")).text(c)}};q.is(":focus")&&i()}else f("the input element with the placeholder needs a label!")})};a(function(){var b=window.placeHolderConfig||{};b.autoInit===!1?f("placeholder:abort because autoInit is off"):
("placeholder"in a("<input>")[0]||"placeHolder"in a("<input>")[0])&&!b.forceApply?f("placeholder:abort because browser has native support"):a("input[placeholder], textarea[placeholder]").placeHolder(b)})})(jQuery);
(function(a,d,c){function b(b){i=d.documentElement;k=d.body;P();w=this;b=b||{};X=b.constants||{};if(b.easing)for(var g in b.easing)R[g]=b.easing[g];sa=b.edgeStrategy||"set";U={beforerender:b.beforerender,render:b.render};(C=b.forceHeight!==!1)&&(W=b.scale||1);O=b.mobileDeceleration||t;pa=b.smoothScrolling!==!1;oa=b.smoothScrollingDuration||n;ha={targetTop:w.getScrollTop()};(ga=(b.mobileCheck||function(){return/Android|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent||navigator.vendor||a.opera)})())?
((N=d.getElementById("skrollr-body"))&&ca(),T(),L(i,[l,q],[p])):L(i,[l,j],[p]);w.refresh();V(a,"resize orientationchange",function(){var a=i.clientWidth,b=i.clientHeight;if(b!==va||a!==ua)va=b,ua=a,ka=!0});var h=K();(function xa(){ka&&(ka=!1,H());var a=w.getScrollTop(),b,d=z();Y?(d>=Y.endTime?(a=Y.targetTop,b=Y.done,Y=c):(a=Y.easing((d-Y.startTime)/Y.duration),a=Y.startTop+a*Y.topDiff|0),w.setScrollTop(a,!0)):ja||(ha.targetTop-a&&(ha={startTop:fa,topDiff:a-fa,targetTop:a,startTime:qa,endTime:qa+oa}),
d<=ha.endTime&&(a=R.sqrt((d-ha.startTime)/oa),a=ha.startTop+a*ha.topDiff|0));ga&&N&&e.setStyle(N,"transform","translate(0, "+-na+"px) "+ma);if(ja||fa!==a){Z=a>fa?"down":a<fa?"up":Z;ja=!1;var g={curTop:a,lastTop:fa,maxTop:M,direction:Z};if((U.beforerender&&U.beforerender.call(w,g))!==!1){for(var i=a,j=w.getScrollTop(),k=0,n=G.length;k<n;k++){var l=G[k],s=l.element,o=l.smoothScrolling?i:j,q=l.keyFrames,m=o<q[0].frame,p=o>q[q.length-1].frame,u=q[m?0:q.length-1],r;if(m||p){if(m&&l.edge===-1||p&&l.edge===
1)continue;L(s,[m?"skrollable-before":"skrollable-after"],["skrollable-before","skrollable-between","skrollable-after"]);l.edge=m?-1:1;switch(l.edgeStrategy){case "reset":ea(s);continue;case "ease":o=u.frame;break;default:case "set":o=u.props;for(r in o)f.call(o,r)&&(m=aa(o[r].value),e.setStyle(s,r,m));continue}}else if(l.edge!==0)L(s,["skrollable","skrollable-between"],["skrollable-before","skrollable-after"]),l.edge=0;m=0;for(l=q.length-1;m<l;m++)if(o>=q[m].frame&&o<=q[m+1].frame){l=q[m];q=q[m+
1];for(r in l.props)if(f.call(l.props,r)){u=(o-l.frame)/(q.frame-l.frame);u=l.props[r].easing(u);m=l.props[r].value;p=q.props[r].value;var t=void 0,v=m.length;if(v!==p.length)throw"Can't interpolate between \""+m[0]+'" and "'+p[0]+'"';var y=[m[0]];for(t=1;t<v;t++)y[t]=m[t]+(p[t]-m[t])*u;m=y;m=aa(m);e.setStyle(s,r,m)}break}}fa=a;U.render&&U.render.call(w,g)}b&&b.call(w,!1)}qa=d;ra=h(xa)})();return w}var e=a.skrollr={get:function(){return w},init:function(a){return w||new b(a)},VERSION:"0.6.21"},f=
Object.prototype.hasOwnProperty,g=a.Math,h=a.getComputedStyle,i,k,l="skrollr",p="no-"+l,j=l+"-desktop",q=l+"-mobile",t=0.004,n=200,s=/^(?:input|textarea|button|select)$/i,o=/^\s+|\s+$/g,u=/^data(?:-(_\w+))?(?:-?(-?\d*\.?\d+p?))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,v=/\s*([\w\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,y=/^([a-z\-]+)\[(\w+)\]$/,m=/-([a-z])/g,r=function(a,b){return b.toUpperCase()},A=/[\-+]?[\d]*\.?[\d]+/g,D=/\{\?\}/g,Q=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,B=
/[a-z\-]+-gradient/g,E="",J="",P=function(){var a=/^(?:O|Moz|webkit|ms)|(?:-(?:o|moz|webkit|ms)-)/;if(h){var b=h(k,null),c;for(c in b)if(E=c.match(a)||+c==c&&b[c].match(a))break;E?(E=E[0],E.slice(0,1)==="-"?(J=E,E={"-webkit-":"webkit","-moz-":"Moz","-ms-":"ms","-o-":"O"}[E]):J="-"+E.toLowerCase()+"-"):E=J=""}},K=function(){var b=a.requestAnimationFrame||a[E.toLowerCase()+"RequestAnimationFrame"],c=z();if(ga||!b)b=function(b){var d=z()-c;d=g.max(0,1E3/60-d);return a.setTimeout(function(){c=z();b()},
d)};return b},S=function(){var b=a.cancelAnimationFrame||a[E.toLowerCase()+"CancelAnimationFrame"];if(ga||!b)b=function(b){return a.clearTimeout(b)};return b},R={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-g.cos(a*g.PI)/2+0.5},sqrt:function(a){return g.sqrt(a)},outCubic:function(a){return g.pow(a-1,3)+1},bounce:function(a){var b;if(a<=0.5083)b=3;else if(a<=0.8489)b=9;else if(a<=
0.96208)b=27;else if(a<=0.99981)b=91;else return 1;return 1-g.abs(3*g.cos(a*b*1.028)/b)}};b.prototype.refresh=function(a){var b,e,f=!1;a===c?(f=!0,G=[],ta=0,a=d.getElementsByTagName("*")):a=[].concat(a);b=0;for(e=a.length;b<e;b++){var g=a[b],i=g,h=[],j=pa,k=sa;if(g.attributes){for(var n=0,l=g.attributes.length;n<l;n++){var s=g.attributes[n];if(s.name==="data-anchor-target"){if(i=d.querySelector(s.value),i===null)throw'Unable to find anchor target "'+s.value+'"';}else if(s.name==="data-smooth-scrolling")j=
s.value!=="off";else if(s.name==="data-edge-strategy")k=s.value;else{var o=s.name.match(u);if(o!==null){s={props:s.value,element:g};h.push(s);var m=o[1];if(m)s.constant=m.substr(1);m=o[2];/p$/.test(m)?(s.isPercentage=!0,s.offset=(m.slice(0,-1)|0)/100):s.offset=m|0;m=o[3];o=o[4]||m;!m||m==="start"||m==="end"?(s.mode="absolute",m==="end"?s.isEnd=!0:s.isPercentage||(s.offset*=W)):(s.mode="relative",s.anchors=[m,o])}}}if(h.length)!f&&"___skrollable_id"in g?(o=g.___skrollable_id,n=G[o].styleAttr,l=G[o].classAttr):
(o=g.___skrollable_id=ta++,n=g.style.cssText,l=x(g)),G[o]={element:g,styleAttr:n,classAttr:l,anchorTarget:i,keyFrames:h,smoothScrolling:j,edgeStrategy:k},L(g,["skrollable"],[])}}H();b=0;for(e=a.length;b<e;b++)if(f=G[a[b].___skrollable_id],f!==c){g=f;i=0;for(h=g.keyFrames.length;i<h;i++){j=g.keyFrames[i];for(n={};(l=v.exec(j.props))!==null;)k=l[1],o=l[2],l=k.match(y),l!==null?(k=l[1],l=l[2]):l="linear",o=o.indexOf("!")?I(o):[o.slice(1)],n[k]={value:o,easing:R[l]};j.props=n}g={};h=i=void 0;i=0;for(h=
f.keyFrames.length;i<h;i++)ba(f.keyFrames[i],g);g={};for(i=f.keyFrames.length-1;i>=0;i--)ba(f.keyFrames[i],g)}return w};b.prototype.relativeToAbsolute=function(a,b,c){var e=i.clientHeight,d=a.getBoundingClientRect();a=d.top;d=d.bottom-d.top;b==="bottom"?a-=e:b==="center"&&(a-=e/2);c==="bottom"?a+=d:c==="center"&&(a+=d/2);a+=w.getScrollTop();return a+0.5|0};b.prototype.animateTo=function(a,b){b=b||{};var d=z(),e=w.getScrollTop();Y={startTop:e,topDiff:a-e,targetTop:a,duration:b.duration||1E3,startTime:d,
endTime:d+(b.duration||1E3),easing:R[b.easing||"linear"],done:b.done};Y.topDiff||(Y.done&&Y.done.call(w,!1),Y=c);return w};b.prototype.stopAnimateTo=function(){Y&&Y.done&&Y.done.call(w,!0);Y=c};b.prototype.isAnimatingTo=function(){return!!Y};b.prototype.setScrollTop=function(b,c){ja=c===!0;ga?na=g.min(g.max(b,0),M):a.scrollTo(0,b);return w};b.prototype.getScrollTop=function(){return ga?na:a.pageYOffset||i.scrollTop||k.scrollTop||0};b.prototype.getMaxScrollTop=function(){return M};b.prototype.on=function(a,
b){U[a]=b;return w};b.prototype.off=function(a){delete U[a];return w};b.prototype.destroy=function(){S()(ra);for(var a,b=0,d=la.length;b<d;b++)a=la[b],F(a.element,a.name,a.listener);la=[];L(i,[p],[l,j,q]);a=0;for(b=G.length;a<b;a++)ea(G[a].element);i.style.overflow=k.style.overflow="auto";i.style.height=k.style.height="auto";N&&e.setStyle(N,"transform","none");C=U=N=w=c;M=0;W=1;O=X=c;Z="down";fa=-1;va=ua=0;ka=!1;ja=ha=oa=pa=Y=c;ta=0;sa=c;ga=!1;na=0;ma=c};var T=function(){var b,e,f,h,j,n,l,o,m,q,p;
V(i,"touchstart touchmove touchcancel touchend",function(a){var i=a.changedTouches[0];for(h=a.target;h.nodeType===3;)h=h.parentNode;j=i.clientY;n=i.clientX;m=a.timeStamp;s.test(h.tagName)||a.preventDefault();switch(a.type){case "touchstart":b&&b.blur();w.stopAnimateTo();b=h;e=l=j;f=n;break;case "touchmove":s.test(h.tagName)&&d.activeElement!==h&&a.preventDefault();o=j-l;p=m-q;w.setScrollTop(na-o,!0);l=j;q=m;break;default:case "touchcancel":case "touchend":var k=e-j,u=f-n;if(u*u+k*k<49){s.test(b.tagName)||
(b.focus(),k=d.createEvent("MouseEvents"),k.initMouseEvent("click",!0,!0,a.view,1,i.screenX,i.screenY,i.clientX,i.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null),b.dispatchEvent(k));break}b=c;i=o/p;i=g.max(g.min(i,3),-3);a=g.abs(i/O);i=i*a+0.5*O*a*a;k=w.getScrollTop()-i;u=0;k>M?(u=(M-k)/i,k=M):k<0&&(u=-k/i,k=0);a*=1-u;w.animateTo(k+0.5|0,{easing:"outCubic",duration:a})}});a.scrollTo(0,0);i.style.overflow=k.style.overflow="hidden"},I=function(a){var b=[];Q.lastIndex=0;a=a.replace(Q,function(a){return a.replace(A,
function(a){return a/255*100+"%"})});if(J)B.lastIndex=0,a=a.replace(B,function(a){return J+a});a=a.replace(A,function(a){b.push(+a);return"{?}"});b.unshift(a);return b},ba=function(a,b){for(var c in b)f.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},aa=function(a){var b=1;D.lastIndex=0;return a[0].replace(D,function(){return a[b++]})},ea=function(a,b){a=[].concat(a);for(var c,d,e=0,f=a.length;e<f;e++)if(d=a[e],c=G[d.___skrollable_id])b?(d.style.cssText=c.dirtyStyleAttr,L(d,c.dirtyClassAttr)):
(c.dirtyStyleAttr=d.style.cssText,c.dirtyClassAttr=x(d),d.style.cssText=c.styleAttr,L(d,c.classAttr))},ca=function(){ma="translateZ(0)";e.setStyle(N,"transform",ma);var a=h(N),b=a.getPropertyValue("transform");a=a.getPropertyValue(J+"transform");b&&b!=="none"||a&&a!=="none"||(ma="")};e.setStyle=function(a,b,c){a=a.style;b=b.replace(m,r).replace("-","");if(b==="zIndex")a[b]=isNaN(c)?c:""+(c|0);else if(b==="float")a.styleFloat=a.cssFloat=c;else try{E&&(a[E+b.slice(0,1).toUpperCase()+b.slice(1)]=c),
a[b]=c}catch(d){}};var V=e.addEvent=function(b,c,d){var e=function(b){b=b||a.event;if(!b.target)b.target=b.srcElement;if(!b.preventDefault)b.preventDefault=function(){b.returnValue=!1};return d.call(this,b)};c=c.split(" ");for(var f,g=0,i=c.length;g<i;g++)f=c[g],b.addEventListener?b.addEventListener(f,d,!1):b.attachEvent("on"+f,e),la.push({element:b,name:f,listener:d})},F=e.removeEvent=function(a,b,c){b=b.split(" ");for(var d=0,e=b.length;d<e;d++)a.removeEventListener?a.removeEventListener(b[d],c,
!1):a.detachEvent("on"+b[d],c)},H=function(){var a=w.getScrollTop();M=0;if(C&&!ga)k.style.height="auto";var b=i.clientHeight,c=i.clientHeight,d={},e,f;for(e in X)f=X[e],typeof f==="function"?f=f.call(w):/p$/.test(f)&&(f=f.slice(0,-1)/100*c),d[e]=f;var h,j,n,l,s,o,m;s=0;for(o=G.length;s<o;s++){h=G[s];c=h.element;e=h.anchorTarget;f=h.keyFrames;j=0;for(n=f.length;j<n;j++){l=f[j];h=l.offset;m=d[l.constant]||0;l.frame=h;if(l.isPercentage)h*=b,l.frame=h;if(l.mode==="relative")ea(c),l.frame=w.relativeToAbsolute(e,
l.anchors[0],l.anchors[1])-h,ea(c,!0);l.frame+=m;if(C&&!l.isEnd&&l.frame>M)M=l.frame}}M=g.max(M,g.max(N&&N.offsetHeight||0,k.scrollHeight,k.offsetHeight,i.scrollHeight,i.offsetHeight,i.clientHeight)-i.clientHeight);s=0;for(o=G.length;s<o;s++){h=G[s];f=h.keyFrames;j=0;for(n=f.length;j<n;j++)if(l=f[j],m=d[l.constant]||0,l.isEnd)l.frame=M-l.offset+m;h.keyFrames.sort(da)}if(C&&!ga)k.style.height=M+i.clientHeight+"px";ga?w.setScrollTop(g.min(w.getScrollTop(),M)):w.setScrollTop(a,!0);ja=!0},x=function(b){var c=
"className";a.SVGElement&&b instanceof a.SVGElement&&(b=b[c],c="baseVal");return b[c]},L=function(b,d,e){var f="className";a.SVGElement&&b instanceof a.SVGElement&&(b=b[f],f="baseVal");if(e===c)b[f]=d;else{for(var g=b[f],i=0,h=e.length;i<h;i++)g=(" "+g+" ").replace(" "+e[i]+" "," ");g=g.replace(o,"");e=0;for(i=d.length;e<i;e++)(" "+g+" ").indexOf(" "+d[e]+" ")===-1&&(g+=" "+d[e]);b[f]=g.replace(o,"")}},z=Date.now||function(){return+new Date},da=function(a,b){return a.frame-b.frame},w,G,N,U,C,M=0,
W=1,X,O,Z="down",fa=-1,qa=z(),ua=0,va=0,ka=!1,Y,pa,oa,ha,ja,ta=0,sa,ga=!1,na=0,ma,la=[],ra})(window,document);
instrument_function(function(a){(function(){if(a.report_errors){requires({$:"jquery",Mustache:"mustache"});var d=$.fn.ready,c=$.fn.on,b=$.fn.livequery;$.fn.ready=function(){var a=Array.prototype.splice.call(arguments,0,arguments.length),b=a[0],c;if(typeof b==="function")c=instrument_function(b),c.guid=b.guid=b.guid||(jQuery.guid+=1),a[0]=c;return d.apply(this,a)};$.fn.on=function(){for(var a=Array.prototype.splice.call(arguments,0,arguments.length),b=3,d,h;b>0;){if(typeof a[b]==="function")d=a[b],
h=instrument_function(d),h.guid=d.guid=d.guid||(jQuery.guid+=1),a[b]=h;b-=1}return c.apply(this,a)};$.fn.livequery=function(){var a=Array.prototype.splice.call(arguments,0,arguments.length),c,d;if(a[1])c=a[1],d=instrument_function(c),d.guid=c.guid=c.guid||(jQuery.guid+=1),a[1]=d;if(a[2])c=a[2],d=instrument_function(c),d.guid=c.guid=c.guid||(jQuery.guid+=1),a[2]=d;return b.apply(this,a)}}})(this)})(this);
instrument_function(function(a){(function(){var d={J:74,K:75,UP:38,DOWN:40,LEFT:37,RIGHT:39,DEL:46,TAB:9,ENTER:13,SPACE:32,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8,SHIFT:16,CTRL:17,ALT:18,CMD_LEFT:91,CMD_RIGHT:93,WINDOWS_LEFT:91,WINDOWS_RIGHT:92,WINDOWS:93};d.NOT_INPUT=[d.UP,d.DOWN,d.RIGHT,d.LEFT,d.TAB,d.ENTER,d.ESC,d.SHIFT,d.CTRL,d.ALT,d.CMD_LEFT,d.CMD_RIGHT,d.WINDOWS_LEFT,d.WINDOWS_RIGHT,d.WINDOWS,224,17];a.KEY=d})()})(this);
instrument_function(function(a){(function(){var d={},c=document.getElementsByTagName("body")[0].className.split(/\s+/);_.each(c,function(a){d[a]=!0});a.device_idioms=d})()})(this);instrument_function(function(){(function(){if(!navigator.geolocation)navigator.geolocation={getCurrentPosition:function(a,d){d&&d()},watchPosition:function(a,d){d&&d()},clearWatch:function(){}}})()})(this);
instrument_function(function(a){(function(){a.ksr_navigate=function(a){typeof ksr_before_unload==="function"?ksr_before_unload(function(){window.location=a}):window.location=a}})()})(this);
instrument_function(function(a){(function(){a.KsrJSON={get:function(a,c,b,e){if(b.hasClass("loading"))return!1;b.trigger("before_ksrjson",[b,e]);$.ajax({url:a,type:c||"GET",data:{format:"json"},dataType:"json",beforeSend:function(){b.addClass("loading")},success:function(a){KsrJSON.parse_response(a,b)},complete:function(){b.removeClass("loading")}});return!1},enable_form:function(a,c){a.on("submit",function(b){b.preventDefault();a.trigger("ajaxForm:beforeSerialize");$.ajax({url:a.attr("action"),type:a.attr("method"),
data:a.serialize(),dataType:"json",beforeSend:function(){var b=a.find("input.confirmation");if(a.is(".submitting"))return growl({error:"Sorry, still waiting for a response. Please try refreshing if this problem persists."}),!1;if(b.length&&!b.prop("checked"))return!1;c.addClass("loading");a.addClass("submitting")},success:function(b){KsrJSON.parse_response(b,c,a)},error:function(b){KsrJSON.parse_error(b,c,a)},complete:function(){c.removeClass("loading");a.removeClass("submitting")}})})},parse_response:function(a,
c,b){var e={open:function(){$(b).trigger("jGrowl.open_"+a.status)},close:function(){$(b).trigger("jGrowl.close_"+a.status)}},f;c.trigger("ksr_json:complete",a);$.isArray(a.flash)&&$.isArray(a.flash[0])?growl($.map(a.flash,function(a){return a[a.length-1]}),e):a.flash&&growl(a.flash,e);a.page_load&&$.console.log(a.page_load);switch(parseInt(a.status,10)){case 200:case 406:e=$(a.data);a.data&&a.data.length>0&&(a.modal?(e=$.create_modal_dialog("",a.data),e.data("modal_dialog").open(),typeof FB!=="undefined"&&
FB.XFBML.parse(e.find(".modal_dialog_body")[0])):(e.find("a.cancel").length>0?(f=c.contents().detach(),e.find("a.cancel").one("click",function(){c.contents().remove();f.appendTo(c);return!1})):c.contents().remove(),c.html(e),c.trigger("size_change"),typeof FB!=="undefined"&&FB.XFBML.parse(c[0])));a.tooltips&&a.tooltips.length>0&&c.append(a.tooltips);$('meta[name="csrf-token"]').attr("content",a.auth_token);break;case 204:c.remove();break;case 302:window.location.href=a.data.replace(/.json$/,"");break;
case 303:c.load(a.data,function(){$('meta[name="csrf-token"]').attr("content",a.auth_token)});break;case 304:break;case 500:growl({error:"Sorry, something went wrong. We've been notified and are looking into it."});break;case 422:growl({error:"Sorry, something went wrong. Your form may have expired -- please refresh and try again?"});break;default:$.console.log(a.status)}return a},parse_error:function(a,c,b){KsrJSON.parse_response({flash:{},status:a.status,data:a.body},c,b)}}})()})(this);
instrument_function(function(){(function(a){function d(b,c){this.$elem=b;this.$close_a=b.find("a.modal_dialog_close");var d=b.children(),h=d.children(),i=h.children();d=b.add(d).add(h).add(i).add(this.$close_a);this.options=a.extend({close_link:d,scroll_margin:20,ignore_parent:!1,prevent_close:!1},c);(this.prevent_close=this.options.prevent_close)&&this.$close_a.hide();this.options.ignore_parent||this._bind_parent_modal();this._remember_original_css();this._attach()}function c(c,d){var g,h=a([]);
a.each(b,function(a){url_equals(c,a,{include_query:!0})&&(g=this)});if(!g)h=a.create_modal_dialog(d.title||"","spinner",d),h.addClass("spinning"),g=h.data("modal_dialog"),g.remote_url=c,g.remote_xhr=a.ajax({url:c,type:"get",dataType:d.dataType,beforeSend:d.beforeSend,success:function(b){b=a(b);d.remote_modal_dialog_contents_loaded&&d.remote_modal_dialog_contents_loaded.apply(this,[b,d,c]);h.find(".modal_dialog_body").html(b);h.removeClass("spinning");h.trigger("size_change");h.trigger("modal_dialog:remote_dialog_loaded")},
error:function(){h.trigger("modal_dialog:errored",arguments);h.remove();delete b[c]}}),d.do_not_cache||(b[c]=g);return g}a.fn.modal_dialog=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("modal_dialog");c||(c=new d(a(this),b),a(this).data("modal_dialog",c));c.open(b.event)})};var b={};a.create_modal_dialog=function(b,c,g){g=g||{};b.length&&(b="<h4>"+b+"</h4>");b=a('<div class="modal_dialog '+(g.theme!==void 0?g.theme:"dark")+(g.class_name!==void 0?" "+g.class_name:"")+'"'+(g.id!==
void 0?' id="'+g.id+'" ':" ")+'style="display: none;"><div class="modal_dialog_ie6_background"></div><div class="modal_dialog_outer"><div class="modal_dialog_sizer"><div class="modal_dialog_inner"><div class="modal_dialog_content"><div class="modal_dialog_head">'+b+'<a class="modal_dialog_close" href="#"><span class="ss-icon ss-delete"></span></a></div><div class="modal_dialog_body">'+c+'</div></div></div><span class="modal_dialog_ie_hack"></span></div></div></div>');a("body").append(b);g=new d(b,
g);b.data("modal_dialog",g);return b};a.open_remote_modal_dialog=function(b,d){var g=a(".modal_dialog:visible");if(!(g.length&&g.data("modal_dialog").remote_url===b))return d=d||{},g=c(b,d),g.open(d.event),g};a.extend(d.prototype,{_attach:function(){if(!this._attached){var b=this,c=a(this.options.close_link);this._attached=!0;this.overflow_scroll=this.$elem.css("overflow")==="scroll";this.$elem.on("close.modal_dialog",function(){b.close()});this.$elem.on("size_change.modal_dialog",function(){b._on_size_changed()});
this.$elem.on("prevent_close.modal_dialog",function(){b._set_prevent_close(!0)});this.$elem.on("allow_close.modal_dialog",function(){b._set_prevent_close(!1)});a(window).on("resize.modal_dialog",function(){b._on_size_changed()});c.on("click.modal_dialog",function(a){c.index(a.target)!==-1&&(b.close(a),a.preventDefault())});this.$elem.keypress(function(a){a.keyCode===27&&(b.close(a),a.preventDefault())})}},_detach:function(){this._attached=!1;a(this.options.close_link).off("click.modal_dialog");this.$elem.off("size_change.modal_dialog");
a(window).off("resize.modal_dialog")},_bind_parent_modal:function(){this.$parent_modal=a([]);this.$elem.on("before_close.modal_dialog",function(){a(this).data("modal_dialog").$parent_modal.show();a([])})},_on_size_changed:function(a){var b=this.$elem.find("div.modal_dialog_inner");!this.overflow_scroll&&b.height()>this._get_viewport_height()?this._resize_to_position_absolute(a):this._resize_to_position_fixed()},_resize_to_position_fixed:function(){this._apply_original_css()},_resize_to_position_absolute:function(b){a.browser.msie&&
a.browser.version<"7"&&(this.$elem[0].style.removeExpression("top"),this.$elem[0].style.removeExpression("height"));var c=a("body").height(),d=document.documentElement&&document.documentElement.scrollTop||a("body")[0].scrollTop+a("html")[0].scrollTop,h=this.$elem.find("div.modal_dialog_inner"),i=h.height(),k=this.options.scroll_margin,l=d+i+k*2;c=l>c?l:c;i=c-d-i-k*2;l=this.$elem.css("position")==="absolute";this.$elem.css("position","absolute");this.$elem.css("top","0");this.$elem.css("height",c);
if(!l||b)h.css("margin-top",d+k),h.css("margin-bottom",i)},_remember_original_css:function(){this._elem_original_css={};this._inner_original_css={};var b=this.$elem.find("div.modal_dialog_inner"),c=["position","top"],d=["margin-top","margin-bottom"],h=this;a.each(c,function(a){a=c[a];h._elem_original_css[a]=h.$elem.css(a)});a.each(d,function(a){a=d[a];h._inner_original_css[a]=b.css(a)})},_get_viewport_height:function(){return a.browser.msie?window.document.documentElement.clientHeight:window.innerHeight},
_apply_original_css:function(){var a,b,c=this.$elem.find("div.modal_dialog_inner");for(a in this._elem_original_css)this._elem_original_css.hasOwnProperty(a)&&(b=this._elem_original_css[a],this.$elem.css(a,b));for(a in this._inner_original_css)this._inner_original_css.hasOwnProperty(a)&&(b=this._inner_original_css[a],c.css(a,b));this.$elem.css("height","100%")},_set_prevent_close:function(a){(this.prevent_close=a)?this.$close_a.hide():this.$close_a.show()},open:function(b){var c=this.$elem.parents("body");
c.length&&c.append(this.$elem);if(!this.options.ignore_parent)this.$parent_modal=a(".modal_dialog:visible"),this.$parent_modal.hide();this.$elem.show();this._on_size_changed(!0);this.overflow_scroll&&a("html").css("overflow","hidden");this.$elem.trigger("modal_dialog:opened",[b]);this._attach()},close:function(b){if(!this.prevent_close&&(this.$elem.trigger("before_close.modal_dialog",[b]),!b||!b.isDefaultPrevented()))this._detach(),this.options.do_not_cache?this.$elem.remove():this.$elem.hide(),this.overflow_scroll&&
a("html").css("overflow","visible"),this.$elem.trigger("closed.modal_dialog",[b])}});a.modal_confirm=function(b,c){var d,h;c=a.extend({},{message:"Do you really want to do this?",confirm_text:"Confirm",cancel_text:"Cancel",title:"Are you sure?"},c);d=a.create_modal_dialog(c.title,'<div style="max-width:600px;">'+c.message+'<p class="clearfix"><a class="confirm button button_blue left" href="#">'+c.confirm_text+'</a><a class="cancel button-space left" href="#">'+c.cancel_text+"</a></p></div>");h=d.data("modal_dialog");
d.find(".cancel").click(function(a){a.preventDefault();h.close()});d.find(".confirm").click(function(a){a.preventDefault();b();h.close()});h.open()}})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.options=b;this.$target=this.options.target||c;this.offset=this.options.sprite_orientation&&this.options.sprite_orientation==="horizontal"?this.$target.width():this.$target.height();this.index=0;this.playing=!0;this.$index_control_children=this.options.index_control?this.options.index_control.children():a([]);if(!this.options.should_autoadvance_callback)this.options.should_autoadvance_callback=function(){return!0};this.number=
this.options.number||this.$index_control_children.length;this.update_offset();this._attach();b.play_delay&&this.playing_timer()}a.fn.spriteshow=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("spriteshow");b||(b=new d(a(this),c),a(this).data("spriteshow",b))})};a.extend(d.prototype,{_attach:function(){var c=this;this.$index_control_children.click(function(b){b.preventDefault();c.set_index(a(this).index());c.pause()});this.options.controls&&(this.options.controls.children(".left").click(function(a){a.preventDefault();
c.page_left();c.pause()}),this.options.controls.children(".right").click(function(a){a.preventDefault();c.page_right();c.pause()}),this.options.controls.children(".play-pause").click(function(){c.playing?c.pause():c.play()}))},update_offset:function(){var c=a([]);if(this.options.effect==="fade")c=this.$target.clone(),this.$target.css("position","absolute"),this.$target.after(c),this.$target.fadeOut(function(){a(this).remove()}),this.$target=c;this.current_offset=this.index*this.offset;this.options.sprite_orientation&&
this.options.sprite_orientation==="horizontal"?this.$target.css("background-position","-"+this.current_offset.toString()+"px 0"):this.$target.css("background-position","0 -"+this.current_offset.toString()+"px")},set_index:function(a){this.index=a;this.$index_control_children.removeClass("selected");this.$index_control_children.filter(":eq("+a.toString()+")").addClass("selected");this.$target.trigger("spriteshow:index",[a]);this.update_offset()},page_left:function(){var a=this.index-1;a<0&&(a=this.number-
1);this.set_index(a)},page_right:function(){var a=this.index+1;a>=this.number&&(a=0,this.options.play_once&&this.pause());this.set_index(a)},playing_timer:function(){var a=this;this.play_timeout=setTimeout(function(){a.playing&&a.options.should_autoadvance_callback()&&a.page_right();if(a.options.pause_when_behind_by){var b=(new Date).getTime();a.last_play_date&&Math.abs(a.last_play_date-b-a.options.play_delay)>a.options.pause_when_behind_by?(a.slow_strikes?a.slow_strikes+=1:a.slow_strikes=0,a.slow_strikes>
3&&a.pause()):a.slow_strikes=0;a.last_play_date=b}a.playing_timer()},this.options.play_delay)},play:function(){this.playing=!0;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-play").addClass("spriteshow-pause")},pause:function(){this.playing=!1;this.options.controls&&this.options.controls.children(".play-pause").removeClass("spriteshow-pause").addClass("spriteshow-play")}})})(jQuery)})(this);
instrument_function(function(){$.fn.validate=function(){var a=!0;if(!this.is(":input"))return this.find(":input").validate();this.each(function(){var d=$(this),c=!1,b=d.data("validations");b&&b.length&&(_.each(b,function(b){var f=b[0];b=b[1]||{};if((typeof b.when!=="function"||b.when())&&!f.call(d,d.val()))return a=!1,c=!0,!1}),c?$.each($.fn.validate.defaults.on_invalid,function(a,b){b(d)}):$.each($.fn.validate.defaults.on_valid,function(a,b){b(d)}))});return a};$.fn.validate.defaults={on_valid:[function(a){$(a).trigger("validate:valid")}],
on_invalid:[function(a){$(a).trigger("validate:invalid")}]};(function(a){function d(c){return function(b){this.each(function(){var d=a(this);d.data("validations")||d.data("validations",[]);d.data("validations").push([c,b])});return this}}a.fn.validates_format=d(function(c){return c.match(RegExp(a(this).data("format")))});a.fn.validates_min_length=d(function(c){return c.length>=parseInt(a(this).data("minlength"),10)});a.fn.validates_max_length=d(function(c){return c.length<=parseInt(a(this).data("maxlength"),
10)});a.fn.validates_presence=d(function(c){return!!a.trim(c)});a.fn.validates_email=d(function(a){return a.match(/^.+@.+\..{2,4}$/)});a.fn.validates_luhn_check=d(function(a){a=String(a).replace(/[^\d]/g,"");var b=0,d,f,g;for(f=a.length-1;f>=0;f-=1)d=parseInt(a[f],10),g=f%2+1,b+=d>4&&g===2?d*g%10+1:d*g;return b%10===0})})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.confirm_submit=function(d){d=d||{};return a(this).each(function(){var c=a(this);c.on("submit.confirm_submit",function(b){b.preventDefault();b=a.create_modal_dialog(d.title||"Are you sure?",'<div class="modal_delete_confirmation"><p class="copy">'+(d.copy||"Really, buddy?")+'</p><div class="buttons"><a href="#" class="yes button button_green">'+(d.yes_copy||"Yes")+'</a><a href="#" class="no button button_grey">'+(d.no_copy||"No thanks!")+"</a></div></div>");
c.removeClass("submitting-non-ajax");b.find("a.yes").on("click",function(a){a.preventDefault();c.off("submit.confirm_submit");if(d.on_confirm_submit)d.on_confirm_submit();c[0].submit()});b.find("a.no").on("click",function(b){b.preventDefault();a(this).trigger("close")});b.data("modal_dialog").open()})})}})(jQuery)})(this);
instrument_function(function(a){(function(d){var c=function(){},b=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"],e;if(a.console)d.console=a.console;else{d.console={};for(e=0;e<b.length;e+=1)d.console[b[e]]=c}})(jQuery)})(this);
instrument_function(function(){(function(){$.fn.in_place_editor=function(){return $(this).each(function(){function a(){c.addClass("inactive");d.show()}var d=$(this),c=d.next("form.in_place_editor"),b=c.find(".button"),e=d.siblings(".trigger_editor")||d,f=c.find("input.text"),g=!1;e.on("click",function(){c.css("width",d.width()+"px");f.css("fontSize",d.css("fontSize"));d.hide();c.removeClass("inactive");f.focus()});b.on("click",function(){f.val(d.text());a()});c.on("submit",function(b){b.preventDefault();
g||(c.addClass("submitting"),g=!0,$.ajax({url:c.attr("action").replace(/(\.\w+)?$/,".js"),data:c.serialize(),type:"POST",complete:function(){c.removeClass("submitting");g=!1},success:function(){var b=f.val();d.html(b);a();g=!1;c.siblings(".clippy_parent").find("a.clippy").data("text",b)},error:function(a){a=JSON.parse(a.responseText);var b="<p>Oops, there was a problem with your submission";c.removeClass("submitting");g=!1;a.errors?(b+=":<br/>"+$.map(a.errors,function(a,b){return b+": "+a}),b+="</p>"):
b+=". Please refresh the page before trying again.</p>";growl({error:$(b).html()})}}))})})}})();$("span.in_place_editor").in_place_editor()})(this);
instrument_function(function(a){(function(d){function c(a){this.$c=d(a);this.video_data=this.$c.data("video")||{};a=this.$c.find("video");if(a.get(0)&&a.get(0).canPlayType&&(a.get(0).canPlayType("video/mp4")||a.hasClass("has_webm")))this.$video=a,this.video=a.get(0),d.browser.chrome&&this.$video.attr("controls","controls").removeAttr("controls"),this.$c.addClass("vertically_center");this.initialize();(window.location.search.match("play="+(this.$c.attr("id")||this.video_data.id))||this.$c.hasClass("autoplay"))&&
this.play();this.add_size_class();this.bind_events()}d.fn.ksr_video=function(){return d(this).each(function(){var a=d(this).data("ksr_video");a||(a=new c(d(this)),d(this).data("ksr_video",a))})};d.extend(c.prototype,{overlay:function(){var a=this;this.$c.children(":not(video)").hide();this.$overlay=d('<div class="overlay"><span class="button-playvideo"></span></div>');this.$overlay.on("click touchstart",function(c){a.initialize_flash();a.$overlay.remove();c.preventDefault()});this.$c.append(this.$overlay)},
bind_events:function(){var a=this;this.$c.on("ksr_video:play",function(){a.play()});this.$c.on("ksr_video:pause",function(){a.pause()});this.$c.on("ksr_video:mute",function(){a.mute()});this.$c.on("ksr_video:unmute",function(){a.unmute()});this.$c.on("ksr_video:destroy",function(){a.destroy()});this.$c.on("ksr_video:seek",function(c,d,g){a.seek(d,g)})},add_size_class:function(){this.$c.removeClass("small medium large");this.$c.width()>600?this.$c.addClass("large"):this.$c.width()>400?this.$c.addClass("large"):
this.$c.addClass("small")},bind_video_element:function(){var a=this,c=this.$video,d=!0;this.$video.on("loadedmetadata",function(){a.$c.trigger("ksr_video:loaded")});c.bind("ended",function(){a.$c.trigger("ksr_video:ended")});c.on("play",function(){a.$c.trigger("ksr_video:playing",[d]);d=!1});c.on("pause",function(){a.$c.trigger("ksr_video:paused")});c.on("progress",function(){var c,d=a.video.buffered,e=[];if(d.length)for(c=0;c<d.length;c+=1)e.push(d.end(c));c=_.max(e);a.$c.trigger("ksr_video:buffer_change",
[c,c/a.video.duration*100])});c.on("timeupdate",function(){a.$c.trigger("ksr_video:time_update",[a.video.currentTime])})},bind_controls:function(){function a(b){var c=Math.floor(b/60);b=Math.floor(b-c*60);return c+":"+(b<10?"0":"")+b}function c(){k.removeClass("visible")}function f(){i.video.duration&&i.$c.find(".total_time").text(a(i.video.duration))}function g(){var a=i.video.volume*100+"%";if(d.support.localStorage())try{localStorage.ksr_video_volume=i.video.volume}catch(b){}i.video.muted?u.closest(".volume").addClass("muted"):
u.closest(".volume").removeClass("muted");n.width(a);s.css("left",a)}function h(a,b){function c(d){d=((d.pageX||d)-a.offset().left)/a.width();d>0&&d<1&&b(d)}a.on("mousedown",function(b){a.on("mousemove",c);b.preventDefault();d(window).one("mouseup",function(b){c(b);b.preventDefault();a.off("mousemove")})});a.on("touchmove",function(a){a.preventDefault();c(a.originalEvent.targetTouches[0].pageX)})}var i=this,k=this.$c.find(".player_controls"),l=k.find(".progress_container .progress_bg"),p=l.find(".buffer"),
j=l.find(".progress"),q=l.find(".progress_handle"),t=k.find(".volume_container .progress_bg"),n=t.find(".progress"),s=t.find(".progress_handle"),o=k.find("span.current_time"),u=k.find(".volume span"),v=k.find(".playpause"),y={x:0,y:0},m=!1;this.$c.on("mousemove touchstart touchmove",function(a){var b={x:a.pageX,y:a.pageY};if(i.playing()&&(a.type==="touchstart"||Math.abs(b.x-y.x)+Math.abs(b.y-y.y)>20))k.addClass("visible"),clearTimeout(m),m=setTimeout(c,2E3),y=b});f();typeof FastClick!=="undefined"&&
this.$video.each(function(){new FastClick(this)});this.$video.on("click",function(){i.playpause()});this.$c.find(".play_button_big").on("click touchstart",function(){i.play()});this.$c.on("ksr_video:loaded",function(){f();g()});this.$video.on("volumechange",function(){g()}).on("play",function(){v.removeClass("play").addClass("pause");clearTimeout(m);m=setTimeout(c,2E3)}).on("pause",function(){v.removeClass("pause").addClass("play");k.addClass("visible");clearTimeout(m)});v.on("click touchstart",function(a){i.playpause();
a.preventDefault()});k.find("a.fullscreen").on("click touchstart",function(a){if(document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled){var b=i.$c.get(0);document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement?document.cancelFullscreen?document.cancelFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():b.requestFullscreen?b.requestFullscreen():
b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen()}else i.$c.toggleClass("fullscreen");a.preventDefault()});h(l,function(a){i.video.currentTime=i.video.duration*a});h(t,function(a){i.video.volume=a});if(d("body").is(".touchable"))n.hide();else u.on("click touchstart",function(){i.mute_toggle()});this.$c.on("ksr_video:buffer_change",function(a,b,c){p.width(c+"%")});this.$c.on("ksr_video:time_update",function(c,d){var e=d/i.video.duration*100;j.width(e+
"%");q.css("left",e+"%");o.text(a(d))})},play:function(){this.video?(this.$video.show(),this.video.play()):this.jwplayer&&this.jwplayer.play();this.playing()&&this.$c.addClass("has_played")},pause:function(){this.playing()&&(this.video?this.video.pause():this.jwplayer&&this.jwplayer.pause())},playpause:function(){this.playing()?this.pause():this.play();return this.playing()},seek:function(a,c){var d=this;typeof c==="undefined"&&(c=!1);this.video?this.video.readyState<1?(this.video.load(),this.$c.one("ksr_video:loaded",
function(){d.seek(a,c)})):(this.video.currentTime=a,c?this.pause():this.play()):this.jwplayer&&(this.jwplayer.seek(a),this.jwplayer.pause(c))},mute_toggle:function(){this.video&&(this.video.muted?this.unmute():this.mute());return this.video.muted},mute:function(){this.jwplayer?this.jwplayer.setMute(!0):this.video.muted=!0},unmute:function(){this.jwplayer?this.jwplayer.setMute(!1):this.video.muted=!1},destroy:function(){this.$c.empty();this.$c.removeData("ksr_video")},current_position:function(){if(this.video)return this.video.currentTime;
else if(this.jwplayer)return this.jwplayer.getPosition()},duration:function(){return this.jwplayer?this.jwplayer.getDuration():this.video.duration},playing:function(){if(this.video)return!this.video.paused;else if(this.jwplayer)return this.jwplayer.getState().toLowerCase()==="playing"},initialize_flash:function(){var b="v"+parseInt(Math.random()*1E8,10),c=this.$c.data("external_flashvars")||{},d=this;this.$c.append('<div id="'+b+'"></div>');swfobject.embedSWF("//d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",
b,this.$c.data("dimensions").width,this.$c.data("dimensions").height,"9.0.115","/swf/expressInstall.swf",_.extend(c,{displayheight:this.$c.height(),file:encodeURI(this.$c.attr("data-video-url")),image:encodeURI(this.$c.attr("data-image")),backcolor:"000000",screencolor:"000000",controlbar:"over","controlbar.idlehide":"true",autostart:!0,skin:"//d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"}),{allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque",menu:"false"},{id:"ksr_player_"+b,"class":"ksr_player",
name:"ksr_player_"+b},function(b){var c=!0;a.player_reference=b.ref;b.success?(d.$c.find("video").remove(),d.jwplayer=jwplayer(b.ref),d.jwplayer.onReady(function(){d.$c.trigger("ksr_video:loaded")}),d.jwplayer.onPlay(function(){d.$c.trigger("ksr_video:playing",[c]);c=!1}),d.jwplayer.onPause(function(){d.$c.trigger("ksr_video:paused")}),d.jwplayer.onComplete(function(){d.$c.trigger("ksr_video:ended")}),d.jwplayer.onBufferChange(function(a){var b=a.duration*(a.bufferPercent/100);isNaN(b)||d.$c.trigger("ksr_video:buffer_change",
[b,a.bufferPercent])})):(d.$video=d.$c.find("video"),d.video=d.$video.get(0),d.$overlay.remove(),d.$c.children().show(),d.$c.find(".play_button_big").removeAttr("style"),d.video&&(d.initialize(),d.play()))})},initialize:function(a){if(this.video){a&&this.play();this.bind_controls();this.bind_video_element();if(d.support.localStorage()&&localStorage.ksr_video_volume)this.video.volume=localStorage.ksr_video_volume;this.$video.css({height:"100%"}).removeAttr("style")}else a?this.initialize_flash():this.overlay()}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c){this.$container=a(c);this.embed()}a.fn.sound_player=function(){return a(this).each(function(){var c=a(this).data("ksr_video");c||(c=new d(a(this)),a(this).data("sound_player",c))})};a.extend(d.prototype,{embed:function(c){var b="v"+parseInt(Math.random()*1E8,10),d=this;this.$container.find("span").attr("id",b);swfobject.embedSWF("https://d3mlfyygrfdi2i.cloudfront.net/321f/kickplayer.swf",b,this.$container.width(),this.$container.height(),"9.0.115",
"https://d3mlfyygrfdi2i.cloudfront.net/7b65/expressInstall.swf",{displayheight:this.$container.height(),file:encodeURI(this.$container.attr("data-file")),backcolor:"000000",screencolor:"000000",controlbar:"bottom","controlbar.idlehide":"false",autostart:c,audioonly:!0,skin:"https://d3mlfyygrfdi2i.cloudfront.net/cc3a/kickskin.swf"},{allowscriptaccess:"always",wmode:"opaque",menu:"false"},{id:"sound_player_"+b,"class":"ksr_player",name:"sound_player_"+b},function(b){b.success?d.jwplayer=jwplayer(b.ref):
(b=a("<audio />",{src:d.$container.attr("data-file"),controls:!0,autoplay:c}),d.$container.html(b),d.$audio=b)});this.initialized=!0}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.xhr=!1;this.paused=b.paused||!1;this.options=a.extend({},{threshold:500,trigger_next:"scroll",load_next_after:!1,prepend_next:!1,dataType:"html",extra_params:{},$context:a(window),page_by:function(a){return a?a+1:1},page_param:"page",url:!1},b);this.current_page=this.options.page_by();this.bind_events()}a.fn.mobius=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("mobius");b||(b=new d(a(this),c),a(this).data("mobius",
b))})};a.extend(d.prototype,{bind_events:function(){var c=this;typeof this.options.trigger_next==="string"?(this.options.$context.on(this.options.trigger_next,function(){c.check_for_more()}),c.check_for_more()):this.options.trigger_next.jquery&&this.options.trigger_next.click(function(b){b.preventDefault();a(this).addClass("loading_next");c.load_next()})},clear_extra_params:function(){this.options.extra_params={}},add_param:function(c,b){var d={};d[c]=b;a.extend(this.options.extra_params,d)},set_extra_params:function(a){this.options.extra_params=
a},pause:function(){this.paused=!0},play:function(){this.paused=!1},check_for_more:function(){if(!this.paused){var a=this.options.$context.scrollTop()+this.options.$context.height(),b=this.$elem.offset().top,d=this.$elem.get(0).scrollHeight;a-b>d-this.options.threshold&&this.load_next()}},load_next:function(){this.load_page(this.options.page_by(this.current_page),this.options.load_next_after,!0)},load_page:function(c,b,d){var f=parseInt(c,10),g=this;if(!isNaN(f)){if(!b||!b.length)b=!1;if(!this.xhr)this.$elem.trigger("mobius:loading_page"),
this.xhr=a.ajax({type:"get",dataType:this.options.dataType,url:this.build_paged_url(f),success:function(c){g.xhr=!1;if(g.options.dataType==="html"){c=a("<div>"+c+"</div>").find(".mobius").children();if(!c.length){g.$elem.trigger("mobius:error",["No mobius found in page #"+f+"."]);return}b?b.after(c):g.options.prepend_next?g.$elem.prepend(c):g.$elem.append(c);g.options.trigger_next.jquery&&g.options.trigger_next.removeClass("loading_next")}g.$elem.trigger("mobius:loaded_page",[f,c]);if(d||!b)g.current_page=
f},error:function(){g.xhr=!1}})}},build_paged_url:function(c){var b=window.location.toString().replace(window.location.search,"").replace(window.location.hash,""),d=typeof this.options.extra_params==="undefined"?"":typeof this.options.extra_params==="string"?this.options.extra_params:a.param(this.options.extra_params),f=/(.*)#$/;f.test(b)&&(b=f.exec(b)[1]);d&&(d="&"+d);if(this.options.url)b=this.options.url;return b.toString()+"?"+this.options.page_param+"="+c+d}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(b,c){this.$elem=b;this.options=a.extend({},{adjust_on:"mobius:loaded_page scroll resize sticky_bar:position load hashchange",parent:b.parent(),attach_to:"top",lock_to_bottom:!0},c);(!this.options.parent||!this.options.parent.length)&&a.console.log("WARNING: sticky bar has no parent");this.paused=!1;this.last_scroll_top=0;this.fixed=this.last_up=!1;this.original_top=b.offset().top;this.original_bottom=this.original_top+b.height();this.update_window_larger_then_elem();
this.attach_to_top=this.options.attach_to==="top";this.attach_to_bottom=!this.attach_to_top;this.bind_events();this.reposition()}function c(b,c){this.$elem=b;this.options=a.extend({},{adjust_on:"shifted scroll resize load hashchange"},c);this.original_top=b.offset().top;this.bind_events();this.reposition()}a.fn.sticky_bar=function(b){b=b||{};return a(this).each(function(){var c=a(this).data("stickybar");c?a(this).trigger("shifted"):(c=new d(a(this),b),a(this).data("stickybar",c))})};a.fn.simple_sticky_bar=
function(b){b=b||{};return a(this).each(function(){var d=a(this).data("simple_stickybar");d?a(this).trigger("shifted"):(d=new c(a(this),b),a(this).data("simple_stickybar",d))})};a.extend(c.prototype,{bind_events:function(){var b=this;a(window).on(this.options.adjust_on,function(a){b.reposition(a)})},reposition:function(){a(window).scrollTop()<this.original_top?(this.$elem.css("position","static"),this.$elem.css("top","auto")):(this.$elem.css("position","fixed"),this.$elem.css("top",0))}});a.extend(d.prototype,
{bind_events:function(){var b=this;a(window).resize(function(a){a.target===window&&b.update_window_larger_then_elem()});a(document).on("shifted",function(){b.fixed=!1;b.$elem.css("position","static");b.$elem.css("top","auto");b.$elem.css("bottom","auto");b.original_top=b.$elem.offset().top;b.original_bottom=b.original_top+b.$elem.height();b.reposition()});a(window).on(this.options.adjust_on,function(a){b.paused||b.reposition(a)});this.$elem.on("sticky_bar:fix_to_bottom",function(){b.fixed=!0;b.$elem.css("position",
"fixed");b.$elem.css("top",-(b.$elem.height()-a(window).height()))});this.$elem.on("sticky_bar:pause",function(){b.paused=!0});this.$elem.on("sticky_bar:unpause",function(){b.paused=!1})},update_window_larger_then_elem:function(){this.window_larger_then_elem=a(window).height()>this.$elem.height()},reposition:function(b){var c=a(window).scrollTop(),d=c+a(window).height(),g=this.$elem.offset().top,h=g+this.$elem.height(),i=this.options.parent;i=i.offset().top+i.outerHeight();b=b&&b.type==="scroll";
var k=c>this.last_scroll_top?!1:!0,l=k!==this.last_up?!0:!1;if(this.attach_to_top&&c<this.original_top||this.attach_to_bottom&&d>this.original_bottom)this.fixed=!1,this.$elem.css("position","static"),this.$elem.css("top","auto"),this.$elem.css("bottom","auto");else if(this.options.lock_to_bottom&&!this.window_larger_then_elem&&d>i)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",i-this.$elem.outerHeight());else if(this.options.lock_to_bottom&&this.window_larger_then_elem&&
c+this.$elem.height()>i)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",i-this.$elem.outerHeight());else if(!l||!b){if(!this.fixed)if(this.attach_to_top)if(this.window_larger_then_elem||(!b||k)&&c<g)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",0);else{if((!b||!k)&&d>h)this.fixed=!0,this.$elem.css("position","fixed"),this.$elem.css("top",-(this.$elem.height()-a(window).height()))}else if(this.window_larger_then_elem||(!b||!k)&&d>h)this.fixed=!0,this.$elem.css("position",
"fixed"),this.$elem.css("bottom",0)}else if(!this.window_larger_then_elem)this.fixed=!1,this.$elem.css("position","absolute"),this.$elem.css("top",g),this.$elem.css("bottom","auto");this.was_fixed!==this.fixed&&this.$elem.trigger("sticky_bar:fixed_changed",[this.fixed]);this.last_scroll_top=c;this.last_up=k}})})(jQuery)})(this);
instrument_function(function(a){(function(d){function c(b){a.history&&a.history.replaceState?history.replaceState(null,null,b):window.location.replace(b)}d.fn.persistent_paging=function(){return d(this).each(function(){function a(){var b=[];d.each(f,function(){b.push([this[0],this[2].offset().top,this[2]])});f=b}var e=d(this),f=[[1,0,e.find(".page")]],g=[],h=!1,i=e.data("mobius"),k=/^#p(\d*)/.exec(window.location.hash);k&&parseInt(k[1],10)!==1&&(e.one("mobius:loaded_page",function(a,b,c){d.scrollTo(c.offset().top+
70)}),i.load_page(parseInt(k[1],10)));e.on("mobius:loaded_page",function(c,g,h){function k(){if(this[0]===n)return t=!0,!1}c=[];var t,n;f.push([g,!1,h]);a();for(n=1;n<=f[f.length-1][0];n+=1)t=!1,d.each(f,k),t||c.push(n);c.length?d.each(c,function(){var a=f[0],b=parseInt(this,10),c=d([]),g=[];g=d([]);var h=d([]);d.each(f,function(){this[0]>a[0]&&this[0]<b&&(a=this)});c=a[2].next(".missing");c.length?(g=c.data("missing_pages"),d.inArray(b,g)===-1&&(g.push(b),c.data("missing_pages",g))):(c=e.siblings(".missing").clone(),
g=c.find(".loading"),h=c.find(".load_more"),c.data("missing_pages",[b]),c.find("a").click(function(a){var b=c.data("missing_pages"),d=b.pop();a.preventDefault();b.length&&c.data("missing_pages",b);h.addClass("loading");i.load_page(d,c);e.one("mobius:loaded_page",function(){h.removeClass("loading")})}),a[2].after(c),g.hide(),c.show())}):e.find("div.missing").remove()});d(document).scroll(function(){var a=d(window).scrollTop();d.each(f,function(){a>this[1]&&(g=this)});g[0]!==h&&(c("#p"+g[0]),d(document).trigger("infinite_scroll:scrolled_to",
[g[0]]),h=g[0])})})}})(jQuery)})(this);
instrument_function(function(){(function(a){function d(a,b){this.$elem=a;this.options=b;this.total_elements=a.find(b.items).length;a.serialScroll(b);this.bind_events()}a.fn.infinite_carousel=function(c){c=c||{};return a(this).each(function(){var b=a(this).data("infinite_carousel");b||(b=new d(a(this),c),a(this).data("infinite_carousel",b))})};a.extend(d.prototype,{bind_events:function(){var a=this;this.$elem.on("notify.serialScroll",function(b,d){a.total_elements=a.$elem.find(a.options.items).length+
1;d+1>=a.total_elements-a.options.step&&a.$elem.trigger("infinite_carousel:last_page")})}})})(jQuery)})(this);
instrument_function(function(){(function(){$.fn.tabs=function(){return $(this).each(function(){var a=$(this);a.on("activate",function(d,c){var b=$(c);b=$("#"+b.data("pane"));a.data("pane")&&a.data("pane").trigger("deactivated");a.data("pane",b.trigger("activated"))});a.children().on("click",function(){$(this).parent().trigger("activate",$(this))})})};$.fn.panes=function(){var a=$(this);return a.each(function(){a.children().on("activated",function(){$(this).show()}).on("deactivated",function(){$(this).hide()})})}})()})(this);
instrument_function(function(){(function(a){function d(c,b){this.$elem=c;this.val=0;this.options=a.extend({},{frame_count:10,frame_step:40,frame_duration:30,format_numbers:!0,max_digits:5,keyframes:["","0","1","2","3","4","5","6","7","8","9",","],framesets:null},b);this.val=this.$elem.attr("rel");this.keyframes=this.options.keyframes;this.framesets=this.options.framesets;var d;this.framesets||this.init_framesets();for(d=0;d<this.options.max_digits;d+=1)this.init_digit(d);this.write(this.val,!0)}a.fn.ticker=
function(c){c=c||{};return a(this).each(function(){var b=a(this).data("ticker");b||(b=new d(a(this),c),a(this).data("ticker",b))})};a.extend(d.prototype,{read:function(){return this.val},write:function(c,b){this.val=String(c||"");this.$elem.attr("rel",this.val);var d=(this.options.format_numbers?formatters.format_number(this.val,0):this.val).split(""),f=this.$elem.find(".ticker_digit"),g,h,i,k,l,p,j,q;for(q=0;q<d.length-f.length;q+=1)this.init_digit(q+f.length);f=this.$elem.find(".ticker_digit");
for(q=0;q<f.length;q+=1){g=a(f[q]);h=g.html();i=d[q]?String(d[q]):"";k=a.inArray(i,this.keyframes);l=this.framesets[k][0];p=a.inArray(g.html(),this.keyframes);j=[];g.html(i).data("tween_id",g.data("tween_id")+1);if(!i||i===h||b)j=j.concat(l);else for(;p!==k;)j=j.concat(this.framesets[p]),p+=1,p=p>=this.keyframes.length?1:p;this.tween(g.data("tween_id"),g,j)}},init_framesets:function(){var a,b;this.framesets=[];for(a=0;a<this.keyframes.length;a+=1){this.framesets.push([]);for(b=0;b<this.options.frame_count;b+=
1)this.framesets[a].push(a*this.options.frame_count*this.options.frame_step+b*this.options.frame_step)}},init_digit:function(c){c=a(this.$elem.find(".ticker_digit").get(c));c.length||(c=a('<span class="ticker_digit">&nbsp;</span>').prependTo(this.$elem));c.data("tween_id",1)},digit_count:function(){return this.$elem.find(".ticker_digit").length},remove_digit:function(a){a.remove();this.pad_digits()},tween:function(a,b,d){if(d.length)if(b.data("tween_id")!==a)return!1;else{var f=this;setTimeout(function(){var g=
d.shift();b.css({"background-position":"0px "+-1*g+"px"});f.tween(a,b,d)},this.options.frame_duration)}}})})(jQuery)})(this);instrument_function(function(){(function(a){a.fn.preload_background_image=function(){return this.each(function(){var d;var c=a(this).css("backgroundImage"),b=/[("]([^()"]+)[")]/;try{d=b.exec(c)[1]}catch(e){d=!1}if(d)(new Image).src=d})}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.serialize_without_blank=function(){var d,c=[];this.find(":input").each(function(){if(a.trim(this.value)===""&&!this.disabled)c.push(this),this.disabled=!0});d=this.serialize();_.each(c,function(a){a.disabled=!1});return d}})(jQuery)})(this);
instrument_function(function(){(function(a){a.fn.term_form=function(){this.each(function(){var d=a(this);d.find(".text").on("input keydown paste cut",function(){a.trim(a(this).val())?a("form.term .ss-delete").show():a("form.term .ss-delete").hide()}).trigger("input").on("blur",function(){d.submit()});d.find(".ss-delete").on("click",function(){a("form.term .text").val("").trigger("input").focus();d.submit()});d.find(".text").on("focus",function(){a(this).addClass("focused")});d.find(".text").on("blur",
function(){var c=a(this);c.val()||c.removeClass("focused")})});return this}})(jQuery)})(this);instrument_function(function(){$.parseEscapedJSON=function(a){a=a.replace(/[\u2028\u2029]/g," ").replace(/&#39;/g,"'");return $.parseJSON(_.unescape(a))}})(this);
instrument_function(function(){$(function(){function a(){$.console.log("xdreceiver did not initialize")}var d=$("iframe#api_xdreceiver"),c=d[0],b=[],e;$.api_ajax=function(){b.push(arguments)};d.load(function(){try{$.api_ajax=c.contentWindow.jQuery.ajax,monkey_patch_ajax_protocol_matching({name:"api_ajax",callback:$.api_ajax}),_.each(b,function(a){$.api_ajax.apply(this,a)})}catch(d){$.api_ajax=a,a()}clearTimeout(e)});e=setTimeout(a,1E4)})})(this);
instrument_function(function(){(function(a){function d(b,c){this.$div=b;this.options=a.extend({previous_month_text:"< Prev",next_month_text:"Next >",month_texts:["January","February","March","April","May","June","July","August","September","October","November","December"],day_of_week_texts:["S","M","T","W","T","F","S"]},c);this._extract_options();this._attach();this._redraw()}function c(a){b?b.firstChild.nodeValue=a:(b=document.createElement("div"),b.appendChild(document.createTextNode(a)));return b.innerHTML}
a.fn.calendar_date_picker=function(b){return this.each(function(){var c=a(this);c=new d(c,b);a(this).data("calendar_date_picker",c)})};a.extend(d.prototype,{_copy_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate())},_copy_date_with_time:function(a,b){if(!a)return a;var c=this._copy_date(a),d=(b||"").split(":");c.setHours(+d[0]||0);c.setMinutes(+d[1]||0);return c},_copy_time:function(a){if(!a)return null;var b=""+a.getHours();b.length===1&&(b="0"+b);a=""+a.getMinutes();a.length===
1&&(a="0"+a);return b+":"+a},_copy_month:function(a){return new Date(a.getFullYear(),a.getMonth(),1)},_next_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,1)},_previous_month:function(a){return new Date(a.getFullYear(),a.getMonth()-1,1)},_next_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+1,a.getHours(),a.getMinutes())},_previous_date:function(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()-1,a.getHours(),a.getMinutes())},_same_year:function(a,
b){return a.getFullYear()===b.getFullYear()},_same_month:function(a,b){return this._same_year(a,b)&&a.getMonth()===b.getMonth()},_last_date_of_month:function(a){return new Date(a.getFullYear(),a.getMonth()+1,0)},_selected_date_date_in_focus_month:function(){if(this.selected_date&&this._same_month(this.selected_date,this.focus_date))return this.selected_date.getDate()},_extract_options:function(){this.today_date=this._copy_date(this.options.today_date||new Date);if(this.options.selected_date)this.selected_date=
this._copy_date(this.options.selected_date);this.focus_date=this._copy_month(this.options.focus_date||this.selected_date||this.today_date);this.time=this._does_datetime()?this._copy_time(this.options.selected_date||this.options.today_date||new Date):!1},_refresh_calendar_table_classes:function(a){var b=this._selected_date_date_in_focus_month();a=a.children("tbody");var c=a.find("a.selected");c.removeClass("selected");c.parent().removeClass("selected");b=a.find("a:eq("+(b-1)+")");b.addClass("selected");
b.parent().addClass("selected")},_attach:function(){var a=this;this.$div.bind("calendar_date_picker:select_date",function(b,c){a.select_date(c)})},_bind_dom_table_events:function(){var b=this,c=this.$div.children().children("table"),d=c.children(":eq(0)").children().children(),h=d.children("a.previous_month");h.text(this.options.previous_month_text);h.click(function(a){a.preventDefault();b._on_previous_month_clicked()});h=d.children("a.next_month");h.text(this.options.next_month_text);h.click(function(a){a.preventDefault();
b._on_next_month_clicked()});d.children(".month, .year").on("click",function(){b.focus_date=new Date;b._refresh_calendar()});c.children("tbody").click(function(c){var d=a(a.browser.msie?c.srcElement:c.target);d[0]&&d[0].nodeName==="A"&&(c.preventDefault(),c=b._copy_date_with_time(b.focus_date,b.time),c.setDate(+d.text()),d=b._copy_date_with_time(b.selected_date,b.time),b.options.allow_deselect&&d&&c-d===0?b.select_date(void 0):b.select_date(c))})},_bind_dom_time_events:function(){if(this._does_datetime()){var a=
this,b=this.$div.children().children("div.time").find("input");b.time_field();b.trigger("time_field:set_time",this.time);b.bind("time_field:time_changed",function(b,c){if(!a.selected_date)a.selected_date=new Date;var d=a._copy_date_with_time(a.selected_date,c);a.select_date(d)})}},_does_datetime:function(){return this.options.time_text!==void 0},_on_previous_month_clicked:function(){this.focus_date=this._previous_month(this.focus_date);this._refresh_calendar()},_on_next_month_clicked:function(){this.focus_date=
this._next_month(this.focus_date);this._refresh_calendar()},_redraw:function(){this.$div.empty();this.$div.append('<div class="calendar_date_picker">'+this._table_html()+this._time_div_html()+"</div>");this._bind_dom_table_events();this._bind_dom_time_events()},_refresh_calendar:function(){this.$div.children().children("table").replaceWith(this._table_html());this._bind_dom_table_events()},select_date:function(a,b){var c=a?this._copy_date(a):void 0,d=b?b:a?this._copy_time(a):void 0;if(!((this.selected_date?
this.selected_date.valueOf():void 0)===(c?c.valueOf():void 0)&&d===this.time)){this.selected_date=c;if(this._does_datetime())(this.time=d)&&this.$div.find("input").trigger("time_field:set_time",d);this.$div.trigger("calendar_date_picker:date_selected",[this._copy_date_with_time(this.selected_date,this.time)]);this.focus_date=this._copy_month(this.selected_date||this.today_date);this._refresh_calendar();this._refresh_calendar_table_classes(this.$div.find("table"))}},_table_html:function(){return"<table>"+
this._thead_month_html()+this._thead_days_of_week_html()+this._tbody_html()+"</table>"},_thead_month_html:function(){return'<thead class="month"><tr><th colspan="7"><a class="previous_month ss-icon ss-navigateleft grey-dark" href="#"></a><a class="next_month ss-icon ss-navigateright grey-dark" href="#"></a><span class="month">'+c(this.options.month_texts[this.focus_date.getMonth()])+'</span> <span class="year">'+this.focus_date.getFullYear()+"</span></th></tr></thead>"},_thead_days_of_week_html:function(){return'<thead class="days_of_week"><tr><th>'+
this._days_of_week_ths().join("</th><th>")+"</th></tr></thead>"},_tbody_html:function(){var a=this._copy_month(this.focus_date).getDay(),b=1,c=this._last_date_of_month(this.focus_date).getDate(),d=this._selected_date_date_in_focus_month(),i=this._same_month(this.focus_date,this.today_date)&&this.today_date.getDate(),k=[];k.push(this._date_tds(a,d,i,b,c));for(b=8-a;b<=c;b+=7)k.push(this._date_tds(0,d,i,b,c));return"<tbody><tr>"+k.join("</tr><tr>")+"</tr></tbody>"},_date_tds:function(a,b,c,d,i){for(var k=
[],l=0;l<a;l+=1)k.push("<td></td>");for(a=d;k.length<7&&a<=i;a+=1)l=[],a===b&&l.push("selected"),a===c&&l.push("today"),l=l.length?' class="'+l.join(" ")+'"':"",k.push("<td"+l+'><a href="#"'+l+">"+a+"</a></td>");for(b=i+1;b<d+7;b+=1)k.push("<td></td>");return k.join("")},_days_of_week_ths:function(){return a.map(this.options.day_of_week_texts,c)},_time_div_html:function(){return this._does_datetime()?'<div class="time"><label>'+c(this.options.time_text)+'<input type="text" /></label></div>':""}});
var b})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$field=c;this.$calendar=void 0;this.options=a.extend({calendar:{},position:"right"},b);this._in_manual_edit=!1;this._blurs_to_ignore=-1;this._attach()}a.fn.datetime_picker_field=function(c){return this.each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;this.$field.focus(function(){a._in_time_field=!1;a._ensure_calendar()});this.$field.blur(function(){a._hide_calendar_or_refocus();a._blurs_to_ignore-=
1});a.$field.bind("keypress cut paste input",function(){a._handle_edit()})},_ensure_calendar:function(){if(this.$calendar)return this.$calendar;var c=this,b=a("<div></div>"),d=a.extend({selected_date:this.get_selected_datetime()},this.options.calendar);this.options.class_name?b.addClass(this.options.class_name):(b.css("position","absolute"),b.css("z-index",1E3));this.options.position==="bottom"?(b.css("left",this.$field.offset().left),b.css("top",this.$field.offset().top+this.$field.outerHeight()+
20)):(b.css("left",this.$field.offset().left+this.$field.width()+20),b.css("top",this.$field.offset().top));b.hide();this._get_surrounding_element().append(b);b.calendar_date_picker(d);b.mousedown(function(){c._in_time_field=!1;c._blurs_to_ignore+=1});b.find("label").mousedown(function(a){c._in_time_field=!0;c._blurs_to_ignore+=1;a.stopPropagation()});b.find("input").blur(function(){c._hide_calendar_or_refocus();c._blurs_to_ignore-=1});c._blurs_to_ignore=0;b.bind("calendar_date_picker:date_selected",
function(a,b){if(!c._in_manual_edit){var d=c.options.format_callback(b);d!==c.$field.val()&&(c.$field.val(d),c.$field.trigger("input"),c.options.calendar.time_text||(c._hide_calendar(),c._focus_next()))}});b.find(".time input").bind("keydown",function(b){b.keyCode===13&&(a(this).blur(),c._hide_calendar())});this.$calendar=b;b.fadeIn();this.options.open_calendar_callback&&this.options.open_calendar_callback();return this.$calendar},_hide_calendar:function(){if(this.$calendar)this.$calendar.fadeOut(function(){a(this).remove()}),
this.$calendar=void 0,this.options.close_calendar_callback&&this.options.close_calendar_callback()},_focus_next:function(){var a=this.$field.parents("form:eq(0)").find(":input"),b=a.index(this.$field);b>-1&&b+1<a.length&&a.eq(b+1).focus()},_reformat_value:function(){this.$field.val(this.options.format_callback(this.get_selected_datetime()))},_hide_calendar_or_refocus:function(){var a=this;this._blurs_to_ignore<=0?(this._hide_calendar(),this._reformat_value()):window.setTimeout(function(){a._in_time_field?
a.$calendar&&a.$calendar.length&&a.$calendar.find("input").focus():a.$field.focus()})},_handle_edit:function(){this._in_manual_edit=!0;this.$calendar&&this.$calendar.trigger("calendar_date_picker:select_date",this.get_selected_datetime());this._in_manual_edit=!1},get_selected_datetime:function(){return this.options.parse_callback(this.$field.val())},_get_surrounding_element:function(){return this.options.surrounding_element?a(this.options.surrounding_element):a("body")}})})(jQuery)})(this);
instrument_function(function(){(function(a){function d(c,b){this.$field=c;this.options=a.extend({on_invalid:null},b);this._value=this._current_time_from_field();this._attach()}a.fn.time_field=function(c){return a(this).each(function(){new d(a(this),c)})};a.extend(d.prototype,{_attach:function(){var a=this;a.$field.bind("blur",function(){a._handle_edit()});this.$field.bind("time_field:set_time",function(b,d){a.set_time(d)})},_s_to_time:function(a){if(typeof Date.Parsing==="object")return(a=Date.parse(a))?
a.toString("HH:mm"):this.options.on_invalid;var b,d=a.match(/^\s*(\d\d?)(:(\d\d))?\s*([ap]m?)?\s*$/i);a=!d;if(!a){var f=+d[1]%12;b=+d[3]||0;var g=(d[4]||"").match(/p/i);d[4]||(g=+d[1]>=12);+d[1]>23&&(a=!0);+d[1]>12&&d[4]&&(a=!0);b>59&&(a=!0);+d[1]<1&&d[4]&&(a=!0);d=""+(f+(g?12:0));d.length===1&&(d="0"+d);b=""+b;b.length===1&&(b="0"+b);b=d+":"+b}return a?this.options.on_invalid:b},_time_to_s:function(a){if(typeof Date.Parsing==="object")return(a=Date.parse(a))?a.toString("h:mm tt"):this.options.on_invalid;
var b=a&&a.match(/(\d\d):(\d\d)/);return b?(a=+b[1],b=""+ +b[2],b.length===1&&(b="0"+b),""+(a%12?a%12:12)+":"+b+(a>=12?"pm":"am")):""},_current_time_from_field:function(){return this._s_to_time(this.$field.val())},_reset_field_value:function(){this._value!==this._current_time_from_field()&&this.$field.val(this._time_to_s(this._value))},set_time:function(a){if(a!==this._value)this._value=a,this.$field.trigger("time_field:time_changed",this._value);this._reset_field_value()},_handle_edit:function(){this.set_time(this._current_time_from_field())}})})(jQuery)})(this);
instrument_function(function(){$(function(){$.fn.sync_form=function(a){var d=$(this),c=function(){};a=a||{};d.data("updating")?d.data("dirty",(d.data("dirty")||[]).concat(a)):(d.data("updating",!0),$.ajax({type:a.type||d.attr("method"),url:a.url||d.attr("action"),data:a.data||d.serialize(),dataType:"json",global:!1,context:d,beforeSend:a.beforeSend,success:function(b){(a.success||c).apply(this,arguments);d.trigger("form_synced",[b]);d.data("dirty")&&d.data("dirty").length&&setTimeout(function(){for(var a=
{};$.isEmptyObject(a)&&d.data("dirty").length;)a=d.data("dirty").shift();d.sync_form(a)},100);b.url&&d.attr("action",b.url)},error:a.error,complete:function(){(a.complete||c).apply(this,arguments);d.data("updating",!1)}}))}})})(this);
instrument_function(function(){(function(a){var d={};a.publish=function(){var c=Array.prototype.slice.call(arguments),b=c.shift();d[b]&&a.each(d[b],function(){this.apply(a,c)})};a.subscribe=function(a,b){d[a]||(d[a]=[]);d[a].push(b);return[a,b]};a.unsubscribe=function(c){d[c]&&a.each(d[c],function(a,e){this===e&&d[c].splice(a,1)})}})(jQuery)})(this);
instrument_function(function(a){(function(){a.oauth_url=function(a){return typeof api_oauth_token!=="undefined"?URI(a).addQuery("oauth_token",api_oauth_token).toString():a}})()})(this);instrument_function(function(a){(function(){a.shuffle=function(a){var c,b,e=a.length;if(e)for(;e;)e-=1,b=Math.floor(Math.random()*(e+1)),c=a[b],a[b]=a[e],a[e]=c;return a}})()})(this);
instrument_function(function(){(function(a){a.support.fontFace=function(){var a,c=document,b=c.head||c.getElementsByTagName("head")[0]||docElement,e=c.createElement("style");c=c.implementation||{hasFeature:function(){return!1}};e.type="text/css";b.insertBefore(e,b.firstChild);a=e.sheet||e.styleSheet;return(c.hasFeature("CSS2","")?function(b){if(!a||!b)return!1;var c=!1;try{a.insertRule(b,0),c=!/unknown/i.test(a.cssRules[0].cssText),a.deleteRule(a.cssRules.length-1)}catch(e){}return c}:function(b){if(!a||
!b)return!1;a.cssText=b;return a.cssText.length!==0&&!/unknown/i.test(a.cssText)&&a.cssText.replace(/\r+|\n+/g,"").indexOf(b.split(" ")[0])===0})('@font-face { font-family: "font"; src: "font.ttf"; }')}})(jQuery)})(this);instrument_function(function(a){(function(d){d.support.JSON=function(){return typeof a.JSON!=="undefined"}})(jQuery)})(this);
instrument_function(function(a){(function(d){d.support.localStorage=function(){var c=a.localStorage;try{return c.setItem("storagetest","1"),c.removeItem("storagetest"),!0}catch(b){return!1}}})(jQuery)})(this);
instrument_function(function(a){(function(){function d(a){var b=$("#template-"+a.replace(/\//g,"_"));if(!b.length)throw"Could not find template: "+a;return $.trim(b.html())}function c(a){var b={};_.isString(a)&&(a=[a]);if(_.isArray(a))return _.each(a,function(a){b[a]=d(a)}),b}var b={};a.render=function(a,f,g){var h=b[a]||function(a){return a};a=d(a);g=c(g);return Mustache.render(a,$.extend({},h(f)),g)};a.presenters=b})()})(this);
instrument_function(function(a){(function(){_.templateSettings={interpolate:/\{\{(.+?)\}\}/g};a.render_raw=function(a,c){return _.template(a,c)}})()})(this);
instrument_function(function(){function a(a,c,b){a=$(a);var e=_.map(_.keys(c),function(a){return"#"+a}).join(", ");a.delegate(e,"change",function(){$(this).trigger("state_change")});a.delegate(e,"state_change",function(){var a=$(this),d=a.val();_.each(c[a[0].id],function(a,c){var e=$("#"+c),f=e.add(e.prev("label")),p=e.val(),j=_.result(a,d),q;typeof e.data("options")==="undefined"&&e.data("options",e.find("option"));_.isRegExp(j)&&(j=e.option_values(function(a){return a.match(j)}));_.isArray(j)&&
(j=_.map(j,function(a){return'[value="'+a+'"]'}).join(", "));j?(q=$(e.data("options")),_.isString(j)&&(q=q.filter(j)),b.include_blank&&(q=$("<option>").add(q)),e.html(q),f.show(),e.val()!==p&&e.trigger("change")):(b.default_control(f),e.trigger("change"))})})}$.fn.option_values=function(a){var c=$(this).first().find("option").map(function(b,c){var f=c.value;if(typeof a==="function"&&!a(f))return!1;return f});return _(c).without(!1)};$.fn.select_machine=function(d,c){var b={default_control:function(a){a.hide()}};
$(this).each(function(){a(this,d,$.extend(b,c))});return this}})(this);
instrument_function(function(){(function(a){window.XDomainRequest&&a.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout)d.xdrTimeout=d.timeout,delete d.timeout;var c;return{send:function(b,e){function f(b,d,f,k){c.onload=c.onerror=c.ontimeout=c.onprogress=a.noop;c=void 0;e(b,d,f,k)}c=new window.XDomainRequest;c.open(d.type,d.url);c.onload=function(){f(200,"OK",{text:c.responseText},"Content-Type: "+c.contentType)};c.onerror=function(){f(404,"Not Found")};c.onprogress=function(){};if(d.xdrTimeout)c.ontimeout=
function(){f(0,"timeout")},c.timeout=d.xdrTimeout;c.send(d.hasContent&&d.data||null)},abort:function(){if(c)c.onerror=a.noop(),c.abort()}}}})})(jQuery)})(this);
instrument_function(function(a){(function(){function d(a,b){var c,d;c=_(a).map(function(a,c){var e=!1;c.match(/^\!/)&&(e=!0,c=c.replace(/^\!/,""));_.isArray(a)||(a=[a]);a=_(a).map(function(a){return a+""});d=_(a).include(b[c]+"");return e?!d:d});return _(c).inject(function(a,b){return a||b},c[0])}function c(a,b){if(_.isArray(a)){var c=_(a).map(function(a){return d(a,b)});return _(c).inject(function(a,b){return a&&b},c[0])}}function b(d,e,f){$(d).find("."+e+f.id).each(function(d,e){var g,i;g="";var h=
$(e);i=h.data("conditions");var k=h.attr("itemprop");typeof k!=="undefined"?g=k.match(/\[(\w*)\]/)[1]:h.data("attr")&&(g=h.data("attr"));typeof i!=="undefined"?(typeof i==="string"&&(i=JSON.parse(i)),g=(i=c(i,f))?JSON.parse(h.data("render")):"",h.data("evaluation")!==i&&(h.html(g),h.data("evaluation",i),g.length&&b(h,"Project",f))):typeof g!=="undefined"&&typeof f[g]!=="undefined"&&(h.data("value",f[g]),h.attr("data-value",f[g]),a.refresh_node(h))})}function e(a){this.template=a;this.conditions=[]}
function f(a){var b;typeof a==="string"&&(b={},b[a]=!0,a=b);return a}var g,h={};a.Schwamm=h;g={money:function(a){if(typeof a.precision==="undefined")a.precision=0;var b=formatters.currency_symbol_mappings[a.currency]+this.number(a);!a.without_code&&formatters.currency_trailing_code_mappings[a.currency]&&(b+=" "+a.currency);return b},shorter_money:function(a){a.value<100?a.precision=2:(a.precision=0,a.value=Math.floor(a.value));return this.money(a)},number:function(a){return formatters.format_number(a.value,
a.precision||0)},pluralize:function(a){return formatters.pluralize(a.word,a.value)},percent:function(a){a.value=parseFloat(a.value)/parseFloat(a.of)*100;return this.number(a)+"%"},time_ago_in_words:function(a){if(a.value){if(typeof a.value==="number"||typeof a.value==="string"&&a.value.match(/^\d+$/))a.value=parseInt(a.value*1E3,10)}else return"?";var b,c;a=moment(a.value);var d=Math.floor(moment().diff(a)/1E3);$.each(formatters.distance_date_intervals,function(a,c){b=c;if(c[0]>d)return!1});c={m:Math.round(d/
60),h:Math.round(d/3600),d:Math.round(d/86400),t:a.format("MMM D"),y:a.format("MMM D, YYYY")};a=$.map(c,function(a,b){return b});a=RegExp("%(["+a.join("")+"])","g");a=b[1].replace(a,function(a,b){return c[b]});if(a.match(/NaN|undefined/))return"";return a},distance_date:function(a){return this.time_ago_in_words(a)}};a.refresh_node=function(a){var b;b=a.data("format");b=(b=a.data("format"))&&typeof g[b]==="function"?g[b](a.data()):a.data("value");a.html(b)};a.update_record=function(a,c){var d=["state",
"ended","is_starred"],e=$("."+a+c.id+"_cxt");e.each(function(b,f){_.each(d,function(b){var d;d=RegExp(a+"-"+b+"\\S+\\s?","g");d=$(f).attr("class").match(d).join(" ");b=a+"-"+b+"-"+c[b];e.removeClass(d);e.addClass(b)})});b(document,a,c)};h.FormattingHelpers=g;h.presenter=function(a,b,c){var d=new Schnurrbart(a,b),e={},f={};if($.isArray(c))$.each(c,function(a,b){e[b]=b});else if(typeof c==="object")e=c;else return;$.each(e,function(a,b){var c;$.isArray(b)||(b=[b]);c=d.hasOwnProperty(a)?a:"tag";f[a]=
d[c].apply(d,b)});return f};Schnurrbart=function(a,b){this.model_name=a;this.proxy=b;this.class_name=a+this.proxy.id;this.constructor.schnurrbarts[this.class_name]=this};if(typeof exports!=="undefined")exports.Schnurrbart=Schnurrbart;Schnurrbart.schnurrbarts={};Schnurrbart.prototype.tag=function(a,b){b||(b={});var c;return b.format?this.format(a,b):(c=this.proxy[a],this.render_tag(a,c,b))};Schnurrbart.prototype.pluralize=function(a,b){return this.format_on(b,{format:"pluralize",word:a})};Schnurrbart.prototype.format_on=
function(a,b){b||(b={});b.attr=a;return this.format(null,b)};Schnurrbart.prototype.format=function(a,b){var c=a||b.attr;c&&(b=$.extend({value:this.proxy[c]},b));if($.inArray(b.format,formatters.currency_formats)>=0)b.currency=this.proxy.currency;c=this.formatting_helper(b);return this.render_tag(a,c,b)};Schnurrbart.prototype.render_tag=function(a,b,c,d){c||(c={});c=this.base_html_options(a,c);a=$("<data>");a.attr(c);a.html(b);if(d)return a;return a[0].outerHTML};Schnurrbart.prototype.base_html_options=
function(a,b){b||(b={});var c={"class":this.class_name};$.extend(c,this.data_attributes(b));if(a)c.itemprop=this.itemprop(a);return c};Schnurrbart.prototype.itemprop=function(a){return this.model_name+"["+a+"]"};Schnurrbart.prototype.data_attributes=function(a){a||(a={});var b={};$.each(a,function(a,c){b["data-"+a]=c});return b};Schnurrbart.prototype.formatting_helper=function(a){return h.FormattingHelpers[a.format](a)};Schnurrbart.prototype["if"]=function(a){return(new e(this))["if"](a)};Schnurrbart.prototype.if_not=
function(a){return(new e(this)).if_not(a)};Schnurrbart.context_methods={Project:{state:["live","started","submitted","canceled","suspended","successful","failed","purged"],is_starred:[!0],ended:[!0]}};Schnurrbart.prototype.context_classes=function(){var a=this.constructor.context_methods[this.model_name],b=[],c=this;b.push(this.class_name+"_cxt");_.each(a,function(a,d){b.push(c.model_name+"-"+d.replace(/\W/g,"")+"-"+c.proxy[d])});return b.join(" ")};e.prototype["if"]=function(a){this.condition("and",
!0,a);return this};e.prototype.and=e.prototype["if"];e.prototype.if_not=function(a){this.condition("and",!1,a);return this};e.prototype.unless=e.prototype.if_not;e.prototype.and_not=e.prototype.if_not;e.prototype.or=function(a){this.condition("or",!0,a);return this};e.prototype.or_not=function(a){this.condition("or",!1,a);return this};e.prototype.then=function(){var a=this;return function(){return function(b,c){a.value=c(b);return a.html()}}};e.prototype.condition=function(a,b,c){var d;_.isObject(c)||
(d={},d[c]=!0,c=d);b===!1&&_.each(_(c).keys(),function(a){c["!"+a]=c[a];delete c[a]});a==="or"?(a=f(this.conditions[this.conditions.length-1]),c=f(c),this.conditions[this.conditions.length-1]=$.extend(!0,a,c)):a==="and"&&this.conditions.push(c);return this};e.prototype.evaluation=function(){if(typeof this.cached_evaluation==="undefined")this.cached_evaluation=c(this.conditions,this.template.proxy);return this.cached_evaluation};e.prototype.content=function(){return this.evaluation()?this.value:""};
e.prototype.html=function(){var a=$("<data>");a.attr(this.html_options());a.html(this.content());return a[0].outerHTML};e.prototype.html_options=function(){return{"class":this.template.class_name,"data-conditions":JSON.stringify(this.conditions),"data-render":JSON.stringify(this.value),"data-evaluation":c}}})()})(this);
instrument_function(function(a){var d={mailcheck:{threshold:2,defaultDomains:["yahoo.com","google.com","hotmail.com","gmail.com","me.com","aol.com","mac.com","live.com","comcast.net","googlemail.com","msn.com","facebook.com","verizon.net","sbcglobal.net","att.net","gmx.com","mail.com","ymail.com","hotmail.co.uk","yahoo.co.uk","live.co.uk"],defaultTopLevelDomains:["co.uk","com","net","org","info","edu","gov","mil"],whitelistRegexes:[/ymail.com/,/yahoo\.co\./,/yahoo\.com\./,/hotmail\.co\./,/hotmail\.com\./],
run:function(a){a.domains=a.domains||d.mailcheck.defaultDomains;a.topLevelDomains=a.topLevelDomains||d.mailcheck.defaultTopLevelDomains;a.distanceFunction=a.distanceFunction||d.sift3Distance;a.ignoreTLDs=a.ignoreTLDs||!1;var b=d.mailcheck.suggest(encodeURI(a.email),a.domains,a.topLevelDomains,a.distanceFunction,a.ignoreTLDs);b?a.suggested&&a.suggested(b):a.empty&&a.empty()},suggest:function(a,b,d,f,g){a=a.toLowerCase();a=this.splitEmail(a);b=this.findClosestDomain(a.domain,b,f);var h;for(f=0;f<this.whitelistRegexes.length;f+=
1)if(h=this.whitelistRegexes[f],h.exec(a.domain))return!1;if(b){if(b!==a.domain)return{address:a.address,domain:b,full:a.address+"@"+b}}else if(!g&&(d=this.findClosestDomain(a.topLevelDomain,d),a.domain&&d&&d!==a.topLevelDomain))return g=a.domain,b=g.substring(0,g.lastIndexOf(a.topLevelDomain))+d,{address:a.address,domain:b,full:a.address+"@"+b};return!1},findClosestDomain:function(a,b,d){var f,g=99,h=null,i;if(!a||!b)return!1;if(!d)d=this.sift3Distance;for(i=0;i<b.length;i+=1){if(a===b[i])return a;
f=d(a,b[i]);f<g&&(g=f,h=b[i])}return g<=this.threshold&&h!==null?h:!1},sift3Distance:function(a,b){var d=0,f=0,g=0,h=0,i;if(a===null||a.length===0)return b===null||b.length===0?0:b.length;if(b===null||b.length===0)return a.length;for(;d+f<a.length&&d+g<b.length;){if(a.charAt(d+f)===b.charAt(d+g))h+=1;else for(i=g=f=0;i<5;i+=1){if(d+i<a.length&&a.charAt(d+i)===b.charAt(d)){f=i;break}if(d+i<b.length&&a.charAt(d)===b.charAt(d+i)){g=i;break}}d+=1}return(a.length+b.length)/2-h},splitEmail:function(a){a=
a.split("@");var b,d,f,g="";if(a.length<2)return!1;for(b=0;b<a.length;b+=1)if(a[b]==="")return!1;d=a.pop();f=d.split(".");if(f.length===0)return!1;else if(f.length===1)g=f[0];else{for(b=1;b<f.length;b+=1)g+=f[b]+".";f.length>=2&&(g=g.substring(0,g.length-1))}return{topLevelDomain:g,domain:d,address:a.join("@")}}}};a.jQuery&&function(a){a.fn.mailcheck=function(a){var c=this,f,g;if(a.suggested)f=a.suggested,a.suggested=function(a){f(c,a)};if(a.empty)g=a.empty,a.empty=function(){g.call(null,c)};a.email=
this.val();d.mailcheck.run(a)}}(jQuery)})(this);instrument_function(function(a){(function(){a.url_equals=function(a,c,b){a=URI(a).absoluteTo(window.location);c=URI(c).absoluteTo(window.location);b=b||{};b.ignore_query&&(a.search({}),c.search({}));return a.equals(c)}})()})(this);instrument_function(function(){$(function(){$(document).on("click","ul.faqs_alt li .question",function(a){$(this).parent("li").toggleClass("expanded");track("FAQ Toggle",{question:$(this).text().trim()});a.preventDefault()})})})(this);
instrument_function(function(a){(function(){function d(a,b,d,f){a=a+"="+encodeURIComponent(b);b="";f=f||"/";typeof d==="number"&&(d=new Date(d));d&&(b+="; expires="+d.toGMTString());b+="; path="+f;document.cookie=a+b}a.read_cookie=function(a){var b=document.cookie.split(/; */),d;a+="=";for(d=0;d<b.length;d+=1)if(b[d].indexOf(a)===0)return decodeURIComponent(b[d].substr(a.length));return null};a.destroy_cookie=function(a,b){d(a,null,0,b)};a.write_cookie=d})()})(this);
instrument_function(function(a){(function(){function d(){this.initialize.apply(this,arguments)}a.Model=d;d.inheritance_chain=[];d.inheritance_chain.push(function(){var a={};return{extend:function(a){function c(){this.initialize.apply(this,arguments)}c.inheritance_chain=this.inheritance_chain||[];typeof a==="function"&&c.inheritance_chain.push(a);_.each(c.inheritance_chain,function(a){_.extend(c,a())});_.extend(c.prototype,this.prototype);return c},listen:function(a,c){var d=this;_.isObject(a)&&_.each(a,
function(a,b){d.listen(b,a)});if(typeof this.listeners==="undefined")this.listeners={};if(typeof this.listeners._global==="undefined")this.listeners._global=[];if(typeof a==="function")this.listeners._global.push(a);else return typeof this.listeners[a]==="undefined"&&(this.listeners[a]=[]),this.listeners[a].push(c),this},_broadcast:function(a,c,d){if(typeof this.listeners==="undefined")this.listeners={};if(typeof this.listeners._global==="undefined")this.listeners._global=[];var g,h=this;c=c||"";
_.each(_.keys(a),function(g){typeof a[g]==="object"&&a[g]!==null&&!_.isArray(a[g])&&h._broadcast(a[g],c+g+".",d);typeof h.listeners[c+g]!=="undefined"&&_.each(h.listeners[c+g],function(c){c.call(h,a,d)})});if(!c)for(g=0;g<this.listeners._global.length;g+=1)this.listeners._global[g].call(this,a,d)},on_initialize:function(a){if(typeof this.initializers==="undefined")this.initializers=[];this.initializers.push(a)},get_computed_values:function(){return a},set_computed_value:function(b,d,f){var g=this;
a[b]=d;f&&_.isArray(f.changes_on)&&_.each(f.changes_on,function(a){g.prototype.on_change(a,function(){var a={};a[b]=this.get(b);this._broadcast(a)})})}}});_.extend(d,d.inheritance_chain[0]());d.prototype.initialize=function(a){var b=this,d=arguments;this.data={};a&&this.set(a);_.each(this.constructor.initializers,function(a){a.apply(b,d)});this.data.id&&(this.constructor.records[this.data.id]=this);this.constructor._broadcast({"new":this.data})};d.prototype.on_change=d.prototype.listen=d.listen;d.prototype.change=
function(){this._broadcast({})};d.prototype._broadcast=d._broadcast;d.prototype.set=function(a,b,d){function f(a,b){var c={},d;for(d in b)if(b.hasOwnProperty(d))if(typeof b[d]==="object"&&b[d]!==null)c[d]=a?f(a[d],b[d]):b[d];else if(!a||a[d]!==b[d])c[d]=b[d];return c}function g(a,b){var c={},d=a.shift();c[d]=a.length?g(a,b):b;return c}typeof a==="object"?d=b:a=typeof a==="string"?g(a.split("."),b):{};d||(d={});b=f(this.data,a);this.data=_.extend(this.data,a);this._broadcast(b,void 0,d);return this};
d.prototype.get=function(a){if(typeof a==="string"){if(typeof this.constructor.get_computed_values()[a]==="function")return this.constructor.get_computed_values()[a].call(this.data);a=a.split(".");var b=this.data;_.each(a,function(a){b=b[a]});return _.clone(b)}else return jQuery.extend(!0,{},this.data,this.compute_values())};d.prototype.compute_values=function(){var a=this.data,b={};_.each(this.constructor.get_computed_values(),function(d,f){b[f]=d.call(a)});return b}})()})(this);
instrument_function(function(a){ApplicationModel=Model.extend(function(){return{records:{},find:function(a){var c=this;return _.isArray(a)?_.compact(_.map(a,function(a){return c.records[a]})):this.records[a]},every:function(a){_.each(this.records,a);this.listen("new",function(c){a.call(this,c["new"])})},has:function(d,c){function b(a){typeof a!=="object"?a=[a]:a.get&&(a=[a.get("id")]);return a}if(typeof this.prototype["has_"+d]==="undefined"){var e=c.through;this.prototype[d]=[];this.on_initialize(function(){this.on_change(d+
"_fetched",function(b){var c=this[d];b=_.compact(_.map(b[d+"_fetched"]||[],function(b){if(b&&b.id&&!_.include(c,b.id))return(new a[e](b)).get("id")}));this["set_"+d](_.union(c,b))})});this.prototype["get_"+d]=function(){return a[e].find(this[d])};this.prototype["has_"+d]=function(a){a=b(a);return a.length&&_(this[d]).difference(a).length===0};this.prototype["add_"+d]=function(a){a=b(a);a=_(a).difference(this[d]);if(a.length)this["set_"+d](_.union(this[d],a))};this.prototype["remove_"+d]=function(a){a=
b(a);a=_(a).intersection(this[d]);if(a.length)this["set_"+d](_(this[d]).difference(a))};this.prototype["set_"+d]=function(a){a=b(a);if(!_.isEqual(_.clone(a).sort(),_.clone(this[d]).sort())){this[d]=a;var c={};c[d]=a;this._broadcast(c)}}}}}});ApplicationModel.on_initialize(function(){this.data.id&&(this.constructor.records[this.data.id]=this)});_.each(["Backing","Checkout","Comment","Post","Project","User","ZendeskUser"],function(d){a[d]=ApplicationModel.extend()});Project.on_initialize(function(){if(typeof update_record===
"function")this.on_change(function(){update_record("Project",this.get())})});Project.has("creator",{through:"User"});Project.has("backers",{through:"User"});User.has("created_projects",{through:"Project"});User.has("backed_projects",{through:"Project"});User.has("backings",{through:"Backing"});User.prototype.api_url=function(a,c){var b=this.get("urls").api.user;if(b){typeof a==="string"&&(b=b.replace(/([^\?]*)(.*)/,function(b,c,g){return c+"/"+a+g}));if((c||typeof c==="undefined"&&a===!0)&&api_oauth_token)b=
oauth_url(b).replace(/http:/,"https:");return b}};Comment.on_initialize(function(){if(typeof update_record==="function")this.on_change(function(){update_record("Comment",this.get())})});Post.set_computed_value("post_likes",function(){if(this.likes_count<=0)return"";return this.likes_count+" "+formatters.pluralize("like",this.likes_count)},{changes_on:["likes_count","has_liked"]});Post.set_computed_value("post_likes_namepile",function(){var a,c;if(this.likes_count<=0)return"";a=[];a=_.map(this.likers,
function(a){return'<a href="'+a.urls.web.user+'" title="'+a.name+'">'+a.name+"</a>"});this.has_liked&&(typeof current_user==="undefined"?a.unshift("You"):a.unshift('<a href="'+current_user.data.urls.web.user+'" title="You">You</a>'));c=parseInt(this.likes_count,10)-a.length;c>0&&(this.urls&&this.urls.web&&this.urls.web.likes?a.push('<a href="'+this.urls.web.likes+'" title="see names" id="full_namepile">'+c+(a.length>0?" more ":" ")+formatters.pluralize("person",c)+"</a>"):a.push(c+" "+(a.length>0?
"more ":"")+formatters.pluralize("person",c)));return formatters.to_sentence(a)+" like"+(this.likes_count===1&&!this.has_liked?"s":"")+" this update."},{changes_on:["likes_count","likers","has_liked"]});Post.on_initialize(function(){if(typeof update_record==="function")this.on_change(function(){update_record("Post",this.get())})})})(this);
instrument_function(function(a){(function(){function d(){return URI(History.getState().url)}var c=Model.extend();c.uri=c.prototype.uri=function(){return d()};c.on_initialize(function(a,c,f,g){this.$view=c;this.template=f;this.original_uri=g.url?URI(g.url).equals(d().clone().query(""))?d():URI(g.url):d();this.current_params="";this.param_change_listeners=[];this.options=g;d().equals()?a&&this.change_params(d().query()):this.set_params(d().query(),!0);this.bind_events()});c.prototype.on_change_params=
function(a){this.param_change_listeners.push(a)};c.prototype.change_params=function(a){this.$view.html(render(this.template,this.get()));if(this.options.mobius_on&&!this.mobius)this.mobius=this.init_mobius(this.options.mobius_on);this.current_params=a;a!==d().query()?History.pushState({params:a},null,this.original_uri.query(a).hash("").toString()):History.replaceState({params:a},null,d().query(a).hash("").toString());this.mobius&&function(){var c=this.$mobius_context();this.mobius.current_page=1;
this.mobius.set_extra_params(a);this.mobius.$elem=this.$mobius_on();if(c.get(0)!==this.mobius.options.$context.get(0))this.mobius.options.$context=c,this.mobius.bind_events();this.get("total_pages")>1?(this.mobius.play(),this.mobius.check_for_more(),$(".mobius_load_more").show()):(this.mobius.pause(),$(".mobius_load_more").hide())}.apply(this);_.each(this.param_change_listeners,function(c){typeof c==="function"&&c(a)});this.change()};c.prototype.set_params=function(a,c){var d=this.original_uri.clone().query(a||
!1),g=this;if(!c&&a===this.current_params)return!1;$.ajax({url:d.suffix("json").toString(),dataType:"json",success:function(c){g.set(c);g.change_params(a)},error:function(a){growl({error:a.responseText})}});return!0};c.prototype.bind_events=function(){var a=this;$(window).on("statechange",function(){var c=History.getState().data;c&&typeof c.params==="string"&&a.set_params(c.params)})};c.prototype.$mobius_on=function(){var a=this.$view.find(".mobius_on");if(!a.length)a=this.$view;return a};c.prototype.$mobius_context=
function(){var a=this.$view.find(".mobius_context");a.length||(a=$(window));return a};c.prototype.init_mobius=function(a){var c=this,d=this.$mobius_on(),g=this.$mobius_context();this.$view.on("mobius:loaded_page",function(d,f,g){g[a]=c.get(a).concat(g[a]);f>=g.total_pages?(c.mobius.pause(),$(".mobius_load_more").hide()):(c.mobius.play(),$(".mobius_load_more").show());delete g.params.page;c.set(g)});return d.mobius({dataType:"json",url:this.original_uri.clone().query("").toString(),$context:g,paused:!0}).data("mobius")};
a.Location=c})()})(this);instrument_function(function(a){if(typeof current_project==="string")a.current_project=new Project($.parseEscapedJSON(current_project))})(this);instrument_function(function(a){$(function(){if(typeof current_user==="string")a.current_user=new User($.parseEscapedJSON(current_user))})})(this);
instrument_function(function(a){(function(){if(typeof current_checkout==="string")a.current_checkout=new Checkout($.parseEscapedJSON(current_checkout)),current_checkout.on_change(function(a){a.reward?track("Checkout Reward Changed"):typeof a.domestic!=="undefined"?track("Checkout Domestic Changed"):a.amount&&track("Checkout Amount Changed")})})()})(this);instrument_function(function(a){if(typeof current_location==="string")a.current_location=new Project($.parseEscapedJSON(current_location))})(this);
instrument_function(function(a){(function(){var d=[];a.track=function(){d.push(arguments)};$(function(){function c(a,b){_.each(_.keys(b),function(c){b[a+"_"+c]=b[c];delete b[c]});return b}function b(a){a=typeof a.get==="function"?a.get():a;var b=_.pick(a,["backers_count","country","currency","deadline","goal","last_update_published_at","launched_at","name","pledged","state","updates_count"]),d=moment.unix(a.deadline);b.pid=a.id;if(a.category)b.category_name=a.category.name,b.parent_category=a.category.parent?
a.category.parent.name:a.category.name;if(a.location)b.location=a.location.name;b.ref_tag=URI().query(!0).ref;b.hours_remaining=_.max([d.diff(moment(),"hours",!0),0]);b.duration=d.diff(moment.unix(a.launched_at),"days",!0);b.percent_raised=a.pledged/a.goal;if(a.rewards)b.rewards_count=a.rewards.count;b.has_video=a.video!==null;c("project",b);b.user_is_backer=a.is_backing;b.user_has_starred=a.is_starred;b.user_is_project_creator=typeof current_user!=="undefined"&&current_user.get("id")===a.creator.id;
return b}function e(a){var b=typeof a.get==="function"?a.get():a;a=_.pick(b,["amount","domestic"]);b=b.reward?_.pick(b.reward,["estimated_delivery_on","id","minimum","reward","shipping","shipping_amount","shipping_applicable"]):{};c("reward",b);_.extend(a,b);c("checkout",a);return a}function f(a,c){mixpanel.track(a,_.extend({page_id:$("body").attr("id")},!_.contains(["undefined","string"],typeof current_project)?b(current_project):{},!_.contains(["undefined","string"],typeof current_checkout)&&current_checkout.get("amount")&&
current_checkout.get("reward")?e(current_checkout):{},!_.contains(["undefined","string"],typeof current_experiments)?{current_experiments:current_experiments}:{},g,c))}var g,h;if(typeof mixpanel_id!=="undefined"){if($.support.localStorage&&$.support.localStorage()&&localStorage.mixpanel_debug==="true")a.mixpanel_debug=!0;mixpanel.init(mixpanel_id,{debug:mixpanel_debug});(h=read_cookie("ios_mp_distinct_id"))&&mixpanel.identify(h);a.visitor_id=function(){var a=read_cookie("mp_"+mixpanel_id+"_mixpanel");
return a!==null?$.parseJSON(a).distinct_id:null}();if(/^[0-9]+$/.test(a.visitor_id))mixpanel.unregister("distinct_id"),a.visitor_id=null;mixpanel.track_pageview();g={client_type:$("body.app_request").length?"native":"web",device_format:$("body.phone").length?"phone":$("body.tablet").length?"tablet":"desktop",ip_address:current_ip,ip_datacenter:current_ip_datacenter,window_inner_width:window.innerWidth,window_inner_height:window.innerHeight,screen_width:screen.width,screen_height:screen.height,screen_avail_width:screen.availWidth,
screen_avail_height:screen.availHeight,user_logged_in:typeof current_user!=="undefined",iphone_uuid:typeof ios_app_uuid!=="undefined"?ios_app_uuid:void 0,enabled_features:_.keys(enabled_features)};h=read_cookie("user_analytics_properties");h!==null&&(_.extend(g,$.parseJSON(h)),mixpanel.name_tag(g.user_uid));_.each(d,function(a){f.apply(this,a)});a.track=f;a.track_links=function(a,c,d){window.setTimeout(function(){mixpanel.track_links(a,c,function(a){a=$(a);return _.extend({selected_link:a.attr("data-original_text")?
a.data("original_text"):$.trim(a.text()),page_id:$("body").attr("id")},!_.contains(["undefined","string"],typeof current_project)?b(current_project):{},d)})},1)};a.mixpanel_project=b;a.mixpanel_checkout=e;a.namespace_keys=c}})})()})(this);
instrument_function(function(){(function(){var a={"+02:00T":"CEST","+01:00F":"CET","+01:00T":"BST","-00:00F":"GMT","-03:00T":"ADT","-04:00F":"AST","-04:00T":"EDT","-05:00F":"EST","-05:00T":"CDT","-06:00F":"CST","-06:00T":"MDT","-07:00F":"MST","-07:00T":"PDT","-08:00F":"PST","-08:00T":"AKDT","-09:00F":"AKST","-09:00T":"HADT","-10:00F":"HAST","+11:00T":"AEDT","+10:00F":"AEST","+10:30T":"ACDT","+09:30F":"ACST","+09:00T":"AWDT","+08:00F":"AWST"};moment.fn.zoneAbbr=function(){var d;var c=(new Date).toString().match(/\(([a-z]{3,4})\)/i);
c&&(d=c[1].toUpperCase());d||(c=moment(),d=c.format("Z"),c=c.isDST()?"T":"F",d=a[d+c]||this.format("Z"));return d}})();moment.lang("en",{_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",ll:"MMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"}});$("time.js-adjust").livequery(function(){var a=$(this),d=moment(a.attr("datetime"));a.text(d.format(a.data("format")))})})(this);
instrument_function(function(){$(function(){$(document).on("mouseover","li.menu-dropdown",function(){$(this).find(".menu-submenu").show()});$(document).on("mouseout","li.menu-dropdown",function(){$(this).find(".menu-submenu").hide()});$(document).on("click",".hit-list li",function(){var a=$(this).find("a.target");if(a.length)window.location=a.attr("href")})})})(this);
instrument_function(function(){(function(){var a=History.isTraditionalAnchor;if(typeof History!=="undefined")History.isTraditionalAnchor=function(d){return d.indexOf("remote_modal_dialog")===0?!0:a.apply(this,arguments)}})();$(function(){$(".modal_dialog").livequery(function(){var a=$(this),b=a.attr("id");$(document).on("click","a.link_to_"+b,function(b){a.modal_dialog({event:b});b.preventDefault()});a.closest(".pop_modal_on_load").length&&a.modal_dialog()});$(document).on("click","a.remote_modal_dialog",
function(a){a.preventDefault();$(this).is(".disabled")||(a=$.open_remote_modal_dialog(URI($(this).attr("href")).suffix("js").toString(),{title:$(this).attr("data-modal-title"),id:$(this).attr("data-modal-id"),event:a,do_not_cache:$(this).attr("data-do_not_cache")?!0:!1,class_name:$(this).attr("data-modal-class"),theme:$(this).attr("data-modal-theme"),ignore_parent:$(this).attr("data-ignore_parent")?!0:!1,remote_modal_dialog_contents_loaded:function(a){a=a.find(".move_to_head");$("#global-zeroclipboard-html-bridge").css("position",
"fixed");a.length&&($("head").append(a.children()),a.remove())},dataType:"html"}),$(this).data("modal_dialog",a),a.$elem.on("modal_dialog:remote_dialog_loaded",function(){try{typeof FB!=="undefined"&&FB.XFBML&&FB.XFBML.parse()}catch(a){$.console.log(a)}}))}).each(function(){var a=$(this);a.is(".pop_modal_on_load")&&a.click()});$(document).on("click","a.modal_dialog_close",function(a){a.preventDefault();$("#global-zeroclipboard-html-bridge").css("position","absolute");$(this).trigger("close.modal_dialog")});
$(document).on("closed.modal_dialog",function(a){$(a.target).find(".video-player").trigger("ksr_video:pause")});$(document).on("click",".modal_dialog .pagination a",function(a){var b=$(this).closest(".modal_dialog_body"),d=$(this);b.height(b.height());a.preventDefault();$.ajax({url:d.attr("href"),type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){b.html(a);$.scrollTo(b);b.css("height","auto")}})});var a=/^#modal_dialog:([\-_a-zA-Z0-9]+)$/.exec(window.location.hash),
d=/^#remote_modal_dialog:(.*)$/.exec(window.location.hash);a&&(a=a[1],$("#"+a).modal_dialog(),window.location.replace("#"));d&&($("a.remote_modal_dialog").each(function(){url_equals(decodeURIComponent(d[1]),decodeURIComponent($(this).attr("href")))&&$(this).click()}),window.location.replace("#"));$("a.generate_modal_dialog").livequery(function(){var a=$(this),b=_.pick(a.data(),"id");$.create_modal_dialog(a.data("title"),a.data("content"),b)});$(document).on("modal_dialog:opened",function(a,b){var d=
{};b&&(d=$(b.target).closest("a"),d={modal_class:d.attr("data-modal-class"),modal_title:d.attr("data-modal-title"),modal_id:d.attr("id")});track("Modal Dialog View",d)})})})(this);instrument_function(function(){})(this);instrument_function(function(){$.videos_changed=function(){$(".video-player:visible").each(function(){$(this).ksr_video()})};$(document).on("ksr_video:pause_all_videos",function(){$(".video-player").trigger("ksr_video:pause")});$(".video-player:visible").livequery(function(){$(this).ksr_video()})})(this);
instrument_function(function(){$(document).on("timer_added",".ksr_page_timer",function(){new ProjectTimer(this,window.ksr_page_clock)});$(".ksr_page_timer").livequery(function(){this.ksr_page_timer||$(this).trigger("timer_added")})})(this);
instrument_function(function(a){$("#growl_section").on("click",function(a){$(a.target).is($(this))&&(a=$(this),a.fadeOut("fast"),a.removeClass("sticky"),a.find("div.jGrowl-notification:parent").each(function(){$(this).data("jGrowl").sticky=!1}))});a.growl=function(a,c){$.each(a,function(a,d){typeof c==="undefined"&&(c={});if(a==="error")c.sticky=!0,$("#growl_section").addClass("sticky");$("#growl_section").jGrowl(d,$.extend(c,{theme:a,closeTemplate:'<div class="circle_x"><span class="ss-icon ss-delete"></span></div>',
beforeOpen:function(){$("#growl_section").fadeIn("fast")},close:function(){$("#growl_section").fadeOut("fast")}}))})}})(this);instrument_function(function(){$("span.character_counter").livequery(function(){var a=$(this);$(document).on("keyup",a.attr("rel"),function(){a.html(parseInt($(this).attr("maxlength"),10)-$(this).val().length)})})})(this);
instrument_function(function(){$("form:not([data-ksrjson])").livequery("submit",function(a){var d=$(this);d.is(".submitting-non-ajax")?a.preventDefault():d.attr("target")||($(window).unload(function(){d.removeClass("submitting-non-ajax")}),d.addClass("submitting-non-ajax"))})})(this);
instrument_function(function(){$(function(){$(document).tipsy({gravity:"s",html:!0,live:"a.tip",fade:!0});$(document).tipsy({gravity:"n",html:!0,live:".tipsy_n",fade:!0});$(document).tipsy({gravity:"s",html:!0,live:".tipsy_s",fade:!0});$(document).tipsy({gravity:"se",html:!0,live:".tipsy_se",fade:!0})})})(this);instrument_function(function(){$(document).on("click","input#share_a_link",function(){$("#share_a_link").focus().select()})})(this);
instrument_function(function(){$(".keep-or-delete").livequery(function(){var a=$(this).closest("li"),d=$(this).find("a").show(),c=$(this).find(".checkbox").hide();d.on("click",function(){d.attr("disabled")||(c.prop("checked",!1),a.hide(),a.trigger("nested_attributes_list:removed"))})});$("a.add-another").livequery(function(){var a=$(this).show(),d=$(a.attr("rel")).hide();a.on("click",function(c){var b=d.clone_form_template();b.find(".checkbox").prop("checked",!0);a.attr("data-target-selector")?$(a.attr("data-target-selector")).append(b):
d.before(b);b.trigger("nested_attributes_list:added");c.preventDefault()})})})(this);instrument_function(function(){$("form.requires-confirmation").livequery("submit",function(a){var d=$(this);$(this).find("input.confirmation").is(":checked")||(setTimeout(function(){d.removeClass("submitting-non-ajax")},100),growl({error:"Please accept the Guidelines."}),a.preventDefault())})})(this);
instrument_function(function(){$(document).on("click",".removeable .remove",function(){var a=$(this);(!a.data("confirm")||confirm(a.data("confirm")))&&$.post(a.attr("href"),{_method:"delete"},function(){a.parents(".removeable").fadeOut(400,function(){$(this).remove()})});return!1})})(this);
instrument_function(function(a){$(function(){function d(a){$[a.name]=function(b){if(b.url&&(!b.dataType||b.dataType!=="jsonp"))b.url=match_protocol(b.url);return a.callback.call(this,b)}}a.match_protocol=function(a){var b=/^\w+:\/\//,d;if(b.test(a))d=window.location.protocol,a=a.replace(b,d+"//");return a};a.monkey_patch_ajax_protocol_matching=d;_.each([{name:"ajax",callback:$.ajax},{name:"api_ajax",callback:$.api_ajax}],function(a){a.callback&&d(a)});$(document).ajaxSend(function(a,b,d){d.type!==
"GET"&&b.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))});$("form[data-ksrjson]").livequery(function(){var a=$([]);$(this).attr("data-target")?a=$($(this).attr("data-target")):$(this).closest(".ajax-container").length?a=$(this).closest(".ajax-container"):$(this).closest(".modal_dialog").length>0&&(a=$(this));a.length>0&&KsrJSON.enable_form($(this),a)});$(document).on("click","a[data-ksrjson]",function(a){var b=$(this),d=$(b.attr("data-target"));a.preventDefault();d.length===
0&&(d=b.closest(".ajax-container"));if(d.length===0)return!0;return KsrJSON.get(b.attr("href"),b.attr("data-ksrmethod"),d,this)})})})(this);instrument_function(function(){$(function(){$(document).on("click",".location_list .big_locations li",function(){window.location=$(this).find(".name a").attr("href")})})})(this);
instrument_function(function(){$(".field.search.location-search").livequery(function(){var a=$(this);a.on("livesearch_selector:select",function(){$(this).siblings("span.input-tip").hide();$(this).parent().siblings("span.input-tip").hide();$(this).trigger("shifted")});a.on("livesearch_selector:unselect",function(){$(this).siblings("span.input-tip").show();$(this).parent().siblings("span.input-tip").show();$(this).trigger("shifted")});a.livesearch_selector({url:a.data("searchUrl"),cancel_copy:"",process_data:function(){return{term:this.$elem.val()}},
process_results:function(a){return _.map(a.locations,function(a){return[a.short_name,a.id]})}})});$("input.date").livequery(function(){$(this).datetime_picker_field({calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">"},class_name:"absolute z_top",parse_callback:function(a){if(a!=="")return a?moment(a,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(a){return a?moment(a).format("MM/D/YYYY hh:mm a"):""}})});$("input.datetime").livequery(function(){var a=$(this),d=
a.data("options")||{};a.datetime_picker_field($.extend(!0,{calendar:{allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:"},class_name:"absolute z_top",position:a.is(".position_calendar_below")?"bottom":"right",parse_callback:function(a){if(a!=="")return a?moment(a,"MM/D/YYYY hh:mm a").toDate():new Date},format_callback:function(a){return a?moment(a).format("MM/D/YYYY hh:mm a"):""}},d))});(function(){var a=$("form ul.sortable, form ol.sortable, form tbody.sortable"),d=!1;
a.find(".move").length&&(d=".move");a.find(".move").click(function(a){a.preventDefault()});a.sortable({containment:"document",axis:"y",handle:d,update:function(){a.find("input.position").each(function(a){$(this).val(a)})}});a.each(function(){var a=$(this);a.closest("form").submit(function(){a.find("input.position").each(function(a){$(this).val(a)})})})})()})(this);
instrument_function(function(){$(function(){function a(a){a.each(function(){var a=$(this),b=a.find("option:selected");a.siblings(".title").text(b.data("altLabel")||b.text())})}$(".ksr-select").each(function(){a($(this).find("select"))});$(document).on("change",".ksr-select select",function(){a($(this))});$.fn.ksr_val=function(d){var c=$(this);if(d!==void 0)return d=c.val(d),a(c),d;return c.val()}})})(this);
instrument_function(function(){$(function(){$(document).on("click",".ksr-dropdown .title",function(){var a=$(this).parents(".ksr-dropdown");a.is(".open")?a.removeClass("open"):(a.addClass("open"),setTimeout(function(){$(window).one("click",function(d){$(d.target).closest(a).length||a.removeClass("open")})},0))})})})(this);
instrument_function(function(){$(function(){function a(){b&&($(b.data("targetId")).removeClass("ksr-popover-active"),b.removeClass("visible"),$("body").removeClass("ksr-popover-visible"),$("body, html").removeClass("ksr-mobile-popover-visible"),$(document).trigger("ksr_popover:closed",{$popover:b}),b.trigger("ksr_popover:closed"),b=!1)}function d(a){if(!device_idioms.mobile){var b=a.data("targetId");b=$(b);var c=b.offset().left-32;c-=Math.max(0,c+a.outerWidth()-($(window).width()-32));c=Math.max(4,
c);a.css({left:c,top:b.offset().top+b.outerHeight()+20});a.find(".arrow").css({left:b.offset().left-a.offset().left+b.outerWidth()/2})}}var c=$(".ksr-popover"),b,e=[];c.length&&(c.each(function(){var c=$(this),g=c.data("targetId");e.push(g);$(document).on("click",g,function(e){if(!$(e.target).hasClass("ksr-popover-excluded"))if(c.is(".visible"))a();else return $(c.data("targetId")).addClass("ksr-popover-active"),b&&a(),b=c,c.addClass("visible"),$("body").addClass("ksr-popover-visible"),device_idioms.mobile&&
$("body, html").addClass("ksr-mobile-popover-visible"),d(c),$(document).trigger("ksr_popover:opened",{$popover:c}),c.trigger("ksr_popover:opened"),!1})}),c.find(".close").on("click",function(b){a();b.preventDefault()}),$(document).on("click",function(c){$(c.target).closest(b).length||a()}),$(e.join(",")),c.on("ksr_popover:reposition",function(){var a=$(this);d(a)}),c.on("ksr_popover:close",function(){a($(this))}),$(document).on("keydown",function(b){b.keyCode===KEY.ESC&&a()}))})})(this);
instrument_function(function(){$(function(){$(".mobius.click").livequery(function(){function a(){b=d.find("*[data-cursor]:last")}var d=$(this),c=d.parent().find("a.load_more"),b,e;a();e=b.length;d.mobius({trigger_next:c,prepend_next:d.data("mobius_append")?!1:!0,url:d.data("mobius_url")||!1,page_param:e?"cursor":"page",extra_params:d.data("mobius_extra_params"),page_by:function(c){return e?(a(),b.data("cursor")):c?c+1:1}});d.data("mobius");d.on("mobius:loaded_page",function(a,b,e){d.parent().find(".count .current").text(d.find("li.item").length);
e.data("last_page")?c.parent().hide():c.parent().show()})});$(".mobius:not(.click)").livequery(function(){function a(){g=d.find("*[data-cursor]:last")}var d=$(this),c,b,e,f,g,h;if(!d.find(".page").data("last_page"))a(),h=g.length,c=d.mobius({url:d.data("url"),paused:d.is(".paused"),page_param:h?"cursor":"page",extra_params:d.data("extra_params")||"",page_by:function(b){return h?(a(),g.data("cursor")):b?b+1:1}}).data("mobius"),d.length&&(b=$(".mini_footer"),f=$("#etc"),f.mouseenter(function(){b.css({opacity:1})}),
b.mouseleave(function(){b.css({opacity:0})}),d.on("mobius:loaded_page",function(a,f,g){g.data("last_page")?(c.pause(),d.siblings(".load_more").hide(),e=b.clone(),b.remove()):(c.play(),d.siblings(".load_more").show(),$("body").append(e))}))})})})(this);
instrument_function(function(){$(function(){var a,d=!1;$(document).on("zeroclipboard:initialize",".zeroclipboard",function(){d?a.glue($(".zeroclipboard")):ZeroClipboard.detectFlashSupport()&&(ZeroClipboard.setDefaults({moviePath:"/assets/bower_components/zeroclipboard/ZeroClipboard.swf"}),a=new ZeroClipboard,a.setHandCursor(!0),a.addEventListener("onComplete",function(a,b){$(document).trigger("zeroclipboard:click");var d=$(this),f;d.is(".clippy")&&d.data("text")+""===b.text&&(f=d.text(),d.text("Copied!"),
setTimeout(function(){d.text(f)},1E3))}),a.glue($(".zeroclipboard")),d=!0)}).on("mouseenter",".zeroclipboard",function(){ZeroClipboard.detectFlashSupport()&&a.setText($(this).data("text"))});$(".zeroclipboard").livequery(function(){$(this).trigger("zeroclipboard:initialize")});$(document).on("send_clippy_away",".zero_clipboard_wrapper",function(){$(this).css({top:"0",left:"-100000px"})});$(document).on("tab",function(){$(".zero_clipboard_wrapper").trigger("send_clippy_away")})})})(this);
instrument_function(function(){$(function(){$(".overlabels .field label.overlabel").livequery(function(){var a=$(this),d=a.siblings("input:not([type=hidden]), textarea, .wym_box");d.length||(d=a.parent(".field_with_errors").siblings(".field_with_errors").find("input, textarea"));d.length?(a.addClass("overlabel-apply"),d.val()&&a.hide(),d.focus(function(){$(this).val()&&a.hide();a.addClass("field_focused")}).blur(function(){$(this).val()||a.show();a.removeClass("field_focused")}).on("keydown input change paste cut",
function(){var c=$(this);setTimeout(function(){c.val()?a.hide():a.show()},1)}),a.click(function(){d.attr("disabled")||d.focus()})):a.hide()})})})(this);instrument_function(function(){$(function(){if($.support.localStorage())try{localStorage.removeItem("history"),localStorage.removeItem("banner_canada_projects_animated")}catch(a){}})})(this);
instrument_function(function(a){$(document).ready(function(){if(typeof _gat!=="undefined"){var d="NA",c="NA";$("#projects_show").length&&(d=$("#about").attr("data-project-state"));$("#project_category").length&&(c=$("#project_category").attr("data-project-category"));try{a.pageTracker=_gat._createTracker(analytics_vars.google_analytics_id),pageTracker._setCustomVar(1,"project-category",c,3),pageTracker._setCustomVar(2,"logged-in-user-pageviews",analytics_vars.logged_in,3),pageTracker._setCustomVar(3,
"social-user",analytics_vars.social_user,3),pageTracker._setCustomVar(5,"project-state",d,3)}catch(b){}try{pageTracker._trackPageview()}catch(e){}}})})(this);
instrument_function(function(){var a;jQuery(document).on("livesearch:results",function(c,b){var d,f=$(c.target).val();d=b.projects?b.projects.length:b.length;a=$(c.target).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent(a,"Term",f,parseInt(d,10))});var d;jQuery(document).on("livesearch:searching",function(){d=!0});jQuery(document).on("livesearch:cancel",function(){d&&(typeof pageTracker!=="undefined"&&pageTracker._trackEvent(a,"Cancels"),d=!1)});jQuery(document).ready(function(){var a;
try{a=JSON.parse(localStorage.history)}catch(b){return}$("#project_bar").length>0&&typeof pageTracker!=="undefined"&&a&&a.projects.length>1&&($("#project_bar").livequery(function(){pageTracker._trackEvent("Project Bar","Show")}),$("#project_bar .next").on("click",function(){pageTracker._trackEvent("Project Bar","Next")}),$("#project_bar .prev").on("click",function(){pageTracker._trackEvent("Project Bar","Previous")}),$("#project_bar .minimize").on("click",function(){pageTracker._trackEvent("Project Bar",
"Minimized")}),$("#project_bar .maximize").on("click",function(){pageTracker._trackEvent("Project Bar","Maximized")}))});jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",a)})});jQuery(document).ready(function(){$(".home-editorial-title").on("click",function(){var a=$(this).html();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Faux-Category on Homepage Clicks",
a)})});jQuery(document).ready(function(){$(".export").find("a").on("click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Export Reward Report","Download Click")})});jQuery(document).ready(function(){$("#results_properties").livequery(function(){var a=$(this).children("#number_of_results").text(),b=$(this).children("#term").text();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Search Results","Term",b,parseInt(a,10))})});jQuery(document).ready(function(){$("#pledges_login_or_signup #growl_section .error").livequery(function(){var a=
$(this).children(".message").html(),b=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Login Errors",a,b)});$("#checkout-signup .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),b=$(document).attr("URL");$.each(a,function(a,c){c=c.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Checkout Signup Errors",c,b)})});$("#sessions_new #growl_section .error").livequery(function(){var a=$(this).children(".message").html(),
b=$(document).attr("URL");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Login Errors",a,b)});$("#new_user .fieldset-errors").livequery(function(){var a=$(this).children("ul").children(),b=$(document).attr("URL");$.each(a,function(a,c){c=c.innerHTML;typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors",c,b)})})});jQuery(document).ready(function(){$(".share-box").on("click","a",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&
pageTracker._trackEvent("Sharing",a)});$("#checkout-project-share").on("click","a",function(){var a=$(this).attr("data-tracker-name");typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing",a)});$(document).on("zeroclipboard:click",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Copied Link")});$(document).on("fb:loaded",function(){FB.Event.subscribe("edge.create",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Sharing","Facebook Like")})})});
$(function(){var a;$("#video-section object").livequery(function(){a=$(this)[0];$("#projects_show").size>0&&$("#button-back-this-proj").attr("href");$(document).attr("URL")});$(document).on("click","#video-section",function(){$("#button-back-this-proj").attr("href");$(document).attr("URL");if(a){var b=a;b.addModelListener("TIME","timeStats");b.addModelListener("STATE","getState")}});$(window).on("beforeunload",function(){})});jQuery(document).on("modal_dialog:opened",function(a){a=$(a.target).find(".modal_dialog_head h4").text();
typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Modal Dialog","Opened",a)});jQuery(document).ready(function(){$(".faq-question a").click(function(){var a=$("body[id]").length?$("body").attr("id"):"No ID",b=$(this).closest(".faq"),d=$(this).find(".question").text();typeof pageTracker!=="undefined"&&!b.hasClass("expanded")&&pageTracker._trackEvent("FAQ","Expanded - "+a,d)})});jQuery(document).ready(function(){$(document).on("click","a#edit_survey_response",function(){typeof pageTracker!==
"undefined"&&pageTracker._trackEvent("Surveys","Click","Edit Survey Response")})});jQuery(document).ready(function(){$(document).on("click","ul#admin-menu > li > a",function(){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Admin","Nav Click",$(this).text())})});jQuery(document).ready(function(){var a=0;$(".scissors").on("click",function(){a<2?(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors","Clicks"),a+=1):typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Scissors",
"Chops")})});jQuery(document).ready(function(){var a=1;$(document).on("infinite_scroll:scrolled_to",function(b,d){if(d>a){var f=window.location.pathname+window.location.search+window.location.hash;typeof pageTracker!=="undefined"&&pageTracker._trackPageview(f);a=d}})})})(this);instrument_function(function(){$(function(){var a=$(document).children();$.support.fontFace()||a.removeClass("fontface")})})(this);
instrument_function(function(){$(document).ready(function(){$(".sortable_table").tablesorter({sortInitialOrder:"desc",textExtraction:function(a){var d;d=$(a).closest("td").data("table-value");return typeof d!=="undefined"?d:a.innerHTML.replace(/[,?!\s,%$]/g,"")}})})})(this);
instrument_function(function(){(function(){$(document).on("click","a.facebook_login",function(a){var d=$(this);a.preventDefault();FB.login(function(a){if(a.authResponse){var b=window,e;e=d.attr("href");a=$.param({fbsr:a.authResponse.signedRequest});e=e.indexOf("?")===-1?e+"?"+a:e+"&"+a;b.location=e}},{scope:"email,user_location,user_hometown,user_likes"})})})()})(this);
instrument_function(function(){(function(){var a={$:"jquery",_:"../../../../../vendor/assets/javascripts/bower_components/underscore/underscore.js"},d={};if(typeof require==="function")for(var c in a)a.hasOwnProperty(c)&&(this[c]=require(a[c]));if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)exports=module.exports=d;exports.formatters=d}else this.formatters=this.formatters||d;d=_.extend(this.formatters||{},{currency_symbol:function(a){return this.currency_symbol_mappings[a]},
currency_trailing_code_class:function(a){if(this.currency_trailing_code_mappings[a])return a.toLowerCase()},money:function(a,c,d){isNaN(d)&&(d=0);return this.currency_symbol(a)+this.format_number(c,d)},format_number:function(a,c,d,g){c=isNaN(c)?2:Math.abs(c);d=d||".";g=typeof g==="undefined"?",":g;var h=a<0?"-":"",i=String(parseInt(a=Math.abs(a).toFixed(c),10)),k;k=(k=i.length)>3?k%3:0;return h+(k?i.substr(0,k)+g:"")+i.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+g)+(c?d+Math.abs(a-i).toFixed(c).slice(2):
"")},pluralize:function(a,c){function d(a,b){var f=i[p+(c===1?0:1)-p%2];typeof b!=="undefined"&&(f=f.replace(/\(.*\)/,b));return f}function g(a,b){return b.toUpperCase()}for(var h=a,i=["zombie","zombies","cow()","ki(i?)ne","move","moves","sex","sexes","child","children","man","men","person","people","database","databases","quiz","quizzes","matrix","matrices","(vert|ind)ex","(vert|ind)ices","(^ox)","(^ox)en","(alias|status)","(alias|status)es","(octop|vir)us","(octop|vir)i","(cris|ax|test)is","(cris|ax|test)es",
"shoe","shoes","o","oes","bus","buses","(m|l)ouse","(m|l)ice","(x|ch|ss|sh)","(x|ch|ss|sh)es","movie","movies","series","series","([^aeiouy]|qu)y","([^aeiouy]|qu)ies","([lr])f","([lr])ves","tive","tives","hive","hives","([^f])fe","([^f])ves","(analy|ba|diagno|parenthe|progno|synop|the)sis","(analy|ba|diagno|parenthe|progno|synop|the)ses","([ti])um","([ti])a","news","news","([^s])","()s"],k=_.map(i,function(a){return RegExp(a+"$","i")}),l=!1,p=0,j;!l&&p<i.length;)p+=1,j=k[p],a.match(j)&&(l=!0,h=a.replace(j,
d),a.match(/^[A-Z][^A-Z]+$/)?h=h.replace(/^([a-z])/,g):a.match(/^[A-Z]+$/)&&(h=h.toUpperCase()));return h},capitalize:function(a){if(typeof a!=="string")return"";return a.replace(/^(\w)|\s(\w)/g,function(a){return a.toUpperCase()})},to_sentence:function(a,c){c=$.extend({},{words_connector:", ",two_words_connector:" and ",last_word_connector:", and "},c);switch(a.length){case 0:return"";case 1:return String(a[0]);case 2:return a[0]+c.two_words_connector+a[1];default:return a.slice(0,-1).join(c.words_connector)+
c.last_word_connector+_.last(a)}}})})()})(this);instrument_function(function(a){a.Spinner=a.Spinner||{};Spinner.defaults={className:""}})(this);instrument_function(function(a){$(function(){a._qoptions={qacct:"p-34IbSpw2K94Sg"};$.getScript("//secure.quantserve.com/quant.js")})})(this);instrument_function(function(a){$(function(){if(!$("body").hasClass("admin"))a._sf_async_config={uid:5536,domain:window.location.hostname.replace("www.","")},a._sf_endpt=(new Date).getTime(),$.getScript("//a248.e.akamai.net/chartbeat.download.akamai.com/102508/js/chartbeat.js")})})(this);
instrument_function(function(){$(function(){$.getScript("//platform.twitter.com/widgets.js")})})(this);instrument_function(function(){$(".sound_player:visible").livequery(function(){$(this).sound_player()})})(this);instrument_function(function(){$(function(){$(".render_mustache").livequery(function(){var a=$(this),d=_.extend(a.data("data"),a.data("extend")),c=a.data("partials")?a.data("partials").split(","):void 0,b=a.data("template");a.append(render(b,d,c))})})})(this);
instrument_function(function(){$.fn.validate.defaults.on_valid.push(function(a){$(a).removeClass("errored")});$.fn.validate.defaults.on_invalid.push(function(a){$(a).addClass("errored")})})(this);instrument_function(function(a){a.Honeybadger&&a.honeybadger_configuration&&Honeybadger.configure(honeybadger_configuration)})(this);
instrument_function(function(a){(function(){function d(){var a=navigator.language,c=_.map(navigator.mimeTypes,function(a){return a.type}).join(","),d=_.map(navigator.plugins,function(a){return a.name+"|"+a.filename+"|"+a.description}).join("\n"),g;try{g=_.pluck(document.getElementById("font-detect-swf").fonts(),"fontName")}catch(h){g=[]}return{language:a,mime_types:c,plugins:d,fonts:g.join.call(g,","),screen_resolution:screen.availWidth+"x"+screen.availHeight+"x"+screen.colorDepth,time_zone:(new Date).getTimezoneOffset(),
user_agent:navigator.userAgent}}function c(){var a={onReady:String(function(a){$(document).trigger("fontsDetected",[a])}),swfObjectId:"font-detect-swf"},c=document.createElement("div");c.id="font-detect-swf";document.body.appendChild(c);swfobject.embedSWF("/assets/FontList.swf","font-detect-swf","1","1","9.0.0",!1,a,{allowScriptAccess:"always",menu:"false"},{id:"font-detect-swf",name:"font-detect-swf"})}a.log_device=function(){var a=function(){$.post("/devices",{device:d()})};swfobject.hasFlashPlayerVersion("9.0.0")?
($(document).on("fontsDetected",a),c()):a.call()};Math.random()<0.1&&a.log_device()})()})(this);
instrument_function(function(){$(function(){$(document).on("click",".js-read_more",function(a){var d=$(this).closest(".js-read_more_context"),c=d.data("mixpanel_context"),b=d.find(".js-less"),e=d.find(".js-more");b.addClass("hide");b.find(".video-player").trigger("ksr_video:pause");e.removeClass("hide");$.scrollTo(d);c&&track(c+" Read More");a.preventDefault()});$(document).on("click",".js-read_less",function(a){var d=$(this).closest(".js-read_more_context"),c=d.data("mixpanel_context"),b=d.find(".js-less"),
e=d.find(".js-more");b.removeClass("hide");e.addClass("hide");e.find(".video-player").trigger("ksr_video:pause");$.scrollTo(d);c&&track(c+" Read Less");a.preventDefault()})})})(this);
instrument_function(function(){(function(){presenters["backer_report/_index"]=function(a){_.each(_.keys(a.facets),function(d){_.each(_.keys(a.facets[d]),function(c){a.facets[d][c]={count:a.facets[d][c]}})});a.facets.must_have_creator_note={"true":{},"false":{}};a.currency_symbol=current_project.get("currency_symbol");a.not_filtered=!0;if(a.params){_.each(_.keys(a.params),function(d){_.has(a.facets,d)?(a.facets[d][a.params[d]]||(a.facets[d][a.params[d]]={}),a.facets[d][a.params[d]].selected=!0):(a.facets[d]=
{})[a.params[d]]={selected:!0}});a.params.sort_by&&(a.params["sort_by_"+a.params.sort_by]=" "+(a.params.asc_or_desc||"asc"));if(a.params.reward_id){a.selected_reward=_.findWhere(a.rewards,{id:parseInt(a.params.reward_id,10)});if(!a.selected_reward)a.selected_reward=_.findWhere(a.rewards,{id:"none"});a.selected_reward.selected=!0}_.each(["survey_answered","completed","must_have_creator_note","status"],function(d){if(a.params[d])a.not_filtered=!1})}if(a.project.state==="successful")a.project.is_successful=
!0;a.show_facets=a.total_entries>0||!(a.params&&a.params.term&&!a.params.creator_note&&!a.params.creator_note_not);a.formatted_total_entries=formatters.format_number(a.total_entries,0);_.each(a.rewards,function(a){a.formatted_minimum=formatters.format_number(a.minimum,0);a.truncated_description=a.reward.length>35?a.reward.substring(0,35)+"\u2026":a.reward});return a}})()})(this);
instrument_function(function(){(function(){presenters["backer_report/_row"]=function(a){a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.formatted_survey_answered_at=moment(a.survey_answered_at*1E3).format("MMM D, YYYY");a.formatted_amount=formatters.format_number(a.amount,2);a.currency_symbol=current_project.get("currency_symbol");a.is_domestic=a.domestic===!0;a.is_international=a.domestic===!1;return a}})()})(this);
instrument_function(function(){(function(){presenters["backings/_row"]=function(a){a.completed=!!a.completed_at;a.currency_trailing_code_class=formatters.currency_trailing_code_class(a.project.currency);a["is_"+a.status]=!0;a.formatted_deadline=moment(a.project.deadline*1E3).format("MMM D, YYYY");a.formatted_money=formatters.money(a.project.currency,a.amount);a.formatted_status=formatters.capitalize(a.status);if(a.reward){var d=a.reward.reward;a.formatted_reward=d.length>57?d.substring(0,57)+"\u2026":
d;if(a.reward.estimated_delivery_on)a.formatted_estimated_delivery_on=moment(a.reward.estimated_delivery_on*1E3).utc().format("MMM YYYY")}switch(a.project.state){case "canceled":a.project_state="Canceled";break;case "failed":a.project_state="Unsuccessful";break;case "live":a.project_state="In progress";break;case "successful":a.project_state="Funded";break;case "suspended":a.project_state="Suspended"}if(a.messages)a.formatted_messages_count=a.messages.count+" "+formatters.pluralize("messages",a.messages.count),
a.formatted_messages_last_activity_at=moment(a.messages.last_activity_at*1E3).format("MMM D, YYYY");return a}})()})(this);instrument_function(function(){(function(){presenters["backings/_table"]=function(a){a.show_more_backings=a.total>a.backings.length;a.formatted_total=a.total+" "+formatters.pluralize("projects",a.total);a.backings=_.map(a.backings,function(a){return presenters["backings/_row"]($.extend({},a.get()))});return a}})()})(this);
instrument_function(function(){(function(){presenters["discover/_location_li"]=function(a){a.json=JSON.stringify(a);return a}})()})(this);instrument_function(function(){(function(){presenters["discover/_location_options"]=function(a){a.ancestor_locations=a.ancestor_locations||[];a.ancestor_locations=a.ancestor_locations.reverse();a.nearby_locations=a.nearby_locations||[];return a}})()})(this);instrument_function(function(){(function(){presenters["discover/_project_baseball_card_li"]=function(a){return presenters["projects/_baseball_card_tall"](a)}})()})(this);
instrument_function(function(){(function(){presenters["discover/_search_location_li"]=function(a){a.json=JSON.stringify(a);return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_backing"]=function(a){a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_backing_details"]=function(a){a.formatted_created_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project.formatted_deadline=moment(a.project.deadline*1E3).format("MMM D, YYYY");if(a.reward&&a.reward.reward.match(/^no reward$/i))a.reward=void 0;if(a.reward)a.reward.formatted_estimated_delivery_on=moment(a.reward.estimated_delivery_on*1E3).utc().format("MMM YYYY");a.pledged_live=a.status==="pledged"&&a.project.state==="live";a.pledged_failed_or_canceled=
a.status==="pledged"&&(a.project.state==="failed"||a.project.state==="canceled");a.collected=a.status==="collected";a.errored=a.status==="errored";a.canceled_or_dropped=a.status==="canceled"||a.status==="dropped";a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";a.show_status_tooltip=a.status==="pledged"&&(a.project.state===
"failed"||a.project.state==="canceled"||a.project.state==="suspended");return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_project_details"]=function(a){a.formatted_money=formatters.money(a.currency,a.pledged);if(a.launched_at)a.formatted_launched_at=moment(a.launched_at*1E3).format("MMM D, YYYY");a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.formatted_deadline=moment(a.deadline*1E3).format("MMM D, YYYY");a.successful=a.state==="successful";a.live=a.state==="live";a.failed=a.state==="failed";a.started=a.state==="started";a.submitted=
a.state==="submitted";a.canceled=a.state==="canceled";a.suspended=a.state==="suspended";a.ended=a.state==="successful"||a.state==="failed"||a.state==="canceled";a.preview_link=(new URI(a.urls.web.edit)).fragment("preview").toString();return a}})()})(this);instrument_function(function(){(function(){window.presenters["funnels/_text"]=function(a){if(a.backing)a.backing.formatted_amount=formatters.format_number(a.backing.amount);a.rendered_body=render_raw(a.text.body,a);return a}})()})(this);
instrument_function(function(){(function(){presenters["funnels/_ticket_error"]=function(a){var d={"Ticket_requester ":"Email","Ticket_requester_email_param ":"Email","Ticket_requester_name ":"Name","Base Description: ":"Details"},c=RegExp(_.keys(d).join("|"),"g");a.errors=_.map(a.errors,function(a){return a.replace(c,function(a){return d[a]+" "})});return a}})()})(this);
instrument_function(function(a){(function(){presenters["funnels/contact"]=function(d){var c=d.user,b=a.funnel_user_backings?a.funnel_user_backings.length-_.compact(a.funnel_user_backings).length:0;d.projects=_.map(c.get_created_projects(),function(a){a=a.get();if(a.launched_at)a.formatted_launched_at=moment(a.launched_at*1E3).format("MMM D, YYYY");a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.formatted_deadline=moment(a.deadline*1E3).format("MMM D, YYYY");a.successful=a.state===
"successful";a.live=a.state==="live";a.failed=a.state==="failed";a.started=a.state==="started";a.submitted=a.state==="submitted";a.canceled=a.state==="canceled";a.suspended=a.state==="suspended";return a});d.project_groups=_.map(_.groupBy(d.projects,function(a){if(a.state==="live")return"Live projects";if(a.ended)return"Ended projects";return"Started projects"}),function(a,b){return{k:b,v:a}});d.backings=_.map(c.get_backings().slice(0,32),function(a){a=a.get();a.project.formatted_deadline=moment(a.project.deadline*
1E3).format("MMM D, YYYY");a.formatted_pledged_at=moment(a.pledged_at*1E3).format("MMM D, YYYY");a.project_successful=a.project.state==="successful";a.project_live=a.project.state==="live";a.project_failed=a.project.state==="failed";a.project_canceled=a.project.state==="canceled";a.project_suspended=a.project.state==="suspended";return a});d.any_subjects=d.projects.length+d.backings.length;d.repeat_creator=d.projects.length>1;d.repeat_backer=c.get("backings_count")>1;d.backings_count=c.get("backings_count")-
b;d.show_more_backings=c.get("backings_count")>32-b;if(d.projects.length&&!d.backings.length)d.select_phrase_one="Select your project.",d.select_phrase_two="your project?";else if(!d.projects.length&&d.backings.length)d.select_phrase_one="Select your pledge.",d.select_phrase_two="a pledge?";else if(d.projects.length&&d.backings.length)d.select_phrase_one="Select a pledge or project.",d.select_phrase_two="one of your projects or pledges?";if(c.data.avatar&&!c.data.avatar.thumb.match(/\/missing_thumb\.png/))c.show_avatar=
!0;d.o=JSON.stringify(d);return d}})()})(this);
instrument_function(function(){(function(){presenters["funnels/index"]=function(a){a.sections=[];a.funnels=_.map(a.funnels,function(a){a.breadcrumbs=_.compact([a.section_title,a.item_title]).join(" > ");if(a.section_title){if(!a.item_title)a.item_title=a.section_title}else a.section_title=a.item_title;return a});var d=_.groupBy(a.funnels,function(a){return a.section_title||a.item_title}),c=$("a[data-topic]").data("topic");a.sections=[];_.each({project:["Project idea & tips","Creator requirements",
"Tips","Starting a new project","Funds/payments","Identity verification","Editing my project","My submission","My backers","Project updates","Why would a project be suspended?","What happens when a project is suspended?","Using the site"],pledge:["Why is my pledge dropped?","What happened to my pledge?","Pledge problems","Money/payments","My reward","Survey","Using the site"],projects:["Project idea & tips","Creator requirements","Editing my project","Tips","Funds/payments","My backers","Project updates",
"Using the site"],backings:["Pledge problems","Money/payments","Rewards","Using the site"],other:["Using the site","Press","Jobs","Copyright","Stats","Partnerships"]}[c],function(b){d[b]&&(a.sections.push({section_title:b,funnels:_.sortBy(d[b],function(a){return a.importance})}),delete d[b])});_.each(d,function(b,c){a.sections.push({section_title:c,funnels:_.sortBy(b,function(a){return a.importance})})});a.sections=_.map(a.sections,function(a){return a.funnels.length===1&&a.funnels[0].item_title===
a.section_title?a.funnels[0]:a});return a}})()})(this);
instrument_function(function(){(function(){presenters["message_threads/_index"]=function(a){var d=[],c=a.facets.read?a.facets.read[a.user]:0,b=a.total_entries-c;a.facets.read={};c>0&&(a.facets.read["true"]=c);b>0&&(a.facets.read["false"]=b);_.each(_.keys(a.facets),function(b){_.each(_.keys(a.facets[b]),function(c){a.facets[b][c]={count:a.facets[b][c]}})});typeof current_project==="undefined"?(_.each(a.projects,function(b){var c=a.facets.projects?a.facets.projects[b[1]]:void 0,g=parseInt(a.params.project,
10)===b[1];b={name:b[0],truncated_name:b[0].substring(0,35)+(b[0].length>35?"\u2026":""),id:b[1],count:c||0,selected:g};d.push(b);if(g)a.selected_project=b}),a.projects=d,a.has_projects=a.projects&&a.projects.length>0):a.has_projects=!1;if(a.params&&(_.each(_.keys(a.params),function(b){_.has(a.facets,b)?(a.facets[b][a.params[b]]||(a.facets[b][a.params[b]]={}),a.facets[b][a.params[b]].selected=!0):(a.facets[b]={})[a.params[b]]={selected:!0}}),a.params.project==="other"))a.selected_project={truncated_name:"Other projects",
other:!0};return a}})()})(this);instrument_function(function(){(function(){presenters["message_threads/_row"]=function(a){a.formatted_sent_at=moment(a.sent_at*1E3).format("MMM D, YYYY");return a}})()})(this);
instrument_function(function(){(function(){window.presenters["message_threads/_show"]=function(a){a.is_creator=a.project.creator.id===current_user.get("id");a.project.is_live=a.project.state==="live";if(a.backing)a.backing.reward.formatted_estimated_delivery_on=moment(a.backing.reward.estimated_delivery_on*1E3).utc().format("MMM D, YYYY"),a.backing.is_creator=a.is_creator;a.messages=_.map(a.messages,function(d){d.sender=_.findWhere(a.participants,{id:d.sender_id});return presenters["messages/_show"](d)});
return a}})()})(this);instrument_function(function(){(function(){window.presenters["messages/_show"]=function(a){a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");a.is_recipient=typeof current_user!=="undefined"?current_user.get("id")===a.recipient_id:!1;return a}})()})(this);
instrument_function(function(){(function(){presenters["projects/_baseball_card_tall"]=function(a){var d=[];a.currency_symbol=formatters.currency_symbol(a.currency);a.percent_raised=a.pledged/a.goal*100;a.percent_raised_rounded=Math.round(a.percent_raised);a.percent_raised_to_100=Math.min(100,a.percent_raised);a.formatted_money=formatters.format_number(a.pledged,0);a.formatted_goal=formatters.format_number(a.goal,0);a.formatted_backers_count=formatters.format_number(a.backers_count,0);a.javascript_deadline=
a.deadline*1E3;a.javascript_state_changed_at=a.state_changed_at*1E3;a.formatted_deadline=moment(a.javascript_deadline).format("MMM D, YYYY");a.formatted_state_changed_at=moment(a.javascript_state_changed_at).format("MMM D, YYYY");$.each(["live","successful","canceled","failed"],function(){var c=String(this);a[c+"?"]=a.state===c});a["live_or_successful?"]=a.state==="live"||a.state==="successful";a["video?"]=a.video!==null&&a.video!==void 0;a["potd_today?"]=moment(a.potd_at*1E3).isSame(new Date,"day");
a["friends_backing?"]=a.friends&&a.friends.length>0;if(a["friends_backing?"])a.truncated_friends=a.friends.slice(0,2),d=_.map(a.truncated_friends,function(a){return"<strong>"+_.escape(a.name.split(" ")[0])+"</strong>"}),d.length<a.friends.length&&d.push("<strong>"+(a.friends.length-d.length)+"&nbsp;more</strong>"),d.length===1?d[0]+=" is a backer.":d[d.length-1]+=" are backers.",a.escaped_sentence=formatters.to_sentence(d);a.json=JSON.stringify(a);a.location_json=JSON.stringify(a.location);return a}})()})(this);
instrument_function(function(){(function(){presenters["projects/_verify_identity_questions"]=function(a){function d(a,b){var c;a.index=b;e=a["answer-type"]==="single"?"radio":"checkbox";for(c in a.choice)if(a.choice.hasOwnProperty(c))f=a.choice[c],f["question-id"]=a["question-id"],f.type=e,f.index=b;return a}a=a.questions;var c,b,e,f;if(a.question["question-id"])a.question=[d(a.question,0)];else for(c in a.question)a.question.hasOwnProperty(c)&&(b=a.question[c],a.question[c]=d(b,c));return a}})()})(this);
instrument_function(function(){(function(){presenters["projects/_video_mode"]=function(a){var d=new Schnurrbart("Project",a);if(a.location)a.location.first_name=a.location.name.split(",")[0];return _.extend({},a,{percent_raised:a.pledged/a.goal*100,context_classes:d.context_classes(),if_starred:d["if"]("is_starred").then(),if_not_starred:d.if_not("is_starred").then(),javascript_deadline:a.deadline*1E3})}})()})(this);
instrument_function(function(){$(function(){var a={};$(".NS-activity-card-_backing").livequery(function(){var d=$(this),c=d.data("project_id"),b=d.data("user"),e=a[c]||[],f=[b];_.each(e,function(a){a.$div.hide();f.push(a.user)});f.length>1&&(d.find(".js-backers").html(formatters.to_sentence(_.map(f,function(a){return'<a href="'+a.urls.web.user+'" class="link-green-dark bold">'+a.name+"</a>"}))),d.find(".js-avatar").replaceWith(render("activity/card/_backing_avatars",{backers:_.sample(f,3)})));e.push({$div:d,
user:b});a[c]=e})})})(this);instrument_function(function(){$(function(){var a=$("body#activity_index");if(a.length){var d=[];$(".dashboard_activities .activity",a).livequery(function(){var a=$(this).find(".timeline_header:first"),b=a.data("time_bucket");d.indexOf(b)===-1&&(d.push(b),a.find(".timeline_header_name:first").css({display:"block"}))});$(document).on("click",".NS_post_likes__button form .js-like",function(){track("Activity Like")})}})})(this);
instrument_function(function(){$(function(){$(document).on("click",".activity_mini_comment .excerpt a",function(a){a.preventDefault();a=$(this).parents("blockquote.excerpt");var d=a.siblings("blockquote.everything");a.hide();d.css("display","inline")})})})(this);instrument_function(function(){$(function(){$(document).on("submit",".NS_backer_backing_notes__form",function(){var a=$(this);a.trigger("backer_backing_note:added",[a.data("backing_id"),a.find("textarea").val()])})})})(this);
instrument_function(function(){$(function(){$(".NS-backer_report__header").length&&($(document).on("submit","#send_message_dialog form.choose_tier",function(a){var d=$(this),c=d.find("option:selected"),b=c.data("reward_id"),e=c.data("backers_count"),f=c.data("minimum"),g=$("#send_message_dialog .reward_"+b);a.preventDefault();track("Message Tier Selected");b?(d.find(".error").hide(),g.length?(d.hide(),g.show()):$.ajax({url:c.val(),type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept",
"text/javascript, */*")},success:function(a){g=$('<div class="reward reward_'+b+'">'+a+"</div>");var c=g.find("form");c.find("textarea").validates_presence();c.on("submit",function(a){a.preventDefault();c.validate()&&$.ajax({url:c.attr("action"),type:c.attr("method"),data:c.serialize(),dataType:"json",success:function(){var a=g.siblings(".success");g.hide();g.find("textarea").val("");a.find(".count").text(e);f?a.find(".tier").show().find(".money").text(current_project.get("currency_symbol")+parseInt(f,
10)):a.find(".tier").hide();a.show()}})});d.hide();d.closest(".modal_dialog_body").append(g);c.find("textarea").focus()}})):d.find(".error").show()}),$(document).on("submit","#send_message_dialog form.messages-new-box",function(){track("Message Tier Sent")}),$(document).on("click","#send_message_dialog span.cancel",function(){$("#send_message_dialog .choose_tier").show();$("#send_message_dialog .reward").hide()}),$(document).on("click","#send_message_dialog .success .new_message",function(a){a.preventDefault();
track("Message Tier Another Message");$("#send_message_dialog .choose_tier").show();$("#send_message_dialog .success").hide()}))})})(this);
instrument_function(function(){$(function(){function a(a,d){d.closest(c).addClass("generating");$.pollster(a,function(a){a.email_url&&$(c+" a.email_me").attr("href",a.email_url).show();return a.uploaded||a.state==="completed"?($(c+" .progress .bar").width("100%"),$(c+" .success a.download").attr("href",a.download_url),$(c).removeClass("generating").addClass("success"),!0):(typeof a.percent!=="undefined"&&$(c+" .progress .bar").width(a.percent+"%"),!1)},{delay:500,continue_on_error:!0})}var d=$("body#backer_report_index"),
c=".NS-backer_report_export";d.length&&(d.on("submit",c+" form",function(b){var c=$(this),d=c.find("select").val(),g=c.find(".select").data("all_reports_url");b.preventDefault();d&&(d==="all"?(track("Backer Report Export",{export_type:"all"}),$.ajax({type:"post",url:g,dataType:"json",success:function(b){a(b.poll_url,c)}})):(track("Backer Report Export",{export_type:"tier"}),$.ajax({type:"get",url:d,data:"new=true",dataType:"json",success:function(b){a(b.poll_url,c)}})))}),d.on("click",c+" a.email_me",
function(a){a.preventDefault();a=$(this);$.ajax({url:a.attr("href"),type:"post",dataType:"json",success:function(a){a&&a.status!==200?this.error():$(c+" .email_me_container").empty().html("We'll send you an email when this report is ready.")},error:function(){$(c+" .email_me_container").empty().html('There was an error requesting the email. <a href="#" class="email_me">Try again</a>.')}})}),d.on("click",c+" a.reset",function(a){track("Backer Report Another Export");$(c).removeClass("generating").removeClass("success");
$(c+" .email_me_container").empty().html('<a href="#" class="email_me">Email me when ready</a>');$(c+" .bar").css("width","0%");a.preventDefault()}),d.on("click",c+" .export_warning .button",function(a){a.preventDefault();$(this).closest(".export_warning").hide().next("form").show()}))})})(this);
instrument_function(function(a){$(function(){function d(){return URI(History.getState().url)}function c(){$("form.term").term_form().bind("submit",function(a){a.preventDefault();a=$(this);h.set_params(a.serialize_without_blank());track("Backer Report Search",{term:a.find(":input").val()})})}function b(){var a={};$(".dropdown a.selected").each(function(){var b=$(this);_.extend(a,URI(b.attr("href")).query(!0))});h.set_params($.param(a),!0)}function e(a){a.is(".selected")||($("#main tbody tr").removeClass("selected"),
a.addClass("selected"),l=!0,$(".NS_backers__info:visible").trigger("close").length&&a.find(".backer a").click(),l=!1,a.index()>a.parent().children().length-10&&!h.mobius.paused&&h.mobius.load_next())}function f(){var a=$("#main tbody tr.selected");a.length?e(a.next()):e($("#main tbody tr:first"))}function g(){var a=$("#main tbody tr.selected");a.length?e(a.prev()):e($("#main tbody tr:last"))}if(a.backers){var h,i=[],k=d(),l=!1,p=k.query(!0).show_responses||$.support.localStorage()&&localStorage.backer_report_show_responses;
h=new Location(null,$("#main"),"backer_report/_index",{mobius_on:"backers"});track("Backer Report View");if($.support.localStorage()&&_.has(k.query(!0),"show_responses"))localStorage.backer_report_show_responses=k.query(!0).show_responses;typeof p==="string"&&(p=p==="true");h.on_change_params(function(){i=[];c();(function(){var a=d().query(!0).reward_id,b=$(".NS-backer_report__header .remote_modal_dialog");a&&b.attr("href",URI(b.attr("href")).removeSearch("reward_id").addSearch("reward_id",a))})();
$("form.term .text").trigger("keydown");!h.get("params.reward_id")&&h.get("params.status")!=="dropped"&&($("#reward, #reward_message, ul.dropdown li.all").remove(),$(".reward_tiers .title > span.reward b").text("All rewards"));var a=$("#main input[name=note]:visible, #main input[name=note_not]:visible");a.focus();a.val(a.val());h.change()});$(document).on("click","#main table th",function(a){var b=$(this).data("sort"),c=d(),e=c.search(!0);b&&(a.preventDefault(),a=e.asc_or_desc==="asc"&&e.sort_by===
b?"desc":"asc",c.removeSearch("asc_or_desc").addSearch("asc_or_desc",a),c.removeSearch("sort_by").addSearch("sort_by",b),track("Backer Report Sort",{selected_sort:b,selected_order:a}),h.set_params(c.query()))});h.on_change(function(){var a=$("#main");_.each(this.get("backers"),function(b){if(!_.contains(i,b.id))i.push(b.id),b.project_is_successful=h.get("project.state")==="successful",b.show_responses=p,a.find("table tbody").append(render("backer_report/_row",b))})});$(window).on("statechange",function(){var a=
History.getState().data;a&&(typeof a.params==="string"&&h.set_params(a.params),typeof a.modal_url==="string"?$.open_remote_modal_dialog(a.modal_url):(l=!0,$(".modal_dialog:has(.NS_backers__info):visible").trigger("close"),l=!1))});$(window).on("set_params",function(a,b){h.set_params(b)});$(document).on("click","#main .dropdown a",function(a){var c=$(this),d=c.closest(".dropdown"),e=d.closest(".ksr-dropdown");d.find("a").removeClass("selected");c.addClass("selected");b();a.preventDefault();e.hasClass("reward_tiers")?
track("Backer Report Reward Filter",{selected_tier:$.trim($(this).find("b").text())}):e.hasClass("views")&&track("Backer Report Views Filter",{selected_tier:$.trim($("#main .reward_tiers .title b").text()),selected_view:$.trim($(this).find("span").text())})});$(document).on("keyup","form.facets input[name=note], form.facets input[name=note_not]",function(a){a.which===13&&$(this).trigger("change")});$(document).on("click","#main table tbody tr a",function(){var a=$(this);e(a.closest("tr"))});$(window).on("backer_completed",
function(a,b,c){$("#main table tbody tr td.completed a, .NS_backers__info a.completed_toggle").filter("[data-backer_id="+b+"]").toggleClass("completed",c)});$(window).on("creator_backing_note:added",function(a,b,c){$("#main table tbody tr[data-backing_id="+b+"] td.notes a").text(c)});$(window).on("message_sent",function(a,b,c){$("#main table tbody tr[data-backing_id="+b+"] td.actions a").html('<span class="ss-icon ss-mail"></span> ('+c+")")});$(window).on("modal_dialog:opened",function(a){a=$(a.target).data("modal_dialog");
History.busy()||History.pushState({modal_url:a.remote_url},null,d().hash("").toString())});$(window).on("modal_dialog:remote_dialog_loaded",function(a){a=$(a.target);var b=a.data("modal_dialog").$elem.find("div[data-backing-id]").data("backing-id"),c=$('tr[data-backing_id="'+b+'"]');b=c.prev("tr");c=c.next("tr");a=a.find(".NS_backers__info");c.length&&$('<a class="next button button_dark button_big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(a){a.preventDefault();
f();track("Backer Info Modal Next",{event_type:"click"})}).prependTo(a.find(".controls"));b.length&&$('<a class="prev button button_dark button_big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(a){a.preventDefault();g();track("Backer Info Modal Previous",{event_type:"click"})}).prependTo(a.find(".controls"))});$(window).on("closed.modal_dialog",function(){if(!l){var a=$.param(h.get("params")),b=k.clone();History.pushState({params:a},null,b.query(a).hash("").toString())}});
$(window).on("keydown",function(a){if(!$(a.target).is(":input"))switch(a.keyCode){case KEY.J:case KEY.RIGHT:f();track("Backer Info Modal Next",{event_type:"keyboard"});break;case KEY.K:case KEY.LEFT:g();track("Backer Info Modal Previous",{event_type:"keyboard"});break;case KEY.ENTER:$(".NS_backers__info:visible").trigger("close").length||$("#main tbody tr.selected td.backer a").click()}});h.set($.parseEscapedJSON(a.backers));h.change_params(k.query());a.backers=h}})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_backers__info .pledge .reward_details",function(a){a.preventDefault();a=$(this).closest(".pledge");a.find(".description").toggle();a.find(".description_short").toggle();a.trigger("resize")});$(document).on("click",".NS_backers__info a.completed_toggle, #backer_report_index #main table tbody tr td.completed a",function(a){var d=$(this),c=d.is(".completed"),b;$.ajax({url:d.attr("href"),type:"put",dataType:"json",data:{"backer[completed]":!c},
success:function(a){d.trigger("backer_completed",[d.data("backer_id"),!c,a.completed_at]);d.toggleClass("completed",!c);a.completed_at&&d.find("span.date").text(a.completed_at)}});d.closest(".modal_dialog").length?b="backer_modal":d.closest("td.completed").length&&(b="backer_row");c?track("Rewards Sent Unchecked",{context:b}):track("Rewards Sent Checked",{context:b});a.preventDefault()});$(document).on("click",".NS_backers__info .backer_tabs a",function(a){a.preventDefault();a=$(this).attr("rel");
var d=$("."+a);$(".NS_backers__info .panel").hide();d.show();$(".backer_tabs li").removeClass("selected");$(this).closest("li").addClass("selected");track("Backer Info Modal Toggle Tab",{selected_tab:a})});$(document).on("ksr_json:complete",".NS_backers__info .messages_panel",function(){var a=$(this),d=a.find(".message").length+1;a.trigger("message_sent",[a.data("backing-id"),d])});$(document).on("message_sent",".NS_backers__info .messages_panel",function(a,d,c){$(this).closest(".NS_backers__info").find(".messages_link").html('Messages <span class="count">'+
c+"</span>")})})})(this);instrument_function(function(){$(function(){var a=$("body#backers_search"),d=$(".mobius",a).data("mobius");a.length&&typeof d!=="undefined"&&d.add_param("term",$("#main").data("term"))})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_backings__info .tab-nav a",function(a){a.preventDefault();a=$(this).attr("rel");var d=$("."+a);$(".NS_backings__info .panel").hide();d.show();$(".tab-nav li").removeClass("selected");$(this).closest("li").addClass("selected");track("Backings Show Toggle Tab",{toggled_to:a})});$(document).on("message_sent",".NS_backings__info .messages_panel",function(a,d,c){$(this).closest(".NS_backings__info").find(".messages_link").html('Messages <span class="count">'+
c+"</span>")});$(document).on("click",".NS_backings__info .backing_completed form",function(a){var d=$(this),c=d.find("label.with_data"),b=d.find(".checkbox"),e=!c.data("completed");a.preventDefault();$.ajax({url:d.attr("action"),data:{"backing[backer_completed]":e},dataType:"json",type:"PUT",success:function(a){d.trigger("backer_completed",[d.closest(".NS_backings__info").data("backing_id"),a.backing.completed_at]);b.prop("checked",e);c.data("completed",e)}})})})})(this);
instrument_function(function(a){$(function(){function d(a){return a.closest("section").data("collection_state")}function c(a){return a.closest("section").find("table")}function b(a){k.find("#backing_"+a.get("id")).each(function(){var b=$(this),c=d(b);b.replaceWith(e(a,c))})}function e(a,b){return render("backings/_row_"+b,presenters["backings/_row"]($.extend({},a.get())))}function f(a){return c(a).hasClass("table_loading")}function g(a){!f(a)&&!a.is(".selected")&&($("#main tbody tr").removeClass("selected"),
a.addClass("selected"),l=!0,$(".NS_backings__info:visible").trigger("close").length&&a.find("a.more").click(),l=!1)}function h(){var a=$("#main tbody tr.selected");a.length?g(a.next()):g($("#main tbody tr:first"))}function i(){var a=$("#main tbody tr.selected");a.length?g(a.prev()):g($("#main tbody tr:last"))}var k=$("#backings_index"),l=!1,p=URI(History.getState().url),j;k.length&&(k.on("backer_completed",function(a,c,d){a=Backing.find(c);a.set("completed_at",d);b(a)}),k.on("click","a.backer_completed_at",
function(a){var b=$(this),c=$(this).find("input.checkbox:first").is(":checked");a.preventDefault();f(b)||$.ajax({url:b.attr("href"),data:{"backing[backer_completed]":c},dataType:"json",type:"PUT",success:function(a){a.backing&&b.trigger("backer_completed",[a.backing.id,a.backing.completed_at])}})}),k.on("message_sent",function(a,c,d){a=Backing.find(c);a.set("messages",{count:d,last_activity_at:moment().unix()});b(a)}),k.on("click","#main table tbody tr",function(a){var b=$(this),c=$(a.target);if(f(b))a.preventDefault();
else if(!c.is("input")&&!(c.closest("a.more").length>0||c.closest("a.messages").length>0))track("Backings Show Modal",{how_triggered:"row"}),b.find("td a.more").click()}),k.on("click","a.more span.ss-icon",function(){track("Backings Show Modal",{how_triggered:"icon"})}),k.on("click","table th.sortable",function(a){var b=$(this),f=b.closest("table"),g=d(b),h=b.hasClass("asc")?"asc":"desc",i=Math.min(f.find("tbody tr").length,150),k=b.data("sort"),l=URI(f.data("url"));a.preventDefault();track("Backings "+
formatters.capitalize(g)+" Sort",{selected_sort:k});l.addSearch({direction:h,sort:k,page:1,per_page:i});j&&j.abort();j=$.ajax({url:l.toString(),dataType:"json",beforeSend:function(){c(b).addClass("table_loading")},complete:function(){c(b).removeClass("table_loading");j=void 0},success:function(a){var c;c=_.map(a.backings,function(a){return e(new Backing(a),g)});f.find("tbody").html(c);f.data({sort:k,direction:h});f.find("th").not(b).removeClass("active asc").addClass("desc");b.addClass("active").removeClass(h).addClass(h===
"desc"?"asc":"desc");f.find("tbody tr").length<a.total&&b.closest("section").find("a.show_more_backings").show()}})}),$(document).on("click","a.show_more_backings",function(a){var b=$(this),g=c(b),h=d(b),i=g.data("sort");a.preventDefault();f(b)||(track("Backings "+formatters.capitalize(h)+" More",{selected_sort:i}),j&&j.abort(),j=$.ajax({url:g.data("url"),data:{direction:g.data("direction"),page:Math.floor(g.find("tbody tr").length/150)+1,per_page:150,sort:i},beforeSend:function(){b.addClass("loading")},
complete:function(){b.removeClass("loading");j=void 0},success:function(a){var c=d(b),f;f=g.find("tbody tr").length;var h=0;f<150&&(h=f);f=_.chain(a.backings).rest(h).map(function(a){return e(new Backing(a),c)}).value();g.find("tbody").append(f);g.find("tbody tr").length>=a.total&&b.hide()}}))}),$(window).on("statechange",function(){var a=History.getState().data;a&&(typeof a.modal_url==="string"?$.open_remote_modal_dialog(a.modal_url):(l=!0,$(".modal_dialog:has(.NS_backings__info):visible").trigger("close"),
l=!1))}),k.on("click","#main table tbody tr a.remote_modal_dialog",function(){g($(this).closest("tr"))}),$(window).on("modal_dialog:opened",function(a){a=$(a.target).data("modal_dialog");History.busy()||History.pushState({modal_url:a.remote_url},null,URI(History.getState().url).hash("").toString())}),$(window).on("modal_dialog:remote_dialog_loaded",function(a){a=$(a.target);var b=a.data("modal_dialog").$elem.find("div[data-backing_id]").data("backing_id"),c=k.find("#backing_"+b);b=c.prev("tr");c=
c.next("tr");a=a.find(".NS_backings__info");c.length&&$('<a class="next button button_dark button_big" href="#"><span class="ss-icon ss-navigateright"></span></a>').click(function(a){a.preventDefault();h()}).prependTo(a.find(".controls"));b.length&&$('<a class="prev button button_dark button_big" href="#"><span class="ss-icon ss-navigateleft"></span></a>').click(function(a){a.preventDefault();i()}).prependTo(a.find(".controls"))}),$(window).on("closed.modal_dialog",function(){if(!l){var a=p.clone();
History.pushState(null,null,a.hash("").toString())}}),$(window).on("keydown",function(a){if(!$(a.target).is(":input"))switch(a.keyCode){case KEY.J:case KEY.RIGHT:h();break;case KEY.K:case KEY.LEFT:i();break;case KEY.ENTER:$(".NS_backings__info:visible").trigger("close").length||$("#main tbody tr.selected td a.more").click()}}),_.each(["active","collected","uncollected"],function(b){var c=JSON.parse(_.unescape(a[b]));c.backings=_.map(c.backings,function(a){return new Backing(a)});$("#"+b).append(render("backings/_"+
b,presenters["backings/_table"]($.extend({},c)),["backings/_row_"+b]))}))})})(this);
instrument_function(function(){$(function(){$("#bank_account_container").length&&($(document).on("submit","#bank_account_container #bank_account_form",function(a){var d=$("#bank_account_container"),c=$("#bank_account_container #bank_account_form"),b=$("#bank_errors",d),e=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();c.after(e);$.ajax({type:"post",url:c.attr("action"),dataType:"json",data:c.serialize(),success:function(a){a.error!==
void 0?b.html(a.error).removeClass("hide"):d.closest("#account-setup-panel").html(a.data)},beforeSend:function(){d.addClass("loading")},complete:function(){d.removeClass("loading");e.remove()}})}),$(document).on("change","#bank_account_container input#routing_number",function(){var a=$("#bank_account_container"),d=$("#bank_account_container #bank_account_form"),c=$("#bank_errors",a),b=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"}),e=$("#cheque_example",
a),f=$("#account_helper_text",a),g=$("input#routing_number",a),h=$("input#account_number",a),i=$("input#swift_number",a);d.after(b);$.ajax({type:"get",url:d.attr("action")+"/helper_text",dataType:"json",data:d.serialize(),success:function(a){a.error!==void 0?(g.val()&&c.html(a.error).removeClass("hide"),f.addClass("hide"),h.attr("disabled","disabled"),i.attr("disabled","disabled")):(c.addClass("hide"),e.html(a.example),f.html(a.helper).removeClass("hide"),h.removeAttr("disabled"),i.removeAttr("disabled"))},
beforeSend:function(){a.addClass("loading")},complete:function(){a.removeClass("loading");b.remove()}})}),$("#bank_account_container input#routing_number").livequery(function(){$(this).trigger("change")}))})})(this);
instrument_function(function(){$(function(){var a=$("#NS_banners__password_reset");if(a.length){var d=!1,c=a.closest("li");if($.support.localStorage())try{d=localStorage.getItem("password_reset_dismissed")}catch(b){}d||c.show();a.find("a.dismiss").on("click",function(a){try{localStorage.setItem("password_reset_dismissed",!0)}catch(b){}c.hide();a.preventDefault()})}})})(this);
instrument_function(function(){$(function(){var a=$("body#blog_posts_category"),d;a.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),d=$(".mobius",a),$("div.load_more",a).show(),$("div.pagination",a).hide(),d.persistent_paging())})})(this);
instrument_function(function(){$(function(){var a=$("body#checkouts_interstitial");a.length&&(a.on("click",".amazon-payments-logo",function(){track("Clicked Amazon Payments Logo")}),$(".amazon_payments_footer").click(function(){location.href=$(".amazon-link").attr("href")}))})})(this);
instrument_function(function(){$(function(){var a=$("body#checkouts_thanks");a.length&&($(".short_url",a).click(function(){$(this).select()}),$(".verifying",a).livequery(function(){$.pollster($(this).data("poll_url"),function(a){if(a.state!=="verifying")return window.location.reload(),!0},{delay:2500})}))})})(this);
instrument_function(function(){$(function(){$(".NS_comments__comment").length&&($(document).on("click",".NS_comments__comment a.report_spam",function(a){a.preventDefault();var d=$(this),c=this,b=d.closest(".comment");$.modal_confirm(function(){return KsrJSON.get(d.data("url"),"post",b.find(".ajax-container"),c)},{message:'<p>We review all reports with care, but please keep in mind that we only remove comments that violate the <a href="/help/community" title="Kickstarter Community Guidelines">Kickstarter Community Guidelines</a>. Critical comments are tough, but they don\'t always qualify as abusive or spam.</p>',
title:"Report this comment to Kickstarter",confirm_text:"Yes, report as spam"})}),$(document).on("ksr_json:complete",".NS_comments__comment .spam_reported",function(a,d){var c=$(this).closest(".comment"),b=c.find(".report_spam");b.hide();d.status===200&&!b.is(".admin")&&c.find(".body").hide()}))})})(this);
instrument_function(function(){$(function(){var a=$("form#new_comment");if(a.length)a.on("click",":submit",function(d){if(current_project&&current_project.get("comments_loaded")&&current_project.get("comments_count")-current_project.get("comments_loaded")>50)return!0;d.preventDefault();var c=a.find("input.submit"),b=c.val();d=$("#comments").find(".comments li:first");var e=_.reduce(a.serializeArray(),function(a,b){a[b.name]=b.value;return a},{});if(d.length&&current_project&&current_project.get("comments_loaded"))e.cursor=
parseInt(d.attr("id").match(/\d+/)[0],10);c.hasClass("disabled")||(c.addClass("disabled"),c.val("Posting..."),$.ajax({type:a.attr("method"),url:a.attr("action"),dataType:"json",data:e,success:function(b){var c=a.closest("#comments"),d=c.find(".list-comments"),e=c.find("header");if(_.isArray(b.flash)&&_.isArray(b.flash[0]))b.flash=_.object(b.flash);growl(b.flash);b.html&&(a.each(function(){typeof this.reset!=="undefined"&&this.reset()}),d.length||(d=$('<ol class="list-comments click"><li class="page"><ol class="comments"></ol></li></ol>'),
e.length?e.after(d):c.append(d)),b.comments_count&&current_project&&current_project.get("comments_loaded")&&(current_project.set("comments_loaded",current_project.get("comments_loaded")+$(b.html).length),current_project.set("comments_count",b.comments_count)),$("#project-edit-nav .preview .count").text(function(a,b){return parseInt(b,10)+1}),d.closest(".project_preview_comments").addClass("has_comments"),$("body#proposals_show").length?d.append(b.html):d.find(".page ol.comments").prepend(b.html))},
complete:function(){c.removeClass("disabled");c.val(b)}}))})})})(this);
instrument_function(function(){(function(){function a(a){typeof a==="undefined"&&(a={});var d=a.comments_count||current_project.get("comments_count");a=a.comments_loaded||current_project.get("comments_loaded");d-=a;b.text(d);c.find(".pluralize").text(formatters.pluralize("comment",d));d>0?c.show():c.hide()}function d(a,b){var c=$(this),d=(new URI(this.href)).removeQuery("cursor").addQuery({cursor:a});b==="asc"&&d.addQuery({direction:b});$.ajax({url:d.toString(),beforeSend:function(){c.addClass("loading")},
complete:function(){c.removeClass("loading")},success:function(a){var c=b==="asc"?"prepend":"append";b==="asc"&&current_project.set("comments_loaded",a.comments_count);current_project.set("comments_count",a.comments_count);$("ol.list-comments ol.comments:first")[c](a.comments)},error:function(){growl({error:"Sorry, we couldn't load comments just now. Please refresh the page to get updated comments."})}})}var c=$(".load_new_comments"),b,e,f,g;c.length&&(b=c.find("span.new_comments_count"),e=c.find("a"),
f=$(".Project"+current_project.get("id")+'[itemprop="Project[comments_count]"]'),f=$.trim(f.text()),f=f.replace(/\D/g,""),current_project.set("comments_count",parseInt(f,10)),$(".latest_comment").livequery(function(){g||(g=!0,current_project.on_change("comments_count",a),current_project.on_change("comments_loaded",a));current_project.set("comments_loaded",current_project.get("comments_count"));a()}),$(".earliest_comment").livequery(function(){$("a.older_comments").hide()}),$(".comment").livequery(function(){var a=
{},b;$(this).find('[itemprop="Comment[created_at]"]').each(function(c,d){var e=$(d),f;if(e.attr("itemprop")&&(f=e.attr("itemprop").match(/Comment\[(\w+)\]/)))a[f[1]]=JSON.parse(e.data("value")),b||(b=e.attr("class").match(/Comment(\d+)/)[1])});(Comment.find(b)||new Comment({id:b})).set(a)}),e.click(function(a){if(!$(this).hasClass(".loading"))a.preventDefault(),a=$(".comments li:first"),track("Project Comment Load New"),current_project.get("comments_count")-current_project.get("comments_loaded")>
50?window.location.href=window.location.href:d.call(this,a.attr("id").match(/\d+/)[0],"asc")}),$(".older_comments").click(function(a){a.preventDefault();a=$(".comments li:last");!$(this).hasClass(".loading")&&a.length&&(track("Project Comment Load Older"),d.call(this,a.attr("id").match(/\d+/)[0],"desc"))}),$(".comment-moderation, .backer_info","ol.list-comments").livequery(function(){$(this).removeClass("hidden")}),$(document).on("submit","ol.list-comments form.delete_comment",function(a){a.preventDefault();
a=$(this);var b=a.closest(".comment");$.ajax({url:a.attr("action"),dataType:"json",type:"delete",success:function(){b.hide();$("#project-edit-nav .preview .count").text(function(a,b){return parseInt(b,10)-1});$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments")}})}))})()})(this);
instrument_function(function(){$(function(){var a=$("#company_form_section");a.length&&($(document).on("change",'#company_form_section input[name="type"]',function(){$("#type_business").is(":checked")?$("#company_form_section #business_id_section").show():$("#company_form_section #business_id_section").hide()}),$("#company_form_section #business_id_section :input:not(.optional)").validates_presence(),$(document).find("#company_form_section #beneficiary_lookup_link").length&&($(document).on("change",
'#company_form_section input[name="type"]',function(){$("#type_business").is(":checked")?$("#company_form_section #company_submit").addClass("disabled"):$("#company_form_section #company_submit").removeClass("disabled")}),$(document).on("input cut paste keydown","#company_form_section #business_id",function(){$("#company_form_section #company_submit").addClass("disabled")}),$(document).on("click","#company_form_section #beneficiary_lookup_link",function(a){var c=$(this),b=c.closest("#company_form_section").find("#business_id"),
e=c.closest("#company_form_section").find("#business_id_section"),f=$('<p id="beneficiary_errors"/>'),g=c.closest("#company_form_section").find("#beneficiary_lookup"),h=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.preventDefault();f.empty();g.empty();b.validate()?$.ajax({type:"get",url:c.attr("href"),dataType:"json",data:{business_id:b.val()},success:function(a){a.error!==void 0?(e.find("#beneficiary_errors").remove(),e.prepend(f.html(a.error))):
(e.find("#beneficiary_errors").remove(),g.html(a.data),$("#company_form_section #company_submit").removeClass("disabled"))},beforeSend:function(){c.after(h)},complete:function(){h.remove()}}):(e.find("#beneficiary_errors").remove(),e.prepend(f.html("Please enter a Companies House Number.")))})),$(document).on("submit","#company_form_section form#company_form",function(d){var c=$(this),b=a.find("input.radio[name=type]:checked").val(),e=a.find("#business_id_section"),f=$('<p id="beneficiary_errors"/>'),
g=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});d.preventDefault();$("#company_form_section #company_submit").is(".disabled")?d.preventDefault():b!=="individual"&&b!=="business"?d.preventDefault():b==="business"&&!e.validate()?d.preventDefault():$.ajax({type:"post",url:c.attr("action"),dataType:"json",data:c.serialize(),success:function(a){a.error!==void 0?(e.find("#beneficiary_errors").remove(),e.prepend(f.html(a.error))):(f.remove(),c.closest("#account-setup-panel").html(a.data))},
beforeSend:function(){c.after(g)},complete:function(){g.remove()}})}))})})(this);instrument_function(function(){$(function(){$(document).on("submit","#beneficiary_container form.beneficiary_reset",function(){var a=$(this),d=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});a.closest("#beneficiary_container").append(d)})})})(this);
instrument_function(function(){$(function(){function a(){var a=$(window).height()-$("#header-wrap").height(),d=$(window).width(),f=d/a;c.css({height:a,"min-height":"660px"});f<1.777777?c.find("video").css({height:a,width:"auto",left:"50%",top:0,"margin-top":0,"margin-left":-c.find("video").width()/2}):(c.find("video").css({height:"auto",width:d,left:0,"margin-left":0,top:"50%","margin-top":-c.find("video").height()/2}),a<620&&c.find("video").css({"margin-top":-360}))}var d=$("body#country_signups_netherlands"),
c=d.find(".video-banner");d.length&&($(document).resize(function(){a()}),a())})})(this);
instrument_function(function(){$(function(){if($("body.country_signups").length)$("input#signup_email").validates_presence().validates_email(),$("form#new_signup").on("submit",function(a){var d=$(this);a.preventDefault();if(!d.validate())return!1;$.ajax({url:d.attr("action"),data:d.serialize(),type:d.attr("method"),dataType:"json",success:function(){$(".submitting").hide();$(".submitted").show()},error:function(){d.find("#signup_email").addClass("errored")}})}),localStorage.banner_canada_hide=!0})})(this);
instrument_function(function(){$(function(){$(document).on("submit",".NS_creator_backing_notes__form",function(){var a=$(this);typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Backing Notes","Save",$("body").attr("id"));a.trigger("creator_backing_note:added",[a.data("backing_id"),a.find("textarea").val()])})})})(this);
instrument_function(function(){$(function(){function a(){var a=!0;$("#card_accountNumber").trigger("input");$("#card_accountNumber.valid").length?$("#card_accountNumber").closest("li").removeClass("invalid"):(a=!1,$("#card_accountNumber").closest("li").addClass("invalid"));$(".required :input:not(#card_accountNumber)").each(function(){var b=$(this);b.is("#billTo_state_default")||($.trim(b.val())?b.closest("li").removeClass("invalid"):(b.closest("li").addClass("invalid"),a=!1))});$("#card_cvNumber").each(function(){$.trim($(this).val()).match(/\d{3,4}/)===
null?($(this).closest("li").addClass("invalid"),a=!1):$(this).closest("li").removeClass("invalid")});$("#card_expirationMonth").each(function(){var b=$(this),c=$("#card_expirationYear"),d=b.closest("li");parseInt(c.val()+b.val(),10)<parseInt(d.data("min_date"),10)?(d.addClass("invalid"),a=!1):d.removeClass("invalid")});return a}function d(){var a=$("#billTo_country").val(),b=$("#billTo_state");a!=="US"&&a!=="CA"?(b.closest("li").hide().removeClass("required").find("select").attr("disabled",!0),b.siblings("#billTo_state_default").attr("disabled",
!1)):(b.siblings("#billTo_state_default").attr("disabled",!0),b.closest("li").show().addClass("required").find("select").hide().attr("disabled",!0),a==="US"?(b.closest("li").find("label").text("State"),b.show().attr("disabled",!1)):(b.closest("li").find("label").text("Province"),$("#billTo_state_ca").show().attr("disabled",!1)))}var c=$("#credit_card_form"),b=$("#credit_card_form form");c.length&&(b.on("submit",function(b){if(a()){var c=$("#saving-layer");b=$("#billTo_postalCode");var d=b.val();for(d=
d.replace("-","");d.length<5;)d="0"+d;d=d.substring(0,10);b.val(d);c.show();setTimeout(function(){c.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");c.removeClass("spinning");$.ajax({url:"/client_error",type:"post",data:{error:"cybersource timeout",url:window.location.toString()}})},
3E4)}else b.preventDefault()}),$(document).on("change","#billTo_country",d),d(),$("#card_accountNumber",c).on("keyup input paste cut",function(){var a=$(this),b=a.val().replace(/[^0-9]/g,""),c=$("#card_cardType"),d;d="000";/^(511071011|511071013|511071014|511071015|511106|511271000|511271010|511271015|511271020|511271025|511271030|511271035|511271040|511271045|511271050|511271055|511271060|511271065|514792221|514793221|515115011|515115012|515115013|515115014|515115015|515115017|515115040|515115050|515115060|515115070|515115080|515115090|515115100|515115110|515115120|515115130|515116002|51512107|51512117|51512123|515267|515400|519110002|520569000|520569001|520569002|520569003|520569004|520569005|520569006|520569007|520569008|520569009|52056901|52056902|52056903|52056904|52056905|52056906|52056907|52056908|520569090|520569091|520569092|520569093|520569094|520569095|520569096|520569097|520569099|5205691|5205692|5205693|5205694|5205695|5205696|5205697|5205698|5205699|520830|522087|522091|523947|525802|528155|52921518|529235|529373000|529373010|529373015|529373020|529373025|529373030|529373035|529373040|529373045|529373050|529373055|529373060|529373065|530571|5307441|5307442|5307443|5307444|5307445|5307446|5307447|5307448|5307449|532573|532574|532578|534085514|534090|534091|534092|534093|534094|534095|534096|534097|534098|534099|539052|53967700|53967701|53967702|53967703|53967704|53967705|53967706|53967707|53967708|53967709|539696|540761|541094034|541094035|541094036|541094038|541094041|541094043|541094057|541094059|541094064|541094090|541094108|541094124|541094125|541094129|541094138|541094139|541094145|541094151|541094152|541094153|541094154|541094159|541094165|541094166|541094169|541094186|541094192|541094193|541094194|541094195|541094205|541094206|541094227|54357127|54357128|54357129|5435713|5435714|5435715|5435716|5435717|5435718|5435719|545391|545433|545729|5464002|546432000|546432001|546432002|546432003|546432004|546432005|546432006|546432007|546432008|546432009|54643201|54643202|54643203|54643204|54643205|54643206|54643207|54643208|54643209|5464321|5464322|5464323|5464324|5464325|5464326|5464327|54643280|54643281|54643282|54643283|54643284|546432850|546432851|546432852|546432853|546432854|546432855|546432856|546432857|546432858|546432859|54643286|54643287|54643288|54643289|54643290|54643291|54643292|54643293|54643294|54643295|54643296|54643297|54643298|54643299|547195108|547195163|550917|551033545|553103|553104|553725591|553783053|554563|554587|557187|557205031|557549|5586741|5586742|5586743|5586744|5586745|5586746|5586747|5586748|5586749)/.test(b)?
d="042":/^(400115|400837|400838|400839|401773|412921|412922|412923|419740|419741|419773|419774|419775|424519|444000|484406|484407|484411|484419|484420|484422|484426|484430|484431|484432|484441|488061|491731|491734|491735|491736|491740|491746|491754|491755|491758)/.test(b)?d="033":/^5[1-5]/.test(b)?d="002":/^4/.test(b)?d="001":/^3[47]/.test(b)&&(d="003");var i=$("ul#card_cardType_list");b=String(b);var k=0,l,p=b.length,j,q;if(p<10)b=!1;else{for(j=p-1;j>=0;j-=1)l=String(b[j]),l=parseInt(l,10),q=p-1-
j,k+=q%2===0?l:l>4?l*2%10+1:l*2;b=k%10===0?!0:!1}b&&_.indexOf(["001","002","003"],d)!==-1?(a.addClass("valid"),a.closest("li").removeClass("invalid"),c.val(d),i.addClass("selected").children().removeClass("selected").filter("#cardType_"+d).addClass("selected")):(a.removeClass("valid"),i.removeClass("selected").children().removeClass("selected"))}),function(){var a=$(".no_stored_cards form"),b=$(".selected input.card_toggle");$("#credit_card_form .errored").length&&(b=$("#new-card input.card_toggle"));
b.length||(b=$("input.card_toggle:first"));$(document).on("change click","input.card_toggle",function(b){b.preventDefault();b=$(this);var c=$("#new_card_form"),d;b.is("input.card_toggle")||(b=b.find("input.card_toggle"));d=$("input.card_toggle").not(b);d.prop("checked",!1);b.prop("checked",!0);d.closest(".payment_option").removeClass("selected");b.closest(".payment_option").addClass("selected");b.closest("#new-card").length?(c.slideDown(400,"easeOutQuad"),a=c.find("form")):(c.slideUp(400,"easeOutQuad"),
a=b.closest("form"))});$(document).on("click",".pledge-submit",function(b){a.submit();b.preventDefault()});b.prop("checked",!0).trigger("change")}())})})(this);
instrument_function(function(){$(".NS-curated_page_projects-new").livequery(function(){var a=$(this),d=a.find("form.curated_pages_form"),c=parseInt($("div.blurb .character_counter .number:first",a).text(),10);$(".blurb textarea",a).validates_max_length().validates_presence();$(".blurb",a).on("validate:invalid",function(){$(this).addClass("errored")});$(document).on("validate:valid",".blurb, .meta h1",function(){$(this).removeClass("errored")});$("div.blurb",a).on("keypress cut paste input",function(){var a=
$(this),d=a.find("textarea").val().length;d=c-d;a.find("textarea").validate();a.find(".character_counter .number").text(d)});a.find(".save").click(function(){var a=d.find(".buttons .loading");$("div.blurb textarea").validate()&&(a.show(),$.ajax({type:d.attr("method"),url:d.attr("action"),data:d.serialize(),dataType:"json",global:!1,success:function(c){d.trigger("close.modal_dialog");d.trigger("project_added_to_curated_page",[c]);a.hide()}}))});a.find(".cancel").click(function(){$(this).trigger("close.modal_dialog")})})})(this);
instrument_function(function(){$(function(){function a(){$(".js-project").each(function(a){$(this).find("input.text").val(a+1)})}var d=$("#curated_pages_reorder");d.length&&($(".js-project input.text").on("blur",function(){var c=$(this),b=parseInt(c.val(),10);c=c.closest(".js-project");isNaN(b)||($(".js-project").not(c).eq(b-1).before(c),a())}).on("focus",function(){this.select()}),d.find("form ol").sortable({containment:"document",tolerance:"pointer",items:"> li",stop:a}))})})(this);
instrument_function(function(){$(function(){var a=$("#curated_pages_show"),d=$("#curated_pages_show form.curated_pages_form");d.length&&(function(){function c(a){var b=a.siblings(".value"),c=a.children("span.add_prompt");if(!b.siblings("textarea:visible, input:visible").length)return $.trim(b.text())===""?(c.show(),a.addClass("empty")):(c.hide(),a.removeClass("empty")),a}function b(){var a=$("li.curated_page_project:visible:not(.new)");a=a.length-a.find("div.blurb.errored").length;if($.trim($("#curated_page_title:not(:visible)").val())===
"")return!1;if($.trim($("#curated_page_description:not(:visible)").val())==="")return!1;if(a<1)return!1;return!0}function e(){var a=$(".submit.launch, #add_shortcut_url");b()?a.removeAttr("disabled").removeClass("disabled"):a.attr("disabled",!0).addClass("disabled")}function f(a){var b=$('<div class="buttons"></div>'),c=a.val(),d=$('<div class="save button button_green button_small">Save</div>'),e=$('<div class="cancel button button_small">Cancel</div>'),f=$('<span class="loading icon-loading-small"></span>');
d.click(function(){a.trigger("close")});e.click(function(){a.val(c);a.trigger("close")});f.hide();b.append(d);b.append(e);b.append(f);return b}function g(a){var b={};a.data("livesearch_result")?(b.html=a.data("livesearch_result").html,b.id=a.data("livesearch_result").id):(b.html=a.data("html"),b.id=a.data("id"));b.card='<div class="project-card-wrap">'+$(b.html).find("div.project-card-wrap").html()+"</div>";return b}var h=$("#main.published"),i=$("ul.project-card-list.live",a),k=$(".tools .delete").closest("form"),
l=!!h.length,p=$(".find_projects .project-results ul.result_list",a).clone(),j=$(".find_projects .project-results div.instructions",a).clone(),q=!!p.length,t;$(document).on("form_synced","form.header_form",function(a,b){var d=$(this);b.curated_page&&b.curated_page.description&&(d=d.find(".description .value").html(b.curated_page.description),c(d.siblings(".edit_prompt")))});$(document).on("form_synced","li.curated_page_project > form",function(a,b){var d=$(this);b.curated_page_project&&b.curated_page_project.blurb&&
(d=d.find(".blurb .value").html(b.curated_page_project.blurb),c(d.siblings(".edit_prompt")))});a.on("click",".value:not(.image), .edit_prompt",function(){function a(b){b.target!==c[0]&&!$(b.target).is("a.cancel, a.save")&&$(document).off("click",a)}var b=$(this),c=$(this).siblings("input, textarea");c.is(":visible")||(c.show().focus(),c.parent().append(f(c)),setTimeout(function(){$(document).on("click",a)},100),b.is(".empty")?b.find(".add_prompt").hide():b.hide(),b.siblings(".value").hide(),b.trigger("field_opened"))});
$(".edit_prompt",d).each(function(){c($(this))});a.on("close","input:not(.not_edit_in_place), textarea",function(){function a(){e.show();l||d.show();b.siblings(".buttons").remove();b.hide();b.trigger("field_closed")}var b=$(this),d=b.siblings(".edit_prompt"),e=b.siblings(".value");b.validate()?b.is("textarea")?(b.siblings(".buttons").find(".loading").css("display","inline-block"),b.closest("form").sync_form({success:function(b){b.valid&&a()},complete:function(){b.siblings(".buttons").find(".loading").hide()}})):
(e.text(b.val()),c(d),a(),b.closest("form").sync_form()):b.focus()});$(document).on("keydown","#curated_pages_show form.curated_pages_form input:not(.not_edit_in_place)",function(a){a.keyCode===13&&(a.preventDefault(),$(this).trigger("close"));a.keyCode===27&&(a.preventDefault(),$(this).siblings(".buttons").find(".cancel").click())});$(document).on("click","li.curated_page_project a.remove",function(a){a.preventDefault();var b=$(this);a=b.closest("form");var c,d,f=parseInt(a.find("input.project_id").val(),
10);p.find("li").each(function(){$(this).attr("data-id")===f&&$(this).show()});a.sync_form({type:"delete",success:function(){d&&b.closest("li.curated_page_project").remove();c=!0}});b.closest("li.curated_page_project").fadeOut(function(){e();c&&$(this).remove();d=!0})});$(".blurb textarea, .meta .description textarea").livequery(function(){$(this).validates_max_length().validates_presence()});$("#curated_page_title").data("validations",[[function(a){if(a.length||!l)return!0;return!1}]]);$(document).on("field_opened",
".blurb",function(){$(this).find(".label").show();$(this).find(".character_counter").show()});$(document).on("field_closed",".blurb",function(){$(this).find(".label").hide();$(this).find(".character_counter").hide()});$(document).on("field_opened",".meta .description",function(){$(this).find(".character_counter").show()});$(document).on("field_closed",".meta .description",function(){$(this).find(".character_counter").hide()});$(document).on("validate:invalid",".blurb, .meta h1, .meta .description",
function(){$(this).addClass("errored")});$(document).on("validate:valid",".blurb, .meta h1, .meta .description",function(){$(this).removeClass("errored")});$(document).on("keypress cut paste input field_opened","div.blurb, .meta .description",function(a){var b=$(this),c=b.find("textarea").val().length;c=parseInt(b.find("textarea").data("maxlength"),10)-c;a.type!=="field_opened"&&b.find("textarea").validate();b.find(".character_counter .number").text(c)});$(document).on("form_synced","li.curated_page_project",
function(a,b){var c=$(this),d=c.find("form");b.valid&&(d.attr("action",b.url),d.attr("method","put"),d.find("#curated_page_project_id").val(b.curated_page_project.id),c.css("border","0"))});$(document).on("click",".image a.remove",function(a){a.preventDefault();var b=$(this);$.ajax({url:b.attr("href"),type:"delete",dataType:"text",contentType:"application/x-www-form-urlencoded",success:function(a){b.closest(".image").find("img").attr("src",a)}})});a.on("click",".add_project",function(){var a=$(this).closest("li.curated_page_project").find(".find_projects");
a.show();a.find(".input-search").focus()});$(document).on("livesearch:soft_select livesearch:unselect",".find_projects .project-results ul.result_list li",function(a){var b=$(this),c=$(this).closest("li.curated_page_project").find(".project");a.type==="livesearch:soft_select"?(a=g(b),a.card&&(a=$(a.card),c.children(".add_project").hide(),c.find(".project-card-wrap").remove(),c.append(a))):(c.find(".project-card-wrap").remove(),c.children(".add_project").show())});$(document).on("livesearch:selected",
".find_projects .project-results ul.result_list li",function(a){a.preventDefault();var b=$(this),c=g(b);a=$('<li class="curated_page_project">'+c.html+"</li>");var d=b.closest("li.curated_page_project"),e;b.trigger("livesearch:unselect");p.find("li").each(function(){$(this).attr("data-id")===c.id&&$(this).hide()});q?(d.find("ul.result_list").replaceWith(p.clone()),d.find(".project-results > h2").text("My Backed Projects"),t.bind_results()):(d.find("ul.result_list").empty().before(j.clone()),d.find(".project-results > h2").text("Adding Projects"));
t.livesearch.last_search=!1;d.find("input.input-search").val("").blur();b=d.find("input.exclude");e="";i.children("li.curated_page_project").each(function(){var a=$(this).find("input.project_id").val();a&&(e+=a+",")});e+=a.find("input.project_id").val();b.val(e);d.hide();d.after(a);a.find(".blurb .value").click()});$(document).on("livesearch:results",".find_projects",function(){$(this).find(".project-results > h2").text("Search Results");$(this).find(".project-results > .instructions").remove()});
$(".find_projects input.input-search").livequery(function(){var a=$(this),b=$(this).siblings("input.exclude"),c=a.siblings(".ss-search");t=a.livesearch_input_dropdown({url:a.data("livesearch-url"),serialize:a.add(b),cancel_copy:"",client_side_cache:!1,update_input:!1,return_name_from_result:function(a){return a.name}}).data("livesearch.input_dropdown");a.on("livesearch:searching",function(){c.removeClass("ss-search").addClass("icon-loading-small")});a.on("livesearch:results livesearch:ajax_error",
function(){c.removeClass("icon-loading-small").addClass("ss-search")})});$(document).on("form_synced",e);e();l&&($(document).on("mouseenter","li.curated_page_project, .image.value",function(){$(this).find("a.remove").show()}).on("mouseleave","li.curated_page_project, .image.value",function(){$(this).find("a.remove").hide()}),$(document).on("mouseenter","ul.project-card-list.live .value, .value ~ textarea, .value ~ input",function(){$(this).siblings(".edit_prompt").show()}).on("mouseleave",".value, .value ~ textarea, .value ~ input",
function(){$(this).siblings(".edit_prompt:not(.empty)").hide()}));$(document).on("click","#new_root_slug .cancel",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")});$(document).on("submit","#new_root_slug",function(a){a.preventDefault();var b=$(this),c=b.find(".shortcut.url");c.addClass("processing");c.removeClass("invalid");c.find(".error_message").text("");$.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){c.removeClass("processing");
if(a.valid){b.trigger("close.modal_dialog");var d=$(".tools .launch");d.length&&d.closest("form").submit();$("#add_shortcut_url").replaceWith('<a class="button button_red shortcut_url" href="'+a.url+'">'+a.url+"</a>")}else b.removeClass("submitting-non-ajax"),c.addClass("invalid"),c.find(".error_message").text(a.errors.slug[0])}})});k.confirm_submit({title:"Delete your Curated Page",copy:"Are you sure you want to delete your current Curated Page?",yes_copy:"Yes, delete!",no_copy:"Nevermind"})}(),
$(".js-add_project").on("click",function(a){var b=$("li.new");b.is(":visible")?b.hide():b.show().find(".add_project").click();a.preventDefault()}))})})(this);instrument_function(function(){$(function(){var a=$("body.discover"),d,c=$(".mobius",a);a.length&&c.length&&(d=$("#sidebar",a),d.sticky_bar({parent:d.closest("#content")}),$("div.load_more",a).show(),$("div.pagination",a).hide(),c.persistent_paging())})})(this);
instrument_function(function(){$(function(){function a(){var a=d.find("ul.expanded");a.length?d.height(Math.max(e.height(),a.height())):d.height(e.height())}var d=$("#NS_discover__categories");if(d.length){var c=d.find(".categories"),b=d.find(".subcategories_container"),e=d.find(".root-categories");c.find("> li > a").on("click",function(e){var g=$(this).closest("li"),h=g.data("category")||{},i=d.find("#category_"+(h.id||0)+"_subcategories");c.find(".selected").removeClass("selected");g.addClass("selected");
b.find("ul.expanded").removeClass("expanded");i.addClass("expanded");i.length?(d.addClass("expanded"),i.find("li.subcategory > a").first().trigger("click")):($(document).trigger("discovery:categories:changed",h),d.trigger("ksr_popover:close"),d.removeClass("expanded"));device_idioms["not-mobile"]&&a();e.preventDefault()});b.find("li > a").on("click",function(a){var b=$(this),c=b.closest("li");b=b.closest("ul");var e=c.data("category");b.find(".selected").removeClass("selected");c.addClass("selected");
$(document).trigger("discovery:categories:changed",e);a.originalEvent?d.trigger("ksr_popover:close"):d.trigger("ksr_popover:reposition");a.preventDefault()});d.on("ksr_popover:opened",function(){device_idioms["not-mobile"]&&a()});$(document).on("discovery:sentence:changed",function(a,b){b.category_id||(d.removeClass("expanded").find(".selected, .expanded").removeClass("selected expanded"),d.find("li:first").addClass("selected"))});$(document).on("discovery:categories:load_sample",function(a,b){d.find("#category_"+
(b.category||{}).id).trigger("click")})}})})(this);
instrument_function(function(){$(function(){function a(){var a={};a.term=b.val();a.staff_picks=f.is(".selected");a.starred=g.is(".selected");a.social=h.is(".selected");a.backed=i.is(".selected");a.state=k.find("select").val();a.goal=l.find("select").val();a.pledged=p.find("select").val();a.raised=j.find("select").val();a.tag_id=(q.find(".selected").data("tag")||{}).id;return a}function d(a){b.val(a.term);a.staff_picks?f.addClass("selected"):f.removeClass("selected");a.starred?g.addClass("selected"):
g.removeClass("selected");a.social?h.addClass("selected"):h.removeClass("selected");a.backed?i.addClass("selected"):i.removeClass("selected");q.find(".selected").removeClass("selected");q.find("#tag_"+(a.tag_id||0)).addClass("selected");k.find("select").ksr_val(a.state||"");l.find("select").ksr_val(a.goal||"");p.find("select").ksr_val(a.pledged||"");j.find("select").ksr_val(a.raised||"")}var c=$("#NS_discover__filters");if(c.length){var b=c.find(".search_term input"),e=c.find(".featured"),f=e.find(".staff_picks"),
g=e.find(".starred"),h=e.find(".social"),i=e.find(".backed"),k=c.find(".states"),l=c.find(".goals"),p=c.find(".pledged"),j=c.find(".raised"),q=c.find(".tags"),t;b.on("cut paste input keydown",function(b){b.keyCode===KEY.ENTER?(c.trigger("ksr_popover:close"),$(document).trigger("discovery:filters:changed",a())):_.indexOf(KEY.NOT_INPUT,b.keyCode)===-1&&($(document).trigger("discovery:filters:term_changed",a()),c.trigger("ksr_popover:reposition"))});e.find("li > a").on("click",function(b){$(this).closest("li").toggleClass("selected");
$(document).trigger("discovery:filters:changed",a());c.trigger("ksr_popover:reposition");b.preventDefault()});q.find("li > a").on("click",function(b){var d=$(this).closest("li");d.siblings(".selected").removeClass("selected");d.toggleClass("selected");$(document).trigger("discovery:filters:changed",a());c.trigger("ksr_popover:reposition");b.preventDefault()});c.find("select").on("change",function(){$(document).trigger("discovery:filters:changed",a());c.trigger("ksr_popover:reposition")});$(document).on("discovery:sentence:changed",
function(a,b){d(b)});$(document).on("discovery:sentence:term_changed",function(a,c){b.val(c.term)});$(document).on("discovery:filters:load_sample",function(a,b){d({tag_id:(b.tag||{}).id})});c.on("ksr_popover:opened",function(){t=b.val()||"";device_idioms["not-touchable"]&&b.focus()});c.on("ksr_popover:closed",function(){var d=b.val()||"";$.trim(d)!==$.trim(t)&&($(document).trigger("discovery:filters:changed",a()),c.trigger("ksr_popover:reposition"))})}})})(this);
instrument_function(function(){$(function(){function a(){k&&k.abort();b.addClass("loading");clearTimeout(p);p=setTimeout(function(){k=$.ajax({url:b.attr("action"),dataType:"json",data:b.serialize(),success:function(a){b.addClass("results_visible");f.empty();_.each(a.locations,function(a){f.append(render("discover/_search_location_li",a))});c.find("ul.locations").addClass("results_visible");track("Discover Location Search Results",{discover_location_search_term:e.val(),discover_location_search_hits:a.total_hits})},
complete:function(){b.removeClass("loading");k=!1}})},j)}function d(a){var b=$(render("discover/_location_li",a));h.empty();g.children("li:not(:first-child)").remove();g.append(b);i.find("li.selected").removeClass("selected");b.addClass("selected");$(document).trigger("discovery:locations:updated",a);$(document).trigger("discovery:locations:changed",a);l&&l.abort();l=$.ajax({url:a.urls.web.location,dataType:"json",success:function(a){h.children().remove();_.each(a.nearby_locations,function(a){h.append(render("discover/_location_li",
a))});g.children("li:not(:first-child)").remove();_.each(a.ancestor_locations.reverse(),function(a){g.append(render("discover/_location_li",a))});g.append(b);$(document).trigger("discovery:locations:updated",a)},complete:function(){l=!1}})}var c=$("#NS_discover__locations");if(c.length){var b=c.find("form"),e=b.find("input"),f=b.find("ul.results"),g=c.find(".broader-locations ul"),h=c.find(".nearby-locations ul"),i=c.find(".broader-locations ul, .nearby-locations ul"),k,l,p,j=500;b.on("submit",function(a){a.preventDefault()});
i.on("click","li > a",function(a){var b=$(this).closest("li"),d=b.data("location")||{};i.find(".selected").removeClass("selected");b.addClass("selected");$(document).trigger("discovery:locations:changed",d);c.trigger("ksr_popover:close");a.preventDefault()});e.on("blur",function(){setTimeout(function(){b.removeClass("results_visible")},500)});e.on("cut paste input keydown",function(c){c.keyCode===KEY.ESC?($(this).val(""),b.removeClass("results_visible")):_.indexOf(KEY.NOT_INPUT,c.keyCode)===-1&&a()});
c.on("ksr_popover:opened",function(){device_idioms["not-touchable"]&&e.focus()});c.find(".current_location").on("click",function(a){d(current_location.get());e.val("");track("Discovery Current Location Click",{discover_used_html5:!1});a.preventDefault()});f.on("click","li > a",function(a){var c=$(this).closest("li").data("location")||{};d(c);b.removeClass("results_visible");track("Discover Location Search Click",{discover_location_search_term:e.val()});a.preventDefault()});$(document).on("discovery:sentence:changed",
function(a,b){c.find(".selected").removeClass("selected");b.woe_id&&parseInt(b.woe_id,10)>0?c.find("#location_"+b.woe_id).addClass("selected"):c.find("li:first").addClass("selected")});$(document).on("discovery:locations:load_sample",function(a,b){b.location&&d(b.location);a.preventDefault()})}})})(this);
instrument_function(function(){$(function(){function a(a){return $('<span class="text">'+a+"</span>")}function d(a,b){return $('<span class="inline-block"></span>').append(a).append(b)}function c(c){var e=$("<div></div>"),f=[],g=[];c=c||b();c.state=c.state||"all";c.term=$.trim(c.term||"");e.append(a("Show me"));c.state==="all"&&c.term.length===0?(e.append(p),e.append(a("projects")),p.find("option:first").data("alt-label","all")):(c.state!=="all"&&e.append(o),c.term.length>0&&e.append(l),e.append(a("projects in")),
e.append(p),p.find("option:first").data("alt-label","All Categories"));c.category_id&&parseInt(c.category_id,10)>0?(p.addClass("selected"),p.find("select").ksr_val(c.category_id)):(p.removeClass("selected"),p.find("select").ksr_val("0"));o.find("select").ksr_val(c.state);l.find("input").val(c.term);l.find(".term").text(c.term);c.woe_id&&parseInt(c.woe_id,10)>0?(m.addClass("selected"),m.find("select").ksr_val(c.woe_id),e.append(d(a("from"),m))):(m.removeClass("selected"),m.find("select").ksr_val("0"),
e.append(d(a("on"),m)));c.tag_id>0&&(s.find("select").ksr_val(c.tag_id),e.append(d(a("tagged with"),s)));c.staff_picks&&f.push(j);c.social?f.push(n):n.find("select").ksr_val("1");c.starred?f.push(q):q.find("select").ksr_val("1");c.backed?f.push(t):t.find("select").ksr_val("1");f=_.compact(f);f.length>0&&(f[0]===t||f[0]===q?e.append(a("that")):e.append(a("that are")),e.append(f));!_.isUndefined(c.pledged)&&!_.isNull(c.pledged)&&c.pledged!==""&&(v.find("select").ksr_val(c.pledged),g.push(v));!_.isUndefined(c.goal)&&
!_.isNull(c.goal)&&c.goal!==""&&(u.find("select").ksr_val(c.goal),g.push(u));!_.isUndefined(c.raised)&&!_.isNull(c.raised)&&c.raised!==""&&(y.find("select").ksr_val(c.raised),g.push(y));g.length>0&&e.append(d(a("with"),g));r.find("select").ksr_val(c.sort);e.append(d(a("sorted by"),r));i.children().detach();i.empty();i.html(e);h.find(i).length&&(h.removeClass("long_sentence"),i.width()+A>=940&&h.addClass("long_sentence"))}function b(){var a=URI("?"+i.serialize()).query(!0);a.category_id=a.category_id&&
parseInt(a.category_id,10);a.tag_id=a.tag_id&&parseInt(a.tag_id,10);a.woe_id=a.woe_id&&parseInt(a.woe_id,10);return a}function e(a){a={discover_interaction_param:a.param,discover_interaction_action:a.action,discover_interaction_value:a.value,discover_interaction_context:i.closest(g).length?"sentence":"mini_bar"};_.extend(a,namespace_keys("discover",b()));track("Discover Sentence Parameter Interaction",a)}var f=$("#NS__discover_advanced_sentence, #NS__discover_advanced_mini_bar"),g=$("#NS__discover_advanced_sentence"),
h=$("#NS__discover_advanced_mini_bar");if(g.length){var i=g.find("form"),k=g.find(".sentence"),l=g.find(".filter.search"),p=g.find(".filter.category"),j=g.find(".filter.staff_picks"),q=g.find(".filter.starred"),t=g.find(".filter.backed"),n=g.find(".filter.social"),s=g.find(".filter.tag"),o=g.find(".filter.state"),u=g.find(".filter.goal"),v=g.find(".filter.pledged"),y=g.find(".filter.raised"),m=g.find(".filter.location"),r=g.find(".filter.sorts"),A=g.find(".more_filters_wrapper").outerWidth();$(document).on("discovery:filters:term_changed",
function(a,d){!$.trim(d.term).length||!l.closest(i).length?c(_.extend(b(),{term:d.term})):l.find("input").val(d.term).siblings(".term").text(d.term)});$(document).on("discovery:mini_bar_appeared",function(){h.addClass("visible");g.css({height:g.height()});h.append(k);$("body").addClass("mini_bar_visible");c()});$(document).on("discovery:mini_bar_disappeared",function(){h.removeClass("visible");g.css({height:"auto"});g.prepend(k);$("body").removeClass("mini_bar_visible")});$(document).on("discovery:categories:changed",
function(a,d){p.find("select").ksr_val(d.id||0);c();$(document).trigger("discovery:sentence:changed",b())});$(document).on("discovery:locations:changed",function(a,d){m.find("select").ksr_val(d.id||0);c();$(document).trigger("discovery:sentence:changed",b())});$(document).on("discovery:sorts:changed",function(a,d){r.find("select").ksr_val(d);c();$(document).trigger("discovery:sentence:changed",b())});$(document).on("discovery:locations:updated",function(a,b){m.find("select").children().remove();m.find("select").append(render("discover/_location_options",
b));m.find("select").ksr_val(b.id)});$(document).on("discovery:filters:changed",function(a,d){c(_.extend(b(),d));$(document).trigger("discovery:sentence:changed",b())});f.find("#filters").on("click",function(a){a.preventDefault()});f.on("change","select",function(){var a=$(this);c();$(document).trigger("discovery:sentence:changed",b());e({param:a.attr("name"),action:"change",value:a.val()})});f.on("click",".filter .ss-delete",function(a){var d=$(this);d.closest(".filter").detach();c();$(document).trigger("discovery:sentence:changed",
b());e({param:d.siblings("input").attr("name"),action:"remove"});a.preventDefault()});f.on("keypress cut paste input blur",".search span[contenteditable]",function(a){var d=$(this),f=d.siblings("input"),g=$.trim(d.text()||"");a.type==="blur"||a.type==="focusout"?(c(),e({param:f.attr("name"),value:f.val(),action:"change"})):a.type==="keypress"&&(a.keyCode===KEY.ENTER||a.keyCode===KEY.TAB)?(d.blur(),a.preventDefault()):(f.val(g),$(document).trigger("discovery:sentence:term_changed",b()))});f.find(".term").on("focus",
function(){l.addClass("focused")}).on("blur",function(){l.removeClass("focused")});f.find(".reset").on("click",function(a){c({sort:"magic"});$(document).trigger("discovery:sentence:changed",b());track("Discovery Reset Click");a.preventDefault()});$(document).on("discovery:sentence:changed",function(){i.closest(h).length&&$("html, body").animate({scrollTop:g.position().top+g.outerHeight()-35},800,"easeOutExpo")});$(document).on("discovery:sentence:load_sample",function(a,d){c({category_id:(d.category||
{}).id,woe_id:(d.location||{}).id,tag_id:(d.tag||{}).id});$(document).trigger("discovery:sentence:changed",b())});c()}})})(this);instrument_function(function(){$(function(){$("#location-search.NS-discover_sidebar").livequery(function(){$(this).livesearch_navigator({no_results_html:"Sorry, no projects there!",process_results:function(a){return _.map(a.locations,function(a){return[a.short_name,a.urls.web.discover+"?ref=city"]})}})})})})(this);
instrument_function(function(){$(function(){var a=$("#NS_discover__sorts");a.length&&(a.find("li > a").on("click",function(d){var c=$(this).closest("li");a.find(".selected").removeClass("selected");c.addClass("selected");$(document).trigger("discovery:sorts:changed",c.data("sort"));a.trigger("ksr_popover:close");d.preventDefault()}),$(document).on("discovery:sentence:changed",function(d,c){a.find(".selected").removeClass("selected");a.find('li[data-sort="'+(c.sort||"magic")+'"]').addClass("selected")}),
$(document).on("discovery:sorts:load_sample",function(d,c){a.find(".selected").removeClass();c.sort?a.find('li[data-sort="'+c.sort+'"]').addClass("selected"):a.find('li[data-sort="magic"]').addClass("selected")}))})})(this);
instrument_function(function(a){$(function(){function d(a){a.urls.web.project.indexOf("?ref=")===-1&&(a.urls.web.project+=n?"?ref="+n:"?ref=discovery");return render("discover/_project_baseball_card_li",a,"projects/_baseball_card_tall")}function c(a,b){var c=(b||{}).append_results;if(!c)h.children().remove(),s=a.seed,o=[],i.show(),l.pause(),h.siblings(".title").find(".count").text(formatters.format_number(a.total_hits,0)+formatters.pluralize(" project",a.total_hits));a.projects.length>0?(g.removeClass("no_results"),
_.each(a.projects,function(a){_.indexOf(o,a.id)===-1&&(h.append(d(a)),o.push(a.id))}),l.options.extra_params.seed=s):(l.pause(),i.hide(),c||e())}function b(a){a=a||URI("?"+k.serialize()).query(!0);a=_.pick(a||{},_.filter(_.keys(a),function(b){return!!a[b]}));p&&p.abort();l.xhr&&l.xhr.abort();g.addClass("loading");l.options.extra_params=a;l.pause();i.show().removeClass("infinite_scrolling");History.replaceState({},"Discover Projects \u2013 Kickstarter","/discover/advanced?"+$.param(a));clearTimeout(j);
j=setTimeout(function(){p=$.ajax({url:"?google_chrome_workaround&page="+l.current_page,data:a,dataType:"json",success:function(a){c(a,{append_results:l.current_page>1});a.projects.length<20&&i.hide()},complete:function(a){a.status!==0&&g.removeClass("loading");l.is_duck&&i.removeClass("infinite_scrolling");p=!1}})},q)}function e(){var b=URI().query(!0);g.addClass("no_results");(b.social||b.backed||b.starred)&&_.isUndefined(a.current_user)?(g.find(".requires_login_empty_state").show(),g.find(".general_empty_state").hide()):
(g.find(".requires_login_empty_state").hide(),g.find(".general_empty_state").show())}var f=$("#discover_advanced");if(f.length){var g=f.find("#advanced_container"),h=f.find("#projects_list"),i=f.find(".load_more"),k=$("#NS__discover_advanced_sentence form"),l,p,j,q=500,t=URI().query(!0)||{},n=t.ref,s,o=[];o=_.map(h.find("> li > .project-card-wrap"),function(a){return $(a).data("project").id});s=h.data("seed");h.mobius?(l=h.mobius({dataType:"json",extra_params:_.extend(t,{seed:s})}).data("mobius"),
l.pause()):l={is_duck:!0,options:{},current_page:1,pause:function(){},play:function(){},load_next:function(){l.current_page+=1;b()}};h.on("mobius:loaded_page",function(a,b,d){c(d,{append_results:!0})});i.on("click",function(a){l.play();l.load_next();i.addClass("infinite_scrolling");a.preventDefault()});f.find(".login, .signup").on("click",function(a){window.location=$(this).data("url")+"?then="+encodeURIComponent(window.location.href);a.preventDefault()});f.find("li.sample_search a").on("click",function(a){var b=
$(this).closest("li").data("sample")||{};$(document).trigger("discovery:sentence:load_sample",b);$(document).trigger("discovery:categories:load_sample",b);$(document).trigger("discovery:locations:load_sample",b);$(document).trigger("discovery:sorts:load_sample",b);$(document).trigger("discovery:filters:load_sample",b);track("Discovery Sample Sentence Click",{discover_sample_sentence_ref:b.mp_ref});a.preventDefault()});f.on("click",".project-card-wrap .project-meta li a",function(a){var b=$(this).data("location");
$(document).trigger("discovery:locations:load_sample",{location:b});n="city";track("Discover Baseball Card Location Clicked");a.preventDefault()});$(document).on("discovery:sentence:changed",function(a,c){n=!1;parseInt(c.social,10)===1?h.addClass("social"):h.removeClass("social");l.current_page=1;b(c)});$(document).on("discovery:sentence:term_changed",function(a,c){l.current_page=1;b(c)});$(document).on("discovery:categories:changed",function(a,b){f.find("section.category_promo .promo").addClass("hide");
f.find(".category_promo_"+(b.parent_id||b.id)).removeClass("hide")});$(document).on("discovery:sentence:changed",function(){f.find("section.category_promo .promo").addClass("hide")});$.waypoints&&g.waypoint(function(a){f.find(".ksr-popover").trigger("ksr_popover:close");a==="down"?$(document).trigger("discovery:mini_bar_appeared"):a==="up"&&$(document).trigger("discovery:mini_bar_disappeared")},{offset:35});(t=h.children().length)||e();t<20&&i.hide()}})})(this);
instrument_function(function(){$(function(){$("#dmca_claims_new").length&&($("#claimer_type_owner").click(function(){$("#part_b").show();$("#owner_name").hide();$("#none_of_above_error").hide();$("#dmca_claim_owner_name").val("")}),$("#claimer_type_representative").click(function(){$("#part_b").show();$("#owner_name").show();$("#none_of_above_error").hide()}),$("#claimer_type_none").click(function(){$("#part_b").hide();$("#none_of_above_error").show()}),$('input.radio[id^="claimer_type"]').each(function(a,
d){d.checked&&d.click()}))})})(this);instrument_function(function(){$(function(){$("#events_fourth_birthday").length&&($("#the_right_way").hover(function(){$("body").addClass("reveal")},function(){$("body").removeClass("reveal")}),function(a){$(a).each(function(){(new Image).src=this})}(["https://d3mlfyygrfdi2i.cloudfront.net/5429/rsvp-awful.gif"]))})})(this);
instrument_function(function(){$(function(){if($("body#events_projectjam").length)$(document).on("click",".signup_tout",function(){$("html, body").animate({scrollTop:$("#signup").offset().top},300)})})})(this);
instrument_function(function(){$(function(){function a(a){$("#sidebar .subcat-list").find("li").removeClass("current");c.find('a[data="'+a+'"]').parent("li").addClass("current")}var d=$("#faqs_show"),c=$("#sidebar").find("a.current").siblings(".subcat-list"),b=!1;d.length&&($(document).on("click","h2.subcat a",function(){$.scrollTo("#header-wrap",800,{easing:"easeOutExpo"})}),$(document).on("click","#sidebar a",function(){var c=$(this).attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",
onAfter:function(){b=!1}})}),c.find("li").first().addClass("current"),$(".list-faqs li").waypoint(function(){b||a($(this).attr("id"))}))})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS-features__toggle a",function(a){a.preventDefault();a=$(this);var d=a.closest(".NS-features__toggle"),c=d.hasClass("featured");$.ajax({type:c?"delete":"post",url:a.attr("href"),dataType:"json",success:function(a){a.featured?d.addClass("featured"):d.removeClass("featured");a.remove_featurings_path&&d.find(".featured a").attr("href",a.remove_featurings_path)}})})})})(this);
instrument_function(function(){$(function(){$("#project-issues form").livequery(function(){var a=$(this),d=$(this).find("input.submit"),c=$(this).find(".footer");a.find(".tabs").tabs();a.find(".tabs > li").click(function(){$(this).find("input.radio").attr("checked",!0)});a.find(".panes").panes();a.find(".panes > .pane").on("activated",function(){var a=$(this);a.find("textarea,select,input").attr("disabled",!1).focus();typeof $.scrollTo==="function"&&$.scrollTo(a,500);d.show();this.id!=="details-ip_infringement"?
c.show():c.hide()}).on("deactivated",function(){$(this).find("textarea,select,input").attr("disabled",!0)}).trigger("deactivated").parent().show();a.find(".tabs").trigger("activate",a.find("input:checked").closest("li"));a.find("#prohibited_link").click(function(a){a.stopPropagation();window.open($(this).attr("href"));return!1});a.closest(".ajax-container").on("ksr_json:complete",function(){typeof $.scrollTo==="function"&&$.scrollTo(this)})})})})(this);
instrument_function(function(){$(function(){var a=$(".NS-follows-_follow_button");a.on("mouseenter",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).addClass("unfollow"),$(this).text("Unfollow"))}).on("mouseleave",".friend_button.following",function(){$(this).closest(".ajax-container").hasClass("loading")||($(this).removeClass("unfollow"),$(this).text("Following"))});a.on("click",".friend_button.follow",function(){$(this).text("Following")});a.on("click",
".friend_button.following",function(){$(this).text("Follow")});a.on("mouseenter",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Unblock")}).on("mouseleave",".friend_button.blocked",function(){$(this).closest(".ajax-container").hasClass("loading")||$(this).text("Blocked")});a.on("click",".friend_button.blocked",function(){$(this).removeClass("blocked");$(this).text("Follow")})})})(this);
instrument_function(function(){$(function(){var a=$(".NS-forms_categorization_field");a.length&&a.each(function(){var a=$(this),c=a.find(".template"),b=a.find("ol.selected");b.find("li").each(function(){var a=$(this),b=$('<a class="remove" href="#">remove</a>');a.append(b)});b.on("click","a.remove",function(a){var b=$(this).closest("li"),c=b.find(".destroy");a.preventDefault();b.fadeOut(function(){c.length?c.val("1"):b.remove()})});a.find(".new a").on("click",function(a){a.preventDefault();b.append(c.clone_form_template())})})})})(this);
instrument_function(function(){$(function(){$(".ajax-container .async-reload").livequery(function(){function a(){$.ajax({url:window.location.href,data:{format:"json"},dataType:"json",success:function(c){c=KsrJSON.parse_response(c,d);d.trigger("after_asyncreload");c.status===304&&setTimeout(a,1E3)}})}var d=$(this).closest(".ajax-container");a()});$(document).on("click",".friend .block_user",function(){$(this).hide();$(this).parent().find(".friend_button").removeClass("follow").removeClass("following").addClass("blocking").text("Blocked")})})})(this);
instrument_function(function(){$(function(){$("#friends_ticker_wrap").length&&($("#friends_ticker_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(document).on("click",".friend_button.follow",function(){$("#friends_ticker_wrap").is(":hidden")&&($("#friends_ticker_wrap").slideDown("fast"),setTimeout(function(){$(document).trigger("shifted")},100))}))})})(this);
instrument_function(function(){$(function(){var a=$("#friends_find, #friends_index, #friends_projects, #friends_following, #friends_followers, #friends_blocked, #friends_opt_out"),d,c,b;a.length&&($(document).on("mobius:loaded_page",".friends.ajax-container",function(){$(document).trigger("shifted")}),b=[[0,40,80,120,160,200,240,280,320,360,400,440],[440,480,520,560,600,640,680,720,760,800,840],[840,880,920,960,1E3,1040,1080,1120,1160,1200,1240],[1240,1280,1320,1360,1400,1440,1480,1520,1560,1600,
1640],[1640,1680,1720,1760,1800,1840,1880,1920,1960,2E3],[2E3,2040,2080,2120,2160,2200,2240,2280,2320,2360,2400],[2440,2480,2520,2560,2600,2640,2680,2720,2760,2800],[2800,2840,2880,2920,2960,3E3,3040,3080,3120,3160,3200,3240],[3240,3280,3320,3360,3400,3440,3480,3520,3560,3600,3640],[3640,3680,3720,3760,3800,3840,3880,3920,3960,4E3,4040],[4040,4080,4120,4160,4200,4240,4280,4320,4360,4400,4440,4480],[4440,4480,4520,4560,4600,4640,4680,4720,4760,4800,4840,4880]],d=$("#friends_ticker .ticker.backed_projects",
a).ticker({framesets:b}).data("ticker"),c=$("#friends_ticker .ticker.followed_people",a).ticker({framesets:b}).data("ticker"),$(".spinner").livequery(function(){$(this).spin({lines:8,length:4,width:3,radius:5,speed:2,color:"#808080"})}),$(document).on("before_ksrjson",".friend.ajax-container",function(a,b,g){a=$(g);b=parseInt($(this).find(".follow_status").data("backed_projects"),10);a.hasClass("block_user")||(a.hasClass("follow")?(d.write(parseInt(d.read(),10)+b),c.write(parseInt(c.read(),10)+1)):
a.hasClass("following")&&(d.write(parseInt(d.read(),10)-b),c.write(parseInt(c.read(),10)-1)))}),$("form.edit_user input.checkbox").change(function(){$(this).closest("form").submit()}),$("form.edit_user").submit(function(a){$.ajax({type:this.method,url:this.action,data:$(this).serialize(),beforeSend:function(a){a.setRequestHeader("Accept","text/javascript");$("form.edit_user").removeClass("highlight").removeClass("animate")},error:function(){},success:function(){$("form.edit_user").addClass("highlight").addClass("animate")}});
a.preventDefault()}))})})(this);
instrument_function(function(a){(function(){function d(a){var b;if(a.project)(b=Project.find(a.project.id))?b.set(a.project):b=new Project(a.project),window.current_project=b;else if(Project.find(a.id))b=Project.find(a.id),b.set(a),window.current_project=b}function c(a,b){if(typeof a.offset==="function")a=a.offset().top;typeof b==="undefined"&&(b={});_.defaults(b,{close_enough:100});var c=Math.max.apply(this,$("html, body").map(function(a,b){return b.scrollTop}).get()),d=c+$(window).height()-b.close_enough<
a;c=c>a+b.close_enough;(b.force||d||c)&&$("html, body").animate({scrollTop:a-20},500,"easeOutExpo")}function b(){var a;if(typeof p==="string")return p;else if(_.isObject(p))return a=_.keys(p)[0],_.compact([a,p[a].id]).join("_")}function e(){$("#open_ticket .container").find(".success, .error").remove()}function f(a,b){track("Contact "+a,_.extend({time_on_page:moment()-l},j,h.data,b))}var g=$("#funnels_contact"),h=new Model,i,k,l,p,j={texts_loaded:0},q=!0,t=!0;if(g.length&&(l=moment(),a.funnel_user)){typeof a.funnel_user._broadcast===
"undefined"&&(typeof a.funnel_user==="string"&&(k=JSON.parse(_.unescape(a.funnel_user))),k=new User(k));j.uid=k.get("id");if(typeof funnel_user_backings==="string")a.funnel_user_backings=JSON.parse(_.unescape(funnel_user_backings)),_.compact(funnel_user_backings),k._broadcast({backings_fetched:funnel_user_backings});if(typeof funnel_user_created_projects==="string")a.funnel_user_created_projects=JSON.parse(_.unescape(funnel_user_created_projects)),k._broadcast({created_projects_fetched:funnel_user_created_projects});
f("Page Load");History.Adapter.bind(window,"statechange",function(){var a=_.extend({topic:null,subject:null,funnel:null},History.getState().data);t&&(q=!1,!a.subject&&(a.topic==="pledge"||a.topic==="project")&&h.set("topic",null),h.set(a),q=!0)});h.on_change(function(a){if(q){a=_.pick(a,"funnel","subject","topic");var b;_.each(a,function(a,c){a&&(b=c)});b&&(t=!1,History.pushState(this.data,"",""),t=!0)}});h.on_change({topic:function(a){a=$('a[data-topic="'+a.topic+'"]');var b;$("#summary, #pledge_project_summary, #answers").addClass("hide");
g.find(".options li").removeClass("current");h.set("subject",null);a.length?($("#funnels_main").addClass("started"),f("Select Topic"),b=a.closest("li"),b.addClass("current"),a.is('[data-subjects="true"]')?(a=new URI(a.attr("href")),$("#"+a.fragment()+" li").length===1?$("#"+a.fragment()).find('li a[data-fetch="subject"]').click():($("#subjects").show(),c($("#subjects")),$(".side").addClass("hide"),$("#"+a.fragment()).removeClass("hide"))):($("#subjects").hide(),p={},p[$.trim(a.text())]={},a.data("fetch")===
"subject"&&(q=!1,h.set("subject",a.attr("href")),q=!0))):($("#funnels_main").removeClass("started"),$("#subjects").hide(),$("#new_zendesk_ticket").removeClass("open closed none"))},subject:function(a){$("#text").html("");try{delete window.current_project}catch(b){window.current_project=void 0}if(a.subject){f("Select Subject");a=new URI(a.subject);var e=(new URI(window.location.url)).query(!0).version;e&&a.addQuery({version:e});$.ajax({type:"GET",dataType:"JSON",url:a.toString(),beforeSend:function(){$("#answers").addClass("loading")},
complete:function(){$("#answers").removeClass("loading")},success:function(a){var b,e;if(a.subject){for(e in a.subject)if(a.subject.hasOwnProperty(e)){p=a.subject;b=a.subject[e];d(b);break}$("#pledge_project_summary").removeClass("hide");b=_.extend({},b,{other_backings:k.backings.length>=1,other_projects:k.created_projects.length>=1});$("#pledge_project_summary .container").html(render("funnels/_"+e+"_details",b));$("#subjects").hide()}i=_.map(a.funnels,function(a){return a.funnel});$("#answers").removeClass("hide");
$("#funnels").html(render("funnels/index",{funnels:i}));a.subject?c($("#pledge_project_summary"),{force:!0}):c($("#funnels"),{force:!0})}})}else $("#pledge_project_summary").addClass("hide"),$("#pledge_project_summary .container").html(""),$("#answers").addClass("hide"),$("#funnels").html("")},funnel:function(a){if(a.funnel){var d=$('[data-funnel_id="'+a.funnel+'"]'),e=_.find(i,function(b){return b.id===a.funnel});$.ajax({type:"GET",url:d.attr("href"),beforeSend:function(){$("#text").addClass("loading")},
complete:function(){$("#text").removeClass("loading")},success:function(a){var d=_.extend(p,{text:a.funnel_text,user:k.data,funnel:e});$(document).trigger("got_json",[d]);$("#text").html(render("funnels/_text",d));f("Funnel",{funnel_name:e.item_title||e.section_title,funnel_section:e.section_title,funnel_text_name:a.funnel_text.title,ticketable:e.ticketable!=="none",texts_loaded:j.texts_loaded+=1,funnel_test_version:e.version});$("#zendesk_ticket_ticket_requester_id").attr("value",k.get("email")||
"");$("#zendesk_ticket_ticket_tags").attr("value",e.zendesk_tag);$("#zendesk_ticket_funnel_id").attr("value",e.id);$("#zendesk_ticket_funnel_subject").attr("value",b());$("#new_zendesk_ticket").removeClass("open closed none").addClass(e.ticket_field);c($("#text"))}})}else $("#text").html(""),$("#new_zendesk_ticket").find("textarea, input.text").attr("value",""),$("#zendesk_ticket_ticket_requester_id").attr("value",""),$("#zendesk_ticket_ticket_tags").attr("value",""),$("#zendesk_ticket_funnel_id").attr("value",
""),$("#zendesk_ticket_funnel_subject").attr("value",""),$("#new_zendesk_ticket").removeClass("open closed none")}});$(document).on("click",".quick_links a",function(){var a=$(this);f("Click Quick Link",{text:a.text(),href:a.attr("href")})});h.on_change(function(){e()});$(document).on("click",".options a",function(a){a.preventDefault();h.set("topic",null);h.set("topic",$(this).data("topic"))});$(document).on("click",'#subjects a[data-fetch="subject"]',function(a){a.preventDefault();h.set("subject",
this.href)});$(document).on("click","a.select_new",function(a){a.preventDefault();f("Select Different Subject");a=h.get("topic");h.set("topic",null);h.set("topic",a)});$(document).on("click","a.funnel",function(a){a.preventDefault();h.set("funnel",$(this).data("funnel_id"))});$(document).on("click","li.open > span, li.open > a",function(a){a.preventDefault();a=$(this).parent();var b=a.find("> ul");b.length?(a.closest(".side_container").addClass("opened"),f("Select Section",{section_title:$(this).text()})):
a.closest(".side_container").removeClass("opened");$("li.open:not(.stay_open) > ul").hide();b.show()});$(document).on("click","a.show_more_backings",function(a){a.preventDefault();var b=this;a=(new URI(b.href+"?"+(new URI).query())).toString();var c=_.last(k.get_backings()).get("pledged_at");f("Load More Pledges");$.ajax({url:a,data:{cursor:c},beforeSend:function(){$(b).addClass("loading")},complete:function(){$(b).removeClass("loading")},success:function(a){k._broadcast({backings_fetched:a.backings});
a=_.select(k.get_backings(),function(a){return a.get("pledged_at")<c});a=_.map(a,function(a){a=a.get();a.formatted_created_at=moment(a.created_at*1E3).format("MMM D, YYYY");return render("funnels/_backing",a)}).join("");$(b).before(a);k.get_backings().length>=k.get("backings_count")&&$(b).remove()}})});$(document).on("click","#funnels a",function(a){a.preventDefault();a=$(this).closest("li");a.siblings().removeClass("selected");a.addClass("selected")});$(document).on("click",".open_a_ticket",function(a){a.preventDefault();
f("Open Ticket Form");$("#new_zendesk_ticket").removeClass("closed").addClass("open")});$(document).on("click","#new_zendesk_ticket input:submit",function(a){a.preventDefault();var b=$(this),d=b.closest("form");d.is(".submitting")||(d.addClass("submitting"),b.data("original_text",b.val()),b.val("Submitting..."),$("#zendesk_ticket_time_on_page").attr("value",moment()-l),k&&k.data&&window.current_user&&window.current_user.data&&k.data.id!==window.current_user.data.id&&$("#zendesk_ticket_ticket_requester_id").attr("value",
k.get("email")+".ksr"),_.each(["description","subject"],function(a){a=$("#zendesk_ticket_ticket_"+a);a.val()===a.attr("placeholder")&&a.val("")}),$.ajax({type:"POST",data:d.serialize(),url:$(this).closest("form").attr("action"),beforeSend:function(){e();f("Submit Ticket")},complete:function(){d.removeClass("submitting");b.val(b.data("original_text"))},success:function(){$(".funnels .contact_funnels").html(render("funnels/_ticket_success"));$("html, body").animate({scrollTop:0},800,"easeOutExpo");
f("Ticket Success")},error:function(a){a=_.flatten(_.compact(_.map(JSON.parse(a.responseText),function(a,b){var c={base:"",requester:"email",subject:"question",description:"details"}[b]||b;return _.map(a,function(a){return _.compact([formatters.capitalize(c),a]).join(" ")})})));f("Ticket Error",a);$("#open_ticket .container").prepend(render("funnels/_ticket_error",{errors:a}));c($("#open_ticket"))}}))});$(".prompt_login").length&&($(".contact_funnels").hide(),$(".prompt_login a.anonymously").on("click",
function(a){a.preventDefault();$(".prompt_login").hide();$(".contact_funnels").show()}));$(".contact_funnels").prepend(render("funnels/contact",{user:k},["funnels/_backing","funnels/_project"]));$(document).on("click","a.login",function(){f("Select Log In")});$(document).on("click","a.anonymously",function(a){a.preventDefault();f("Select No Account")});$(document).on("click",".helpfulness [data-score]",function(){var a=$(this).data("score");f("Funnel Rating",{score:a});$(this).closest(".helpfulness").html('<span class="green">Thanks, got it!</span>')})}})()})(this);
instrument_function(function(){(function(){var a=$("body.faqs").find(window.location.hash),d=$("#term.help");a.length&&!a.find(".subcat").length&&a.animate({backgroundColor:"#f6f2ae"},{duration:2E3,complete:function(){$(this).animate({backgroundColor:"#ffffff"},{duration:2500})}});$("body.help #main_content form.search").livequery(function(){$(this).livesearch_pretty_input_dropdown({input_can_submit_on_enter:!0,file_extension:"json",ignore_history:!1})});$(document).on("livesearch:selected","#search .results li",
function(a,b){if(b&&b[1])window.location.href=b[1]});$(document).on("click","body.help form.search .submit",function(){$(this).closest("form").submit()});$(document).on("livesearch:revealed_results","#term.help",function(){$(this).addClass("expanded");$(this).parents("#search").children(".submit").addClass("expanded")});$(document).on("livesearch:close_results","#term.help",function(){$(this).removeClass("expanded");$(this).parents("#search").children(".submit").removeClass("expanded")});$("body.help").click(function(a){a=
$(a.target);!a.is("#term")&&!a.closest("#search").length&&d.trigger("livesearch:close_results")});d.on("focus",function(){var a=d.data("livesearch");a&&a.search_xhr&&a.search_xhr.readyState===4&&d.trigger("livesearch:reveal_results")})})()})(this);instrument_function(function(){$(function(){$(document).on("change","body#help_copyright form.select_country",function(){$(this).submit()})})})(this);instrument_function(function(){$(function(){$("body#help_fees form.select_country").on("change",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){function a(a){a.find(".category_row").slideToggle("fast");a.find(".default_sort").toggleClass("tablesorter-headerAsc");a.closest("table").toggleClass("collapsed");a.find(".arrow").toggleClass("flipped");a.hasClass("collapsed")?(a.find(".details").text("See Categories"),pageTracker._trackEvent("Help Stats","Collapsed",a.attr("name"))):(a.find(".details").text("Hide Categories"),pageTracker._trackEvent("Help Stats","Expanded",a.attr("name")))}function d(a,
c,d){if(typeof d!=="undefined"){b.find(".content").html('<span class="num date">'+c+"</span>"+d);a=$(a);c=a.offset();d=a.closest("table, .explanation").offset();var h=b.width(),i=b.height(),k=parseInt(b.css("padding-right").replace("px",""),10);a.closest(".explanation").length&&(c.left-=50);b.css({position:"absolute",left:c.left-h-(k-1)+90,top:d.top-i-20});b.find(".nipple").css({left:h+5,top:i+12,position:"absolute"});b.fadeIn("fast")}else b.fadeOut("fast")}var c=$("#help_stats"),b=$(".bubble");c.length&&
($(".toggle_details").click(function(){var b=$(this).closest("table");a(b)}),$("th").click(function(){var b=$(this).closest("table");b.hasClass("collapsed")&&a(b)}),$("td, th").hover(function(){var a=$(this).closest("table").find("th").eq($(this).index()),b=a.data("header-explanation");a=a.html().replace("<br>"," ");d(this,a,b)}),$(".explanation").hover(function(){var a=$(this),b=a.find("[data-header-explanation]"),c=b.data("header-explanation");a=a.find("p").text();d(b,a,c)}),$("table, .explanation").mouseleave(function(){b.fadeOut("fast")}))})})(this);
instrument_function(function(){$(function(){function a(a,c){var d={growl:!0,growl_type:a,message:c};window.top.postMessage(JSON.stringify($.extend({account_panel:!0,completed:$(".needs_verification").length===0,height:$("#projects_account").height()+20},d)),"*")}function d(){var a=$("#account-setup-panel"),d=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"});$.ajax({type:"get",url:c.attr("account-url"),dataType:"json",success:function(c){a.html(c.data)},
beforeSend:function(){a.addClass("loading")},complete:function(){a.removeClass("loading");d.remove()}})}var c=$("body.projects_account .identity-documents-pending");c.length&&$.pollster(c.attr("data-url"),function(b){b=b[b.length-1];var c=b.identity;switch(b.state){case "pending":return!1;case "successful":if(!c)return!1;switch(c.state){case "started":return!1;case "passed":return a("success","Your identity documents have been approved."),d(),!0;case "failed":return a("error","Your Identity documents were not approved. We will email you further instructions."),
d(),!0}break;case "failed":return a("error","Your Identity documents were not approved. We will email you further instructions."),d(),!0}})})})(this);
instrument_function(function(){$(function(){var a=$("#projects_edit");a.length&&(a.on("click",".jumio-modal-close",function(a){a.preventDefault();$(this).trigger("allow_close.modal_dialog");$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",".modal_dialog.identity-document",function(){var a=$("#account-setup-panel iframe"),c=URI(a.attr("src"));a.attr("src",c.setQuery("bust",Date.now()).toString())}))})})(this);
instrument_function(function(){$(function(){function a(a){window.top.postMessage(JSON.stringify($.extend({account_panel:!0,completed:$(".needs_verification").length===0,height:c.height()+20},a)),"*")}var d=$("body.identity_documents"),c=$("#identity_documents_thanks");d.length&&($(document).on("click","#identity_documents_thanks a.jumio-modal-close-from-iframe",function(b){b.preventDefault();a({close_jumio_modal:!0})}),setTimeout(a,500))})})(this);
instrument_function(function(){$(function(){$(".NS_jobs__why_work_at_kickstarter").length&&($("span.carousel").hover(function(){var a=$(this).attr("data"),d=$(this).attr("data_caption");if(a!==""){if(a==="video"){$(this).closest(".section").find(".video").delay(100).fadeIn(200);try{$(this).closest(".section").find("video")[0].play()}catch(c){}}else $(this).closest(".section").css({"background-image":"url("+a+")","-webkit-background-size":"cover"});d!==""?$(this).closest(".section").find(".caption").text(d):
$(this).closest(".section").find(".caption").text("");$(this).closest(".section").find("h1, p").css({visibility:"hidden"});$(this).css({visibility:"visible"});$(this).closest(".section").append('<a href="#close" class="close">Close</a>')}},function(){var a=$(this).attr("data"),d=$(this).closest(".section").attr("data_caption");$(this).closest(".section").css({"background-image":"url("+$(this).closest(".section").attr("data")+")"});$(this).closest(".section").find("h1, p").css({visibility:""});$(this).css({visibility:""});
d!==""?$(this).closest(".section").find(".caption").text(d):$(this).closest(".section").find(".caption").text("");if(a==="video"){$(this).closest(".section").find(".video").fadeOut(200);try{$(this).closest(".section").find("video")[0].pause()}catch(c){}}$(".close").remove()}),$(document).on("click",".section .close",function(a){$(this).css({"background-image":"url("+$(this).attr("data")+")"});a.preventDefault()}),$(".gallery_links .next").click(function(){$(".gallery_links ul").offset().left>0&&$(".gallery_links ul").animate({marginLeft:"-720px"},
500,"easeOutExpo",function(){$(".gallery_links .prev").removeClass("disabled");$(".gallery_links .next").addClass("disabled")})}),$(".gallery_links .prev").click(function(){$(".gallery_links ul").offset().left<0&&$(".gallery_links ul").animate({marginLeft:"0px"},500,"easeOutExpo",function(){$(".gallery_links .next").removeClass("disabled");$(".gallery_links .prev").addClass("disabled")})}),$(document).on("click",".gallery_links li",function(){var a=$(this).attr("data");$(".gallery_links li").removeClass("selected");
$(this).addClass("selected");$(".galleries .video:not(#"+a+") .video-player").trigger("ksr_video:pause");$(".galleries").find("#"+a).parent().animate({height:640},600,"easeOutExpo",function(){$(this).find(".gallery").fadeOut();$(".galleries").find("#"+a).fadeIn(function(){$(this).children(".video-player").ksr_video().trigger("ksr_video:play")});$.scrollTo($(this).parents(".section").find(".galleries"),{duration:1200,easing:"easeOutExpo"})})}),$(".galleries .close_link").click(function(a){$(".video-player").trigger("ksr_video:pause");
$(".gallery_links li").removeClass("selected");$(this).parent().children(".gallery").fadeOut(500,function(){$(this).parent(".galleries").animate({height:"0px"},500,"easeOutExpo")});a.preventDefault()}),function(a){$(a).each(function(){(new Image).src=this})}(["https://d3mlfyygrfdi2i.cloudfront.net/jobs_greatest_city_2_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_happy_hours_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_beach_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_workshops_1600.jpg",
"https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_movies_1600.jpg","https://d3mlfyygrfdi2i.cloudfront.net/jobs_its_fun_lunch_alt_1600.jpg"]))})})(this);instrument_function(function(){$(function(){$("#jobs_show").length&&$("#sidebar").sticky_bar({parent:$("#jobs_show_wrap")})})})(this);
instrument_function(function(){$(function(){function a(){var a=$("#admin_wrap");g.slideDown(function(){$(this).trigger("opened");f.height(a.height())})}function d(){g.offsetParent().scrollTop()===0?g.is(":hidden")?a():g.slideUp():g.offsetParent().animate({scrollTop:0},"slow","easeInOutQuad",function(){g.is(":hidden")&&a()})}var c=$(".NS_layouts__admin_navigation"),b=$("a.open_panel",c),e=$("#admin_panel"),f=$("#admin-nav-prop"),g=$("#admin_panel_wrap");if(c.length&&(b.click(function(a){d();a.preventDefault()}),
$(window).on("keydown",function(a){if(a.which===KEY.SPACE&&!$(a.target).is(":input"))if(g.is(":visible")){var b=e.find("details[open]").add("#running-board-wrap"),c=0;b.each(function(a){window.scrollY>=this.offsetTop-f.height()&&(c=a)});b=c===b.length-1?b.get(0):b.get(c+1);window.scrollTo(0,b.offsetTop-f.height());a.preventDefault()}else d()}),window.location.hash==="#admin_panel"))$.fx.off=!0,d("local"),$.fx.off=!1})})(this);
instrument_function(function(){$(function(){var a=$("#mega-footer-wrap");a.length&&function(){function d(a){a>9||(g.removeClass(e[f]),f+=1,f===e.length&&(f=0),g.addClass(e[f]),setTimeout(function(){d(a+1)},100))}var c=0,b=$("#mega-footer").width()/3,e=["icon-scissors-1","icon-scissors-2","icon-scissors-3"],f=0,g=$("span.scissors",a);g.click(function(){c+=1;d(0);g.animate({marginLeft:b*c},1E3,function(){c===3&&(g.hide(),a.height(a.height()),a.addClass("gone"),$("html").addClass("gone"),$("#footer-wrap").hide(),
a.find("#mega-footer").animate({marginTop:[a.height(),"easeInOutExpo"],opacity:0},1E3,function(){$("#footer-newsletter-signup").fadeIn()}))})})}()})})(this);
instrument_function(function(){$(function(){$("#learn_more_panel").livequery(function(){function a(){$("#learn_more_dialog_content").removeClass("page0 page1 page2 page3").addClass("page"+b)}function d(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}var c=$(this),b=0;c.closest(".modal_dialog").attr("id","learn_more_modal");c.serialScroll({items:".panel",lazy:!0,lock:!1,step:1,cycle:!1,duration:500,easing:"easeOutExpo"});a();c.on("click",".next",function(){c.trigger("next");
b+=1;d("Learn more modal next");a()});c.on("click",".prev",function(){c.trigger("prev");b-=1;d("Learn more modal previous");a()});c.closest(".modal_dialog").on("modal_dialog:opened",function(){$.fx.off=!0;c.trigger("goto",[b]);$.fx.off=!1})})})})(this);
instrument_function(function(){$(function(){function a(a){(l=a)?k.addClass("selecting"):(k.removeClass("selecting"),i.find("li.search_result").removeClass("selected"))}function d(){h.trigger("livesearch:cancel");h.val("");n.hide();q.hide();g.slideUp(function(){k.empty();j.empty();q.empty()});$("body").removeClass("searching")}function c(){i.find("li.search_result").length<4?g.find(".arrow").addClass("disabled"):(g.find(".arrow").removeClass("disabled"),i.data("cur_page")===0&&i.find(".prev").addClass("disabled"),
i.data("cur_page")===i.data("last_page")&&i.find(".next").addClass("disabled"))}function b(a){a.preventDefault();f.removeClass("submitting-non-ajax")}function e(a){if(a)f.off("submit",b);else f.on("submit",b)}if(typeof current_user!=="undefined")current_user.on_change("name",function(a){$("#menu-sub .user_context strong").text(a.name)});$("#menu-sub > .dropdown > a").click(function(a){a.preventDefault();var b=$(this).closest(".dropdown"),c=!0;b.is("#menu-sub-me")?b.trigger("user_dropdown:open"):b.addClass("selected");
b.find("span.count").remove();$(document).on("click."+b.attr("id"),function(a){c?c=!1:$(a.target).parents(".dropdown-child").length||($(document).off("click."+b.attr("id")),b.removeClass("selected"))})});$(window).on("keydown",function(a){!$(".NS-site_leanback").length&&a.keyCode===38&&window.scrollY===0&&$("a#leanback").click()});if(!($.browser.msie&&$.browser.version<=6||$("body.touchable").length)){var f=$("#header form.search"),g=$("#search_results-wrap"),h=f.find("input#term"),i=$("#search_results"),
k=$("#search_results_panel"),l=!1,p=h.siblings(".ss-search"),j=i.find(".header"),q=i.find("p.footer"),t=i.find(".close"),n=f.find(".ss-delete");k.serialScroll({items:"li.search_result",lazy:!0,lock:!1,step:4,cycle:!1,duration:500,easing:"easeOutExpo"});g.on("click",".next:not(.disabled)",function(){k.trigger("next");i.data("cur_page",i.data("cur_page")+1);c();l&&a(!1)});g.on("click",".prev:not(.disabled)",function(){k.trigger("prev");i.data("cur_page",i.data("cur_page")-1);c();l&&a(!1)});h.livesearch({file_extension:"json",
process_data:function(){return{term:$.trim(h.val())}}}).data("livesearch");h.on("livesearch:searching",function(){p.removeClass("ss-search").addClass("icon-loading-small");$("body").addClass("searching");e(!1)});h.on("keypress cut paste input",function(a){a.keyCode!==13&&e(!1)});h.on("livesearch:results livesearch:ajax_error",function(){p.removeClass("icon-loading-small").addClass("ss-search");e(!0)});h.on("livesearch:results",function(b,d){if(!d.projects||!d.projects.length)$("body").removeClass("searching");
else{var e=$("<ol></ol>");e.addClass("list");j.html(d.header);d.footer?(q.html(d.footer),q.show()):(q.empty(),q.hide());_.each(d.projects,function(a,b){var c="";b===0&&(c=" alpha");!d.see_more&&b===d.projects.length-1&&(c=" omega");e.append('<li class="search_result'+c+'">'+render("projects/_baseball_card_tall",a)+"</li>")});d.see_more&&e.append('<li class="search_result see_more omega">'+d.see_more+"</li>");k.html(e);k.trigger("goto",[0]);i.data("cur_page",0);i.data("last_page",Math.floor((e.children().length-
1)/4));c();a(!1);g.slideDown("fast");$("body").addClass("searching")}});$(window).on("scroll",function(){g.is(":visible")&&$(window).scrollTop()>i.offset().top+i.height()&&d()});$(document).click(function(a){$(a.target).closest("#search_results-wrap").length||d()});h.on("keypress cut paste input",function(){this.value?n.show():(n.hide(),d())});n.on("click",function(){d();h.focus()});t.on("click",d);$(document).on("select","#search_results li.search_result",function(){var b=$(this),d=i.find("li.search_result.selected").removeClass("selected");
b.addClass("selected");a(!0);b.index()>d.index()&&b.index()%4===0?k.trigger("goto",[b.index()]):b.index()<d.index()&&d.index()%4===0&&k.trigger("goto",[d.index()-4]);i.data("cur_page",Math.floor(b.index()/4));c()});h.on("keydown",function(b){var c=i.find("li.selected"),d=!!c.length;switch(b.keyCode){case KEY.UP:a(!1);b.preventDefault();break;case KEY.DOWN:d||i.find("li.search_result:first").trigger("select");a(!0);b.preventDefault();break;case KEY.LEFT:if(!l)break;d?c.prev("li").trigger("select"):
i.find("li.search_result:first").trigger("select");b.preventDefault();break;case KEY.RIGHT:if(!l)break;d?c.next("li").trigger("select"):i.find("li.search_result:last").trigger("select");b.preventDefault();break;case KEY.ENTER:if(!l)break;d=c.find("h2 strong a").attr("href");c.is(".see_more")&&(d=c.find("a.search-see-more").attr("href"));if(!d)break;window.location=d;b.preventDefault();break;case KEY.ESC:a(!1),b.preventDefault()}})}})})(this);
instrument_function(function(){$(function(){function a(){b.find("#menu-me-backed").length&&b.find(".dropdown-child").addClass("backer");b.find("#menu-me-created").length&&b.find(".dropdown-child").addClass("creator")}function d(c){var d=b.children("#menu-me-children");if($.support.localStorage())try{localStorage.user_dropdown_backer_creator_columns_html=c}catch(e){}d.children(".NS_layouts__user_dropdown_backer_creator_columns").remove();d.append(c);a()}function c(a){f||(f=$.ajax({url:b.data("user_dropdown_backer_creator_columns_path"),
type:"get",dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")},success:function(a){d(a);e=!0},complete:function(){a&&a();f=!1}}))}var b=$(".NS_layouts__user_dropdown"),e=!1,f=!1;(function(){if($.support.localStorage()){var a=localStorage.user_dropdown_backer_creator_columns_html;a&&(d(a),e=!0)}})();a();$("#menu-sub-me").on("user_dropdown:open",function(){var a=$(this);e?a.addClass("selected"):c(function(){a.addClass("selected")})});$("#menu-sub-me > a").one("click",
function(){track("Account Menu Dropdown");c()});$(document).on("user_dropdown:refresh_from_remote",function(){c()});$("body").is(".just_logged_out")&&localStorage&&delete localStorage.user_dropdown_backer_creator_columns_html})})(this);instrument_function(function(){$(function(){$(".video_player").livequery(function(){$(this).ksr_video()})})})(this);
instrument_function(function(){(function(){function a(a,c){var d=a.add(c);d.siblings().removeClass("current_tab");d.addClass("current_tab");$(document).trigger("tab")}function d(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"able":a+"able"})}function c(a){if(typeof a!=="string")return"";return a.replace(/.$/,function(a){return a==="e"?"ed":a+"ed"})}$("body.admin").delegate(".tab","click",function(){var b=$(this),c=b.attr("class").match(/tab_\d+/),d,g=b.find("a");
c&&(d=$("."+c[0].replace(/tab/,"pane")));c&&d.length&&(g.length&&$.trim(d.html())===""?(b.addClass("submitting"),$.ajax({url:g.attr("href")+".js",type:"GET",complete:function(c){b.removeClass("submitting");d.html(c.responseText);a(b,d)}})):a(b,d),history.pushState(null,null,g.attr("href")))});$("body.admin").delegate(".tab_label a","click",function(a){a.preventDefault()});$("body.admin").delegate(".expand, .collapse","click",function(a){a.preventDefault();$(this).add($(this).siblings(".expand, .collapse, .expandable")).toggle()});
$("body.admin").delegate(".batch_action .select_all","click",function(a){a.preventDefault();a=$(this);var c=a.closest(".batch_action").parent().find("input.checkbox:not([disabled])");c.length?a.text()==="Select all"?(c.attr("checked",!0),a.text("Deselect all")):(c.attr("checked",!1),a.text("Select all")):growl({error:"Nothing to select."})});$("body.admin").delegate(".batch_action input.submit","click",function(a){a.preventDefault();var e=$(this),f=e.closest("form"),g=e.closest(".batch_action");a=
g.parent();var h=a.find("input.checkbox:checked"),i=h.map(function(a,b){var c;c=b.id;c=typeof c!=="string"?"":(c=c.match(/\d+/))?c[0]:null;return c}).get(),k=e.attr("name"),l=f.attr("action"),p=g.data("type"),j=p.replace(/s$/,""),q={};e=a.find(".batch_"+k+"_info").data("confirm_url");a.find("input.checkbox:not(checked)").each(function(){$(this).parent().removeClass("highlight")});if(h.length){var t=[];h.each(function(){$(this).hasClass(d(k))?$(this).parent().removeClass("highlight"):(t.push($(this)),
$(this).parent().addClass("highlight"))});t.length?growl({error:"You selected "+t.length+" "+formatters.pluralize(p,t.length)+" that cannot be "+c(k)+". Please unselect those and try again."}):(q[p]=i,$.ajax({url:e,data:q,type:"get"}).done(function(a){$.modal_confirm(function(){$.ajax({type:"PUT",url:l,data:q,success:function(){h.each(function(){var a=$(this);a.attr({checked:!1,disabled:!0});a.closest("."+j).addClass(c(k)).find(".status").html(c(k))});growl({success:"Selected "+p+" were "+c(k)})},
error:function(){growl({error:"There was a problem "+k+"ing one or more of those "+p+". Please refresh the page and try again."})}})},{title:"Batch "+k,message:a,confirm_text:formatters.capitalize(k)+" "+i.length+" "+formatters.pluralize(p,i.length),cancel_text:"cancel"===k?"never mind":"cancel"})}))}else growl({error:"No "+p+" selected to "+k+"."})});$(document).on("submit",".zendesk_ticket form",function(a){var c=$(this);c.find(".submit").hide();c.find(".loading").show();a.preventDefault();$.ajax({url:c.attr("action"),
type:"POST",data:c.serialize(),dataType:"JSON",success:function(a){a="https://kickstarter.zendesk.com/tickets/"+a.id;var b=$("<a/>");b.attr("href",a);b.text(a);b.addClass("associated_zendesk_ticket right");c.closest(".modal_dialog").trigger("close");growl({success:"Ticket sent successfully!"});$("#send_to_zendesk").append(b)},complete:function(){c.find(".submit").show();c.find(".loading").hide()}})})})()})(this);
instrument_function(function(){$(function(){$(".ksr_toggle").length&&($(".ksr_toggle a").on("click",function(a){var d=$(this);d.closest(".ksr_toggle").find("a").removeClass("selected");d.addClass("selected");d.closest(".ksr_toggle").find(".bg").css({left:d.position().left});a.preventDefault()}),$(".ksr_toggle a.selected").click(),$(".ksr_toggle .bg").addClass("show"))})})(this);
instrument_function(function(){$(function(){function a(a){a=a||$(".mobius");a.each(function(){var a=$(this).data("mobius");if(a)for(var b in a.clear_extra_params(),c)c.hasOwnProperty(b)&&a.add_param(b,c[b])})}var d=$("body.profile");if(d.length){$("body#users_show").length&&(typeof history.pushState!=="undefined"&&history.pushState(null,null,window.location.pathname),$("#animated_pie",d).spriteshow({number:63,play_delay:40,pause_when_behind_by:0,play_once:!0,sprite_orientation:"horizontal"}),$("#animated_pie").on("spriteshow:index",
function(a,c){c===43&&($("#category_circle").fadeIn(100),$("#animated_pie").fadeOut(1E3));c===0&&$(this).fadeOut()}));var c=URI().query(!0);$("#small_circle").on("navigate",function(a,e){d.is("#users_show")?(c=URI(e).query(!0),$.ajax({url:e,type:"get",success:function(a){a=$(a).find("#main");$("#main").replaceWith(a)}})):window.location=e});a();$(".mobius").livequery(function(){a($(this))})}})})(this);
instrument_function(function(){$(function(){$(document).on("project_added_to_curated_page",function(a,c){var b=$("#add_to_curated_page_widget .button-curate");b.addClass("on");b.attr("href",c.edit_url)});if(typeof current_project!=="undefined")current_project.on_change("pledged",function(){var a=$("#stats"),c=a[0].className.match(/digits_\d+/),b="digits_"+Math.floor(current_project.get("pledged")).toString().length;c&&c[0]!==b&&a.removeClass(c[0]).addClass(b)});var a={};$(".poll[data-dynamic]").livequery(function(){function d(a){var c;
typeof a!=="object"&&(a=JSON.parse(a));if(c=Project.find(a.project.id)){var d;if(a.poll_interval_override)d=a.poll_interval_override;else{d=b;var e=a.project;c.get("pledged")!==e.pledged||c.get("comments_count")!==e.comments_count?(d-=Math.ceil((d-g)/2),d=Math.max(d,g)):d=Math.min(d+10,h)}b=d;c.set(a.project);f(b)}}var c=$(this),b=parseInt(c.data("dynamic"),10),e=c.data("poll_url"),f,g=5,h=60;if(e&&!(typeof b!=="number"||isNaN(b)))f=function(b){a[e]=setTimeout(function(){a[e]=$.ajax({global:!1,url:e,
success:d})},b*1E3)},f(b)},function(){var d=a[$(this).data("poll_url")];typeof d==="number"?clearTimeout(d):typeof d.abort==="function"&&d.abort()})})})(this);
instrument_function(function(){$(function(){function a(a){return a.closest("#preview, .render_mustache").data("data")}function d(b){var d="messages";typeof current_project!=="undefined"&&(d="project_messages");b.closest(".modal_dialog").length&&(d="backer_modal");$("body").attr("id")==="backers_show"&&(d="backer_page");if($("body").attr("id")==="backings_show"||$("body").attr("id")==="backings_index")d="backings_show";$.ajax({url:b.attr("action"),type:b.attr("method"),dataType:"json",data:b.serialize()+
"&"+$.param({"mp[message_context]":d}),success:function(d){var e=a(b),h=b.closest(c).find("ul.messages");h.append(render("messages/_show",d)).trigger("message_sent",e?[e.backing?e.backing.id:void 0,h.children().length]:[]);$(document).trigger("resize");b.get(0).reset();d=b.find('input[type="submit"].button');b.removeClass("submitting");d.removeClass("button_disabled")}})}var c=".NS_message_threads__show";$(document).on("click",c+" .pledge_details_link",function(a){$(c).find(".pledge_details").toggleClass("visible");
$(document).trigger("resize");$(this).toggleClass("selected");track("Message Info Toggle",{text:$.trim($(this).text())});a.preventDefault()});$(c+":visible").livequery(function(){function b(a){$.ajax({url:f.urls.web.read,type:"put"});$("#thread_"+f.id+", "+c).removeClass("unread");a&&a.preventDefault()}var d=$(this),f=a(d);b();$(c+" .mark_as_unread").on("click",function(a){$.ajax({url:f.urls.web.unread,type:"put"});$("#thread_"+f.id+", "+c).addClass("unread");a&&a.preventDefault();track("Message Read Toggle",
{toggled_to:"unread"})});$(c+" .mark_as_read").on("click",b)});$(document).on("submit",c+" form.reply",function(a){var c=$(this);if(c.find('[name="message[body]"]').val()){if(!c.is(".submitting")){var f=c.find('input[type="submit"].button');c.addClass("submitting");f.addClass("button_disabled");d(c)}}else growl({error:"Please add a message"});a.preventDefault()});$(document).on("focus",c+" form.reply textarea",function(){var a=$(this);a.closest("form.reply").addClass("replying");a.removeAttr("placeholder")});
$(document).on("click",c+" .respond_link",function(a){$(c+" form.reply textarea").focus();track("Message Reply Click");a.preventDefault()})})})(this);
instrument_function(function(a){$(function(){function d(){$("form.term").term_form().on("submit",function(a){a.preventDefault();a=$(this);k.set_params(a.serialize_without_blank())&&track("Message Inbox Search",{selected_project:$.trim($("#content .projects .title b").text()),term:a.find("input#term").val()})})}function c(a){h=$("#preview");h.html(render("message_threads/_show",a,"messages/_show")).data("data",a);g=$(f);i=g.find(".messages_container");var b=$("form.reply"),c=$(f).find(".respond_shortcut");
$("#message_threads").removeClass("full_width");setTimeout(function(){$("#preview_container").fadeIn(function(){e();$("#content ul.threads").height()>h.height()&&$("#preview").simple_sticky_bar();if(a.messages.length>1){var b=$(f+" ul.messages li:last-child .message");i.scrollTo(b)}})},250);i.scroll(function(){var a=$(this),d=b.position()||{top:0};a.height()-d.top+220<=0?c.removeClass("hidden"):c.addClass("hidden")}).scroll();track("Message Thread View")}function b(){var a={};$(".dropdown a.selected").each(function(){var b=
$(this);_.extend(a,URI(b.attr("href")).query(!0))});k.set_params($.param(a),!0)}function e(){if(h.length){var a=h.get(0).offsetTop-$(window).scrollTop(),b=$(window).height(),c=g.find(".backing").height();a<0&&(a=0);a=b-c-a;i.height(a);h.css("margin-bottom",$(window).height()-a-60);g.trigger("shifted");$(f+" ul.messages").height()>=i.height()?$(f+" .respond").removeClass("hidden"):$(f+" .respond").addClass("hidden")}}if($("#message_threads_index, #message_threads_show").length){var f=".NS_message_threads__show",
g=$(f),h=$([]),i=$([]);track("Message Inbox View");var k=new Location($.parseEscapedJSON(a.threads),$("#content"),"message_threads/_index",{url:$("#content").data("message_threads_url"),mobius_on:"message_threads"});k.on_change(function(a){var b=$("#content ul.threads"),c=!(!this.get("params")||!this.get("params.debug"));_.each(a.message_threads||this.get("message_threads"),function(a){c||delete a.debug;a.id&&b.append(render("message_threads/_row",a))})});k.change();d();k.on_change_params(d);$(document).on("change",
"form.params",function(a){a.preventDefault();a=$(this);k.set_params(a.serialize_without_blank())});$(document).on("click","li.thread > a",function(a){var b=$(this),c=b.data("api_url");c&&($.api_ajax({url:oauth_url(c),dataType:"json",success:function(a){$("li.thread").removeClass("selected");b.closest("li.thread").addClass("selected");History.pushState({selected_thread:a},null,typeof current_project!=="undefined"?a.urls.web.project_message_thread:a.urls.web.message_thread)}}),a.preventDefault())});
$(window).on("statechange",function(){var a=History.getState().data;a&&typeof a.selected_thread!=="undefined"&&c(a.selected_thread)});window.selected_thread&&c($.parseEscapedJSON(window.selected_thread));k.get("params.flag")&&$(".message_"+k.get("params.flag")+" .report-spam a").click();$(document).on("click","#content .dropdown a",function(a){var c=$(this),d=c.closest(".dropdown"),e=d.closest(".ksr-dropdown");d.find("a").removeClass("selected");c.addClass("selected");b();e.hasClass("projects")?track("Message Inbox Project Filter",
{selected_project:$.trim($(this).text())}):e.hasClass("views")&&track("Message Inbox Views Filter",{selected_project:$.trim($("#content .projects .title b").text()),selected_view:$.trim($(this).text())});a.preventDefault()});$(document).on("scroll",e);$(document).on("focus",f+" #message_body",function(){i.animate({scrollTop:$("ul.messages").height()+60},1200,"easeOutExpo")});$(document).add(window).resize(function(){e()});a.threads=k}})})(this);
instrument_function(function(){$(function(){$(document).on("submit","form#new_message",function(a){a.preventDefault();var d=$(this);d.hasClass("disabled")||$.ajax({type:d.attr("method"),url:d.attr("action"),dataType:"json",data:d.serialize(),success:function(a){a.error?d.find("textarea").closest("fieldset").addClass("field_with_errors"):(d.trigger("message_sent"),KsrJSON.parse_response(a,d.closest(".ajax-container")))},complete:function(){d.removeClass("disabled")}})});if(History.emulated.pushState)$("a.messages_nav").on("click",
function(a){URI(document.referrer).path()==="/messages"&&(history.back(),a.preventDefault())});$(document).on("click","#mark_as_spam_dialog a.spam",function(a){a.preventDefault();a=$(this);$.post($(this).attr("href"),null,null,"json");$(this).trigger("close.modal_dialog");growl({success:"Thanks, we'll check it out"});$('a[href^="/messages/'+a.attr("id")+'/report"]').replaceWith("Thanks for reporting this. We'll check it out")})})})(this);
instrument_function(function(){(function(a){a(document).on("click",".message .report-spam a",function(d){d.preventDefault();var c=a(this),b=this,e=c.closest(".message");d=e.clone();var f=a('<p class="flagged_message"><em class="spam_reported"></em></p>');d.find("span.report-spam").remove();a.modal_confirm(function(){e.find(".body").before(f);return KsrJSON.get(c.data("url"),"post",f.find("em"),b)},{message:d.html(),confirm_text:"Report message as spam",title:"Report this message to Kickstarter"})});
a(document).on("ksr_json:complete",".message .spam_reported",function(d,c){var b=a(this).closest(".message"),e=b.find(".report-spam");e.hide();c.status===200&&!e.is(".admin")&&b.find(".body").hide()})})(jQuery)})(this);
instrument_function(function(){$(function(){function a(){$("#hero").height($(window).height());$("#video_container video").css({"margin-left":-Math.round($("#video_container video").width()/2),"margin-top":-Math.round($("#video_container video").height()/2)});$("#video_container img").css({"margin-left":-Math.round($("#video_container img").width()/2),"margin-top":-Math.round($("#video_container img").height()/2)})}var d=$("#mobile_index");if(d.length){var c=$("#email_or_phone_message",d),b=!1;$(window).resize(function(){a()});
$(document).on("submit","#send_mobile_link_form",function(a){a.preventDefault();var d=$(this);b||(b=!0,$.ajax({type:"post",url:"/mobile/send_link",dataType:"json",data:{email_or_phone:d.find("#email_or_phone").val()},success:function(a){a.success?(c.removeClass("error").html(a.success),d.remove()):a.error&&c.addClass("error").html(a.error)},complete:function(){b=!1}}))});$(document).on("closed.modal_dialog","#send_mobile_link_dialog",function(a){a.preventDefault();$("#send_mobile_link_form",d).length||
c.html("You should already have a link from us &mdash; check your email or your text messages!")});setTimeout(function(){a();$("body").removeClass("loading")},100)}})})(this);
instrument_function(function(){$(function(){function a(c){var b=c.data("frame")||0,d=c.data("timeout");c.data("animating")&&(c.find("img").hide(),c.find("img").eq(b).show(),c.data("frame",b<2?b+1:0),d&&clearTimeout(d),d=setTimeout(function(){a(c)},200),c.data("timeout",d))}var d=$("body#newsletters_index");d.length&&d.find("li.newsletter-item").livequery("mouseenter",function(){$(this).data("animating",!0);a($(this))}).livequery("mouseleave",function(){$(this).data("animating",!1)})})})(this);
instrument_function(function(){$(function(){$(document).on("submit","ol.admin-notes form",function(){var a=$("#admin-menu .note_count"),d;if(d=a.text().match(/^(\d+)/))d=parseInt(d[1],10),a.text(d+1+" notes")})})})(this);
instrument_function(function(){$(function(){function a(){c.scrollTop()<b.position().top+b.height()-c.height()-e.height()?$(".checkout_actions").addClass("shadow"):$(".checkout_actions").removeClass("shadow")}var d=$(".checkout_actions_wrap"),c=$(window),b=$("#main"),e=$(".checkout_actions_prop");d.length&&(a(),$(window).scroll(function(){a()}),$(window).resize(function(){a()}),$(document).on("shifted",function(){a()}))})})(this);
instrument_function(function(){$(function(){function a(a,c){return isNaN(a)?"$0.00":"$"+formatters.format_number(a*c,a*c<2?2:0)+" USD"}$(".pledges__checkout_amount input#backing_amount").livequery(function(){function d(){c.val()?(e.text(a(parseFloat(c.val()),parseFloat(b.data("rate")))),b.css("visibility","visible"),b.addClass("show")):(b.css("visibility","hidden"),b.removeClass("show"))}var c=$(this),b=c.closest(".pledges__checkout_amount").find(".fx-estimate"),e=b.find("span");c.on("input cut paste keyup",
function(){d()});d()})})})(this);
instrument_function(function(){$(function(){$(".pledges__checkout_faqs").length&&($(document).on("click",".pledges__checkout_faqs .faq-question a",function(a){var d=$(this).closest(".faq");d.toggleClass("expanded");track("Toggled Pledge Checkout FAQ",{pledge_faq_question:d.find(".question").text()});a.preventDefault()}),$("body#pledges_edit").length&&setTimeout(function(){$(".faqs li#change_my_pledge_amount").addClass("expanded");$(".faqs li#change_my_reward_selection").addClass("expanded");$(".faqs li#cancel_my_pledge").length&&
$(".faqs li#cancel_my_pledge").addClass("expanded")},800))})})(this);
instrument_function(function(){$(function(){var a=$(".pledges__checkout_rewards");$(document).on("click",".pledges__checkout_rewards .toggle_reward_description",function(){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();return!1});a.length&&(a.on("change",".reward input.radio",function(){var d=$(this);d=d.parent().offset().top+d.parent().outerHeight();var c=$(".checkout_actions_wrap").offset().top,b=$(".reward input.radio:checked").closest(".reward"),
e=parseInt($(".text#backing_amount").val().replace(/[^0-9\.]/,""),10),f=b.data("reward")||current_project.get("rewards")[0];if(isNaN(e))e=f.minimum;$(".reward",a).removeClass("selected");b.addClass("selected");current_checkout.set({amount:e,reward:f});$(".checkout_actions").hasClass("animated")||($(".checkout_actions_wrap").sticky_bar({parent:$("body"),attach_to:"bottom"}),$(".checkout_actions").addClass("animated"));c<d&&$(window).scrollTop(window.pageYOffset+d-c)}),$(".reward input.radio:checked").trigger("change"),
$(".checkout_rewards .reward:not(.disabled)").mouseenter(function(){$(this).addClass("hovering")}).mouseleave(function(){$(this).removeClass("hovering")}),$(document).on("click",".checkout_rewards .reward:not(.disabled)",function(a){a.target.type!=="radio"&&$(this).children("input.radio").prop("checked",!0).trigger("change")}))})})(this);
instrument_function(function(){$(function(){function a(a){var b=a.closest("form").find(d);a=a.find(".shipping_option");var e=b.find(".shipping_setting");b=b.find(".shipping_message");a.length?(b.html(a.clone()),e.attr("disabled",!1),e.val()==="1"&&b.addClass("backer_domestic")):(b.empty(),e.attr("disabled",!0))}var d=".NS_pledges__checkout_shipping";$(d).find(".no-js input").attr("disabled",!0);$(document).on("change",".pledges__checkout_rewards .reward input.radio",function(){var c=$(".reward input.radio:checked").closest(".reward");
a(c)});a($(".reward input.radio:checked").closest(".reward"));$(".modal_dialog:visible "+d).livequery(function(){a($(this).closest(".modal_dialog").find(".reward.shipping.visible"))});$(document).on("click",d+" .shipping_message a",function(a){var b=$(this),e=b.closest(d).find(".shipping_setting"),f=b.closest(".shipping_message");b=b.closest("form").find(".pledges__checkout_rewards");a.preventDefault();b.hasClass("modal")?b.find(".reward.visible"):b.find(".reward.selected");e.val()==="1"?(f.removeClass("backer_domestic"),
e.val("0"),current_checkout.set("domestic",!1)):(f.addClass("backer_domestic"),e.val("1"),current_checkout.set("domestic",!0))})})})(this);instrument_function(function(){$(function(){$(document).on("click",".pledges__checkout_summary .toggle_reward_description",function(a){$(this).closest(".description.short").hide();$(this).parent().parent().find(".description.full").show();a.preventDefault()})})})(this);
instrument_function(function(){$(function(){$(".NS_pledges__form #backing_amount").on("blur",function(){current_checkout.set({amount:parseInt($(this).val().replace(/[^0-9\.]/,""),10)})})})})(this);
instrument_function(function(){$(function(){$(".NS_pledges__no_ship").livequery(function(){var a=$(this),d=$("form.NS_pledges__form, form.manage_pledge"),c=d.find(".fields_and_submit"),b=d.closest(".modal_dialog"),e=b.data("modal_dialog");a.find("a.override").click(function(a){a.preventDefault();$(this).trigger("close");d.data("override",!0);d.removeClass("submitting-non-ajax");d.find(".shipping_option.domestic input[type=hidden]").val("1");d.submit()});a.find("a.button_green").click(function(d){d.preventDefault();
$(this).trigger("close");e&&(a.hide(),c.show(),b.find("h1").show())})})})})(this);
instrument_function(function(){$(function(){var a=$("body#pledges_edit"),d=$("body#pledges_edit form.manage_pledge");$(".radio:checked").attr("id");a.length&&d.length&&($(document).on("submit","body#pledges_edit form.manage_pledge",function(a){var b=$("body#pledges_edit form input.radio:checked"),d=parseFloat(b.attr("alt"));b=b.attr("alt");var f=$("body#pledges_edit form input#backing_amount").val();d===0?$("#confirm-adjust-reward-amount").html("No reward"):$("#confirm-adjust-reward-amount").html("Reward: "+
b);$("#confirm-adjust-pledge-amount").html("Pledge: "+formatters.currency_symbol(current_project.get("currency"))+f);$("#confirm-adjust-pledge").modal_dialog();a.preventDefault()}),a.on("click",".faq-question a",function(){var a=$(this).closest(".faq");track("Toggled Pledge Edit FAQ",{pledge_faq_question:a.find(".question").text()})}),$(".flash-error").livequery(function(){var a,b=parseInt($(".text#backing_amount").attr("value").replace(/,/,""),10);a=typeof $(".radio:checked").attr("alt")!=="undefined"?
parseInt($(".radio:checked").attr("alt").replace(/,/,""),10):null;track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(b,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),$(".pledges__checkout_rewards .checkout_rewards .radio").change("click",function(){$(this).attr("id")}),$(document).on("click","body#pledges_edit .confirm-yes",function(){d.removeClass("submitting-non-ajax");
$(document).off("submit","body#pledges_edit form.manage_pledge");d.submit();return!1}),$(document).on("click","a.cancel",function(a){a.preventDefault();$(this).trigger("close.modal_dialog")}),$(document).on("before_close.modal_dialog",function(){d.removeClass("submitting-non-ajax")}))})})(this);
instrument_function(function(){$(function(){$("body#pledges_new").length&&($("a.show_all_rewards").click(function(a){$(this).parents(".checkout_rewards").find("li:hidden").show();$(this).parents(".checkout_rewards").removeClass("clicked_reward");$(this).parents(".show_all").hide();a.preventDefault();$(document).trigger("shifted");track("Expanded Rewards")}),$(".flash-error").livequery(function(){var a,d=parseInt($(".text#backing_amount").attr("value").replace(/[^0-9\.]/,""),10);a=typeof $(".radio:checked").attr("alt")!==
"undefined"?parseInt($(".radio:checked").attr("alt").replace(/[^0-9\.]/,""),10):null;track("Errored Pledge Selection",{pledge_tier_amount:parseInt(a,10),pledge_error_text:$(this).text(),pledge_input_amount:parseInt(d,10)})}),$(document).on("click",".amzn-payments",function(){track("Clicked Amazon Payments Logo")}),location.search.indexOf("edit_from_interstitial=shipping")!==-1?track("Clicked Edit Shipping",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}):
location.search.indexOf("edit_from_interstitial=amount")!==-1&&track("Clicked Edit Amount",{shipping_applicable:$(".radio:checked").parent().data("shipping_applicable"),project_country:current_project.get("country")}))})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_post_likes__button button",function(a){a.preventDefault();a=$(this).closest("form");$.ajax({url:a.attr("action"),dataType:"json",type:"POST",success:function(a){if(a.modal){var c=$.create_modal_dialog("",a.data);c.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(c.find(".modal_dialog_body")[0])}a.post&&(Post.find(a.post.id)||new Post({id:a.post.id})).set(a.post)}})})})})(this);
instrument_function(function(){$(function(){$(document).on("click",".NS_post_likes__namepile a#full_namepile",function(a){a.preventDefault();var d=$(this);$.ajax({url:d.attr("href"),dataType:"json",type:"GET",success:function(a){a=_.map(a.users,function(a){return render_raw('<a href="{{url}}">{{name}}</a>',a)});a=formatters.to_sentence(a);d.parent().html(a+" like this update.")}})})})})(this);
instrument_function(function(){$(function(){var a=$("body#posts_edit"),d;a.length&&($(document).on("click",".wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"post_edit_body"})}),a.find(".notification_toggle a").on("click",function(){a.find(".radio_message").removeClass("visible");a.find("."+$(this).attr("data-backers")+"_message").addClass("visible")}),a.find(".ksr_toggle a.all_backers").on("click",function(){d=a.find(".select_backers_message input:checkbox:not(:checked)");
d.prop("checked",!0);track("Update Notifications Toggle",{toggled_to:"all_backers"})}),a.find(".ksr_toggle a.select_backers").on("click",function(){d&&d.prop("checked",!1);track("Update Notifications Toggle",{toggled_to:"select_tiers"})}),a.find(".ksr_toggle a.public").on("click",function(){a.find("#post_public").val("1");track("Update Visibility Toggle",{toggled_to:"anyone"})}),a.find(".ksr_toggle a.private").on("click",function(){a.find("#post_public").val("0");track("Update Visibility Toggle",
{toggled_to:"backers_only"})}),a.find(".email_notifications input.checkbox").on("change",function(){track("Update Tier Notification Change",{toggled_to:$(this).is(":checked")?"checked":"unchecked",selected_reward_id:$(this).data("reward-id"),selected_reward_minimum:$(this).data("reward-minimum")})}))})})(this);
instrument_function(function(){$(function(){var a=$(".NS-products__autocomplete"),d=a.find(".product_autocomplete"),c=d.closest(".field"),b=d.data("search-url"),e=d.data("create-url");a.length&&(c.livesearch_selector({url:b,serialize:d,process_data:function(a){return a+"&service="+d.data("service")},process_results:function(a){return _.map(a,function(a){return[a.name,a.service_id,a]})},cancel_copy:""}),c.on("livesearch:selected",a,function(b,c){var h=c[2],i=$('<div class="spinner" />').spin({lines:8,
length:4,width:2,radius:5,speed:2,color:"#000000"});h&&$.ajax({method:"POST",url:e,data:{service:d.data("service"),service_id:h.service_id},beforeSend:function(){d.before(i)},complete:function(){i.remove()},success:function(b){a.find("#product_id").val(b.product.id);d.trigger("product:selected",b.product)}})}),c.on("livesearch_selector:unselect",a,function(){c.trigger("product:unselected")}))})})(this);
instrument_function(function(){$(function(){var a=$(".NS-projects__admin_keyboard_control");if(a.length)$(document).on("keydown",function(d){if(d.ctrlKey){var c=a.find("#project_moderated_state"),b=a.find("form"),e="";switch(d.which){case 82:e="recommended";break;case 80:e="promising";break;case 65:e="acceptable";break;case 84:e="tolerated";break;default:return}c.val(e);$.ajax({url:b.attr("action"),type:b.attr("method"),dataType:"json",data:b.serialize(),success:function(){growl({info:e})}});$("#admin-nav-wrap span.moderation_status").text(e.substring(0,
3))}})})})(this);instrument_function(function(){$(function(){var a=$("#project-issues");a.hide();$("#report-issue-link").on("click",function(d){d.preventDefault();$(this).hide();a.slideDown()})})})(this);
instrument_function(function(){$(function(){var a=$(".NS_projects__creator_nav");a.length&&(a.find(".close").click(function(){var a=$("body");a.hasClass("creator_nav_visible")?(a.removeClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"hidden"})):(a.addClass("creator_nav_visible"),track("Creator Nav Toggle",{toggled_to:"visible"}))}),track_links("#creator_nav a.track","Creator Nav Link Click"))})})(this);
instrument_function(function(){$(function(){if($(".NS_projects__edit_submission").length)$(document).on("click",".NS_projects__edit_submission a.reply",function(a){var d=$(".NS_projects__edit_submission .reply_container form");a.preventDefault();d.is(":visible")?d.slideUp(300,"easeOutQuad"):d.slideDown(300,"easeOutQuad",function(){$(this).find("textarea").focus()});return!1})})})(this);
instrument_function(function(){$(function(){function a(){$("ul.faqs li.faq:not(.deleted) input.position").each(function(a,c){$(c).val(a+1)})}var d=$("#project_faqs_edit"),c=$([]);if(d.length){if(window.location.pathname.match(/\/faqs$/))window.location.hash="project-faqs";c=$("#faq-template").children().clone();d.on("click","form .link_to_new_question",function(){var b=c.clone_form_template();b.find(".delete").val(0);b.removeClass("hidden").appendTo("#project-faqs ul.faqs");a();return!1});d.on("click",
".faq .delete",function(a){a.preventDefault();a=$(this).closest("li.faq");a.find("input.delete").val(1);a.addClass("deleted").fadeOut("slow");return!1});$("#project-faqs ul.faqs",d).sortable({containment:"#project_faqs_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"li.faq",start:function(a,c){$(".project-faq-placeholder").css("height",c.item.height()+"px");c.item.addClass("reordering")},stop:function(a,c){c.item.removeClass("reordering")},update:a})}})})(this);
instrument_function(function(){$(function(){var a=$(".share-container a.facebook");a.click(function(d){window.open(a.attr("href"),"Facebook","width=600px,height=450px");d.preventDefault()})})})(this);
instrument_function(function(){$(function(){$(".NS-projects-rightcol-rewards a.pledge").on("click",function(a){if(typeof current_user!=="undefined"){var d=current_user.get("id")===current_project.get("creator.id");if(current_project.get("is_backing")||d)a.preventDefault(),a.stopPropagation()}});$(".NS-projects-rightcol-rewards a.pledge").on("click",function(a){current_project.get("state")!=="live"&&(a.preventDefault(),a.stopPropagation())})})})(this);
instrument_function(function(){$(function(){var a=$(".NS_projects__project_share");a.length&&($(document).on("fb:loaded",function(){FB.api("/"+URI.encode(window.location.href),function(d){d=window.formatters.format_number(d.shares||d.likes||0,0);a.find(".facebook .count").text(d)})}),a.find(".facebook a").click(function(a){a.preventDefault();a=$(this).attr("href");FB.ui({method:"feed",link:a},function(a){a&&a.post_id?(growl({success:"Facebook post was published!"}),mixpanel.track("Facebook post",
_.extend(mixpanel_project(current_project),{facebook_post_id:a.post_id}))):growl({notice:"Facebook post was not published!"})})}))})})(this);
instrument_function(function(){$(function(){function a(a){c.get(0)!==d.get(0)&&d.remove();c.find(".flash-error").remove();c.show();a&&c.prepend('<div class="flash-error">'+a+"</div>");d=c}var d,c=$([]),b=!1;$(".projects__verify_identity").livequery(function(){d=$(this).find("form");d.prop("onsubmit",null);c=d;$(".projects__verify_identity form :input:not(.optional)").validates_presence();$(".projects__verify_identity #person_national_id").validates_format().validates_luhn_check()});$(document).on("submit.kba",
".projects__verify_identity form",function(e){e.preventDefault();var f=$(this),g;f.validate()&&!b&&(g=$('<div class="spinner" />').spin({lines:8,length:4,width:2,radius:5,speed:2,color:"#ffffff"}),f.after(g),b=$.ajax({url:f.attr("action"),type:f.attr("method"),data:f.serialize(),dataType:"json",complete:function(){g.remove();b=!1},error:function(){growl({error:"We apologize, but it looks like something's gone wrong, please try again later."})},success:function(b){b.questions?(b.questions.form_url=
b.location,b.questions.client_token=f.find("input#client").val(),d=$(render("projects/_verify_identity_questions",b)),c.get(0)===f.get(0)?(f.hide(),f.after(d)):f.replaceWith(d),d.find("div.questions").serialScroll({items:"li.question",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"}).on("notify.serialScroll",function(a,b){var c=$(this).find("li.question").eq(b).outerHeight();$(this).height(c)}).trigger("notify",[0]),d.find("a.next").on("click",function(a){var b=$(this);b.closest("li.question").find(":checked").length&&
(b.is(".submit")?b.submit():d.find("div.questions").trigger("next"));a.preventDefault()}),d.find("a.next:last").each(function(){$(this).text("Submit").addClass("submit");e.preventDefault()})):b.retry===!1&&b.html?f.closest("#account-setup-panel").html(b.html).trigger("project_edit:update_completion"):a(b.error||"")}}))})})})(this);
instrument_function(function(){$(function(){function a(a){window.top.postMessage(JSON.stringify($.extend({account_panel:!0,completed:$(".needs_verification").length===0,height:c.height()+20},a)),"*")}var d=$("body.projects_account"),c=$("#projects_account");d.length&&(c.on("resize ksr_json:complete project_edit:update_completion",function(){a()}),$(".needs_verification").livequery(function(){a()},function(){a()}),c.on("project_edit:update_preview",function(){a({update_preview:!0})}),$(document).on("click",
"#projects_account a.zendesk",function(){a({open_zendesk:!0})}),$(document).on("click","#projects_account a.document-form-link",function(b){b.preventDefault();a({open_jumio:!0,url:$(this).attr("href")})}),setTimeout(a,500))})})(this);
instrument_function(function(){$(function(){var a=$("#country-select");a.livequery(function(){var d=$(this);d.find("a.button_green").on("click",function(a){d.find("form").submit();a.preventDefault()});d.find("select#country").on("change",function(){var c=$(this).val().toLowerCase();d.find(".country").hide();d.find("."+c).show();a.removeClass().addClass(c)}).trigger("change")})})})(this);
instrument_function(function(){$(function(){$("body#projects_dashboard").length&&(function(){function a(){var a=$("#stats-funding-graph .graph");c=[];d=[{data:funding_graph_data,color:"#55a4f2",points:{show:!0,fill:!0},lines:{show:!0,fill:0.35},hoverable:!0,yaxis:1},{data:funding_graph_options.goal_line_data,color:"rgba(135,196,66,1)",points:{show:!1,fill:!1},lines:{show:!0,lineWidth:1},shadowSize:0,hoverable:!1},{data:[0,0],yaxis:2}];c={xaxis:{mode:"time"},yaxis:{min:0,max:funding_graph_options.max_y,
tickFormatter:function(a,b){var c=funding_graph_options.currency_symbol+formatters.format_number(a.toFixed(b.tickDecimals),0);a===funding_graph_options.goal&&(c='<span class="goal_style">'+c+"</span>");return c}},y2axis:{min:0,max:funding_graph_options.percent_y,tickFormatter:function(a,b){var c=formatters.format_number(a.toFixed(b.tickDecimals)*100,0)+"%";a===1&&(c='<span class="goal_style">'+c+"</span>");return c}},grid:{show:!0,hoverable:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",
color:"#ccc",mouseActiveRadius:15,markings:function(a){var b=[],c=a.yaxis.ticks[1].v,d;for(d=a.yaxis.min;d<a.yaxis.max;d+=c*2)b.push({yaxis:{from:d,to:d+c},color:"#fff"});return b}}};$.plot(a,d,c);$("#stats-funding-graph .graph").on("plothover",function(a,c,d){if(d){var e=funding_graph_data[d.dataIndex][3],k;if(k=e?e.date_label:null)a=funding_graph_data[d.dataIndex][1],c=e.backers_count,e=e.percent_raised,b.find(".content").html('<span class="num date">'+k+'</span><span class="num">'+funding_graph_options.currency_symbol+
formatters.format_number(a,0)+'</span> raised<br/><span class="num">'+e+'%</span> funded<br/><span class="num">'+formatters.format_number(c,0)+"</span> backers"),a=b.width(),c=b.height(),k=parseInt(b.css("padding-right").replace("px",""),10),b.css({left:d.pageX-a/2-(k-1),top:d.pageY-c-35}),b.find(".nipple").css({left:a/2+5,top:c+12,position:"absolute"}),b.fadeIn("fast")}})}if($("#stats-funding-graph .graph_container").length){var d,c,b=$("#stats-funding-graph .bubble");(function(){a();$("#stats-funding-graph .bubble").mouseenter(function(){b.fadeOut("fast")});
$("#stats-funding-graph .graph_container").mouseleave(function(){b.fadeOut("fast")})})()}}(),function(){if($("#stats-pledge-distribution-graph .graph_container").length){var a=$("#stats-pledge-distribution-graph .bubble");(function(){var d=[{data:reward_distribution_data,color:"#b8dc90"}],c={bars:{show:!0,align:"center"},xaxis:{ticks:reward_distribution_options.tick_labels,autoscaleMargin:0.02},yaxis:{min:0},grid:{hoverable:!0,borderWidth:0.5,borderColor:"#fff",color:"#999"}},b;b=$("#stats-pledge-distribution-graph .graph");
b.off("plothover");$.plot(b,d,c);b.on("plothover",function(b,c,d){var h,i,k;d&&(b=d.datapoint[1],h=reward_distribution_data[d.dataIndex][3],c=reward_distribution_data[d.dataIndex][4],i=formatters.format_number(Math.round(b/reward_distribution_options.backers_count*100),0),k=formatters.format_number(Math.round(c/reward_distribution_options.money_raised*100),0),i<1&&(i=" < 1"),k<1&&(k=" < 1"),h=h===0?'<span class="num">No Reward Chosen</span>':'<span class="num">'+funding_graph_options.currency_symbol+
h+"</span> Reward",a.find(".content").html(h+'<br/><span class="num">'+formatters.format_number(b,0)+"</span> "+(b===1?"Backer":"Backers")+" ("+i+'% of backers) <br/><span class="num">'+funding_graph_options.currency_symbol+formatters.format_number(c,0)+"</span> Pledged ("+k+"% of money raised)"),b=a.width(),c=a.height(),i=parseInt(a.css("padding-right").replace("px",""),10),a.css({left:d.pageX-b/2-(i-1),top:d.pageY-c-35}),a.find(".nipple").css({left:b/2+5,top:c+12,position:"absolute"}),a.fadeIn("fast"))});
$("#stats-pledge-distribution-graph .bubble").mouseenter(function(){a.fadeOut("fast")});$("#stats-pledge-distribution-graph .graph_container").mouseleave(function(){a.fadeOut("fast")})})()}}(jQuery),function(){var a=$("#projects_dashboard #activity").find(".mobius").data("mobius");a.current_page=0;$(document).on("click","#projects_dashboard .activity-filters a",function(d){var c=$(this);c.closest(".activity-filters").find("a").removeClass("current");c.addClass("current");$.ajax({type:"get",dataType:"html",
url:c.attr("href"),success:function(b){b=$(b).find(".mobius").children();$("#activity .mobius").html(b).trigger("mobius:loaded_page",[1,b]);a.clear_extra_params();a.add_param("cat",c.data("filter"));a.current_page=1}});d.preventDefault()})}(),function(){if($("#stats-referrer-type-pie .graph_container").length){var a={series:{pie:{show:!0,radius:1,label:{radius:0.5,formatter:function(a,c){return'<div class="pieLabel">'+a+"<br/><b>"+Math.round(c.percent)+"%</b></div>"}}}},legend:{show:!0,labelBoxBorderColor:"white",
labelFormatter:function(a,c){return'<div class="pieLabel" style="color:'+c.color+'" >'+a+": <b>"+Math.round(c.percent)+"%</b></div>"},container:$("#stats-referrer-type-pie .pie_label_container")}},d=[{label:"via Kickstarter",data:parseInt(referrer_type_data.internal,10),color:"#B8DC90"},{label:"via External",data:parseInt(referrer_type_data.external,10),color:"#999"}],c=$("#stats-referrer-type-pie .pledges .graph");$.plot(c,d,a)}}(jQuery),function(){if($("#stats-video .graph_container").length){var a=
{series:{bars:{show:!0,barWidth:0.85,horizontal:!0}},xaxis:{min:0,max:Math.max(parseInt(video_stats_data.internal_starts,10),parseInt(video_stats_data.external_starts,10))*1.05,tickFormatter:function(a){return formatters.format_number(a,0)}},yaxis:{show:!1,min:-0.15,max:2},legend:{show:!0,labelBoxBorderColor:"white",noColumns:2,labelFormatter:function(a,c){return'<div class="label_text" style="color:'+c.color+'">'+a+": "+formatters.format_number(c.data[0][0],0)+"</b></div>"},container:$("#stats-video .label_container")},
grid:{show:!0,tickColor:"rgba(128,152,176,0.3)",borderWidth:0.5,borderColor:"#ccc",color:"#ccc"}},d=[{label:"Kickstarter",data:[[parseInt(video_stats_data.internal_starts,10),1]],color:"#91C2F2"},{label:"Off-site",data:[[parseInt(video_stats_data.external_starts,10),0]],color:"#ec9b23"}],c=$("#stats-video .video_plays .graph");$.plot(c,d,a)}}(jQuery))})})(this);
instrument_function(function(a){$(function(){function d(){t=function(){}}function c(a){var b=a.find(":input.required"),c=!0,d=!1;if($("body").is(".rejected, .appealed")&&!a.children().length)return!0;b.each(function(){$(this).val()||(c=!1)});a.find(".asset_upload.required:not(.has_file)").length&&(c=!1);if(a.is("#the-basics-panel")&&(d=$("#project_goal").val(),!d||!d.match(/[1-9]/)))c=!1;a.is("#rewards-panel")&&(a.find(".reward .summary").length||(c=!1));a.is("#account-setup-panel")&&(c=a.data("completed"));
a.is("#submission-panel")&&(c=!!a.find(".accepted").length);return c}function b(){var a=!0;$("#steps-nav a").each(function(){var b=$(this),d=$(b.attr("href")+"-panel");c(d)?b.addClass("completed").removeClass("errored"):(b.removeClass("completed"),a=!1)});a?($("#project-edit-nav .submit a").addClass("enabled"),$("body").is(".unlaunched_country")||$("#project-edit-nav .launch a").addClass("enabled")):($("#project-edit-nav .submit a").removeClass("enabled"),$("#project-edit-nav .launch a").removeClass("enabled"))}
function e(){var a=$("#forms .flash-error");$("#steps-nav a").removeClass("errored");if(a.length)return a.find("li").each(function(){track("Project Edit Error",{error_message:$(this).text()})}),a.closest("li.panel").each(function(){var a=$(this).data("panel_id");$('#steps-nav a[href="#'+a+'"]').addClass("errored")}),!0;return!1}function f(a){var b=!1,c=p.find("input.photo, input.video, input.avatar");c.each(function(){$(this).data("uploading")&&(b=!0)});b?(j.modal_dialog(),j.one("abandon",function(){a();
c.trigger("ksr_file_upload:cancel")})):a();return b}function g(){var a=$("#project-edit-nav .preview a").attr("href");a&&$.ajax({type:"get",url:a,dataType:"json",success:function(a){i.find("#preview .project-content").html(a.content);i.find("#preview #project-header").html(a.running_board);i.find("#project-card-preview").html(a.card);i.find("#submission-sidebar-help").html(a.submission_sidebar)}})}function h(a){if(!a.is(".disabled")){var b=a.text();a.addClass("disabled");$.ajax({url:a.attr("href"),
type:"put",dataType:"json",success:function(b){b.share_token?(a.closest("#share_preview_container").removeClass("no_token").addClass("has_token"),$("#sharing_enabled input.url").val(b.url),$(".project_preview_comments").addClass("has_token")):(a.closest("#share_preview_container").removeClass("has_token").addClass("no_token"),$(".project_preview_comments").removeClass("has_token"),$(".NS_comments__comment").length||$(".project_preview_comments").removeClass("has_comments"))},complete:function(){a.removeClass("disabled");
a.text(b)}})}}var i=$("#projects_edit"),k,l,p,j=$("#confirm-abandon-upload"),q=$("#country",i).val(),t=function(){};i.length&&($(window).on("message",function(a){try{var c=JSON.parse(a.originalEvent.data),d=$("#account-setup-panel").data("completed");c.account_panel&&($("#account-setup-panel").data("completed",c.completed),$("#account-setup-panel iframe").height(c.height));c.completed!==d&&b();c.update_preview&&$(window).trigger("project_edit:update_preview");c.open_zendesk&&Zenbox.render();c.open_jumio&&
$.open_remote_modal_dialog(c.url,{id:"jumio-modal",class_name:"identity-document",do_not_cache:!0,prevent_close:!0});if(c.close_jumio_modal){var e=$("#jumio-modal");e.trigger("allow_close.modal_dialog");e.trigger("close.modal_dialog")}if(c.growl)a={},a[c.growl_type]=c.message,growl(a)}catch(f){}}),function(){function c(a){window.history&&window.history.replaceState?window.history.replaceState(null,null,a):window.location.replace(a)}function g(a){if($(".form-tools").is(":visible"))return f(function(){B.modal_dialog();
B.off("saving").one("saving",function(){t=function(){a();B.off("canceling");d()}});B.off("canceling").one("canceling",function(){a();B.off("canceling");d()})}),!0;return!1}function h(a){var b=i.find("#steps-nav > li:eq("+a+") > a"),d=$("#running-board > .help-panels");if(!b.is(".disabled")){if(g(function(){h(a)}))return!1;p=$("ol.form-panels li.panel:eq("+a+")");p.trigger("resize");p.is("#submission-panel")&&function(){var a=p.find(".read_messages_path").text();a&&$.ajax({type:"put",url:a})}();$(window).scrollTop()>
75&&$(window).scrollTop(60);q.trigger("goto",[a]);A.show();D.show();Q.hide();$("#project-edit-nav a").removeClass("selected").removeClass("selected_last");b.addClass("selected");a===0&&D.hide();a===r-1&&(A.hide(),Q.show());d.height(d.height());d.children(".panel").hide();$("#"+p.data("panel_id")+"-help").fadeIn();d.css("height","auto");$("#sidebar > .sidebar-help-panels > .panel").hide();$("#"+p.data("panel_id")+"-sidebar-help").fadeIn();i.find(".tools").show();c("#"+p.data("panel_id"));m=a;$("body").removeClass("confirm_preview");
return!0}}function k(a,b){if(g(function(){k(a,b)}))return!1;var c=$(".content-toggle > "+a.data("for")),d=$("#project-edit-nav a.selected");if(c.is(":visible"))c.css("height","100%"),c.css("min-height","0%"),c.animate({height:"0%"},function(){c.hide()}),h($("#steps-nav li:has(a.selected_last)").index());else if(!b||b())c.css("height","0%"),c.css("min-height","0%"),c.show(),c.animate({height:"100%"},function(){c.css("height","auto");c.css("min-height","100%")}),i.find(".tools").hide(),$(window).scrollTop()>
75&&$(window).scrollTop(60),p.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).hide()}),a.addClass("selected"),d.is(".tab")||d.addClass("selected_last").removeClass("selected");return!0}var l=i.find("#main"),q=l.find(".window"),m=0,r=l.find("ol.form-panels li.panel").length,A=i.find("li.next"),D=i.find("li.back"),Q=i.find("li#submit_for_review"),B=$("#confirm-abandon");p=$("ol.form-panels li.panel:eq("+m+")");
B.on("click",".save a",function(a){a.preventDefault();$(".tools-panels .save a").click();B.trigger("saving");B.trigger("close")});B.on("click",".cancel a",function(a){a.preventDefault();$(".tools-panels .cancel a").click();B.trigger("canceling");B.trigger("close")});B.on("closed.modal_dialog",function(){B.off("canceling");B.off("saving")});j.on("click",".save a",function(a){a.preventDefault();j.off("abandon");j.trigger("close")});j.on("click",".cancel a",function(a){a.preventDefault();j.trigger("abandon");
j.trigger("close");track("Project Edit Cancel Upload");B.on("closed.modal_dialog",function(){B.off("abandon")})});q.serialScroll({items:"li.panel",lazy:!1,lock:!1,cycle:!1,duration:300,easing:"easeInOutExpo"});q.on("shifted",function(){$(".form-panels .panel:first").resize()});$("#main li.panel").livequery(function(){$(this).on("resize",function(){var a=$(window).height()-60-80-$("#running-board-wrap").height();p.height()>a?q.height(p.height()):q.height(a);$(window).trigger("shifted")})});A.find("a").click(function(a){a.preventDefault();
h(m+1);track("Project Edit Next")});D.find("a").click(function(a){a.preventDefault();h(m-1);track("Project Edit Back")});$("#project-edit-nav a").click(function(a){a.preventDefault();var b=$(this);a=b.parent("li").index();if(!b.is(".disabled"))if(i.find(".content.tabbed").slideUp(),p.find("textarea.intermediate_editor, textarea.editor").each(function(){var a=$.wymeditors($(this).data("wym_index"));a&&$("object",a._doc).show()}),$("#project-edit-nav .tab.selected").removeClass("selected"),$(document).trigger("ksr_video:pause_all_videos"),
b.is(".tab")){if(!$("body").is(".unlaunched_country")||!b.closest(".launch").length)k(b),b.hasClass("selected")&&(b.data("for")==="#preview"?track("Project Edit Preview"):b.data("for")==="#launch"&&track("Project Edit Change Panel",{selected_panel:"Launch"}))}else if(b.is(".view_project")){if(!g(function(){window.location.href=b.attr("href")}))window.location.href=b.attr("href")}else h(a),track("Project Edit Change Panel",{selected_panel:$.trim(b.text())})});$(document).on("click","#amz_banner .account_setup",
function(a){a.preventDefault();a=$("#account-setup-panel").index();h(a);track("Project Edit Amazon Banner Click")});$(document).on("click","#submit_for_review a",function(a){a.preventDefault();var b=$(this),c=$("#saving-layer");c.show();$.ajax({url:b.attr("href"),type:"get",dataType:"json",success:function(a){a.ok?k(b,function(){$("body").addClass("confirm_preview");track("Project Submission Preview");return!0}):a.redirect_to?url_equals(window.location,a.redirect_to)?window.location.reload(!0):window.location=
a.redirect_to:($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-"));c.find("object").each(function(){swfobject.removeSWF(this.id)});c.html(b);window.FB&&window.FB.XFBML&&setTimeout(function(){FB.XFBML.parse(c[0])},0)}}),e()&&h($(".flash-error:first").closest(".panel").index()))},complete:function(){c.hide()}})});$(document).on("click","#submit_edit a",function(a){a.preventDefault();a=$(this);k(a);track("Project Submission Preview Edit")});jQuery.fx.off=!0;$("body").is(".submitted")&&$.browser.msie&&
$.browser.version<9?$("#steps-nav a[href=#submission]").click():window.location.hash?(window.location.hash==="#preview"&&k($(".preview .tab")),$("#steps-nav a[href="+window.location.hash+"]").click()):$("body").is(".submitted")?$("#steps-nav a[href=#submission]").click():$("#steps-nav a[href=#the-basics]").click();jQuery.fx.off=!1;$("#loading").hide();$("#logo a, a.exit-link").on("click",function(a){if(!a.metaKey&&!a.ctrlKey){a.preventDefault();var b=$(this);if(!g(function(){window.location.href=
b.attr("href")}))window.location.href=b.attr("href")}});$(document).on("submit","#submit_confirmation > form",function(a){a.preventDefault();a=$(this);var b=$("#saving-layer");b.show();track("Project Submission Preview Submit");$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),success:function(a){a.redirect_to?url_equals(window.location,a.redirect_to)?window.location.reload(!0):window.location=a.redirect_to:($.each(a,function(a,b){if(b){var c=$("#"+a.replace(/_/g,"-"));c.find("object").each(function(){swfobject.removeSWF(this.id)});
c.html(b);FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(c[0])},0)}}),e()&&h($(".flash-error:first").closest(".panel").index()),b.hide())},error:function(){b.hide()}})});$(document).on("submit","div#forms form.edit_submission",function(a){a.preventDefault();a=$(this);var b=$("#saving-layer");$.trim(a.find("textarea").val()).length?(a.trigger("close"),b.show(),$.ajax({url:a.attr("action"),type:"post",dataType:"json",data:a.serialize(),success:function(a){$("#submission-panel").html(a.panel);$("#submission-sidebar-help .appeal").remove()},
complete:function(){b.hide()}})):growl({error:"Message is blank"})});$(document).on("submit","#launch_confirmation > form",function(a){$(this).find("input.confirmation").is(":checked")||($(this).removeClass("submitting-non-ajax"),growl({error:"Please accept the Kickstarter Project Guidelines."}),a.preventDefault())});a.ksr_before_unload=function(a){g(a)||a()};$.rails.beforeSubmit=function(a){return!g(function(){a()})};b();e()&&h($(".flash-error:first").closest(".panel").index())}(),function(){function a(b){b=
b.clone();b.find(".location-search .field-selected").remove();return b}var c={};i.find("form").each(function(){var b=$(this);c[b.closest(".panel").data("panel_id")]=a(b)});$.fn.restore_form=function(){var d=$(this),f=d.closest(".panel").data("panel_id"),g=c[f],h;h=d.find(".asset_upload:first");h.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel");h=h.clone();h.find("object").remove();g.find(".asset_upload:first").replaceWith(h);d.find("input.photo, input.video, input.avatar, textarea.editor").trigger("destroy");
d.replaceWith(g);FB&&FB.XFBML&&setTimeout(function(){FB.XFBML.parse(g[0])},0);g.trigger("form_restored");c[f]=a(g);b();e()};$.fn.update_form_cache=function(){var b=$(this),d=b.closest(".panel").data("panel_id");c[d]=a(b)}}(),$(window).on("project_edit:update_preview",g),$(window).on("wymeditor:video_encoded",g),$(".edit_project input.photo, .edit_project input.video, .edit_project input.avatar").livequery(function(){var a="image",c=$(this),d=c.parent().parent(),e=function(){},f={};c.is(".video")&&
(a="video",e=function(){g()});$.extend(f,{type:a,after_encode:e});c.ksr_uploader(f);c.on("file_added",function(){d.closest(".grey-field").removeClass("error");a==="video"&&d.addClass("encoding");d.find("input.photo, input.video, input.avatar").trigger("resize");g();b()})}),$(document).on("click","body#projects_edit .asset_upload a.remove",function(a){a.preventDefault();a=$(this).attr("href");var b=$(this).closest(".asset_upload");$.ajax({url:a,type:"delete",success:function(){b.removeClass("has_file");
b.find("input.photo, input.video, input.avatar").trigger("resize");g()},error:function(){growl({error:"Could not delete this file."})}})}),$(document).on("click","body#projects_edit .asset_upload a.retry_upload",function(a){a.preventDefault();a=$(this).closest(".asset_upload");a.removeClass("has_file encoding");a.find("input.photo, input.video, input.avatar").trigger("ksr_file_upload:cancel").trigger("resize")}),i.on("submit","form.edit_project",function(a){a.preventDefault();var c=$(this),g=i.find(".tools li.save"),
h=i.find(".tools li.cancel"),j=$("#saving-layer");c.find(".editor.assets_processing").length||f(function(){g.addClass("disabled").find("a").text("Saving...");h.addClass("disabled");j.show();$.ajax({type:c.attr("method"),url:c.attr("action"),dataType:"json",data:c.serialize(),global:!1,success:function(a){var f=g.closest(".tools"),h=$(a.panel);c.find("input.photo, input.video, input.avatar, textarea.intermediate_editor").trigger("destroy");c.replaceWith(h);h.data("original_values",h.serialize());FB&&
FB.XFBML&&setTimeout(function(){FB.XFBML.parse(h[0])},0);if(a.errored)$("#steps-nav a.selected").removeClass("completed"),c.trigger("shifted"),f.trigger("errored"),e(),d();else{$("#steps-nav a.selected").removeClass("errored");h.update_form_cache();typeof current_user!=="undefined"&&h.find("#project_creator_name").length&&current_user.set("name",h.find("#project_creator_name").val());f.find(".form-navigator").show();f.find(".form-tools").hide();i.find("#preview .project-content").html(a.content);
a.launch&&$("#launch").html(a.launch);i.find("#preview #project-header").html(a.running_board);i.find("#project-card-preview").html(a.card);i.find("#submission-sidebar-help").html(a.submission_sidebar);if(a.category){f=parseInt(i.find("#forms").attr("data-category_id"),10);var j=a.category.id;f!==j&&track("Project Edit Change Category",{category_before:f,category_after:j});i.find("#forms").attr("data-category_id",a.category.id);i.find("#category_name_guidelines").text(a.category.name)}else i.find("#forms").attr("data-category_id",
"");t();b()}},error:function(){c.trigger("ajax_error")},complete:function(a){g.removeClass("disabled").find("a").text("Save");h.removeClass("disabled");j.hide();c.trigger("ajax_complete",[a])}})})}),function(){var a=i.find(".tools"),b=a.find(".form-navigator"),c=a.find(".form-tools");$(document).on("change keyup cut paste input dirty wym-documentHTMLUpdated","form.edit_project",function(a){var d=$(a.target),e=d.closest("form");_.each(WYMeditor.INSTANCES,function(a){a.update()});e.serialize()===e.data("original_values")||
d.is(".do_not_dirty")&&a.type!=="dirty"||(b.hide(),c.show())});c.find(".save a").click(function(a){a.preventDefault();$("#confirm-abandon").is(":visible")?track("Project Edit Save",{context:"modal"}):track("Project Edit Save",{context:"toolbar"});$(this).closest("li.save").is(".disabled")||p.find("form").submit()});c.find(".cancel a").click(function(b){b.preventDefault();f(function(){$("#confirm-abandon").is(":visible")?track("Project Edit Discard Changes",{context:"modal"}):track("Project Edit Discard Changes",
{context:"toolbar"});p.find("form").restore_form();a.find(".form-navigator").show();a.find(".form-tools").hide()})})}(),function(){function a(d){var e;$.each(c,function(a){d.attr("id")===a&&(e=b.find(String(this)),e.text(d.val()))})}var b=i.find("#sidebar"),c={project_name:".project-card h2 > strong > a",project_blurb:".project-card p"};$(window).on("form_restored",function(c){c=$(c.target);var d=c.find(".field.location-search input.text").val();c.closest("#the-basics-panel").length&&(c.find(":input").each(function(){a($(this))}),
b.find("ul.project-meta > li > a > span.location-name").text(d))});$(document).on("keyup input cut paste change","#the-basics-panel form :input",function(b){a($(b.target))});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:select",function(a,c){b.find("ul.project-meta > li > a > span.location-name").text(c)});$("#the-basics-panel form .location-search input.text").livequery("livesearch_selector:unselect",function(){b.find("ul.project-meta > li > a > span.location-name").text("")});
$(document).on("file_added","#the-basics-panel form .project-image",function(a,c){b.find(".project-thumbnail img").attr("src",c.image_src)})}(),function(){function a(d){$("#duration_duration, #duration_deadline").each(function(){var a=$(this),e=a.is(":checked");a.is("#duration_duration")?e&&(d||(c=!0,$("#project_duration").focus()),$.browser.msie?$("#project-duration-calendar").hide():$("#project-duration-calendar").slideUp(200),$("#project_deadline").val("")):a.is("#duration_deadline")&&e&&($("#project_duration").val(""),
$.browser.msie?$("#project-duration-calendar").show():$("#project-duration-calendar").slideDown(200),b&&$("#project-duration-calendar input.input-calendar-date").val(b._copy_date_with_time(b.selected_date,b.time).toString("yyyy-MM-dd HH:mm:ss")))})}var b,c=!1;$("#project-duration-calendar").find("div.calendar").livequery(function(){var c,d=$("#project-duration-calendar input.input-calendar-date");$(this).on("calendar_date_picker:date_selected",function(a,b){var c=moment(b).format("YYYY-MM-DD HH:mm:ss Z");
d.val(c);d.trigger("change")});c=d.val()!==""?moment(d.val(),"YYYY-MM-DD HH:mm:ss Z").toDate():moment().add("days",30).toDate();b=$(this).calendar_date_picker({allow_deselect:!1,previous_month_text:"<",next_month_text:">",time_text:"Time:",selected_date:c}).data("calendar_date_picker");a(!0)});$("#the-basics-panel").on("focus","#project_duration",function(){c?c=!1:($("#duration_duration").prop("checked",!0),a())});$(document).on("change click","#the-basics-panel .funding-duration input.radio",a);
$(document).on("click","#the-basics-panel .funding-duration em.rec",function(){$(this).closest("li").find("input.text").focus()})}(),i.find("#project-edit-nav-wrap").sticky_bar({parent:$("body"),lock_to_bottom:!1}),$(document).on("click",".panel label.primary.help",function(){var a=$(this).closest(".grey-field").find(".field-help-2");a.is(":visible")?a.slideUp(300,"easeOutQuad",function(){$(this).trigger("shifted")}):a.slideDown(300,"easeOutQuad",function(){$(this).trigger("shifted")})}),function(){function a(b){var d=
b.siblings(".warning");(b=c.exec(b.val()))?(d.html('<p class="first">Reward warning: <span class="bad_word">'+b[0]+'</span></p><p>Please make sure you are not offering raffles, discounts, coupons, cash-value gift cards, alcohol, financial returns, or investments. What else is prohibited? See our <a class="link_to_prohibited_projects_dialog" href="#">list of prohibited items and subject matter</a>.</p>'),d.slideDown()):d.slideUp();d.trigger("shifted")}var b=$(".fields.rewards",i),c=/(?:(%)|\b(raffle|raffled|raffling|coupon|coupons|discount|discounts|discounted|reduced|percent|investor|investors|investment|invested|investments|investing|stake|stakes|sweepstake|sweepstakes|financial|equity|lottery|lotteries|gift certificate|gift card|wine|beer|alcohol|champagne|cocktail)\b)/i;
$("textarea",b[0]).each(function(){a($(this))});$(document).on("keyup paste cut",".fields.rewards textarea",function(){a($(this))})}(),k=$($("#faq-template").html()),l=function(){$(this).closest("ul").find("> li:not(.deleted)").each(function(a,b){$(b).find("input.position").val(a+1)})},$(document).on("click",".link_to_new_question",function(){var a=k.clone(!0,!0),b=(new Date).getTime();a.find("input,textarea,select").each(function(a,c){c.disabled=!1;c.id=c.id.replace(/new_project_faq/,b);c.name=c.name.replace(/new_project_faq/,
b)});a.appendTo("#project-faqs > ul").find(".question input").trigger("focus");l.call(a);return!1}),i.on("click",".faq .delete",function(){var a=$(this).closest("li.faq");a.addClass("deleted").find("input.position").val("").andSelf().find("input.delete").val("1");l.call(a);a.fadeOut("slow");return!1}),$("#project-faqs > ul",i).sortable({containment:"#projects_edit",placeholder:"project-faq-placeholder",handle:".move",axis:"y",tolerance:"pointer",items:"> li.faq",start:function(a,b){$(".project-faq-placeholder").css("height",
b.item.height()+"px");$(document.body).addClass("disable_text_selection");b.item.addClass("reordering")},stop:function(a,b){b.item.removeClass("reordering");$(document.body).removeClass("disable_text_selection")},update:l}),function(){function a(c,d){d=d||1;!f&&d<=100&&(f=!0,d+=1,setTimeout(function(){$.get("/profile/phone_number/poll_verification",{call_token:c,country:q},function(e){f=!1;e.html!==void 0?($("#phone_fields").html(e.html),b()):a(c,d)})},2E3))}function c(){$("#phone_fields .verification_error",
i).html("").addClass("hide");$(".field_with_errors",i).children().unwrap()}function d(b){if(b.type==="keypress"&&b.which!==13)return!0;var e=$("#phone_fields",i).find("input.radio[name=verify]:checked").val(),f=$("#phone_number",i),g=$("#phone_fields",i);if(e!=="sms"&&e!=="call")return!1;$.ajax({type:"put",url:"/profile/phone_number/send_verification",dataType:"json",data:{method:e,number:f.val(),country:q},success:function(b){c();b.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),
g.find(".phone_section .verification_error").html(b.error).removeClass("hide").trigger("shifted")):(e==="call"?(g.find(".verify-phone strong").html(b.call_token),a(b.call_token)):g.find(".sms_token").val(""),g.find(".highlight strong").html(b.number+".").andSelf().find(".phone_section, .options_section").addClass("hide").andSelf().find(e==="sms"?".sms_section":".call_section").removeClass("hide").trigger("shifted"))},beforeSend:function(){g.addClass("loading").trigger("shifted")},complete:function(){g.removeClass("loading").trigger("shifted")}});
return!1}function e(a){if(a.type==="keypress"&&a.which!==13)return!0;var d=$("#phone_fields"),f=d.find("#sms_token");$.ajax({type:"post",url:"/profile/phone_number/verify",dataType:"json",data:{sms_token:f.val(),country:q},success:function(a){c();a.error!==void 0?(f.wrap('<div class="field_with_errors" />').focus(),d.find(".sms_section .verification_error").html(a.error).removeClass("hide").trigger("shifted")):a.html!==void 0&&(d.replaceWith(a.html),b())},beforeSend:function(){d.addClass("loading")},
complete:function(){d.removeClass("loading")}});return!1}var f=!1;$(document).on("click","#phone_fields .cancel, #resend_call_token, #resend_sms_token",function(){$("#phone_fields").find(".call_section, .sms_section").addClass("hide").andSelf().find(".phone_section, .options_section").removeClass("hide").trigger("shifted")});$(document).on("click","#send_verification",d);$(document).on("keypress","#phone_fields #phone_number",d);$(document).on("click","#phone_fields #verify_sms_code",e);$(document).on("keypress",
"#phone_fields #sms_token",e);$(document).on("click","#phone_fields #change_number",function(){$.ajax({type:"get",url:"/profile/phone_number/edit",dataType:"json",success:function(a){a.html!==void 0&&$("#phone_fields").replaceWith(a.html)}});return!1})}(),$(document).on("click","ol.verification_steps a.continue",function(a){a.preventDefault();var c=$("ol.verification_steps li.verify"),d=$(this),e=d.text();c.hasClass("loading")||(track("Amazon Verification Status Check",{button_text:d.text()}),$.ajax({type:"get",
url:d.attr("href")+".json",dataType:"json",success:function(a){switch(a.amazon_kyc){case "":case "pending_user_action":case "invalid_account_state":c.find(".pending_user_action_msg .same_status").slideDown();break;case "pending_review":!c.hasClass("pending_user_action")&&!c.hasClass("invalid_account_state")&&c.find(".pending_review_msg .same_status").slideDown();break;case "active":$("#account-setup-panel").find(".flash-error").remove(),c.closest(".grey-field").removeClass("error"),c.closest(".verification_steps").removeClass("needs_verification")}c.removeClass("active closed pending_user_action pending_review invalid_account_state no_status").addClass(a.amazon_kyc).trigger("shifted");
b()},beforeSend:function(){c.addClass("loading");d.html("Verifying...")},complete:function(){c.removeClass("loading");d.html(e)}}))}),$("li.reward .summary",i).livequery(function(){$(this).show().siblings(".backer_rewards_fields").hide()}),i.on("change click","li.reward .limit_label input[type=checkbox]",function(){var a=$(this),b=a.parent("label").siblings("input.text");a.is(":checked")?b.closest(".limit").addClass("limit_set").end().focus():b.closest(".limit").removeClass("limit_set").end().val("")}),
i.on("click","li.reward .sold_out_label",function(a){a.preventDefault();a=$(this).siblings(".sold_out_checkbox");var b=$(this).parent(".limit"),c=b.find("input.text"),d=b.find(".limit_checkbox");a.is(":checked")?(a.prop("checked",!1),d.prop("checked",!1),c.val("").removeAttr("disabled"),b.removeClass("marked_sold_out limit_set"),track("Reward Sold Out Toggle",{toggled_to:"sold_out"})):(a.prop("checked",!0),c.attr("disabled","disabled"),b.addClass("marked_sold_out"),track("Reward Sold Out Toggle",
{toggled_to:"not_sold_out"}));$(this).trigger("dirty")}),i.on("click","li.reward .summary .edit",function(){$(this).parents(".summary").hide().siblings(".fields").show().trigger("shifted");track("Reward Edit")}),i.on("nested_attributes_list:added","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),i.on("nested_attributes_list:removed","li.reward",function(){$(this).trigger("shifted").trigger("dirty")}),i.on("change","li.reward .shipping select",function(){var a=$(this).val(),b=$(this).closest(".shipping").find(".shipping_amount");
a==="international"?(b.removeClass("hidden"),b.find("input.text")):(b.addClass("hidden").removeClass("cost_added"),b.find("input.text").val(formatters.currency_symbol(current_project.get("currency"))+"0"),b.find(".add_cost_checkbox").prop("checked",!1))}),i.on("change click","li.reward .shipping_amount input[type=checkbox]",function(){var a=$(this),b=$(this).closest(".shipping_amount"),c=b.find("input.text");a.is(":checked")?b.addClass("cost_added"):(c.val(formatters.currency_symbol(current_project.get("currency"))+
"0"),b.removeClass("cost_added"))}),function(){function a(){$("ol.rewards > li:visible",i).each(function(a,b){$(b).find("span.reward_num").html(a+1)})}$("ol.rewards",i).livequery(a);i.on("nested_attributes_list:added nested_attributes_list:removed","li.reward",a)}(),$(document).on("click","body#projects_edit #preview a#enable_sharing",function(a){var b=$(this);a.preventDefault();track("Project Edit Preview Link Toggle",{toggled_to:"enabled"});h(b)}),$(document).on("click","body#projects_edit #preview a#disable_sharing",
function(a){var b=$(this);a.preventDefault();track("Project Edit Preview Link Toggle",{toggled_to:"disabled"});h(b)}),$(document).on("click","body#projects_edit #preview #sharing_enabled .url",function(a){this.focus();this.select();a.preventDefault();track("Project Edit Preview Link Select")}),$(document).on("click","body#projects_edit .faq-question a",function(){$(this).closest(".faq").toggleClass("expanded");return!1}),$(document).on("click","body#projects_edit .amazon_token input",function(){$(this).select()}),
$(document).on("click","body#projects_edit .description .wym_tools li a",function(){track("Editor Tool Click",{tool_clicked:$(this).attr("title"),context:"project_edit_description"})}),$.support.localStorage()&&(localStorage.banner_amz_setup_hide||$("#amz_banner").removeClass("hidden"),$("#amz_banner .dismiss").click(function(a){a.preventDefault();try{localStorage.banner_amz_setup_hide=!0}catch(b){}$("#amz_banner").fadeOut(function(){$("#amz_banner").addClass("hidden")});track("Project Edit Amazon Banner Dismiss")})))})})(this);
instrument_function(function(){$(function(){var a=$("#projects_guidelines"),d=$("#project-edit-nav",a),c=$("#continue input[type=checkbox]",a),b=$("#continue input[type=submit]",a);a.length&&($(".modal_dialog, .modal_dialog .modal_dialog_content, .modal_dialog .modal_dialog_inner").preload_background_image(),d.find("#steps-nav .first a").addClass("selected"),d.find("a").click(function(a){a.preventDefault()}),c.on("change",function(){$(this).is(":checked")?$(this).siblings("label").addClass("selected").removeClass("unselected"):
$(this).siblings("label").addClass("unselected").removeClass("selected");c.not(":checked").length===0?b.removeClass("disabled"):b.addClass("disabled")}),b.on("click",function(){return c.not(":checked").length===0?($("#saving-layer").show(),!0):(typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Guidelines","Disabled Continue Click",""),!1)}))})})(this);
instrument_function(function(a){$(function(){var d=$("#projects_show");if(d.length){$("#verifying-pledge.modal_dialog .remote_modal_dialog",d).click(function(){$(this).parents("div#verifying-pledge").trigger("close.modal_dialog")});$(document).on("click","#projects_show .faq-question a",function(a){a.preventDefault();$(this).closest(".faq").toggleClass("expanded")});location.hash&&setTimeout(function(){$(location.hash).find(".faq-question a").click()},500);$(".modal_dialog:visible li.pledge_field input.text").livequery(function(){var a=
$(this).closest("form"),b=a.find(".reward.visible").data("reward");current_checkout.set({amount:b.minimum,reward:b});a.find(".text#backing_amount").blur(function(){var a=parseInt($(this).attr("value").replace(/[^0-9\.]/,""),10);current_checkout.set({amount:a})})});$("body").is(".touchable")&&(d.on("modal_dialog:opened",function(){$("video").length&&a.Touch&&($("#video-section",d).css("visibility","hidden"),$("video")[0].pause())}),d.on("close.modal_dialog",function(){$("#video-section",d).css("visibility",
"visible")}));var c=read_cookie("edit_survey_response");c&&$.open_remote_modal_dialog(URI.decode(c),{title:"Your survey response",remote_modal_dialog_contents_loaded:function(){destroy_cookie("edit_survey_response",URI.parse(window.location.href).path)},dataType:"html",beforeSend:function(a){a.setRequestHeader("Accept","text/javascript, */*")}});var b=1;$(window).resize(function(){b>0&&(track("Window Resize Start"),b-=1)})}})})(this);
instrument_function(function(){$(function(){var a=$("#projects_start"),d=$("#interstitials"),c=0;a.length&&($(".categories ul a").on("click",function(a){$(".categories ul a").addClass("dim");$(this).removeClass("dim");d.find(".category").removeClass("visible");d.find('[data-name="'+$(this).attr("data-name")+'"]').addClass("visible");d.find("video")[0].pause();d.height(d.find('[data-name="'+$(this).attr("data-name")+'"]').height()+161);$("body").is(".touchable")||$(document).scrollTo($(".categories"),
800);track("Start Project Category Select",{category_name:$(this).text()});a.preventDefault()}),d.find(".category .close").on("click",function(a){$(".categories ul a").removeClass("dim");d.find(".category").removeClass("visible");d.height(0);a.preventDefault()}),$("#tools .right_side").on("cycle-after",function(a,d,f,g){a=$(g);c>0&&track("Start Project Tool Select",{slide_description:a.attr("data-slide-description")});c+=1;(d=$("#tools").find("video").get(0))&&d.pause();a.find("video").length&&a.find("video")[0].play()}),
$("#quotes").find(".group .mirror").each(function(){$(this).html($(this).closest(".group").find(".regular").html())}),$("#bottom a.play_button").on("click",function(a){a.preventDefault();$(this).closest("section").addClass("video_expanded");$(this).closest("section").find(".video-player").trigger("ksr_video:play")}),$("#bottom .close").on("click",function(a){a.preventDefault();$(this).closest("section").removeClass("video_expanded");$(this).closest("section").find(".video-player").trigger("ksr_video:pause")}),
$("section#quotes").waypoint(function(){$(this).addClass("loaded")},{offset:150}))})})(this);
instrument_function(function(){$(function(){var a=$(".refund_checkouts_form");a.length&&(a.on("change","select#refund_checkout_amount",function(){var a=$(this),c=a.closest("li").find(".refund_amount_wrapper"),b=c.find("input#refund_checkout_amount"),e=!1;a.val()===""?(c.addClass("partial"),e=!0):c.removeClass("partial");b.prop("disabled",!b.is(":visible"));e&&b.focus()}).trigger("change"),$.inArray($("input#refund_checkout_amount").val(),[$("select#refund_checkout_amount").val(),""])===-1&&a.find("select#refund_checkout_amount").val("").trigger("change"))})})(this);
instrument_function(function(){$(function(){var a=$("#stored_card_form"),d=a.find(".selected input.card_toggle");a.length&&(d.length||(d=$("input.card_toggle:first")),$(document).on("change click","input.card_toggle",function(a){a.preventDefault();var b=$(this);$("input.card_toggle").not(b).closest(".payment_option").removeClass("selected");b.closest(".payment_option").addClass("selected");a.type==="click"&&setTimeout(function(){b.prop("checked")||b.trigger("change")},0)}),d.prop("checked",!0).trigger("change"))})})(this);
instrument_function(function(){$(function(){var a=$("#saving-layer");$("body").append(a);$(document).on("submit","body.refund_checkouts_new_card #credit_card_form form",function(){a.show();setTimeout(function(){a.find(".modal_dialog_body").html("<h3>Well, this is embarrassing.</h3><p>Processing your pledge is taking longer than usual. If you'd like, you can refresh and try again.</p><p>Not to worry: you can only back a project once, so you will never be double-charged.</p>");a.removeClass("spinning")},
12E4)})})})(this);instrument_function(function(){$(function(){function a(a){c.find("li").removeClass("current");c.find('li[data="'+a+'"]').addClass("current")}var d=$("#school_index"),c=$(".help-kickstarter_school"),b=!1;d.length&&(c.find("a").on("click",function(){var c=$(this).parent("li").attr("data");b=!0;a(c);$.scrollTo("#"+c,800,{easing:"easeOutExpo",onAfter:function(){b=!1}})}),$("#main .section").waypoint(function(){if(!b)a($(this).attr("id")),window.location.hash=$(this).attr("id")}))})})(this);
instrument_function(function(){$(function(){function a(){var a=d.find("video").get(0);d.height(Math.round(($(window).height()-$("#header-wrap").height())*0.75));a&&a.play()}var d=$(".NS_site__projects_hero");d.length&&($(document).resize(function(){a()}),a(),d.removeClass("loading"))})})(this);
instrument_function(function(){$(function(){var a=$("body.help"),d=$("#sidebar",a),c=$("#search",a);a.length&&(c.hover(function(){$(this).addClass("hover")},function(){c.removeClass("hover")}),d.sticky_bar({parent:d.closest("#content")}),$(".submit").click(function(){$("#content-wrap form.search").submit()}))})})(this);
instrument_function(function(){$(function(){function a(a,b){typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Homepage Events",a,b)}function d(a,b){e.scrollTo(a,b,{axis:"y",easing:"easeOutExpo"});e.find(".video-player").trigger("ksr_video:pause");$("body").is(".touchable")&&(e.find(".project-video").hide(),a.find(".project-video").show());$("#categories .nav li").removeClass("selected").eq(a.index()).addClass("selected");e.children().removeClass("selected").eq(a.index()).addClass("selected")}
function c(a,b){a.urls.web.project=a.urls.web.project+"?ref="+b;return $('<div class="project">'+render("projects/_baseball_card_tall",a)+"</div>")}var b=$("body#site_index"),e,f=$("body").is(".touchable");b.length&&(e=$("#project-slide"),$("#running-board-wrap").height(),$("#notifications").height(),$("#categories .nav li a.link").click(function(b){a("Category select",$(this).text());$.browser.msie&&$.browser.version<8||(d(e.find(".project").eq($(this).parent().index()),350),b.preventDefault())}),
$.browser.msie&&$.browser.version<8||(e.find(".project").show(),d(e.find(".project.potd"),0)),function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");(k===-1||e<k)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$("#location-projects"),e=0,k=-1,l=d.data("infinite_url");d.infinite_carousel({target:".slider",items:".project",axis:"x",
duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.on("infinite_carousel:last_page",function(){l&&$.api_ajax({url:l,type:"get",dataType:"json",success:function(a){var e=d.find(".project-list");(l=a.urls.api.more_projects)||(k=Math.ceil(a.projects.length/4)-1);$.each(a.projects,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_location"))return b=!1});b&&e.append(c(a,"home_location"))});b()}})});$(document).on("click",
"#location-projects .previous:not(.disabled)",function(){a("Location Module","Previous");e-=1;b()});$(document).on("click","#location-projects .next:not(.disabled)",function(){a("Location Module","Next");e+=1;b()});b();$("#set-location").livequery(function(){var a=$(this);a.livesearch_pretty_input_dropdown({ignore_history:!0,process_results:function(a){return _.map(a.locations,function(a){return[a.short_name,a.urls.web.discover,a.id,a.urls.api.nearby_projects]})}});a.on("livesearch:selected",function(f,
q){var t=$("#location-projects .slider");l=q[3];a.trigger("livesearch:close_results");d.find(".slider").trigger("goto",[0]);e=0;b();$("#set-location").fadeOut(function(){$("#your-location").fadeIn()});t.addClass("loading");$.api_ajax({type:"get",dataType:"json",url:l,success:function(a){var b=d.find(".project-list");b.empty();a.projects.length?(b.parent().removeClass("empty"),$.each(a.projects,function(){b.append(c(this,"home_location"))}),(l=a.urls.api.more_projects)||(k=Math.ceil(a.projects.length/
4)-1)):b.parent().addClass("empty");a.projects.length<5&&d.find(".next, .previous").addClass("disabled").removeClass("enabled");$("#location-projects .title-card h3").attr("class",a.location.country.toLowerCase()+" "+a.location.state?a.location.state.toLowerCase():"");d.find("h3 a.location-name").text(a.location.name).attr("href",a.location.urls.web.discover+"?ref=home_popular");$("#location-projects .title-card .see-all a").attr("href",a.location.urls.web.discover+"?ref=home_popular");$("#mega-footer-wrap").find(".current_location a").attr("href",
a.location.urls.web.discover+"?ref=footer").find(".text").text(a.location.name)},error:function(){growl({error:"Could not find that location?"})},complete:function(){t.removeClass("loading")}})})});$("#location-projects .not-here").click(function(b){a("Location Module","Change city");$("#set-location").fadeIn();$("#set-location input.input-search").focus();$("#location-projects").css({overflow:"visible"});f&&$("#project-slide li:not(.selected) video").fadeOut();b.preventDefault()});$("#set-location input.input-search").blur(function(){$("#set-location").fadeOut();
$("#location-projects .not-here").fadeIn();$("#location-projects").css({overflow:"hidden"});f&&$("#project-slide .project-video video").fadeIn()})}(),$("#trending-projects").each(function(){function b(){d.find(".next, .previous").addClass("disabled").removeClass("enabled");(f===-1||e<f)&&d.find(".next").removeClass("disabled").addClass("enabled");e!==0&&d.find(".previous").removeClass("disabled").addClass("enabled");d.find(".slider").trigger("goto",[e*4])}var d=$(this),e=0,f=-1,l=d.data("infinite_url");
d.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});d.on("infinite_carousel:last_page",function(){l&&$.api_ajax({url:l,type:"get",dataType:"json",success:function(a){var e=d.find(".project-list"),i=shuffle(a.projects);(l=a.urls.api.more_projects)||(f=Math.ceil(a.projects.length/4)-1);$.each(i,function(){var a=this,b=!0;e.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_popular"))return b=
!1});b&&e.append(c(a,"home_popular"))});b()}})});$(document).on("click","#trending-projects .previous:not(.disabled)",function(){a("Popular Module","Previous");e-=1;b()});$(document).on("click","#trending-projects .next:not(.disabled)",function(){a("Popular Module","Next");e+=1;b()});b()}),$("#social-projects .slider").each(function(){function b(){e.find(".next, .previous").addClass("disabled").removeClass("enabled");(p===-1||l<p)&&e.find(".next").removeClass("disabled").addClass("enabled");l!==0&&
e.find(".previous").removeClass("disabled").addClass("enabled");e.find(".slider").trigger("goto",[l*4])}function d(a){f&&$.ajax({url:oauth_url(f),type:"get",dataType:"jsonp",success:function(d){var h=e.find(".project-list");(f=d.urls.api.more_projects)||(p=Math.ceil(d.projects.length/4)-1);e.find(".slider").removeClass("loading");a&&!d.projects.length&&(e.find(".slider").addClass("no-projects"),e.find(".next, .previous").addClass("disabled").removeClass("enabled"));$.each(d.projects,function(){var a=
this,b=!0;h.find("a").each(function(){if(url_equals(this.href,a.urls.web.project+"?ref=home_location"))return b=!1});b&&h.append(c(a,"home_social"))});b()}})}var e=$(this).closest("#social-projects"),f=e.data("infinite_url"),l=0,p=-1,j=!1;e.infinite_carousel({target:".slider",items:".project",axis:"x",duration:500,force:!0,lock:!1,lazy:!0,easing:"easeOutExpo",cycle:!1,exclude:3,step:4});e.on("infinite_carousel:last_page",d);$(window).on("scroll",function(){!j&&window.scrollY+$(window).height()*1.5>
e.offset().top&&(a("Social Module","Load"),d(!0),j=!0,e.find("p.no-content").hide(),e.find(".slider").show())});e.find(".previous").on("click",function(){a("Social Module","Previous");$(this).is(".disabled")||(l-=1,b())});e.find(".next").on("click",function(){a("Social Module","Next");$(this).is(".disabled")||(l+=1,b())});b()}),$("#curated-pages .slider").each(function(){function b(){c.find(".next, .previous").addClass("disabled").removeClass("enabled");d<Math.ceil(e/8)-1&&c.find(".next").removeClass("disabled").addClass("enabled");
d!==0&&c.find(".previous").removeClass("disabled").addClass("enabled")}var c=$(this).closest("#curated-pages"),d=0,e=$("#curated-pages .project-list li").size();c.serialScroll({target:".slider",items:"li",axis:"x",duration:500,force:!0,lazy:!0,easing:"easeOutExpo",cycle:!1,step:8});c.find(".previous").on("click",function(){a("Curated Module","Previous");$(this).is(".disabled")||(c.find(".slider").trigger("prev"),d-=1,b())});c.find(".next").on("click",function(){a("Curated Module","Next");$(this).is(".disabled")||
(c.find(".slider").trigger("next"),d+=1,b())});b()}),$(".facebook_login_wrap .big").click(function(){a("Social Module","Facebook connect")}),$(".project-image .video-player").click(function(){$(this).parent().siblings(".project-badge").fadeOut("slow")}),$("#location-projects").length||$("#content-wrap").addClass("no-location"),$("#running-board-wrap").removeClass("loading"))})})(this);
instrument_function(function(){$(function(){$("#jobs_index, .NS_jobs__why_work_at_kickstarter").length&&($(document).on("click","#openings_small .button",function(){$.scrollTo($($(this).attr("href")),{duration:2E3,easing:"easeOutExpo"})}),$(document).scroll(function(){try{$(window).scrollTop()>660?$("#hero video")[0].pause():$("#hero video")[0].play()}catch(a){}}))})})(this);
instrument_function(function(){$(function(){if($("body#site_press").length)$(document).on("click",".read_more",function(a){$(".more").toggle();$(".read_more").toggle();a.preventDefault()})})})(this);instrument_function(function(){$(function(){$(document).on("change","body#site_privacy form.select_country",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){function a(){c.find("video").each(function(){$(window).width()<=$(this).position().left||$(this).position().left+$(this).width()<0?$(this)[0].pause():$(this)[0].play()});c.find("video:last-child").position().left<=$(window).width()?$("#home_button").fadeIn():$("#home_button").fadeOut()}var d=$("body#site_team"),c=$("#video_header");d.length&&(c.kinetic({maxvelocity:120}),$("#home_button").click(function(){$("#video_header").scrollTo(0,0,{duration:2E3,easing:"easeOutExpo"})}),
$(window).resize(function(){a()}),c.scroll(function(){a()}),a())})})(this);instrument_function(function(){$(function(){$(document).on("change","body#site_tou form.select_country",function(){$(this).submit()})})})(this);
instrument_function(function(a){$(function(){function d(a){if(E){var b=URI(E),c=b.is("relative")||b.hostname()===URI().hostname()?$.ajax:$.api_ajax;K?a&&K.done(function(){a()}):K=c({url:b.toString(),type:"get",dataType:"json",global:!1,success:function(b){E=_.has(b,"urls")?b.urls.api.more_projects:b.more_projects;b=b.projects||[];var c=b.length;m.removeClass("loading");b=_.reject(b,function(a){return _.contains(S,a.id)});b=_.reject(b,function(a){return a.video===null});b.length<c&&track("Video Mode Rejected Projects",
{video_mode_playlist_original_length:c,video_mode_playlist_current_length:b.length,video_mode_playlist_number_rejected:c-b.length});E&&b.length<5&&(K=!1,d());B=B.concat(_.shuffle(b));j();typeof a==="function"&&a()},error:function(){o()},complete:function(){K=!1}})}}function c(a,b){m=$(y).empty().addClass("loading");track("Video Mode Change Playlist",{playlist_name:J});m.length||(m=$('<div class="NS-site_video loading"></div>'),$("body").prepend(m),m.height($(window).height()));B=B.slice(0,D);E=b||
"/video";B.length||v();d(function(){a&&s()})}function b(){return m.find("video").get(0)}function e(){return m.find(".title_card")}function f(){return m.find(".controls")}function g(){return m.find(".channel_controls")}function h(){if(!b()||!b().paused)e().fadeOut(),f().fadeOut(),g().fadeOut()}function i(){r&&clearTimeout(r);r=setTimeout(function(){h()},3E3);e().is(":hidden")&&(e().fadeIn(),f().fadeIn(),g().fadeIn())}function k(){r&&clearTimeout(r);r=setTimeout(function(){h()},3E3);f().is(":hidden")&&
f().fadeIn();g().is(":hidden")&&g().fadeIn()}function l(a){A&&$(b()).parent().show();b().play();a||h();$("#play_button").removeClass("play").addClass("pause");track("Video Mode Play")}function p(){b().paused?l():(b().pause(),i(),$("#play_button").removeClass("pause").addClass("play"),track("Video Mode Pause"))}function j(){var a=$(".channel_controls a."+J);D===0?$("a.prev_project").addClass("disabled"):$("a.prev_project").removeClass("disabled");D===B.length-1?($("a.next_project").addClass("disabled"),
a.addClass("disabled")):($("a.next_project").removeClass("disabled"),a.removeClass("disabled"));$(".channel_controls a").removeClass("selected");a.is(".disabled")?$(".channel_controls a:not(.disabled):first").addClass("selected"):a.addClass("selected")}function q(){var a=$("#main_content"),b=$("body").is("#projects_show"),c="json";b||($("body").attr({id:"projects_show","class":"project projects"}),$("#menu-main li").removeClass("selected"),c="html");$.ajax({url:URI(current_project.get("urls.web.project")).addQuery("ref",
"video_mode").suffix(c).toString(),dataType:c,type:"get",global:!1,success:function(c){b?($(".NS-project_-running_board").replaceWith(c.running_board),$(".NS-projects-content").replaceWith(c.content)):a.length&&a.replaceWith(c)}})}function t(){$(b()).on("ended",function(){s(!0)})}function n(c,d){var e,f=(e=b())?e.paused:!1;if(c){if(!e||!(current_project&&c.id===current_project.get("id"))){Project.find(c.id)&&(c=Project.find(c.id).get());$(b()).remove();$("#video-section .video-player").remove();m.html(render("projects/_video_mode",
_.extend(c,{playlist_is_featured:J==="featured",playlist_is_location:J==="location",playlist_is_category:J==="category",not_mobile:!A,logged_in:typeof current_user!=="undefined"})));e=$(b());$("#video-section .video-player").trigger("ksr_video:pause");e.parent().addClass("video_mode_loading").on("load",function(){$(this).removeClass("video_mode_loading")});t();a.current_project=new Project(c);if(!url_equals(document.location.toString(),c.urls.web.project,{ignore_query:!0}))P=!0,History.pushState(c,
c.name,c.urls.web.project),S.push(c.id),localStorage.video_mode_projects_seen=S.join(",");q();document.title=c.name+" by "+c.creator.name;i();j();A?e.parent().hide():(d||!f)&&l(!0)}}else m.html(render("site/_video_mode_fourohfour"))}function s(a){D+=1;D>B.length-5&&d();D>=B.length&&J!=="featured"?(J="featured",c(!0)):(n(B[D],a),track("Video Mode Next",mixpanel_project(B[D])))}function o(a){$("body").css("overflow","visible").height("auto");$("#video_mode_tab").show();$.scrollTo($("#running-board-wrap").offset().top,
500,{easing:"easeOutExpo",onAfter:function(){m.hide();$.scrollTo($("#running-board-wrap").offset().top)}});typeof document.webkitCancelFullScreen==="function"&&document.webkitCancelFullScreen();track("Video Mode Exit");b()&&!a&&$("#video-section .video-player").trigger("ksr_video:seek",[b().currentTime,b().paused]);b().pause()}function u(){var a=$("#video-section .video-player"),e,f,g;E||c();m.show();$("body").css("overflow","hidden").height($(window).height());$.scrollTo(0,500,{easing:"easeOutExpo"});
track("Video Mode Enter");b()||(typeof current_project!=="undefined"?n(_.findWhere(B,{id:current_project.get("id")})):B.length?n(B[0]):d(function(){n(B[0])}));if(a.length){if(e=a.data("ksr_video"))f=e.current_position(),g=e.playing()}else f=0;if(f)b().currentTime=f;a.trigger("ksr_video:pause");g&&l()}function v(){typeof current_project!=="undefined"&&current_project.get("video")&&(B=_.reject(B,function(a){return a.id===current_project.get("id")}),B.unshift(current_project.get()))}if(document.createElement("video").canPlayType&&
$.support.localStorage()){var y=".NS-site_video",m=$([]),r,A=$("body.mobile").length,D=0,Q=document.location.toString(),B=[],E=!1,J="featured",P=!1,K=!1,S=localStorage.video_mode_projects_seen?localStorage.video_mode_projects_seen.split(","):[],R={x:0,y:0};if($("body").is(".video_mode")){S=_.map(S,function(a){return parseInt(a,10)});$(window).on("mousemove",function(a){a={x:a.pageX,y:a.pageY};m.is(":visible")&&Math.abs(a.x-R.x)+Math.abs(a.y-R.y)>20&&(k(),i(),R=a)});$(window).on("keydown",function(a){switch(a.keyCode){case KEY.SPACE:m.is(":visible")&&
(p(),a.preventDefault());break;case KEY.LEFT:m.is(":visible")&&(D!==0&&(D-=1,n(B[D]),track("Video Mode Previous",mixpanel_project(B[D]))),a.preventDefault());break;case KEY.RIGHT:m.is(":visible")&&(function(){var a=$(".channel_controls a.selected");a.hasClass(J)?s():a.click()}(),a.preventDefault());break;case KEY.UP:m.is(":visible")&&(function(){var a=$(".channel_controls a.selected").removeClass("selected");a.prevAll("a:first:not(.disabled)").addClass("selected").length||a.siblings("a:last:not(.disabled)").addClass("selected");
k()}(),a.preventDefault());break;case 86:if((a.metaKey||a.ctrlKey)&&!$(a.target).is(":input"))u(),a.preventDefault();break;case 70:m.is(":visible")&&function(){var a=m[0];typeof a.webkitRequestFullScreen==="function"&&(m.css("position","static"),a.webkitRequestFullScreen())}();break;case KEY.DOWN:m.is(":visible")&&(function(){var a=$(".channel_controls a.selected").removeClass("selected");a.nextAll("a:first:not(.disabled)").addClass("selected").length||a.siblings("a:first:not(.disabled)").addClass("selected");
k()}(),a.preventDefault());break;case KEY.ESC:case KEY.ENTER:m.is(":visible")&&o()}});$(document).on("click",".four_oh_four a.another",function(a){B=[];E=!1;J="featured";D=0;u();a.preventDefault()});$(document).on("click",y+" .play, "+y+" .pause",function(a){p();a.preventDefault()});$(document).on("click",".channel_controls a.location",function(a){a.preventDefault();$(this).is(".disabled")||(J==="location"?s():(J="location",c(!0,current_project.get("location.urls.api.nearby_projects"))))});$(document).on("click",
".channel_controls a.featured",function(a){J==="featured"?s():(J="featured",c(!0),a.preventDefault())});$(document).on("click",".channel_controls a.category",function(a){J==="category"?s():(J="category",c(!0,current_project.get("category.urls.api.projects")),a.preventDefault())});$(document).on("click",y+" .remind a",function(a){var b=!!$(this).closest(".follow").length;current_project.set("is_starred",b);$.ajax({url:$(this).attr("href"),type:"post",dataType:"json"}).done(function(){b&&track("Video Mode Starred")});
a.preventDefault()});$(document).on("click touchstart",y,function(a){$(a.target).closest("a").length||(p(),a.preventDefault())});$(document).on("click touchstart","#video_mode_tab",function(){u()});$(document).on("click touchstart",".video_mode_enter",function(a){u();a.preventDefault()});$(document).on("click",y+" .explore",function(a){o();a.preventDefault()});$(document).on("click","#video_mode_close",function(a){o(!0);a.preventDefault()});$(document).on("click",y+" .project_title",function(a){o();
a.preventDefault()});$(window).on("resize",function(){var a=$(window).height();$("body").height(a);m.height(a);m.find("video").height(a)});$(window).on("statechange",function(){var a=History.getState().data;P&&(a&&!_.isEmpty(a)?n(a):url_equals(window.location.toString(),Q)&&location.reload())});$(window).on("webkitfullscreenchange",function(){document.webkitFullscreenElement||m.css("position","relative")});$("#video_mode_tab").on("click touchstart",function(a){u();a.preventDefault()});localStorage.video_mode_seen===
"true"&&A&&$("#video_mode_tab").show();if(window.location.hash==="#video")window.location.hash="#",u();localStorage.video_mode_seen="true"}}})})(this);
instrument_function(function(){$(function(){var a=$("body#site_watch");a.length&&($(".featured-projects-list").on("cycle-after cycle-before",function(d,c){c.slideNum===1?(a.find(".next").fadeIn(),a.find(".previous").fadeOut()):c.slideNum===c.slideCount?(a.find(".previous").fadeIn(),a.find(".next").fadeOut()):(a.find(".previous").fadeIn(),a.find(".next").fadeIn());track("Watch Cycle Featured Projects")}),$(".share-link").on("click",function(a){var c=$(window).height()/2-250,b=$(window).width()/2-250;
window.open($(this).attr("href"),"name","height=500, width=500, top="+c+", left="+b);track("Watch Page Share");a.preventDefault()}),track_links("a.track-itunes","Watch Click iTunes Link"),track_links("a.track-official","Watch Click Official Site Link"),$(".published_projects").on("click","a.more",function(a){var c=$(this),b=$(".published_projects"),e=c.attr("href");c.remove();$.ajax({url:e,method:"GET",data:"format=js",dataType:"html",success:function(a){b.append(a)}});a.preventDefault()}))})})(this);
instrument_function(function(){$(function(){function a(){setTimeout(function(){a();c.removeClass("visible");c.eq(b).addClass("visible");$("#hero .category").width(c.eq(b).width());b+=1;b>=c.length&&(b=0)},3E3)}var d=$("body#site_what_is_kickstarter"),c=$("#hero .category b"),b=1;d.length&&(a(),$("#running-board-wrap").removeClass("loading"))})})(this);instrument_function(function(){$(function(){$("body#stories_veronica_mars")})})(this);
instrument_function(function(){$(function(){var a=$(".NS_survey_questions__address");a.length&&(a.find(".country select").change(function(){var a=$(this),c=a.val(),b=$(this).closest(".country").data("project_country"),e=$(this).siblings(".domestic_backing_message"),f=$(".state .select"),g=$(".state .text"),h=$(".state .text_container");f.prop("disabled",!0).addClass("hidden");g.prop("disabled",!0);h.addClass("hidden");f.hasClass(c)?$.each(f,function(){var a=$(this);a.hasClass(c)&&a.prop("disabled",
!1).removeClass("hidden")}):(g.prop("disabled",!1),h.removeClass("hidden"));a.closest(".country").hasClass("domestic_backing")&&(c.length&&c!==b?(e.removeClass("hidden"),track("Domestic Message Displayed",{shipping_applicable:"international",survey_context:$("body").attr("id")})):e.addClass("hidden"))}),a.find(".country .country_prop").click(function(){$(this).closest(".country").find(".domestic_backing_message").toggle();track("Domestic Message Displayed",{shipping_applicable:"domestic",survey_context:$("body").attr("id")})}),
a.find(".country.domestic_backing select").trigger("change"),a.find(".domestic_backing").length&&track("Survey Address for Domestic Backing",{shipping_applicable:a.find(".intl_shipping").length?"international":"domestic",survey_context:$("body").attr("id")}))})})(this);
instrument_function(function(){$(function(){var a=$("body#survey_responses_confirm_address"),d=$("input.radio#suggested_address");a.length&&($(document).on("change","body#survey_responses_confirm_address .address_col input.radio",function(){var a=$(this);$(this).closest(".addresses").find(".address_col").each(function(){var a=$(this);a.find("input.radio").is(":checked")?a.find("input[type=hidden]").attr("disabled",!1):a.find("input[type=hidden]").attr("disabled",!0)});a.attr("id")==="entered_address"?
track("Address Entered Selected"):a.attr("id")==="suggested_address"&&track("Suggested Address Selected")}),d&&d.click(),$(".addresses.no_suggestion").length?track("Confirm your Address Page"):track("Select an Address Page"))})})(this);instrument_function(function(){$(function(){var a=$("body#survey_responses_edit_address");a.length&&(a.find(".back").click(function(a){a.preventDefault();window.history.go(-1)}),track("Edit Address Page"))})})(this);
instrument_function(function(){$(function(){var a=$("body#survey_responses_new"),d=a.find("input:hidden#dirty");a.length&&($(document).on("keydown","body#survey_responses_new input:text",function(a){a.which===13&&a.preventDefault()}),$(document).on("focus","body#survey_responses_new .address input:text",function(){$(this).closest(".address").removeClass("hide_overlabels")}),d.val()==="0"?d.val("1"):track("Back to Survey Response Page"),track("Survey Response Page"))})})(this);
instrument_function(function(){$(function(){var a=$("body#survey_editability_edit");if(a.length){var d=$("form#disable_survey_editability_form",a),c=$("#send_editable_address_preview",a),b=$("form#enable_survey_editability_form",a),e=d.find("#disable_confirm_text").html(),f=b.find("#enable_confirm_text").html();$("input:text",a).on("keydown",function(a){a.which===KEY.ENTER&&a.preventDefault()});c.on("click",function(a){a.preventDefault();var b=$(this);b.data("loading")||(b.data("loading",!0),$.post(b.attr("href"),
{},function(a,c){c==="success"&&(growl({success:"A preview has been sent to your email address"}),b.data("loading",!1))}));track("Survey Editability Deadline Preview Sent")});d.confirm_submit({title:"Just to confirm&hellip;",copy:e,yes_copy:"Send notifications now",no_copy:"Cancel"});b.confirm_submit({title:"Just to confirm&hellip;",copy:f,yes_copy:"Allow changes now",no_copy:"Cancel"})}})})(this);
instrument_function(function(){$(function(){function a(){var a=h.find("input.keep_box:checked").closest(".fieldset:not(.template)");g.empty();a.each(function(){g.append($(this).find("div.preview").children().clone())})}function d(b){b=$(b);var c=b.val(),d=b.closest(".fieldset").find(".preview");b.is("#survey_intro")?d.find(".survey_intro").text(c):b.is(".question_choice")?d.find(".choice label").eq(b.closest("li.field").index()).text(c):c?d.find("li > label").text(c):d.find("li > label").text("Question");
a()}function c(a){a.confirm_submit({copy:"You can only send a survey once per reward tier, so make sure to ask for all the info you need to deliver this reward.",title:"Please confirm",yes_copy:"Send survey now",no_copy:"Edit survey",on_confirm_submit:function(){a.find("#send_survey").val("1")}})}function b(){i.find(".question:not(.template)").each(function(a){$(this).find(".position").val(a+1)});a()}function e(){var a=h.find(".add_address_question");i.find(".question.address").is(":visible")?a.addClass("hidden"):
a.removeClass("hidden")}var f=$("body#surveys_form");if(f.length){var g=$("#preview",f),h=$("form#survey_form",f),i=$("ul.questions",f),k=$("#saving-layer",f),l={containment:"document",tolerance:"pointer",items:".question.draggable",stop:b};i.sortable(l);f.on("click",".address.question .keep_box.checkbox",function(){$(this).is(":checked")?$(".editability",f).show():$(".editability",f).hide()});$(".leftcol .textarea:visible, .leftcol .text:visible",f).each(function(){d(this)});f.on("keyup cut paste",
".leftcol .text, .leftcol .textarea",function(){d(this)});f.on("click","a.add_question",function(a){a.preventDefault();a=$("ul.questions");var c=$(this).data("template");c=a.children(".template."+c).clone_form_template();c.css("display","block");a.append(c);e();b();c.find("input.checkbox:not(.editable_ends_at)").prop("checked",!0);c.find("input.checkbox.editable_ends_at").prop("disabled",!1)});f.on("click",".add_question_choice",function(b){b.preventDefault();var c=$(this).closest("li.question");
b=c.find("ol.choice_fields").find("li:last");b=b.clone().insertAfter(b);c=c.find(".preview").find(".choice").last();c=c.clone().insertAfter(c);b.find("label.overlabel .count").text(function(a,b){return parseInt(b,10)+1});b.find(".delete_choice").removeClass("hidden").andSelf().find("input").val("").focus();c.val("").find("label").html("").andSelf().find("input.radio").val("");a()});f.on("click",".delete_question",function(a){a.preventDefault();a=$(this).closest(".question");var c=a.find(".keep_box.checkbox");
c.is(":checked")?c.prop("checked",!1):c.prop("checked",!0);a.addClass("hidden");a.find("input.checkbox.editable_ends_at").prop("disabled",!0);e();b()});f.on("click",".delete_choice",function(b){b.preventDefault();b=$(this).closest("li.field");var c=b.closest("li.question").find(".preview"),d=b.parent().children();c.find(".choice").eq(b.index()).remove();b.remove();d.filter(":visible").each(function(a){$(this).find("label.overlabel .count").text(a+1)});a()});f.on("click","#survey_save",function(b){b.preventDefault();
track("Survey Save");k.show();$.ajax({url:h.attr("action"),type:h.find('[name="_method"]').val(),data:h.serialize(),complete:function(){k.hide();a()},success:function(a){a=$(a.data);$(".modal_dialog").remove();$("#main_content").replaceWith(a);g=$("#preview",f);h=$("form#survey_form",f);i=$("ul.questions",f);k=$("#saving-layer");c(h);i.sortable(l)},error:function(){window.location.reload(!0)}})});f.on("keydown","form#survey_form",function(a){if(a.keyCode===KEY.ENTER&&!$(a.target).is("textarea"))return a.preventDefault(),
$("body#surveys_form #survey_save").trigger("click"),!1});c(h)}})})(this);
instrument_function(function(){$(function(){function a(){var a=$('div[id="forgot-password"]');a.removeClass("current");a.siblings("#login, #verify").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").show()}function d(b){b=$(b).closest(".current");b.is("#verify")||b.removeClass("current");$("#login-signup #forgot-password").addClass("current");$(".modal_dialog #facebook, .modal_dialog #verify").hide();$(document).one("closed.modal_dialog",a)}$(document).on("click","#login-signup a.switch",
function(a){a.preventDefault();a=$(this).closest(".current");a.removeClass("current");a.siblings("#login, #signup").addClass("current")});$(document).on("click","#retry-forgot-password",function(a){var c=this.href,f=$('div[id="forgot-password"]');d(this);$.ajax({url:c,dataType:"html",success:function(a){f=$(a).replaceAll(f);f.addClass("current")}});a.preventDefault()});$(document).on("click","#login-signup a.link_to_forgot-password-dialog",function(a){a.preventDefault();d(this);$(document).on("jGrowl.close_200",
"form#reset",function(){$(".modal_dialog").trigger("close.modal_dialog")})});$(document).on("form-submit-notify","#forgot-password #reset",a);var c=$("#user_sessions_new, #users_new");c.length&&($(".current",c).find("input:visible:first").focus(),$("#user_weekly_newsletter").change(function(){$(this).is(":checked")?track("Checked Newsletter"):track("Unchecked Newsletter")}),$(".fieldset-errors").livequery(function(){if($.trim($(".fieldset-errors").text())!==""){var a=$(".fieldset-errors h2").text(),
c=$(".fieldset-errors li").text();track("Errored User Signup",{error_type:a,error_text:c})}}),$("input",c).focus(function(){$("#login, #signup").removeClass("current");$(this).closest("#login, #signup").addClass("current")}))})})(this);
instrument_function(function(){$(function(){$(document).on("blur","#new_user input#user_email",function(){$(this).mailcheck({suggested:function(a,d){var c=$('<div class="mailcheck_suggestion">Did you mean <a href="#">'+d.full+"</a>?</div>");a.siblings(".mailcheck_suggestion").remove();c.find("a").on("click",function(b){b.preventDefault();a.val(d.full)});a.before(c);c.slideDown();typeof pageTracker!=="undefined"&&pageTracker._trackEvent("Regular Signup Errors","Invalid domain or TLD detected",a.val())},
ignoreTLDs:!0})})})})(this);
instrument_function(function(){$(function(){var a=$(".NS_users__profile"),d={x:-1,y:-1},c=$("#small_circle");a.length&&($("#profile_tools .share").click(function(a){$("#profile_tools .share_hover").toggle();a.preventDefault()}),$("a.twitter").click(function(a){window.open($(this).attr("href"),"twTweet","top=100,left=100,width=600px,height=400px,location=no,menubar=no,toolbar=no,scrollbars=yes");a.preventDefault()}),$("a.facebook").click(function(a){window.open($(this).attr("href"),"fbShare","top=100,left=100,width=640px,height=350px,location=no,menubar=no,toolbar=no,scrollbars=yes");
a.preventDefault()}),$(document).mousemove(function(a){d={x:a.pageX,y:a.pageY}}),function(){var a=$("#hover_label");$.plot(c,circle_data,{series:{pie:{show:!0,stroke:{width:2,color:"rgb(230,230,230)"},label:{show:!1}}},grid:{hoverable:!0,clickable:!0},legend:{show:!1}});c.on("plothover",function(c,f,g){if(g)c=g.series.label,g=circle_data[g.seriesIndex].projects_backed,a.html(g>0?c+' <span id="count">('+g+")</span>":'<span class="empty">'+c+"</span>"),a.css({visibility:"visible",top:d.y-a.height()+
"px",left:d.x-a.width()/2+"px",padding:"1px 4px"})});c.on("mouseout",function(){a.empty();a.css("visibility","hidden")});c.on("plotclick",function(a,b,d){if(d)(a=circle_data[d.seriesIndex].path)&&typeof a==="string"&&c.trigger("navigate",a)})}())})})(this);
instrument_function(function(){$(function(){var a=$(".NS-users_updates_notifications");a.length&&($("#manage_notifications",a).click(function(d){$(this).hide();$("ol.projects",a).show();d.preventDefault()}),$("li",a).delegate("input.checkbox","change",function(){var a=$(this).siblings().filter(".checkbox.mobile");$(this).is(":checked")?a.attr("checked","checked"):a.removeAttr("checked")}))})})(this);
instrument_function(function(){$(function(){$(".NS-users-_urls_fields").livequery(function(){var a=$(this),d=$("div.new.template",a);d.find("a.add").click(function(c){c.preventDefault();c=d.find("input.text");var b=d.clone_form_template(),e=b.find(".remove input.checkbox");c.val()===""?b.remove():(b.addClass("field-selected"),b.find("a.add").remove(),b.find("span.value").text(c.val()),c.trigger("dirty"),e.attr("checked",!0),c.val(""),$("div.urls",a).append(b),b.trigger("shifted"))});a.on("click",
".url .remove a",function(a){a.preventDefault();a=$(this);var b=a.closest("div.url");a.siblings(".checkbox")[0].checked=!1;b.trigger("dirty");b.trigger("shifted");b.hide()});d.find("input.text").on("keypress",function(a){if((a.keyCode||a.which)===13)a.preventDefault(),d.find("a.add").click()})})})})(this);
instrument_function(function(){$(function(){var a=$("#users_edit_account"),d=!1;if(a.length)a.find("a.change_password_toggle").on("click",function(c){c.preventDefault();c=$("li.change_password",a);d?(c.fadeOut(),c.find("input").val(""),d=!1):(c.fadeIn(),c.first().find("input").focus(),d=!0)})})})(this);instrument_function(function(){$(function(){var a=$("body#users_edit_profile");a.length&&a.find("input.file").ksr_uploader()})})(this);
instrument_function(function(){$(function(){$(document).on("click","#users_watched_projects a.unstar",function(a){a.preventDefault();var d=$(this);$.ajax({url:d.attr("href"),type:"post",dataType:"json",success:function(){var a=d.closest(".project");a.fadeOut(function(){var b=a.closest(".section");b.find(".project:visible").length||b.remove()})}})});$(document).on("click","#users_watched_projects a.potd",function(a){a.preventDefault();a=$(this);$.ajax({url:a.attr("href"),type:"post",dataType:"json",
success:function(){window.location.reload()}})})})})(this);instrument_function(function(){$(function(){$(document).on("click","#unwatch a",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!1);$.ajax({url:d.attr("href"),dataType:"json",type:"POST"})})})})(this);
instrument_function(function(){$(function(){$(document).on("click","#watch a",function(a){var d=$(this);a.preventDefault();current_project.set("is_starred",!0);$.ajax({url:d.attr("href"),dataType:"json",type:"POST",success:function(a){if(a.modal){var b=$.create_modal_dialog("",a.data);b.data("modal_dialog").open();typeof FB!=="undefined"&&FB.XFBML.parse(b.find(".modal_dialog_body")[0]);current_project.set("is_starred",!1)}a.flash&&growl(_.map(a.flash,function(a){return a[a.length-1]}))}})})})})(this);
instrument_function(function(){$(function(){$(".widget_show").livequery(function(){function a(a,c){var d=render("widgets/_video_embed_code",{width:a,height:c,path:f});e.find("input#width").val(a);e.find("input#height").val(c);b.find("textarea").val(d)}var d=$(this),c=d.find(".size form"),b=d.find(".video .code"),e=c.find(".custom"),f=b.data("path");a(480,360);c.find("input.radio").on("change",function(){var d=$("input.radio:checked"),e=d.closest("label");c.find("label").removeClass("selected");e.addClass("selected");
a(e.data("width"),e.data("height"));b.find("textarea").select();d.is("#widget-size_size-custom")&&e.find("input.text").val("").eq(0).select()});e.find("input").on("keyup input cut paste",function(b){b=$(b.target);var c=4/3,d=e.find("input#width").val(),f=e.find("input#height").val();b.is("#width")?f=Math.ceil(d/c):d=Math.ceil(f*c);a(d,f)})})})})(this);
instrument_function(function(){$(function(){var a=$("body#years_twentytwelve"),d=$("#panel_content");if(a.length){(function(){function a(){$(".panel").width($(window).width());$(window).width()>570?($(".section").each(function(){var a=$(this);a.width($(window).width()*a.find(".panel").length)}),$("#panels").height($(window).height()),$("body").css({overflow:"hidden"})):$("body").css({overflow:"visible"});$(".video_big").width($(window).width());$(".video_big").height($(this).parent(".panel").height());
$(window).height()*1.77864583333333>$(window).width()?($(".video_big video").height($(window).height()),$(".video_big video").css({width:"auto",position:"absolute",top:"0px","margin-top":"0px",left:"50%","margin-left":-Math.round($(this).height()*1.77864583333333/2)})):($(".video_big video").width($(window).width()),$(".video_big video").css({height:"auto",position:"absolute",left:"0px","margin-left":"0px",top:"50%","margin-top":-Math.round($(this).width()/1.77864583333333/2)}))}var b=0,c=d.find("li.panel").length,
e="";track("YiR/2012 Initialize");d.serialScroll({items:"li.panel",lock:!1,cycle:!1,duration:500,easing:"easeOutExpo"});d.on("notify.serialScroll",function(a,f){var g=d.find("li.panel").eq(f),q=g.closest(".section").attr("id");e="#"+g.attr("id");track("YiR/2012 Panel Load",{panel_index:f,panel_name:q});f>0?$("#arrows .next, #arrows .prev, header, footer").addClass("visible"):$("#arrows .next, #arrows .prev, header, footer").removeClass("visible");history.pushState&&(f>0?history.pushState({page:f},
null,e):history.pushState({page:f},null,URI().hash("")));try{g.find(".video_autoplay").length?(d.find("video")[0].pause(),g.find("video")[0].play(),g.find("video").on("ended",function(){try{$(this)[0].play()}catch(a){}})):d.find("video")[0].pause()}catch(t){}$("header, footer, .next, .prev").removeClass("january february march april may june july august september october november december");f>0&&$("header, footer, .next, .prev").addClass(q);f===c-1?($("#arrows .next").hide(),$("footer").hide()):f!==
0&&($("#arrows .next").show(),$("footer").show());$("#tile_view").find("li").removeClass("selected");$("#tile_view").find("li[data-url="+window.location.hash.substring(1)+"]").addClass("selected");b=f});$(window).on("hashchange",function(){e!==window.location.hash&&(window.location.hash.length>1&&d.find(window.location.hash).length&&(b=$(window.location.hash).index("li.panel")),d.trigger("notify.serialScroll",[b]))}).trigger("hashchange");a();$(window).on("resize",function(){a();d.trigger("goto",
[b])});$("#arrows .next, #intro .next").on("click",function(a){a.preventDefault();track("YiR/2012 Next",{keypress:!1});d.trigger("next")});$("#arrows .prev").on("click",function(a){a.preventDefault();track("YiR/2012 Previous",{keypress:!1});d.trigger("prev")});$("header h1 a").on("click",function(a){a.preventDefault();track("YiR/2012 Reset");d.scrollTo("#intro");d.trigger("notify.serialScroll",[0]);$("#tile_view_link").find(".ss-grid").removeClass("hide");$("#tile_view_link").find(".ss-delete").addClass("hide");
$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})})})();$(window).on("keydown",function(a){switch(a.keyCode){case KEY.LEFT:track("YiR/2012 Previous",{keypress:!0});d.trigger("prev");$(".video.video_flash").is(":visible")&&d.find(".close_video").click();break;case KEY.RIGHT:track("YiR/2012 Next",{keypress:!0});d.trigger("next");$(".video.video_flash").is(":visible")&&d.find(".close_video").click();break;case KEY.ESC:d.find(".close_video").click(),
a.preventDefault()}});var c=$("#makey_c"),b=$("#makey_d"),e=$("#makey_e"),f=$("#makey_f");$(".makey").on("hover",function(a){a.preventDefault();track("Makey Makey Hover")});$("#makey_makey #banana_c").on("hover",function(a){a.preventDefault();c.trigger("play")});$("#makey_makey #banana_d").on("hover",function(a){a.preventDefault();b.trigger("play")});$("#makey_makey #banana_e").on("hover",function(a){a.preventDefault();e.trigger("play")});$("#makey_makey #banana_f").on("hover",function(a){a.preventDefault();
f.trigger("play")});$("#tile_view_link, #tile_view a").on("click",function(){$("#tile_view_link").find(".ss-grid").is(":visible")?($("#tile_view_link").find(".ss-grid").addClass("hide"),$("#tile_view_link").find(".ss-delete").removeClass("hide")):($("#tile_view_link").find(".ss-grid").removeClass("hide"),$("#tile_view_link").find(".ss-delete").addClass("hide"));$("#content").css("marginTop")==="0px"?(track("YiR/2012 Tile View"),$("#content").animate({marginTop:"-"+$(window).height()},800,"easeOutExpo",
function(){$("body").css({overflow:"visible"})})):$("#content").animate({marginTop:"0px"},800,"easeOutExpo",function(){$("body").css({overflow:"hidden"})})});d.find(".play").on("click touchstart",function(a){var b=$(this).closest(".panel");a.preventDefault();track("YiR/2012 Video Play",{panel:b.attr("id")});$("#arrows").fadeOut();$("header, footer").removeClass("visible");b.find(".video").fadeIn();b.find(".container").fadeOut("500",function(){b.find(".video-player").ksr_video().trigger("ksr_video:play")})});
d.find(".close_video").on("click",function(a){a.preventDefault();$(".video.video_flash").fadeOut("500",function(){$(".panel").find(".container").fadeIn()});$(window).width()>570&&($("#arrows").fadeIn(),$("header, footer").addClass("visible"));$(".panel").find(".video-player").trigger("ksr_video:pause")});$("footer").find("#mobile_share").on("click focus",function(){$("footer").toggleClass("share_visible")});$("#share_url").click(function(){$(this).select()});$("body").removeClass("loading");history.pushState||
$("header, footer").addClass("visible")}})})(this);
instrument_function(function(){$(function(){var a=$(".NS-admin_submissions__edit"),d=$("form.moderator");a.length&&($(document).on("click",".NS-admin_submissions__edit a.change_response",function(){$(".NS-admin_submissions__edit .responded_to .moderator_only").slideToggle()}),$(document).on("click",".NS-admin_submissions__edit a.claim",function(a){a.preventDefault();d.find("select#submission_user_id").val($(this).data("admin_id"));d.submit()}),$(document).on("change","form.moderator",function(){$(this).submit()}),
$(document).on("submit","form.moderator",function(a){var b=$(this),d=b.find(".saving").show();$.ajax({url:b.attr("action"),type:b.attr("method"),data:b.serialize(),dataType:"json",success:function(a){var c=b.find("#next_review_submission_url").val();if(a.ok)if(a.moderator_is_me)$(".moderator_only, a.claim, .change_response_container").addClass("me"),$(".moderator_only").show();else{if($(".moderator_only, a.claim, .change_response_container").removeClass("me"),$(".moderator_only").hide(),c)window.location=
c}else growl({error:"Moderator change didn't take :-("})},error:function(){growl({error:"Moderator change didn't take :-("})},complete:function(){d.hide()}});a.preventDefault()}),$(".NS-admin_submissions__edit .state_tools").livequery(function(){var a=$(this),b=a.find("a.reply"),d=a.find("a.accept"),f=a.find("a.reject"),g=a.siblings("select"),h=a.closest("form"),i={reply:"",accept:d.next(".macro").val(),reject:f.next(".macro").val()},k="reply";a.find("a").click(function(b){var d=$(this);h.find("input.submit").val(d.text()).removeClass("accept reply decline").addClass(d.text().toLowerCase());
a.find("a").removeClass("selected");d.addClass("selected");i[k]=h.find("textarea.submission_message").val();b.preventDefault()});b.click(function(){g.val("pending");h.find("textarea.submission_message").val(i.reply).focus();k="reply"});d.click(function(){g.val("accepted");h.find("textarea.submission_message").val(i.accept).focus();k="accept"});f.click(function(){g.val("rejected");h.find("textarea.submission_message").val(i.reject).focus();k="reject"})}),$("#admin_panel_wrap").on("opened",function(){$.ajax({type:"GET",
dataType:"JSON",url:$("#admin_panel_wrap .tickets").data("url"),success:function(a){$("section.tickets").html(render("admin/zendesk_tickets/_index",a))}})}))})})(this);
instrument_function(function(){$(function(){$(document).on("submit","form.NS-admin_projects__edit",function(a){var d=$(this),c=d.find(".submit");c.val("Saving");$.ajax({url:d.attr("action"),type:d.attr("method"),dataType:"json",data:d.serialize(),success:function(){c.val("Saved");setTimeout(function(){c.val("Save")},1E3)}});$("#admin-nav-wrap span.moderation_status").text($("select",this).val().substring(0,3));a.preventDefault()}).on("change","form.NS-admin_projects__edit",function(){$(this).submit()})})})(this);
instrument_function(function(){$(function(){$(".NS-admin_projects_tags").livequery(function(){var a=$(this),d;a.find("label").each(function(){var a=$(this);a.find("input.checkbox:checked").length&&a.addClass("selected")});a.on("change","input.checkbox",function(){var a=$(this),b=a.closest("label"),e=a.closest("form");a.is(":checked")?b.addClass("selected"):b.removeClass("selected");d&&d.abort();d=$.ajax({url:e.attr("action"),type:e.attr("method"),dataType:"json",data:e.serialize()})})})})})(this);
var jwplayer=function(a){if(jwplayer.api)return jwplayer.api.selectPlayer(a)},$jw=jwplayer;jwplayer.version="5.7.1896";jwplayer.vid=document.createElement("video");jwplayer.audio=document.createElement("audio");jwplayer.source=document.createElement("source");
(function(a){a.utils=function(){};a.utils.typeOf=function(a){var c=typeof a;c==="object"&&(a?a instanceof Array&&(c="array"):c="null");return c};a.utils.extend=function(){var d=a.utils.extend.arguments;if(d.length>1){for(var c=1;c<d.length;c++)for(var b in d[c])d[0][b]=d[c][b];return d[0]}return null};a.utils.clone=function(){var d,c=a.utils.clone.arguments;if(c.length==1)switch(a.utils.typeOf(c[0])){case "object":d={};for(var b in c[0])d[b]=a.utils.clone(c[0][b]);break;case "array":d=[];for(b in c[0])d[b]=
a.utils.clone(c[0][b]);break;default:return c[0]}return d};a.utils.extension=function(a){if(!a)return"";a=a.substring(a.lastIndexOf("/")+1,a.length);a=a.split("?")[0];if(a.lastIndexOf(".")>-1)return a.substr(a.lastIndexOf(".")+1,a.length).toLowerCase()};a.utils.html=function(a,c){a.innerHTML=c};a.utils.wrap=function(a,c){a.parentNode&&a.parentNode.replaceChild(c,a);c.appendChild(a)};a.utils.ajax=function(a,c,b){var e;e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");
e.onreadystatechange=function(){e.readyState===4&&(e.status===200?c&&c(e):b&&b(a))};try{e.open("GET",a,!0),e.send(null)}catch(f){b&&b(a)}return e};a.utils.load=function(a,c,b){a.onreadystatechange=function(){a.readyState===4&&(a.status===200?c&&c():b&&b())}};a.utils.find=function(a,c){return a.getElementsByTagName(c)};a.utils.append=function(a,c){a.appendChild(c)};a.utils.isIE=function(){return typeof window.ActiveXObject!="undefined"};a.utils.isLegacyAndroid=function(){return navigator.userAgent.toLowerCase().match(/android 2.[012]/i)!==
null};a.utils.isIOS=function(a){typeof a=="undefined"&&(a=/iP(hone|ad|od)/i);return navigator.userAgent.toLowerCase().match(a)!==null};a.utils.isIPad=function(){return a.utils.isIOS(/iPad/i)};a.utils.isIPod=function(){return a.utils.isIOS(/iP(hone|od)/i)};a.utils.getFirstPlaylistItemFromConfig=function(a){var c={};a=a.playlist&&a.playlist.length?a.playlist[0]:a;c.file=a.file;c.levels=a.levels;c.streamer=a.streamer;c.playlistfile=a.playlistfile;c.provider=a.provider;if(!c.provider){if(c.file&&(c.file.toLowerCase().indexOf("youtube.com")>
-1||c.file.toLowerCase().indexOf("youtu.be")>-1))c.provider="youtube";if(c.streamer&&c.streamer.toLowerCase().indexOf("rtmp://")==0)c.provider="rtmp";if(a.type)c.provider=a.type.toLowerCase()}if(c.provider=="audio")c.provider="sound";return c};a.utils.getOuterHTML=function(a){if(a.outerHTML)return a.outerHTML;else try{return(new XMLSerializer).serializeToString(a)}catch(c){return""}};a.utils.setOuterHTML=function(a,c){if(a.outerHTML)a.outerHTML=c;else{var b=document.createElement("div");b.innerHTML=
c;var e=document.createRange();e.selectNodeContents(b);b=e.extractContents();a.parentNode.insertBefore(b,a);a.parentNode.removeChild(a)}};a.utils.hasFlash=function(){if(typeof navigator.plugins!="undefined"&&typeof navigator.plugins["Shockwave Flash"]!="undefined")return!0;if(typeof window.ActiveXObject!="undefined")try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),!0}catch(a){}return!1};a.utils.getPluginName=function(a){a.lastIndexOf("/")>=0&&(a=a.substring(a.lastIndexOf("/")+1,a.length));
a.lastIndexOf("-")>=0&&(a=a.substring(0,a.lastIndexOf("-")));a.lastIndexOf(".swf")>=0&&(a=a.substring(0,a.lastIndexOf(".swf")));a.lastIndexOf(".js")>=0&&(a=a.substring(0,a.lastIndexOf(".js")));return a};a.utils.getPluginVersion=function(a){if(a.lastIndexOf("-")>=0)return a.lastIndexOf(".js")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".js")):a.lastIndexOf(".swf")>=0?a.substring(a.lastIndexOf("-")+1,a.lastIndexOf(".swf")):a.substring(a.lastIndexOf("-")+1);return""};a.utils.getAbsolutePath=function(d,
c){if(!a.utils.exists(c))c=document.location.href;if(a.utils.exists(d)){var b;if(a.utils.exists(d)){b=d.indexOf("://");var e=d.indexOf("?");b=b>0&&(e<0||e>b)}else b=void 0;if(b)return d;b=c.substring(0,c.indexOf("://")+3);e=c.substring(b.length,c.indexOf("/",b.length+1));var f;d.indexOf("/")===0?f=d.split("/"):(f=c.split("?")[0],f=f.substring(b.length+e.length+1,f.lastIndexOf("/")),f=f.split("/").concat(d.split("/")));for(var g=[],h=0;h<f.length;h++)f[h]&&a.utils.exists(f[h])&&f[h]!="."&&(f[h]==".."?
g.pop():g.push(f[h]));return b+e+"/"+g.join("/")}};a.utils.pluginPathType={ABSOLUTE:"ABSOLUTE",RELATIVE:"RELATIVE",CDN:"CDN"};a.utils.getPluginPathType=function(d){if(typeof d=="string"){d=d.split("?")[0];var c=d.indexOf("://");if(c>0)return a.utils.pluginPathType.ABSOLUTE;var b=d.indexOf("/");d=a.utils.extension(d);if(c<0&&b<0&&(!d||!isNaN(d)))return a.utils.pluginPathType.CDN;return a.utils.pluginPathType.RELATIVE}};a.utils.mapEmpty=function(a){for(var c in a)return!1;return!0};a.utils.mapLength=
function(a){var c=0,b;for(b in a)c++;return c};a.utils.log=function(a,c){typeof console!="undefined"&&typeof console.log!="undefined"&&(c?console.log(a,c):console.log(a))};a.utils.css=function(d,c){if(a.utils.exists(d))for(var b in c)try{if(typeof c[b]!=="undefined"){if(typeof c[b]=="number"&&!(b=="zIndex"||b=="opacity")){if(isNaN(c[b]))continue;c[b]=b.match(/color/i)?"#"+a.utils.strings.pad(c[b].toString(16),6):Math.ceil(c[b])+"px"}d.style[b]=c[b]}}catch(e){}};a.utils.isYouTube=function(a){return a.indexOf("youtube.com")>
-1||a.indexOf("youtu.be")>-1};a.utils.transform=function(a,c){a.style.webkitTransform=c;a.style.MozTransform=c;a.style.OTransform=c};a.utils.stretch=function(d,c,b,e,f,g){if(!(typeof b=="undefined"||typeof e=="undefined"||typeof f=="undefined"||typeof g=="undefined")){var h=b/f,i=e/g;c.style.overflow="hidden";a.utils.transform(c,"");var k={};switch(d.toUpperCase()){case a.utils.stretching.NONE:k.width=f;k.height=g;break;case a.utils.stretching.UNIFORM:h>i?(k.width=f*i,k.height=g*i):(k.width=f*h,k.height=
g*h);break;case a.utils.stretching.FILL:h>i?(k.width=f*h,k.height=g*h):(k.width=f*i,k.height=g*i);break;case a.utils.stretching.EXACTFIT:a.utils.transform(c,["scale(",h,",",i,") translate(0px,0px)"].join("")),k.width=f,k.height=g}k.top=(e-k.height)/2;k.left=(b-k.width)/2;a.utils.css(c,k)}};a.utils.stretching={NONE:"NONE",FILL:"FILL",UNIFORM:"UNIFORM",EXACTFIT:"EXACTFIT"};a.utils.deepReplaceKeyName=function(d,c,b){switch(a.utils.typeOf(d)){case "array":for(var e=0;e<d.length;e++)d[e]=a.utils.deepReplaceKeyName(d[e],
c,b);break;case "object":for(e in d){var f=e.replace(RegExp(c,"g"),b);d[f]=a.utils.deepReplaceKeyName(d[e],c,b);e!=f&&delete d[e]}}return d};a.utils.isInArray=function(a,c){if(!a||!(a instanceof Array))return!1;for(var b=0;b<a.length;b++)if(c===a[b])return!0;return!1};a.utils.exists=function(a){switch(typeof a){case "string":return a.length>0;case "object":return a!==null;case "undefined":return!1}return!0};a.utils.empty=function(a){if(typeof a.hasChildNodes=="function")for(;a.hasChildNodes();)a.removeChild(a.firstChild)};
a.utils.parseDimension=function(a){if(typeof a=="string")if(a==="")return 0;else if(!(a.lastIndexOf("%")>-1))return parseInt(a.replace("px",""),10);return a};a.utils.getDimensions=function(d){return d&&d.style?{x:a.utils.parseDimension(d.style.left),y:a.utils.parseDimension(d.style.top),width:a.utils.parseDimension(d.style.width),height:a.utils.parseDimension(d.style.height)}:{}};a.utils.timeFormat=function(a){str="00:00";a>0&&(str=Math.floor(a/60)<10?"0"+Math.floor(a/60)+":":Math.floor(a/60)+":",
str+=Math.floor(a%60)<10?"0"+Math.floor(a%60):Math.floor(a%60));return str}})(jwplayer);(function(a){a.events=function(){};a.events.COMPLETE="COMPLETE";a.events.ERROR="ERROR"})(jwplayer);
(function(a){a.events.eventdispatcher=function(d){var c,b;this.resetEventListeners=function(){c={};b=[]};this.resetEventListeners();this.addEventListener=function(b,d,g){try{a.utils.exists(c[b])||(c[b]=[]),typeof d=="string"&&eval("listener = "+d),c[b].push({listener:d,count:g})}catch(h){a.utils.log("error",h)}return!1};this.removeEventListener=function(b,d){if(c[b]){try{for(var g=0;g<c[b].length;g++)if(c[b][g].listener.toString()==d.toString()){c[b].splice(g,1);break}}catch(h){a.utils.log("error",
h)}return!1}};this.addGlobalListener=function(c,d){try{typeof c=="string"&&eval("listener = "+c),b.push({listener:c,count:d})}catch(g){a.utils.log("error",g)}return!1};this.removeGlobalListener=function(c){if(b[type]){try{for(var d=0;d<b.length;d++)if(b[d].listener.toString()==c.toString()){b.splice(d,1);break}}catch(g){a.utils.log("error",g)}return!1}};this.sendEvent=function(e,f){a.utils.exists(f)||(f={});d&&a.utils.log(e,f);if(typeof c[e]!="undefined")for(var g=0;g<c[e].length;g++){try{c[e][g].listener(f)}catch(h){a.utils.log("There was an error while handling a listener: "+
h.toString(),c[e][g].listener)}c[e][g]&&(c[e][g].count===1?delete c[e][g]:c[e][g].count>0&&(c[e][g].count-=1))}for(g=0;g<b.length;g++){try{b[g].listener(f)}catch(i){a.utils.log("There was an error while handling a listener: "+i.toString(),b[g].listener)}b[g]&&(b[g].count===1?delete b[g]:b[g].count>0&&(b[g].count-=1))}}}})(jwplayer);
(function(a){var d=[];a.api=function(c){function b(a,b){return function(c,d,e,f){if(a.renderingMode=="flash"||a.renderingMode=="html5"){var g;d?(t[c]=d,g="jwplayer('"+a.id+"').callback('"+c+"')"):!d&&t[c]&&delete t[c];k.jwDockSetButton(c,g,e,f)}return b}}function d(a){return function(b){var c=b.newstate;b=b.oldstate;if(c==a){var d=h[c];if(d)for(var e=0;e<d.length;e++)typeof d[e]=="function"&&d[e].call(this,{oldstate:b,newstate:c})}}}function f(a,b){return function(c){if(a==c.component){var d=i[a][b];
if(d)for(var e=0;e<d.length;e++)typeof d[e]=="function"&&d[e].call(this,c)}}}this.container=c;this.id=c.id;var g={},h={},i={},k=void 0,l=!1,p=[],j=a.utils.getOuterHTML(c),q={},t={};this.getBuffer=function(){return this.callInternal("jwGetBuffer")};this.getContainer=function(){return this.container};this.getPlugin=function(c){var d=this,e={};return c=="dock"?a.utils.extend(e,{setButton:b(d,e),show:function(){d.callInternal("jwDockShow");return e},hide:function(){d.callInternal("jwDockHide");return e},
onShow:function(b){d.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("dock",a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):c=="controlbar"?a.utils.extend(e,{show:function(){d.callInternal("jwControlbarShow");return e},hide:function(){d.callInternal("jwControlbarHide");return e},onShow:function(b){d.componentListener("controlbar",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("controlbar",
a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):c=="display"?a.utils.extend(e,{show:function(){d.callInternal("jwDisplayShow");return e},hide:function(){d.callInternal("jwDisplayHide");return e},onShow:function(b){d.componentListener("display",a.api.events.JWPLAYER_COMPONENT_SHOW,b);return e},onHide:function(b){d.componentListener("display",a.api.events.JWPLAYER_COMPONENT_HIDE,b);return e}}):this.plugins[c]};this.callback=function(a){if(t[a])return t[a]()};this.getDuration=function(){return this.callInternal("jwGetDuration")};
this.getFullscreen=function(){return this.callInternal("jwGetFullscreen")};this.getHeight=function(){return this.callInternal("jwGetHeight")};this.getLockState=function(){return this.callInternal("jwGetLockState")};this.getMeta=function(){return this.getItemMeta()};this.getMute=function(){return this.callInternal("jwGetMute")};this.getPlaylist=function(){var b=this.callInternal("jwGetPlaylist");this.renderingMode=="flash"&&a.utils.deepReplaceKeyName(b,"__dot__",".");for(var c=0;c<b.length;c++)if(!a.utils.exists(b[c].index))b[c].index=
c;return b};this.getPlaylistItem=function(b){a.utils.exists(b)||(b=this.getCurrentItem());return this.getPlaylist()[b]};this.getPosition=function(){return this.callInternal("jwGetPosition")};this.getRenderingMode=function(){return this.renderingMode};this.getState=function(){return this.callInternal("jwGetState")};this.getVolume=function(){return this.callInternal("jwGetVolume")};this.getWidth=function(){return this.callInternal("jwGetWidth")};this.setFullscreen=function(b){a.utils.exists(b)?this.callInternal("jwSetFullscreen",
b):this.callInternal("jwSetFullscreen",!this.callInternal("jwGetFullscreen"));return this};this.setMute=function(b){a.utils.exists(b)?this.callInternal("jwSetMute",b):this.callInternal("jwSetMute",!this.callInternal("jwGetMute"));return this};this.lock=function(){return this};this.unlock=function(){return this};this.load=function(a){this.callInternal("jwLoad",a);return this};this.playlistItem=function(a){this.callInternal("jwPlaylistItem",a);return this};this.playlistPrev=function(){this.callInternal("jwPlaylistPrev");
return this};this.playlistNext=function(){this.callInternal("jwPlaylistNext");return this};this.resize=function(a,b){this.renderingMode=="html5"?k.jwResize(a,b):(this.container.width=a,this.container.height=b);return this};this.play=function(b){typeof b=="undefined"?(b=this.getState(),b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPlay",b);return this};this.pause=function(b){typeof b=="undefined"?(b=this.getState(),
b==a.api.events.state.PLAYING||b==a.api.events.state.BUFFERING?this.callInternal("jwPause"):this.callInternal("jwPlay")):this.callInternal("jwPause",b);return this};this.stop=function(){this.callInternal("jwStop");return this};this.seek=function(a){this.callInternal("jwSeek",a);return this};this.setVolume=function(a){this.callInternal("jwSetVolume",a);return this};this.onBufferChange=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER,b)};this.onBufferFull=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_BUFFER_FULL,
b)};this.onError=function(b){return this.eventListener(a.api.events.JWPLAYER_ERROR,b)};this.onFullscreen=function(b){return this.eventListener(a.api.events.JWPLAYER_FULLSCREEN,b)};this.onMeta=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_META,b)};this.onMute=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_MUTE,b)};this.onPlaylist=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_LOADED,b)};this.onPlaylistItem=function(b){return this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,
b)};this.onReady=function(b){return this.eventListener(a.api.events.API_READY,b)};this.onResize=function(b){return this.eventListener(a.api.events.JWPLAYER_RESIZE,b)};this.onComplete=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_COMPLETE,b)};this.onSeek=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_SEEK,b)};this.onTime=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_TIME,b)};this.onVolume=function(b){return this.eventListener(a.api.events.JWPLAYER_MEDIA_VOLUME,
b)};this.onBuffer=function(b){return this.stateListener(a.api.events.state.BUFFERING,b)};this.onPause=function(b){return this.stateListener(a.api.events.state.PAUSED,b)};this.onPlay=function(b){return this.stateListener(a.api.events.state.PLAYING,b)};this.onIdle=function(b){return this.stateListener(a.api.events.state.IDLE,b)};this.remove=function(){g={};p=[];a.utils.getOuterHTML(this.container)!=j&&a.api.destroyPlayer(this.id,j)};this.setup=function(b){if(a.embed){var c=this.id;this.remove();c=a(c);
c.config=b;return new a.embed(c)}return this};this.registerPlugin=function(b,c,d){a.plugins.registerPlugin(b,c,d)};this.setPlayer=function(a,b){k=a;this.renderingMode=b};this.stateListener=function(b,c){h[b]||(h[b]=[],this.eventListener(a.api.events.JWPLAYER_PLAYER_STATE,d(b)));h[b].push(c);return this};this.componentListener=function(a,b,c){i[a]||(i[a]={});i[a][b]||(i[a][b]=[],this.eventListener(b,f(a,b)));i[a][b].push(c);return this};this.addInternalListener=function(a,b){a.jwAddEventListener(b,
'function(dat) { jwplayer("'+this.id+'").dispatchEvent("'+b+'", dat); }')};this.eventListener=function(a,b){g[a]||(g[a]=[],k&&l&&this.addInternalListener(k,a));g[a].push(b);return this};this.dispatchEvent=function(b,c){if(g[b]){var d;d=a.utils.extend({},c);b==a.api.events.JWPLAYER_FULLSCREEN&&!d.fullscreen?(d.fullscreen=d.message=="true"?!0:!1,delete d.message):typeof d.data=="object"&&(d=a.utils.extend(d,d.data),delete d.data);var e=["position","duration","offset"],f;for(f in e)d[e[f]]&&(d[e[f]]=
Math.round(d[e[f]]*1E3)/1E3);for(e=0;e<g[b].length;e++)typeof g[b][e]=="function"&&g[b][e].call(this,d)}};this.callInternal=function(b,c){if(l){if(typeof k!="undefined"&&typeof k[b]=="function")return a.utils.exists(c)?k[b](c):k[b]();return null}else p.push({method:b,parameters:c})};this.playerReady=function(b){l=!0;k||this.setPlayer(document.getElementById(b.id));this.container=document.getElementById(this.id);for(var c in g)this.addInternalListener(k,c);this.eventListener(a.api.events.JWPLAYER_PLAYLIST_ITEM,
function(){q={}});this.eventListener(a.api.events.JWPLAYER_MEDIA_META,function(b){a.utils.extend(q,b.metadata)});for(this.dispatchEvent(a.api.events.API_READY);p.length>0;)b=p.shift(),this.callInternal(b.method,b.parameters)};this.getItemMeta=function(){return q};this.getCurrentItem=function(){return this.callInternal("jwGetPlaylistIndex")};return this};a.api.selectPlayer=function(c){var b;a.utils.exists(c)||(c=0);c.nodeType?b=c:typeof c=="string"&&(b=document.getElementById(c));if(b)return(c=a.api.playerById(b.id))?
c:a.api.addPlayer(new a.api(b));else if(typeof c=="number")return a.getPlayers()[c];return null};a.api.events={API_READY:"jwplayerAPIReady",JWPLAYER_READY:"jwplayerReady",JWPLAYER_FULLSCREEN:"jwplayerFullscreen",JWPLAYER_RESIZE:"jwplayerResize",JWPLAYER_ERROR:"jwplayerError",JWPLAYER_COMPONENT_SHOW:"jwplayerComponentShow",JWPLAYER_COMPONENT_HIDE:"jwplayerComponentHide",JWPLAYER_MEDIA_BUFFER:"jwplayerMediaBuffer",JWPLAYER_MEDIA_BUFFER_FULL:"jwplayerMediaBufferFull",JWPLAYER_MEDIA_ERROR:"jwplayerMediaError",
JWPLAYER_MEDIA_LOADED:"jwplayerMediaLoaded",JWPLAYER_MEDIA_COMPLETE:"jwplayerMediaComplete",JWPLAYER_MEDIA_SEEK:"jwplayerMediaSeek",JWPLAYER_MEDIA_TIME:"jwplayerMediaTime",JWPLAYER_MEDIA_VOLUME:"jwplayerMediaVolume",JWPLAYER_MEDIA_META:"jwplayerMediaMeta",JWPLAYER_MEDIA_MUTE:"jwplayerMediaMute",JWPLAYER_PLAYER_STATE:"jwplayerPlayerState",JWPLAYER_PLAYLIST_LOADED:"jwplayerPlaylistLoaded",JWPLAYER_PLAYLIST_ITEM:"jwplayerPlaylistItem"};a.api.events.state={BUFFERING:"BUFFERING",IDLE:"IDLE",PAUSED:"PAUSED",
PLAYING:"PLAYING"};a.api.playerById=function(a){for(var b=0;b<d.length;b++)if(d[b].id==a)return d[b];return null};a.api.addPlayer=function(a){for(var b=0;b<d.length;b++)if(d[b]==a)return a;d.push(a);return a};a.api.destroyPlayer=function(c,b){for(var e=-1,f=0;f<d.length;f++)d[f].id==c&&(e=f);if(e>=0){f=document.getElementById(d[e].id);document.getElementById(d[e].id+"_wrapper")&&(f=document.getElementById(d[e].id+"_wrapper"));if(f)if(b)a.utils.setOuterHTML(f,b);else{var g=document.createElement("div"),
h=f.id;f.id.indexOf("_wrapper")==f.id.length-8&&(newID=f.id.substring(0,f.id.length-8));g.setAttribute("id",h);f.parentNode.replaceChild(g,f)}d.splice(e,1)}return null};a.getPlayers=function(){return d.slice(0)}})(jwplayer);var _userPlayerReady=typeof playerReady=="function"?playerReady:void 0;playerReady=function(a){var d=jwplayer.api.playerById(a.id);d?d.playerReady(a):jwplayer.api.selectPlayer(a.id).playerReady(a);_userPlayerReady&&_userPlayerReady.call(this,a)};
instrument_function(function(){(function(){function a(a,b){if(typeof a!=="undefined"){var d="internal";$("body").is(".widget")&&(d="external");$.ajax({url:a,type:"post",data:{event_type:b,location:d}})}}function d(a){return $("body").is(".widget")||a.closest("#projects_show").length?"Project":a.closest(".school").length?"School":a.closest("#running-board").length?"Homepage Project Grid":a.closest("#editorial-projects").length?"Homepage Editorial":a.closest("#projects_start").length?"Start Project":
a.closest("body.posts").length?"Project Post":a.closest("#projects_edit").length?"Project Edit":a.closest("#jobs_index").length?"Jobs Page":a.closest(".activity").length?"Activity":"Other"}$(document).on("ksr_video:playing",function(c,b){var e=$(c.target),f=d(e),g=e.data("ksr_video").current_position(),h=e.closest(".video-player").attr("data-video-tracker-url");e=e.attr("data-video-name");b?(a(h,"start"),track(f+" Video Start",{video_name:e})):track(f+" Video Resume",{position:g,video_name:e})}).on("ksr_video:paused",
function(a){var b=$(a.target),e=b.data("ksr_video");a=d(b);e=e.current_position();b=b.attr("data-video-name");track(a+" Video Pause",{position:e,video_name:b})}).on("ksr_video:ended",function(c){var b=$(c.target),e=b.data("ksr_video");c=d(b);e=e.duration();var f=b.closest(".video-player").attr("data-video-tracker-url");b=b.attr("data-video-name");a(f,"complete");track(c+" Video Complete",{duration:e,video_name:b})})})()})(this);
instrument_function(function(){(function(){$(window).load(function(){function a(a){return window.performance.getEntriesByName(a,"mark")[0].startTime}typeof window.performance!=="object"||typeof window.performance.getEntriesByName!=="function"||!$.support.JSON()||Math.random()>0.1&&(!$.support.localStorage()||!localStorage.getItem("benchmarks"))||$.ajax({type:"POST",url:"/timings",contentType:"application/json",data:JSON.stringify({data:{"base.js":function(d,c){var b;if(b=_.find(window.performance.getEntriesByType("resource"),
function(a){return a.name.match(c||d)}))return{fetch:b.duration,eval:a("end_"+(d+"_eval"))-a("begin_"+(d+"_eval")),block:a("end_"+(d+"_tag"))-a("begin_"+(d+"_tag"))}}("base.js",/\/base(-[a-z0-9]*)?.js/)}})})})})()})(this);instrument_function(function(){window.benchmark&&window.performance.mark("end_base.js_eval")})(this);
